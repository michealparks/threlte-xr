var Bh=Object.defineProperty;var yh=(p,o,t)=>o in p?Bh(p,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):p[o]=t;var N=(p,o,t)=>(yh(p,typeof o!="symbol"?o+"":o,t),t);import{s as ja,B as ka,D as qr,a as Gn,c as On,i as Un,d as jn,z as Qh,y as ao}from"../chunks/scheduler.d099de3d.js";import{S as Ha,i as Ka,b as tt,d as it,m as nt,a as Ue,t as qe,e as st,g as kh,c as Ph}from"../chunks/index.5391bafe.js";import{v as Dh,L as qa,F as rn,y as ri,z as Sh,m as Bo,l as eo,f as Ft,A as Rh,U as Mi,I as Lh,J as Mh,K as io,N as Do,P as zl,R as ms,W as Th,Y as Fh,Z as zh,_ as Nh,$ as Vh,a0 as Gh,a1 as Oh,a2 as Uh,a3 as jh,a4 as Io,a5 as xo,a6 as Hh,a7 as Kh,a8 as $s,a9 as Ws,u as Nl,aa as qh,M as _s,V as Se,r as Yh,ab as Jh,ac as Vl,ad as Gl,ae as Pa,af as Da,ag as Ol,ah as Sa,ai as vi,aj as Tt,ak as Et,al as $h,O as It,am as Wh,an as Xh,ao as yo,ap as Ra,aq as Ul,ar as ln,as as Ya,t as vs,at as Ja,au as Zh,av as eA,d as ro,aw as tA,ax as jl,ay as iA,az as Hl,G as na,aA as Kl,aB as nA,aC as $a,aD as sA,aE as ql,aF as oA,aG as aA,aH as rA,aI as Yl,aJ as lA,aK as cA,aL as dA,aM as La,aN as Jl,Q as Hn,aO as $l,aP as Wl,aQ as Xl,aR as Zl,aS as ec,aT as tc,aU as hA,aV as ic,aW as AA,aX as pA,aY as Yr,aZ as uA,a_ as gA,a$ as bA,b0 as Ti,b1 as mA,b2 as vA,b3 as fA,b4 as ds,b5 as hs,b6 as Jr,b7 as _A,b8 as nc,E as Wa,b9 as sc,ba as wA,bb as CA,bc as EA,bd as IA,be as xA,bf as BA,bg as yA,bh as QA,bi as kA,bj as PA,bk as $r,bl as oc,bm as DA,bn as SA,bo as RA,bp as sa,c as oa,bq as LA,br as MA,bs as TA,bt as FA,bu as zA,bv as NA,bw as VA,bx as GA,by as OA,bz as UA,bA as jA,bB as HA,bC as KA,bD as qA,bE as YA,bF as JA,bG as $A,bH as WA,bI as XA,bJ as ZA,bK as ep,bL as tp,bM as ip,bN as np,T as cn,g as sp,a as op,X as ap,H as rp,e as lp}from"../chunks/xr.3ffe6951.js";import{B as cp}from"../chunks/button-vr.b6044e14.js";import{b as dp}from"../chunks/paths.77d9ace3.js";import{w as Wr}from"../chunks/index.7b06e9f9.js";import"../chunks/PositionMesh.2245e7f8.js";import{C as hp}from"../chunks/controllers.9f769ef3.js";const aa=p=>{const o=Wr(void 0),t=Wr(void 0);return p.then(n=>{o.set(n)}).catch(n=>{console.error("Error in asyncWritable:",n.message),t.set(n)}),Object.assign(Object.assign(p,o),{error:t,promise:p})},Ap=(p,o={})=>{var g;const{remember:t,clear:n}=Dh(),r=new p;return(g=o.extend)==null||g.call(o,r),{load:(m,v)=>{if(Array.isArray(m)){const C=m.map(Q=>t(async()=>{var D;const P=await r.loadAsync(Q,v==null?void 0:v.onProgress);return((D=v==null?void 0:v.transform)==null?void 0:D.call(v,P))??P},[p,Q]));return aa(Promise.all(C))}else if(typeof m=="string"){const C=t(async()=>{var P;const Q=await r.loadAsync(m,v==null?void 0:v.onProgress);return((P=v==null?void 0:v.transform)==null?void 0:P.call(v,Q))??Q},[p,m]);return aa(C)}else{const C=Object.values(m).map(Q=>t(async()=>{var D;const P=await r.loadAsync(Q,v==null?void 0:v.onProgress);return((D=v==null?void 0:v.transform)==null?void 0:D.call(v,P))??P},[p,Q]));return aa(Promise.all(C).then(Q=>Object.fromEntries(Object.entries(m).map(([P],D)=>[P,Q[D]]))))}},clear:m=>{Array.isArray(m)?m.forEach(v=>{n([p,v])}):typeof m=="string"?n([p,m]):Object.entries(m).forEach(([v,C])=>{n([p,v,C])})},loader:r}};var pp=function(){var p="b9H79Tebbbe8Fv9Gbb9Gvuuuuueu9Giuuub9Geueu9Giuuueuikqbeeedddillviebeoweuec:q;iekr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbeY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVbdE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbiL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtblK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbol79IV9Rbrq:P8Yqdbk;3sezu8Jjjjjbcj;eb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Radz1jjjbhwcj;abad9UhoaicefhldnadTmbaoc;WFbGgocjdaocjd6EhDcbhqinaqae9pmeaDaeaq9RaqaDfae6Egkcsfgocl4cifcd4hxdndndndnaoc9WGgmTmbcbhPcehsawcjdfhzalhHinaraH9Rax6midnaraHaxfgl9RcK6mbczhoinawcj;cbfaogifgoc9WfhOdndndndndnaHaic9WfgAco4fRbbaAci4coG4ciGPlbedibkaO9cb83ibaOcwf9cb83ibxikaOalRblalRbbgAco4gCaCciSgCE86bbaocGfalclfaCfgORbbaAcl4ciGgCaCciSgCE86bbaocVfaOaCfgORbbaAcd4ciGgCaCciSgCE86bbaoc7faOaCfgORbbaAciGgAaAciSgAE86bbaoctfaOaAfgARbbalRbegOco4gCaCciSgCE86bbaoc91faAaCfgARbbaOcl4ciGgCaCciSgCE86bbaoc4faAaCfgARbbaOcd4ciGgCaCciSgCE86bbaoc93faAaCfgARbbaOciGgOaOciSgOE86bbaoc94faAaOfgARbbalRbdgOco4gCaCciSgCE86bbaoc95faAaCfgARbbaOcl4ciGgCaCciSgCE86bbaoc96faAaCfgARbbaOcd4ciGgCaCciSgCE86bbaoc97faAaCfgARbbaOciGgOaOciSgOE86bbaoc98faAaOfgORbbalRbiglco4gAaAciSgAE86bbaoc99faOaAfgORbbalcl4ciGgAaAciSgAE86bbaoc9:faOaAfgORbbalcd4ciGgAaAciSgAE86bbaocufaOaAfgoRbbalciGglalciSglE86bbaoalfhlxdkaOalRbwalRbbgAcl4gCaCcsSgCE86bbaocGfalcwfaCfgORbbaAcsGgAaAcsSgAE86bbaocVfaOaAfgORbbalRbegAcl4gCaCcsSgCE86bbaoc7faOaCfgORbbaAcsGgAaAcsSgAE86bbaoctfaOaAfgORbbalRbdgAcl4gCaCcsSgCE86bbaoc91faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc4faOaAfgORbbalRbigAcl4gCaCcsSgCE86bbaoc93faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc94faOaAfgORbbalRblgAcl4gCaCcsSgCE86bbaoc95faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc96faOaAfgORbbalRbvgAcl4gCaCcsSgCE86bbaoc97faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc98faOaAfgORbbalRbogAcl4gCaCcsSgCE86bbaoc99faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc9:faOaAfgORbbalRbrglcl4gAaAcsSgAE86bbaocufaOaAfgoRbbalcsGglalcsSglE86bbaoalfhlxekaOal8Pbb83bbaOcwfalcwf8Pbb83bbalczfhlkdnaiam9pmbaiczfhoaral9RcL0mekkaiam6mialTmidnakTmbawaPfRbbhOcbhoazhiinaiawcj;cbfaofRbbgAce4cbaAceG9R7aOfgO86bbaiadfhiaocefgoak9hmbkkazcefhzaPcefgPad6hsalhHaPad9hmexvkkcbhlasceGmdxikalaxad2fhCdnakTmbcbhHcehsawcjdfhminaral9Rax6mialTmdalaxfhlawaHfRbbhOcbhoamhiinaiawcj;cbfaofRbbgAce4cbaAceG9R7aOfgO86bbaiadfhiaocefgoak9hmbkamcefhmaHcefgHad6hsaHad9hmbkaChlxikcbhocehsinaral9Rax6mdalTmealaxfhlaocefgoad6hsadao9hmbkaChlxdkcbhlasceGTmekc9:hoxikabaqad2fawcjdfakad2z1jjjb8Aawawcjdfakcufad2fadz1jjjb8Aakaqfhqalmbkc9:hoxekcbc99aral9Radcaadca0ESEhokavcj;ebf8Kjjjjbaok;yzeHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecjez:jjjjb8AavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhodnaeTmbcmcsaDceSEhkcbhxcbhmcbhDcbhicbhlindnaoaq9nmbc9:hoxikdndnawRbbgrc;Ve0mbavc;abfalarcl4cu7fcsGcitfgPydlhsaPydbhzdnarcsGgPak9pmbavaiarcu7fcsGcdtfydbaxaPEhraPThPdndnadcd9hmbabaDcetfgHaz87ebaHcdfas87ebaHclfar87ebxekabaDcdtfgHazBdbaHclfasBdbaHcwfarBdbkaxaPfhxavc;abfalcitfgHarBdbaHasBdlavaicdtfarBdbavc;abfalcefcsGglcitfgHazBdbaHarBdlaiaPfhialcefhlxdkdndnaPcsSmbamaPfaPc987fcefhmxekaocefhrao8SbbgPcFeGhHdndnaPcu9mmbarhoxekaocvfhoaHcFbGhHcrhPdninar8SbbgOcFbGaPtaHVhHaOcu9kmearcefhraPcrfgPc8J9hmbxdkkarcefhokaHce4cbaHceG9R7amfhmkdndnadcd9hmbabaDcetfgraz87ebarcdfas87ebarclfam87ebxekabaDcdtfgrazBdbarclfasBdbarcwfamBdbkavc;abfalcitfgramBdbarasBdlavaicdtfamBdbavc;abfalcefcsGglcitfgrazBdbaramBdlaicefhialcefhlxekdnarcpe0mbaxcefgOavaiaqarcsGfRbbgPcl49RcsGcdtfydbaPcz6gHEhravaiaP9RcsGcdtfydbaOaHfgsaPcsGgOEhPaOThOdndnadcd9hmbabaDcetfgzax87ebazcdfar87ebazclfaP87ebxekabaDcdtfgzaxBdbazclfarBdbazcwfaPBdbkavaicdtfaxBdbavc;abfalcitfgzarBdbazaxBdlavaicefgicsGcdtfarBdbavc;abfalcefcsGcitfgzaPBdbazarBdlavaiaHfcsGgicdtfaPBdbavc;abfalcdfcsGglcitfgraxBdbaraPBdlalcefhlaiaOfhiasaOfhxxekaxcbaoRbbgzEgAarc;:eSgrfhsazcsGhCazcl4hXdndnazcs0mbascefhOxekashOavaiaX9RcsGcdtfydbhskdndnaCmbaOcefhxxekaOhxavaiaz9RcsGcdtfydbhOkdndnarTmbaocefhrxekaocdfhrao8SbegHcFeGhPdnaHcu9kmbaocofhAaPcFbGhPcrhodninar8SbbgHcFbGaotaPVhPaHcu9kmearcefhraocrfgoc8J9hmbkaAhrxekarcefhrkaPce4cbaPceG9R7amfgmhAkdndnaXcsSmbarhPxekarcefhPar8SbbgocFeGhHdnaocu9kmbarcvfhsaHcFbGhHcrhodninaP8SbbgrcFbGaotaHVhHarcu9kmeaPcefhPaocrfgoc8J9hmbkashPxekaPcefhPkaHce4cbaHceG9R7amfgmhskdndnaCcsSmbaPhoxekaPcefhoaP8SbbgrcFeGhHdnarcu9kmbaPcvfhOaHcFbGhHcrhrdninao8SbbgPcFbGartaHVhHaPcu9kmeaocefhoarcrfgrc8J9hmbkaOhoxekaocefhokaHce4cbaHceG9R7amfgmhOkdndnadcd9hmbabaDcetfgraA87ebarcdfas87ebarclfaO87ebxekabaDcdtfgraABdbarclfasBdbarcwfaOBdbkavc;abfalcitfgrasBdbaraABdlavaicdtfaABdbavc;abfalcefcsGcitfgraOBdbarasBdlavaicefgicsGcdtfasBdbavc;abfalcdfcsGcitfgraABdbaraOBdlavaiazcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhialcifhlkawcefhwalcsGhlaicsGhiaDcifgDae6mbkkcbc99aoaqSEhokavc;aef8Kjjjjbaok:llevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:Lvoeue99dud99eud99dndnadcl9hmbaeTmeindndnabcdfgd8Sbb:Yab8Sbbgi:Ygl:l:tabcefgv8Sbbgo:Ygr:l:tgwJbb;:9cawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai86bbdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad86bbdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad86bbabclfhbaecufgembxdkkaeTmbindndnabclfgd8Ueb:Yab8Uebgi:Ygl:l:tabcdfgv8Uebgo:Ygr:l:tgwJb;:FSawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai87ebdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad87ebdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad87ebabcwfhbaecufgembkkk;siliui99iue99dnaeTmbcbhiabhlindndnJ;Zl81Zalcof8UebgvciV:Y:vgoal8Ueb:YNgrJb;:FSNJbbbZJbbb:;arJbbbb9GEMgw:lJbbb9p9DTmbaw:OhDxekcjjjj94hDkalclf8Uebhqalcdf8UebhkabavcefciGaiVcetfaD87ebdndnaoak:YNgwJb;:FSNJbbbZJbbb:;awJbbbb9GEMgx:lJbbb9p9DTmbax:Ohkxekcjjjj94hkkabavcdfciGaiVcetfak87ebdndnaoaq:YNgoJb;:FSNJbbbZJbbb:;aoJbbbb9GEMgx:lJbbb9p9DTmbax:Ohqxekcjjjj94hqkabavcufciGaiVcetfaq87ebdndnJbbjZararN:tawawN:taoaoN:tgrJbbbbarJbbbb9GE:rJb;:FSNJbbbZMgr:lJbbb9p9DTmbar:Ohqxekcjjjj94hqkabavciGaiVcetfaq87ebalcwfhlaiclfhiaecufgembkkk9mbdnadcd4ae2geTmbinababydbgdcwtcw91:Yadce91cjjj;8ifcjjj98G::NUdbabclfhbaecufgembkkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik;LeeeudndnaeabVciGTmbabhixekdndnadcz9pmbabhixekabhiinaiaeydbBdbaiclfaeclfydbBdbaicwfaecwfydbBdbaicxfaecxfydbBdbaiczfhiaeczfheadc9Wfgdcs0mbkkadcl6mbinaiaeydbBdbaeclfheaiclfhiadc98fgdci0mbkkdnadTmbinaiaeRbb86bbaicefhiaecefheadcufgdmbkkabk;aeedudndnabciGTmbabhixekaecFeGc:b:c:ew2hldndnadcz9pmbabhixekabhiinaialBdbaicxfalBdbaicwfalBdbaiclfalBdbaiczfhiadc9Wfgdcs0mbkkadcl6mbinaialBdbaiclfhiadc98fgdci0mbkkdnadTmbinaiae86bbaicefhiadcufgdmbkkabkkkebcjwklz9Kbb",o="b9H79TebbbeKl9Gbb9Gvuuuuueu9Giuuub9Geueuikqbbebeedddilve9Weeeviebeoweuec:q;Aekr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbdY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVblE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtboK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbrL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbwl79IV9RbDq;t9tqlbzik9:evu8Jjjjjbcz9Rhbcbheincbhdcbhiinabcwfadfaicjuaead4ceGglE86bbaialfhiadcefgdcw9hmbkaec:q:yjjbfai86bbaecitc:q1jjbfab8Piw83ibaecefgecjd9hmbkk;h8JlHud97euo978Jjjjjbcj;kb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Rad;8qbbcj;abad9UhoaicefhldnadTmbaoc;WFbGgocjdaocjd6EhwcbhDinaDae9pmeawaeaD9RaDawfae6Egqcsfgoc9WGgkci2hxakcethmaocl4cifcd4hPabaDad2fhscbhzdnincehHalhOcbhAdninaraO9RaP6miavcj;cbfaAak2fhCaOaPfhlcbhidnakc;ab6mbaral9Rc;Gb6mbcbhoinaCaofhidndndndndnaOaoco4fRbbgXciGPlbedibkaipxbbbbbbbbbbbbbbbbpklbxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklbalczfhlkdndndndndnaXcd4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklzxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklzalczfhlkdndndndndnaXcl4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklaxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklaalczfhlkdndndndndnaXco4Plbedibkaipxbbbbbbbbbbbbbbbbpkl8WxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WalclfaYpQbfaXc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WalcwfaYpQbfaXc:q:yjjbfRbbfhlxekaialpbbbpkl8Walczfhlkaoc;abfhiaocjefak0meaihoaral9Rc;Fb0mbkkdndnaiak9pmbaici4hoinaral9RcK6mdaCaifhXdndndndndnaOaico4fRbbaocoG4ciGPlbedibkaXpxbbbbbbbbbbbbbbbbpklbxikaXalpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaXalpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaXalpbbbpklbalczfhlkaocdfhoaiczfgiak6mbkkalTmbaAci6hHalhOaAcefgohAaoclSmdxekkcbhlaHceGmdkdnakTmbavcjdfazfhiavazfpbdbhYcbhXinaiavcj;cbfaXfgopblbgLcep9TaLpxeeeeeeeeeeeeeeeegQp9op9Hp9rgLaoakfpblbg8Acep9Ta8AaQp9op9Hp9rg8ApmbzeHdOiAlCvXoQrLgEaoamfpblbg3cep9Ta3aQp9op9Hp9rg3aoaxfpblbg5cep9Ta5aQp9op9Hp9rg5pmbzeHdOiAlCvXoQrLg8EpmbezHdiOAlvCXorQLgQaQpmbedibedibedibediaYp9UgYp9AdbbaiadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaEa8EpmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaLa8ApmwKDYq8AkEx3m5P8Es8FgLa3a5pmwKDYq8AkEx3m5P8Es8Fg8ApmbezHdiOAlvCXorQLgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaLa8ApmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfhiaXczfgXak6mbkkazclfgzad6mbkasavcjdfaqad2;8qbbavavcjdfaqcufad2fad;8qbbaqaDfhDc9:hoalmexikkc9:hoxekcbc99aral9Radcaadca0ESEhokavcj;kbf8Kjjjjbaokwbz:bjjjbk;uzeHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecje;8kbavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhodnaeTmbcmcsaDceSEhkcbhxcbhmcbhDcbhicbhlindnaoaq9nmbc9:hoxikdndnawRbbgrc;Ve0mbavc;abfalarcl4cu7fcsGcitfgPydlhsaPydbhzdnarcsGgPak9pmbavaiarcu7fcsGcdtfydbaxaPEhraPThPdndnadcd9hmbabaDcetfgHaz87ebaHcdfas87ebaHclfar87ebxekabaDcdtfgHazBdbaHclfasBdbaHcwfarBdbkaxaPfhxavc;abfalcitfgHarBdbaHasBdlavaicdtfarBdbavc;abfalcefcsGglcitfgHazBdbaHarBdlaiaPfhialcefhlxdkdndnaPcsSmbamaPfaPc987fcefhmxekaocefhrao8SbbgPcFeGhHdndnaPcu9mmbarhoxekaocvfhoaHcFbGhHcrhPdninar8SbbgOcFbGaPtaHVhHaOcu9kmearcefhraPcrfgPc8J9hmbxdkkarcefhokaHce4cbaHceG9R7amfhmkdndnadcd9hmbabaDcetfgraz87ebarcdfas87ebarclfam87ebxekabaDcdtfgrazBdbarclfasBdbarcwfamBdbkavc;abfalcitfgramBdbarasBdlavaicdtfamBdbavc;abfalcefcsGglcitfgrazBdbaramBdlaicefhialcefhlxekdnarcpe0mbaxcefgOavaiaqarcsGfRbbgPcl49RcsGcdtfydbaPcz6gHEhravaiaP9RcsGcdtfydbaOaHfgsaPcsGgOEhPaOThOdndnadcd9hmbabaDcetfgzax87ebazcdfar87ebazclfaP87ebxekabaDcdtfgzaxBdbazclfarBdbazcwfaPBdbkavaicdtfaxBdbavc;abfalcitfgzarBdbazaxBdlavaicefgicsGcdtfarBdbavc;abfalcefcsGcitfgzaPBdbazarBdlavaiaHfcsGgicdtfaPBdbavc;abfalcdfcsGglcitfgraxBdbaraPBdlalcefhlaiaOfhiasaOfhxxekaxcbaoRbbgzEgAarc;:eSgrfhsazcsGhCazcl4hXdndnazcs0mbascefhOxekashOavaiaX9RcsGcdtfydbhskdndnaCmbaOcefhxxekaOhxavaiaz9RcsGcdtfydbhOkdndnarTmbaocefhrxekaocdfhrao8SbegHcFeGhPdnaHcu9kmbaocofhAaPcFbGhPcrhodninar8SbbgHcFbGaotaPVhPaHcu9kmearcefhraocrfgoc8J9hmbkaAhrxekarcefhrkaPce4cbaPceG9R7amfgmhAkdndnaXcsSmbarhPxekarcefhPar8SbbgocFeGhHdnaocu9kmbarcvfhsaHcFbGhHcrhodninaP8SbbgrcFbGaotaHVhHarcu9kmeaPcefhPaocrfgoc8J9hmbkashPxekaPcefhPkaHce4cbaHceG9R7amfgmhskdndnaCcsSmbaPhoxekaPcefhoaP8SbbgrcFeGhHdnarcu9kmbaPcvfhOaHcFbGhHcrhrdninao8SbbgPcFbGartaHVhHaPcu9kmeaocefhoarcrfgrc8J9hmbkaOhoxekaocefhokaHce4cbaHceG9R7amfgmhOkdndnadcd9hmbabaDcetfgraA87ebarcdfas87ebarclfaO87ebxekabaDcdtfgraABdbarclfasBdbarcwfaOBdbkavc;abfalcitfgrasBdbaraABdlavaicdtfaABdbavc;abfalcefcsGcitfgraOBdbarasBdlavaicefgicsGcdtfasBdbavc;abfalcdfcsGcitfgraABdbaraOBdlavaiazcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhialcifhlkawcefhwalcsGhlaicsGhiaDcifgDae6mbkkcbc99aoaqSEhokavc;aef8Kjjjjbaok:llevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:EPliuo97eue978Jjjjjbca9Rhidndnadcl9hmbdnaec98GglTmbcbhvabhdinadadpbbbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpkbbadczfhdavclfgval6mbkkalae9pmeaiaeciGgvcdtgdVcbczad9R;8kbaiabalcdtfglad;8qbbdnavTmbaiaipblbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpklbkalaiad;8qbbskdnaec98GgxTmbcbhvabhdinadczfglalpbbbgopxbbbbbbFFbbbbbbFFgkp9oadpbbbgDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eaDaopmbediwDqkzHOAKY8AEgoczp:Sep;6egrp;Geaoczp:Reczp:Sep;6egwp;Gep;Kep;Legopxb;:FSb;:FSb;:FSb;:FSawaopxbbbbbbbbbbbbbbbbp:2egqawpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegwawp;Meaoaop;Mearaqaramp9op9rp;Kegoaop;Mep;Kep;Kep;Jep;Negrp;Mepxbbn0bbn0bbn0bbn0gqp;Keczp:Reawarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9op9qgwaoarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogopmwDKYqk8AExm35Ps8E8Fp9qpkbbadaDakp9oawaopmbezHdiOAlvCXorQLp9qpkbbadcafhdavclfgvax6mbkkaxae9pmbaiaeciGgvcitgdfcbcaad9R;8kbaiabaxcitfglad;8qbbdnavTmbaiaipblzgopxbbbbbbFFbbbbbbFFgkp9oaipblbgDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eaDaopmbediwDqkzHOAKY8AEgoczp:Sep;6egrp;Geaoczp:Reczp:Sep;6egwp;Gep;Kep;Legopxb;:FSb;:FSb;:FSb;:FSawaopxbbbbbbbbbbbbbbbbp:2egqawpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegwawp;Meaoaop;Mearaqaramp9op9rp;Kegoaop;Mep;Kep;Kep;Jep;Negrp;Mepxbbn0bbn0bbn0bbn0gqp;Keczp:Reawarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9op9qgwaoarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogopmwDKYqk8AExm35Ps8E8Fp9qpklzaiaDakp9oawaopmbezHdiOAlvCXorQLp9qpklbkalaiad;8qbbkk;4wllue97euv978Jjjjjbc8W9Rhidnaec98GglTmbcbhvabhoinaiaopbbbgraoczfgwpbbbgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklbaopxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaqakp;Mearp;Keczp:ReaDakp;Mearp;Keamp9op9qgkpmbezHdiOAlvCXorQLgrp5baipblbpEb:T:j83ibaocwfarp5eaipblbpEe:T:j83ibawaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblbpEd:T:j83ibaocKfakp5eaipblbpEi:T:j83ibaocafhoavclfgval6mbkkdnalae9pmbaiaeciGgvcitgofcbcaao9R;8kbaiabalcitfgwao;8qbbdnavTmbaiaipblbgraipblzgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklaaipxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaqakp;Mearp;Keczp:ReaDakp;Mearp;Keamp9op9qgkpmbezHdiOAlvCXorQLgrp5baipblapEb:T:j83ibaiarp5eaipblapEe:T:j83iwaiaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblapEd:T:j83izaiakp5eaipblapEi:T:j83iKkawaiao;8qbbkk:Pddiue978Jjjjjbc;ab9Rhidnadcd4ae2glc98GgvTmbcbhdabheinaeaepbbbgocwp:Recwp:Sep;6eaocep:SepxbbjZbbjZbbjZbbjZp:UepxbbjFbbjFbbjFbbjFp9op;Mepkbbaeczfheadclfgdav6mbkkdnaval9pmbaialciGgdcdtgeVcbc;abae9R;8kbaiabavcdtfgvae;8qbbdnadTmbaiaipblbgocwp:Recwp:Sep;6eaocep:SepxbbjZbbjZbbjZbbjZp:UepxbbjFbbjFbbjFbbjFp9op;Mepklbkavaiae;8qbbkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaikkkebcjwklz9Tbb",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),n=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if(typeof WebAssembly!="object")return{supported:!1};var r=WebAssembly.validate(t)?o:p,c,h=WebAssembly.instantiate(g(r),{}).then(function(k){c=k.instance,c.exports.__wasm_call_ctors()});function g(k){for(var T=new Uint8Array(k.length),z=0;z<k.length;++z){var J=k.charCodeAt(z);T[z]=J>96?J-97:J>64?J-39:J+4}for(var O=0,z=0;z<k.length;++z)T[O++]=T[z]<60?n[T[z]]:(T[z]-60)*64+T[++z];return T.buffer.slice(0,O)}function m(k,T,z,J,O,S){var U=c.exports.sbrk,ee=z+3&-4,K=U(ee*J),oe=U(O.length),re=new Uint8Array(c.exports.memory.buffer);re.set(O,oe);var _e=k(K,z,J,oe,O.length);if(_e==0&&S&&S(K,ee,J),T.set(re.subarray(K,K+z*J)),U(K-U(0)),_e!=0)throw new Error("Malformed buffer data: "+_e)}var v={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},C={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"},x=[],Q=0;function P(k){var T={object:new Worker(k),pending:0,requests:{}};return T.object.onmessage=function(z){var J=z.data;T.pending-=J.count,T.requests[J.id][J.action](J.value),delete T.requests[J.id]},T}function D(k){for(var T="var instance; var ready = WebAssembly.instantiate(new Uint8Array(["+new Uint8Array(g(r))+"]), {}).then(function(result) { instance = result.instance; instance.exports.__wasm_call_ctors(); });self.onmessage = workerProcess;"+m.toString()+F.toString(),z=new Blob([T],{type:"text/javascript"}),J=URL.createObjectURL(z),O=0;O<k;++O)x[O]=P(J);URL.revokeObjectURL(J)}function G(k,T,z,J,O){for(var S=x[0],U=1;U<x.length;++U)x[U].pending<S.pending&&(S=x[U]);return new Promise(function(ee,K){var oe=new Uint8Array(z),re=Q++;S.pending+=k,S.requests[re]={resolve:ee,reject:K},S.object.postMessage({id:re,count:k,size:T,source:oe,mode:J,filter:O},[oe.buffer])})}function F(k){h.then(function(){var T=k.data;try{var z=new Uint8Array(T.count*T.size);m(c.exports[T.mode],z,T.count,T.size,T.source,c.exports[T.filter]),self.postMessage({id:T.id,count:T.count,action:"resolve",value:z},[z.buffer])}catch(J){self.postMessage({id:T.id,count:T.count,action:"reject",value:J})}})}return{ready:h,supported:!0,useWorkers:function(k){D(k)},decodeVertexBuffer:function(k,T,z,J,O){m(c.exports.meshopt_decodeVertexBuffer,k,T,z,J,c.exports[v[O]])},decodeIndexBuffer:function(k,T,z,J){m(c.exports.meshopt_decodeIndexBuffer,k,T,z,J)},decodeIndexSequence:function(k,T,z,J){m(c.exports.meshopt_decodeIndexSequence,k,T,z,J)},decodeGltfBuffer:function(k,T,z,J,O,S){m(c.exports[C[O]],k,T,z,J,c.exports[v[S]])},decodeGltfBufferAsync:function(k,T,z,J,O){return x.length>0?G(k,T,z,C[J],v[O]):h.then(function(){var S=new Uint8Array(k*T);return m(c.exports[C[J]],S,k,T,z,c.exports[v[O]]),S})}}}();const ra=new WeakMap;class up extends qa{constructor(o){super(o),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(o){return this.decoderPath=o,this}setDecoderConfig(o){return this.decoderConfig=o,this}setWorkerLimit(o){return this.workerLimit=o,this}load(o,t,n,r){const c=new rn(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(o,h=>{this.parse(h,t,r)},n,r)}parse(o,t,n){this.decodeDracoFile(o,t,null,null,ri).catch(n)}decodeDracoFile(o,t,n,r,c=Sh){const h={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n,vertexColorSpace:c};return this.decodeGeometry(o,h).then(t)}decodeGeometry(o,t){const n=JSON.stringify(t);if(ra.has(o)){const m=ra.get(o);if(m.key===n)return m.promise;if(o.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const c=this.workerNextTaskID++,h=o.byteLength,g=this._getWorker(c,h).then(m=>(r=m,new Promise((v,C)=>{r._callbacks[c]={resolve:v,reject:C},r.postMessage({type:"decode",id:c,taskConfig:t,buffer:o},[o])}))).then(m=>this._createGeometry(m.geometry));return g.catch(()=>!0).then(()=>{r&&c&&this._releaseTask(r,c)}),ra.set(o,{key:n,promise:g}),g}_createGeometry(o){const t=new Bo;o.index&&t.setIndex(new eo(o.index.array,1));for(let n=0;n<o.attributes.length;n++){const r=o.attributes[n],c=r.name,h=r.array,g=r.itemSize,m=new eo(h,g);c==="color"&&(this._assignVertexColorSpace(m,r.vertexColorSpace),m.normalized=!(h instanceof Float32Array)),t.setAttribute(c,m)}return t}_assignVertexColorSpace(o,t){if(t!==ri)return;const n=new Ft;for(let r=0,c=o.count;r<c;r++)n.fromBufferAttribute(o,r).convertSRGBToLinear(),o.setXYZ(r,n.r,n.g,n.b)}_loadLibrary(o,t){const n=new rn(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((r,c)=>{n.load(o,r,void 0,c)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const o=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return o?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(n=>{const r=n[0];o||(this.decoderConfig.wasmBinary=n[1]);const c=gp.toString(),h=["/* draco decoder */",r,"","/* worker */",c.substring(c.indexOf("{")+1,c.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([h]))}),this.decoderPending}_getWorker(o,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(c){const h=c.data;switch(h.type){case"decode":r._callbacks[h.id].resolve(h);break;case"error":r._callbacks[h.id].reject(h);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+h.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,c){return r._taskLoad>c._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[o]=t,n._taskLoad+=t,n})}_releaseTask(o,t){o._taskLoad-=o._taskCosts[t],delete o._callbacks[t],delete o._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(o=>o._taskLoad))}dispose(){for(let o=0;o<this.workerPool.length;++o)this.workerPool[o].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}}function gp(){let p,o;onmessage=function(h){const g=h.data;switch(g.type){case"init":p=g.decoderConfig,o=new Promise(function(C){p.onModuleLoaded=function(x){C({draco:x})},DracoDecoderModule(p)});break;case"decode":const m=g.buffer,v=g.taskConfig;o.then(C=>{const x=C.draco,Q=new x.Decoder;try{const P=t(x,Q,new Int8Array(m),v),D=P.attributes.map(G=>G.array.buffer);P.index&&D.push(P.index.array.buffer),self.postMessage({type:"decode",id:g.id,geometry:P},D)}catch(P){console.error(P),self.postMessage({type:"error",id:g.id,error:P.message})}finally{x.destroy(Q)}});break}};function t(h,g,m,v){const C=v.attributeIDs,x=v.attributeTypes;let Q,P;const D=g.GetEncodedGeometryType(m);if(D===h.TRIANGULAR_MESH)Q=new h.Mesh,P=g.DecodeArrayToMesh(m,m.byteLength,Q);else if(D===h.POINT_CLOUD)Q=new h.PointCloud,P=g.DecodeArrayToPointCloud(m,m.byteLength,Q);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!P.ok()||Q.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+P.error_msg());const G={index:null,attributes:[]};for(const F in C){const k=self[x[F]];let T,z;if(v.useUniqueIDs)z=C[F],T=g.GetAttributeByUniqueId(Q,z);else{if(z=g.GetAttributeId(Q,h[C[F]]),z===-1)continue;T=g.GetAttribute(Q,z)}const J=r(h,g,Q,F,k,T);F==="color"&&(J.vertexColorSpace=v.vertexColorSpace),G.attributes.push(J)}return D===h.TRIANGULAR_MESH&&(G.index=n(h,g,Q)),h.destroy(Q),G}function n(h,g,m){const C=m.num_faces()*3,x=C*4,Q=h._malloc(x);g.GetTrianglesUInt32Array(m,x,Q);const P=new Uint32Array(h.HEAPF32.buffer,Q,C).slice();return h._free(Q),{array:P,itemSize:1}}function r(h,g,m,v,C,x){const Q=x.num_components(),D=m.num_points()*Q,G=D*C.BYTES_PER_ELEMENT,F=c(h,C),k=h._malloc(G);g.GetAttributeDataArrayForAllPoints(m,x,F,G,k);const T=new C(h.HEAPF32.buffer,k,D).slice();return h._free(k),{name:v,array:T,itemSize:Q}}function c(h,g){switch(g){case Float32Array:return h.DT_FLOAT32;case Int8Array:return h.DT_INT8;case Int16Array:return h.DT_INT16;case Int32Array:return h.DT_INT32;case Uint8Array:return h.DT_UINT8;case Uint16Array:return h.DT_UINT16;case Uint32Array:return h.DT_UINT32}}}class bp{constructor(o=4){this.pool=o,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(o){if(!this.workers[o]){const t=this.workerCreator();t.addEventListener("message",this._onMessage.bind(this,o)),this.workers[o]=t}}_getIdleWorker(){for(let o=0;o<this.pool;o++)if(!(this.workerStatus&1<<o))return o;return-1}_onMessage(o,t){const n=this.workersResolve[o];if(n&&n(t),this.queue.length){const{resolve:r,msg:c,transfer:h}=this.queue.shift();this.workersResolve[o]=r,this.workers[o].postMessage(c,h)}else this.workerStatus^=1<<o}setWorkerCreator(o){this.workerCreator=o}setWorkerLimit(o){this.pool=o}postMessage(o,t){return new Promise(n=>{const r=this._getIdleWorker();r!==-1?(this._initWorker(r),this.workerStatus|=1<<r,this.workersResolve[r]=n,this.workers[r].postMessage(o,t)):this.queue.push({resolve:n,msg:o,transfer:t})})}dispose(){this.workers.forEach(o=>o.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}const mp=0,vp=2,fp=1,_p=2,wp=0,ac=9,Xa=15,rc=16,Za=22,lc=37,er=43,cc=76,dc=83,hc=97,Ac=100,pc=103,uc=109;class Cp{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class qs{constructor(o,t,n,r){this._dataView=new DataView(o.buffer,o.byteOffset+t,n),this._littleEndian=r,this._offset=0}_nextUint8(){const o=this._dataView.getUint8(this._offset);return this._offset+=1,o}_nextUint16(){const o=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,o}_nextUint32(){const o=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,o}_nextUint64(){const o=this._dataView.getUint32(this._offset,this._littleEndian)+4294967296*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,o}_nextInt32(){const o=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,o}_skip(o){return this._offset+=o,this}_scan(o,t=0){const n=this._offset;let r=0;for(;this._dataView.getUint8(this._offset)!==t&&r<o;)r++,this._offset++;return r<o&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+n,r)}}const mt=[171,75,84,88,32,50,48,187,13,10,26,10];function Xr(p){return typeof TextDecoder<"u"?new TextDecoder().decode(p):Buffer.from(p).toString("utf8")}function Ep(p){const o=new Uint8Array(p.buffer,p.byteOffset,mt.length);if(o[0]!==mt[0]||o[1]!==mt[1]||o[2]!==mt[2]||o[3]!==mt[3]||o[4]!==mt[4]||o[5]!==mt[5]||o[6]!==mt[6]||o[7]!==mt[7]||o[8]!==mt[8]||o[9]!==mt[9]||o[10]!==mt[10]||o[11]!==mt[11])throw new Error("Missing KTX 2.0 identifier.");const t=new Cp,n=17*Uint32Array.BYTES_PER_ELEMENT,r=new qs(p,mt.length,n,!0);t.vkFormat=r._nextUint32(),t.typeSize=r._nextUint32(),t.pixelWidth=r._nextUint32(),t.pixelHeight=r._nextUint32(),t.pixelDepth=r._nextUint32(),t.layerCount=r._nextUint32(),t.faceCount=r._nextUint32();const c=r._nextUint32();t.supercompressionScheme=r._nextUint32();const h=r._nextUint32(),g=r._nextUint32(),m=r._nextUint32(),v=r._nextUint32(),C=r._nextUint64(),x=r._nextUint64(),Q=new qs(p,mt.length+n,3*c*8,!0);for(let Z=0;Z<c;Z++)t.levels.push({levelData:new Uint8Array(p.buffer,p.byteOffset+Q._nextUint64(),Q._nextUint64()),uncompressedByteLength:Q._nextUint64()});const P=new qs(p,h,g,!0),D={vendorId:P._skip(4)._nextUint16(),descriptorType:P._nextUint16(),versionNumber:P._nextUint16(),descriptorBlockSize:P._nextUint16(),colorModel:P._nextUint8(),colorPrimaries:P._nextUint8(),transferFunction:P._nextUint8(),flags:P._nextUint8(),texelBlockDimension:[P._nextUint8(),P._nextUint8(),P._nextUint8(),P._nextUint8()],bytesPlane:[P._nextUint8(),P._nextUint8(),P._nextUint8(),P._nextUint8(),P._nextUint8(),P._nextUint8(),P._nextUint8(),P._nextUint8()],samples:[]},G=(D.descriptorBlockSize/4-6)/4;for(let Z=0;Z<G;Z++){const Fe={bitOffset:P._nextUint16(),bitLength:P._nextUint8(),channelType:P._nextUint8(),samplePosition:[P._nextUint8(),P._nextUint8(),P._nextUint8(),P._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&Fe.channelType?(Fe.sampleLower=P._nextInt32(),Fe.sampleUpper=P._nextInt32()):(Fe.sampleLower=P._nextUint32(),Fe.sampleUpper=P._nextUint32()),D.samples[Z]=Fe}t.dataFormatDescriptor.length=0,t.dataFormatDescriptor.push(D);const F=new qs(p,m,v,!0);for(;F._offset<v;){const Z=F._nextUint32(),Fe=F._scan(Z),rt=Xr(Fe),Bt=F._scan(Z-Fe.byteLength);t.keyValue[rt]=rt.match(/^ktx/i)?Xr(Bt):Bt,F._offset%4&&F._skip(4-F._offset%4)}if(x<=0)return t;const k=new qs(p,C,x,!0),T=k._nextUint16(),z=k._nextUint16(),J=k._nextUint32(),O=k._nextUint32(),S=k._nextUint32(),U=k._nextUint32(),ee=[];for(let Z=0;Z<c;Z++)ee.push({imageFlags:k._nextUint32(),rgbSliceByteOffset:k._nextUint32(),rgbSliceByteLength:k._nextUint32(),alphaSliceByteOffset:k._nextUint32(),alphaSliceByteLength:k._nextUint32()});const K=C+k._offset,oe=K+J,re=oe+O,_e=re+S,pe=new Uint8Array(p.buffer,p.byteOffset+K,J),ve=new Uint8Array(p.buffer,p.byteOffset+oe,O),ue=new Uint8Array(p.buffer,p.byteOffset+re,S),ae=new Uint8Array(p.buffer,p.byteOffset+_e,U);return t.globalData={endpointCount:T,selectorCount:z,imageDescs:ee,endpointsData:pe,selectorsData:ve,tablesData:ue,extendedData:ae},t}let la,Li,Ma;const ca={env:{emscripten_notify_memory_growth:function(p){Ma=new Uint8Array(Li.exports.memory.buffer)}}};class Ip{init(){return la||(la=typeof fetch<"u"?fetch("data:application/wasm;base64,"+Zr).then(o=>o.arrayBuffer()).then(o=>WebAssembly.instantiate(o,ca)).then(this._init):WebAssembly.instantiate(Buffer.from(Zr,"base64"),ca).then(this._init),la)}_init(o){Li=o.instance,ca.env.emscripten_notify_memory_growth(0)}decode(o,t=0){if(!Li)throw new Error("ZSTDDecoder: Await .init() before decoding.");const n=o.byteLength,r=Li.exports.malloc(n);Ma.set(o,r),t=t||Number(Li.exports.ZSTD_findDecompressedSize(r,n));const c=Li.exports.malloc(t),h=Li.exports.ZSTD_decompress(c,t,r,n),g=Ma.slice(c,c+h);return Li.exports.free(r),Li.exports.free(c),g}}const Zr="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IAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQh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ASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigC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C0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdB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IAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY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wOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ",da=new WeakMap;let ha=0,Aa;class fi extends qa{constructor(o){super(o),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new bp,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(o){return this.transcoderPath=o,this}setWorkerLimit(o){return this.workerPool.setWorkerLimit(o),this}detectSupport(o){return o.isWebGPURenderer===!0?this.workerConfig={astcSupported:o.hasFeature("texture-compression-astc"),etc1Supported:!1,etc2Supported:o.hasFeature("texture-compression-etc2"),dxtSupported:o.hasFeature("texture-compression-bc"),bptcSupported:!1,pvrtcSupported:!1}:(this.workerConfig={astcSupported:o.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:o.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:o.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:o.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:o.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:o.extensions.has("WEBGL_compressed_texture_pvrtc")||o.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},o.capabilities.isWebGL2&&(this.workerConfig.etc1Supported=!1)),this}init(){if(!this.transcoderPending){const o=new rn(this.manager);o.setPath(this.transcoderPath),o.setWithCredentials(this.withCredentials);const t=o.loadAsync("basis_transcoder.js"),n=new rn(this.manager);n.setPath(this.transcoderPath),n.setResponseType("arraybuffer"),n.setWithCredentials(this.withCredentials);const r=n.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([t,r]).then(([c,h])=>{const g=fi.BasisWorker.toString(),m=["/* constants */","let _EngineFormat = "+JSON.stringify(fi.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(fi.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(fi.BasisFormat),"/* basis_transcoder.js */",c,"/* worker */",g.substring(g.indexOf("{")+1,g.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([m])),this.transcoderBinary=h,this.workerPool.setWorkerCreator(()=>{const v=new Worker(this.workerSourceURL),C=this.transcoderBinary.slice(0);return v.postMessage({type:"init",config:this.workerConfig,transcoderBinary:C},[C]),v})}),ha>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),ha++}return this.transcoderPending}load(o,t,n,r){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const c=new rn(this.manager);c.setResponseType("arraybuffer"),c.setWithCredentials(this.withCredentials),c.load(o,h=>{if(da.has(h))return da.get(h).promise.then(t).catch(r);this._createTexture(h).then(g=>t?t(g):null).catch(r)},n,r)}_createTextureFrom(o,t){const{faces:n,width:r,height:c,format:h,type:g,error:m,dfdTransferFn:v,dfdFlags:C}=o;if(g==="error")return Promise.reject(m);let x;if(t.faceCount===6)x=new Rh(n,h,Mi);else{const Q=n[0].mipmaps;x=t.layerCount>1?new Lh(Q,r,c,t.layerCount,h,Mi):new Mh(Q,r,c,h,Mi)}return x.minFilter=n[0].mipmaps.length===1?io:Do,x.magFilter=io,x.generateMipmaps=!1,x.needsUpdate=!0,x.colorSpace=v===_p?ri:zl,x.premultiplyAlpha=!!(C&fp),x}async _createTexture(o,t={}){const n=Ep(new Uint8Array(o));if(n.vkFormat!==wp){const h=[],g=[];for(let v=0;v<n.levels.length;v++)g.push(Bp(n,v).then(function(C){h[v]=C}));await Promise.all(g);const m=h[0];return m.mipmaps=h.map(v=>({data:v.source.data,width:v.source.data.width,height:v.source.data.height,depth:v.source.data.depth})),m}const r=t,c=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:o,taskConfig:r},[o])).then(h=>this._createTextureFrom(h.data,n));return da.set(o,{promise:c}),c}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),ha--,this}}fi.BasisFormat={ETC1S:0,UASTC_4x4:1};fi.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16};fi.EngineFormat={RGBAFormat:ms,RGBA_ASTC_4x4_Format:Th,RGBA_BPTC_Format:Fh,RGBA_ETC2_EAC_Format:zh,RGBA_PVRTC_4BPPV1_Format:Nh,RGBA_S3TC_DXT5_Format:Vh,RGB_ETC1_Format:Gh,RGB_ETC2_Format:Oh,RGB_PVRTC_4BPPV1_Format:Uh,RGB_S3TC_DXT1_Format:jh};fi.BasisWorker=function(){let p,o,t;const n=_EngineFormat,r=_TranscoderFormat,c=_BasisFormat;self.addEventListener("message",function(D){const G=D.data;switch(G.type){case"init":p=G.config,h(G.transcoderBinary);break;case"transcode":o.then(()=>{try{const{faces:F,buffers:k,width:T,height:z,hasAlpha:J,format:O,dfdTransferFn:S,dfdFlags:U}=g(G.buffer);self.postMessage({type:"transcode",id:G.id,faces:F,width:T,height:z,hasAlpha:J,format:O,dfdTransferFn:S,dfdFlags:U},k)}catch(F){console.error(F),self.postMessage({type:"error",id:G.id,error:F.message})}});break}});function h(D){o=new Promise(G=>{t={wasmBinary:D,onRuntimeInitialized:G},BASIS(t)}).then(()=>{t.initializeBasis(),t.KTX2File===void 0&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")})}function g(D){const G=new t.KTX2File(new Uint8Array(D));function F(){G.close(),G.delete()}if(!G.isValid())throw F(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");const k=G.isUASTC()?c.UASTC_4x4:c.ETC1S,T=G.getWidth(),z=G.getHeight(),J=G.getLayers()||1,O=G.getLevels(),S=G.getFaces(),U=G.getHasAlpha(),ee=G.getDFDTransferFunc(),K=G.getDFDFlags(),{transcoderFormat:oe,engineFormat:re}=x(k,T,z,U);if(!T||!z||!O)throw F(),new Error("THREE.KTX2Loader:	Invalid texture");if(!G.startTranscoding())throw F(),new Error("THREE.KTX2Loader: .startTranscoding failed");const _e=[],pe=[];for(let ve=0;ve<S;ve++){const ue=[];for(let ae=0;ae<O;ae++){const Z=[];let Fe,rt;for(let Re=0;Re<J;Re++){const ze=G.getImageLevelInfo(ae,Re,ve);ve===0&&ae===0&&Re===0&&(ze.origWidth%4!==0||ze.origHeight%4!==0)&&console.warn("THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions."),O>1?(Fe=ze.origWidth,rt=ze.origHeight):(Fe=ze.width,rt=ze.height);const ge=new Uint8Array(G.getImageTranscodedSizeInBytes(ae,Re,0,oe));if(!G.transcodeImage(ge,ae,Re,ve,oe,0,-1,-1))throw F(),new Error("THREE.KTX2Loader: .transcodeImage failed.");Z.push(ge)}const Bt=P(Z);ue.push({data:Bt,width:Fe,height:rt}),pe.push(Bt.buffer)}_e.push({mipmaps:ue,width:T,height:z,format:re})}return F(),{faces:_e,buffers:pe,width:T,height:z,hasAlpha:U,format:re,dfdTransferFn:ee,dfdFlags:K}}const m=[{if:"astcSupported",basisFormat:[c.UASTC_4x4],transcoderFormat:[r.ASTC_4x4,r.ASTC_4x4],engineFormat:[n.RGBA_ASTC_4x4_Format,n.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[c.ETC1S,c.UASTC_4x4],transcoderFormat:[r.BC7_M5,r.BC7_M5],engineFormat:[n.RGBA_BPTC_Format,n.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[c.ETC1S,c.UASTC_4x4],transcoderFormat:[r.BC1,r.BC3],engineFormat:[n.RGB_S3TC_DXT1_Format,n.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[c.ETC1S,c.UASTC_4x4],transcoderFormat:[r.ETC1,r.ETC2],engineFormat:[n.RGB_ETC2_Format,n.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[c.ETC1S,c.UASTC_4x4],transcoderFormat:[r.ETC1],engineFormat:[n.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[c.ETC1S,c.UASTC_4x4],transcoderFormat:[r.PVRTC1_4_RGB,r.PVRTC1_4_RGBA],engineFormat:[n.RGB_PVRTC_4BPPV1_Format,n.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],v=m.sort(function(D,G){return D.priorityETC1S-G.priorityETC1S}),C=m.sort(function(D,G){return D.priorityUASTC-G.priorityUASTC});function x(D,G,F,k){let T,z;const J=D===c.ETC1S?v:C;for(let O=0;O<J.length;O++){const S=J[O];if(p[S.if]&&S.basisFormat.includes(D)&&!(k&&S.transcoderFormat.length<2)&&!(S.needsPowerOfTwo&&!(Q(G)&&Q(F))))return T=S.transcoderFormat[k?1:0],z=S.engineFormat[k?1:0],{transcoderFormat:T,engineFormat:z}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),T=r.RGBA32,z=n.RGBAFormat,{transcoderFormat:T,engineFormat:z}}function Q(D){return D<=2?!0:(D&D-1)===0&&D!==0}function P(D){if(D.length===1)return D[0];let G=0;for(let T=0;T<D.length;T++){const z=D[T];G+=z.byteLength}const F=new Uint8Array(G);let k=0;for(let T=0;T<D.length;T++){const z=D[T];F.set(z,k),k+=z.byteLength}return F}};const el={[uc]:ms,[hc]:ms,[lc]:ms,[er]:ms,[pc]:$s,[dc]:$s,[rc]:$s,[Za]:$s,[Ac]:Ws,[cc]:Ws,[Xa]:Ws,[ac]:Ws},pa={[uc]:Io,[hc]:xo,[lc]:Mi,[er]:Mi,[pc]:Io,[dc]:xo,[rc]:Mi,[Za]:Mi,[Ac]:Io,[cc]:xo,[Xa]:Mi,[ac]:Mi},xp={[er]:ri,[Za]:ri,[Xa]:ri};async function Bp(p,o=0){const{vkFormat:t}=p,n=Math.max(1,p.pixelWidth>>o),r=Math.max(1,p.pixelHeight>>o),c=Math.max(1,p.pixelDepth>>o);if(el[t]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");const h=p.levels[o];let g,m;if(p.supercompressionScheme===mp)g=h.levelData;else if(p.supercompressionScheme===vp)Aa||(Aa=new Promise(async C=>{const x=new Ip;await x.init(),C(x)})),g=(await Aa).decode(h.levelData,h.uncompressedByteLength);else throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");pa[t]===Io?m=new Float32Array(g.buffer,g.byteOffset,g.byteLength/Float32Array.BYTES_PER_ELEMENT):pa[t]===xo?m=new Uint16Array(g.buffer,g.byteOffset,g.byteLength/Uint16Array.BYTES_PER_ELEMENT):m=g;const v=c===0?new Hh(m,n,r):new Kh(m,n,r,c);return v.type=pa[t],v.format=el[t],v.colorSpace=xp[t]||zl,v.needsUpdate=!0,Promise.resolve(v)}const yp=p=>{const o={nodes:{},materials:{}};return p&&p.traverse(t=>{t.name&&(o.nodes[t.name]=t),t.material&&!o.materials[t.material.name]&&(o.materials[t.material.name]=t.material)}),o};function Qp(p,o){const{renderer:t}=Nl(),n=typeof p=="string"?o:p,r=Ap(qh,{extend(g){if(n!=null&&n.useDraco){const m=typeof n.useDraco=="string"?n.useDraco:"https://www.gstatic.com/draco/versioned/decoders/1.4.3/",v=new up().setDecoderPath(m);g.setDRACOLoader(v)}if(n!=null&&n.useMeshopt&&g.setMeshoptDecoder(pp),n!=null&&n.ktxTranscoderPath&&t){const m=new fi;m.setTranscoderPath(n==null?void 0:n.ktxTranscoderPath),m.detectSupport(t),g.setKTX2Loader(m)}}}),c=g=>r.load(g,{transform(m){return{...m,...yp(m.scene)}}}),h=typeof p=="string"?p:void 0;return h?c(h):{load:c}}function So(p,o){for(var t=0;t<o.length;t++){const n=o[t];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in p)){const c=Object.getOwnPropertyDescriptor(n,r);c&&Object.defineProperty(p,r,c.get?c:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(p,Symbol.toStringTag,{value:"Module"}))}var lo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ro(p){return p&&p.__esModule&&Object.prototype.hasOwnProperty.call(p,"default")?p.default:p}var Ta={exports:{}};/*! Tweakpane 3.1.9 (c) 2016 cocopon, licensed under the MIT license. */(function(p,o){(function(t,n){n(o)})(lo,function(t){class n{constructor(e){const[i,l]=e.split("-"),_=i.split(".");this.major=parseInt(_[0],10),this.minor=parseInt(_[1],10),this.patch=parseInt(_[2],10),this.prerelease=l??null}toString(){const e=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[e,this.prerelease].join("-"):e}}class r{constructor(e){this.controller_=e}get element(){return this.controller_.view.element}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(e){this.controller_.viewProps.set("disabled",e)}get hidden(){return this.controller_.viewProps.get("hidden")}set hidden(e){this.controller_.viewProps.set("hidden",e)}dispose(){this.controller_.viewProps.set("disposed",!0)}}class c{constructor(e){this.target=e}}class h extends c{constructor(e,i,l,_){super(e),this.value=i,this.presetKey=l,this.last=_??!0}}class g extends c{constructor(e,i,l){super(e),this.value=i,this.presetKey=l}}class m extends c{constructor(e,i){super(e),this.expanded=i}}class v extends c{constructor(e,i){super(e),this.index=i}}function C(s){return s==null}function x(s,e){if(s.length!==e.length)return!1;for(let i=0;i<s.length;i++)if(s[i]!==e[i])return!1;return!0}function Q(s,e){let i=s;do{const l=Object.getOwnPropertyDescriptor(i,e);if(l&&(l.set!==void 0||l.writable===!0))return!0;i=Object.getPrototypeOf(i)}while(i!==null);return!1}const P={alreadydisposed:()=>"View has been already disposed",invalidparams:s=>`Invalid parameters for '${s.name}'`,nomatchingcontroller:s=>`No matching controller for '${s.key}'`,nomatchingview:s=>`No matching view for '${JSON.stringify(s.params)}'`,notbindable:()=>"Value is not bindable",propertynotfound:s=>`Property '${s.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class D{static alreadyDisposed(){return new D({type:"alreadydisposed"})}static notBindable(){return new D({type:"notbindable"})}static propertyNotFound(e){return new D({type:"propertynotfound",context:{name:e}})}static shouldNeverHappen(){return new D({type:"shouldneverhappen"})}constructor(e){var i;this.message=(i=P[e.type](e.context))!==null&&i!==void 0?i:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}}class G{constructor(e,i,l){this.obj_=e,this.key_=i,this.presetKey_=l??i}static isBindable(e){return!(e===null||typeof e!="object"&&typeof e!="function")}get key(){return this.key_}get presetKey(){return this.presetKey_}read(){return this.obj_[this.key_]}write(e){this.obj_[this.key_]=e}writeProperty(e,i){const l=this.read();if(!G.isBindable(l))throw D.notBindable();if(!(e in l))throw D.propertyNotFound(e);l[e]=i}}class F extends r{get label(){return this.controller_.props.get("label")}set label(e){this.controller_.props.set("label",e)}get title(){var e;return(e=this.controller_.valueController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller_.valueController.props.set("title",e)}on(e,i){const l=i.bind(this);return this.controller_.valueController.emitter.on(e,()=>{l(new c(this))}),this}}class k{constructor(){this.observers_={}}on(e,i){let l=this.observers_[e];return l||(l=this.observers_[e]=[]),l.push({handler:i}),this}off(e,i){const l=this.observers_[e];return l&&(this.observers_[e]=l.filter(_=>_.handler!==i)),this}emit(e,i){const l=this.observers_[e];l&&l.forEach(_=>{_.handler(i)})}}const T="tp";function z(s){return(e,i)=>[T,"-",s,"v",e?`_${e}`:"",i?`-${i}`:""].join("")}function J(s,e){return i=>e(s(i))}function O(s){return s.rawValue}function S(s,e){s.emitter.on("change",J(O,e)),e(s.rawValue)}function U(s,e,i){S(s.value(e),i)}function ee(s,e,i){i?s.classList.add(e):s.classList.remove(e)}function K(s,e){return i=>{ee(s,e,i)}}function oe(s,e){S(s,i=>{e.textContent=i??""})}const re=z("btn");class _e{constructor(e,i){this.element=e.createElement("div"),this.element.classList.add(re()),i.viewProps.bindClassModifiers(this.element);const l=e.createElement("button");l.classList.add(re("b")),i.viewProps.bindDisabled(l),this.element.appendChild(l),this.buttonElement=l;const _=e.createElement("div");_.classList.add(re("t")),oe(i.props.value("title"),_),this.buttonElement.appendChild(_)}}class pe{constructor(e,i){this.emitter=new k,this.onClick_=this.onClick_.bind(this),this.props=i.props,this.viewProps=i.viewProps,this.view=new _e(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class ve{constructor(e,i){var l;this.constraint_=i==null?void 0:i.constraint,this.equals_=(l=i==null?void 0:i.equals)!==null&&l!==void 0?l:(_,B)=>_===B,this.emitter=new k,this.rawValue_=e}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,i){const l=i??{forceEmit:!1,last:!0},_=this.constraint_?this.constraint_.constrain(e):e,B=this.rawValue_;this.equals_(B,_)&&!l.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=_,this.emitter.emit("change",{options:l,previousRawValue:B,rawValue:_,sender:this}))}}class ue{constructor(e){this.emitter=new k,this.value_=e}get rawValue(){return this.value_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,i){const l=i??{forceEmit:!1,last:!0},_=this.value_;_===e&&!l.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:l,previousRawValue:_,rawValue:this.value_,sender:this}))}}function ae(s,e){const i=e==null?void 0:e.constraint,l=e==null?void 0:e.equals;return!i&&!l?new ue(s):new ve(s,e)}class Z{constructor(e){this.emitter=new k,this.valMap_=e;for(const i in this.valMap_)this.valMap_[i].emitter.on("change",()=>{this.emitter.emit("change",{key:i,sender:this})})}static createCore(e){return Object.keys(e).reduce((i,l)=>Object.assign(i,{[l]:ae(e[l])}),{})}static fromObject(e){const i=this.createCore(e);return new Z(i)}get(e){return this.valMap_[e].rawValue}set(e,i){this.valMap_[e].rawValue=i}value(e){return this.valMap_[e]}}function Fe(s,e){return Object.keys(e).reduce((l,_)=>{if(l===void 0)return;const B=e[_],L=B(s[_]);return L.succeeded?Object.assign(Object.assign({},l),{[_]:L.value}):void 0},{})}function rt(s,e){return s.reduce((i,l)=>{if(i===void 0)return;const _=e(l);if(!(!_.succeeded||_.value===void 0))return[...i,_.value]},[])}function Bt(s){return s===null?!1:typeof s=="object"}function Re(s){return e=>i=>{if(!e&&i===void 0)return{succeeded:!1,value:void 0};if(e&&i===void 0)return{succeeded:!0,value:void 0};const l=s(i);return l!==void 0?{succeeded:!0,value:l}:{succeeded:!1,value:void 0}}}function ze(s){return{custom:e=>Re(e)(s),boolean:Re(e=>typeof e=="boolean"?e:void 0)(s),number:Re(e=>typeof e=="number"?e:void 0)(s),string:Re(e=>typeof e=="string"?e:void 0)(s),function:Re(e=>typeof e=="function"?e:void 0)(s),constant:e=>Re(i=>i===e?e:void 0)(s),raw:Re(e=>e)(s),object:e=>Re(i=>{if(Bt(i))return Fe(i,e)})(s),array:e=>Re(i=>{if(Array.isArray(i))return rt(i,e)})(s)}}const ge={optional:ze(!0),required:ze(!1)};function Be(s,e){const i=ge.required.object(e)(s);return i.succeeded?i.value:void 0}function Yt(s){console.warn([`Missing '${s.key}' of ${s.target} in ${s.place}.`,"Please rebuild plugins with the latest core package."].join(" "))}function _i(s){return s&&s.parentElement&&s.parentElement.removeChild(s),null}class Ge{constructor(e){this.value_=e}static create(e){return[new Ge(e),(i,l)=>{e.setRawValue(i,l)}]}get emitter(){return this.value_.emitter}get rawValue(){return this.value_.rawValue}}const li=z("");function wi(s,e){return K(s,li(void 0,e))}class Ye extends Z{constructor(e){var i;super(e),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=Ge.create(ae(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(i=this.get("parent"))===null||i===void 0||i.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(e){var i,l,_;const B=e??{};return new Ye(Z.createCore({disabled:(i=B.disabled)!==null&&i!==void 0?i:!1,disposed:!1,hidden:(l=B.hidden)!==null&&l!==void 0?l:!1,parent:(_=B.parent)!==null&&_!==void 0?_:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(e){S(this.globalDisabled_,wi(e,"disabled")),U(this,"hidden",wi(e,"hidden"))}bindDisabled(e){S(this.globalDisabled_,i=>{e.disabled=i})}bindTabIndex(e){S(this.globalDisabled_,i=>{e.tabIndex=i?-1:0})}handleDispose(e){this.value("disposed").emitter.on("change",i=>{i&&e()})}getGlobalDisabled_(){const e=this.get("parent");return(e?e.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(e){var i;const l=e.previousRawValue;l==null||l.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(i=this.get("parent"))===null||i===void 0||i.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}function zt(){return["veryfirst","first","last","verylast"]}const Fi=z(""),lt={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class Nt{constructor(e){this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;const i=this.view.element;this.blade.value("positions").emitter.on("change",()=>{zt().forEach(l=>{i.classList.remove(Fi(void 0,lt[l]))}),this.blade.get("positions").forEach(l=>{i.classList.add(Fi(void 0,lt[l]))})}),this.viewProps.handleDispose(()=>{_i(i)})}get parent(){return this.parent_}set parent(e){if(this.parent_=e,!("parent"in this.viewProps.valMap_)){Yt({key:"parent",target:Ye.name,place:"BladeController.parent"});return}this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}}const Oe="http://www.w3.org/2000/svg";function Xe(s){s.offsetHeight}function dn(s,e){const i=s.style.transition;s.style.transition="none",e(),s.style.transition=i}function Jt(s){return s.ontouchstart!==void 0}function zi(){return globalThis}function Ci(){return zi().document}function Ni(s){const e=s.ownerDocument.defaultView;return e&&"document"in e?s.getContext("2d",{willReadFrequently:!0}):null}const hn={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function Vt(s,e){const i=s.createElementNS(Oe,"svg");return i.innerHTML=hn[e],i}function $t(s,e,i){s.insertBefore(e,s.children[i])}function Vi(s){s.parentElement&&s.parentElement.removeChild(s)}function Ei(s){for(;s.children.length>0;)s.removeChild(s.children[0])}function ci(s){for(;s.childNodes.length>0;)s.removeChild(s.childNodes[0])}function M(s){return s.relatedTarget?s.relatedTarget:"explicitOriginalTarget"in s?s.explicitOriginalTarget:null}const te=z("lbl");function Ie(s,e){const i=s.createDocumentFragment();return e.split(`
`).map(l=>s.createTextNode(l)).forEach((l,_)=>{_>0&&i.appendChild(s.createElement("br")),i.appendChild(l)}),i}class ke{constructor(e,i){this.element=e.createElement("div"),this.element.classList.add(te()),i.viewProps.bindClassModifiers(this.element);const l=e.createElement("div");l.classList.add(te("l")),U(i.props,"label",B=>{C(B)?this.element.classList.add(te(void 0,"nol")):(this.element.classList.remove(te(void 0,"nol")),ci(l),l.appendChild(Ie(e,B)))}),this.element.appendChild(l),this.labelElement=l;const _=e.createElement("div");_.classList.add(te("v")),this.element.appendChild(_),this.valueElement=_}}class Je extends Nt{constructor(e,i){const l=i.valueController.viewProps;super(Object.assign(Object.assign({},i),{view:new ke(e,{props:i.props,viewProps:l}),viewProps:l})),this.props=i.props,this.valueController=i.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}const Gt={id:"button",type:"blade",accept(s){const e=ge,i=Be(s,{title:e.required.string,view:e.required.constant("button"),label:e.optional.string});return i?{params:i}:null},controller(s){return new Je(s.document,{blade:s.blade,props:Z.fromObject({label:s.params.label}),valueController:new pe(s.document,{props:Z.fromObject({title:s.params.title}),viewProps:s.viewProps})})},api(s){return!(s.controller instanceof Je)||!(s.controller.valueController instanceof pe)?null:new F(s.controller)}};class ut extends Nt{constructor(e){super(e),this.value=e.value}}function yt(){return new Z({positions:ae([],{equals:x})})}class je extends Z{constructor(e){super(e)}static create(e){const i={completed:!0,expanded:e,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},l=Z.createCore(i);return new je(l)}get styleExpanded(){var e;return(e=this.get("temporaryExpanded"))!==null&&e!==void 0?e:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const e=this.get("expandedHeight");return this.get("shouldFixHeight")&&!C(e)?`${e}px`:"auto"}bindExpandedClass(e,i){const l=()=>{this.styleExpanded?e.classList.add(i):e.classList.remove(i)};U(this,"expanded",l),U(this,"temporaryExpanded",l)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function gt(s,e){let i=0;return dn(e,()=>{s.set("expandedHeight",null),s.set("temporaryExpanded",!0),Xe(e),i=e.clientHeight,s.set("temporaryExpanded",null),Xe(e)}),i}function An(s,e){e.style.height=s.styleHeight}function pn(s,e){s.value("expanded").emitter.on("beforechange",()=>{if(s.set("completed",!1),C(s.get("expandedHeight"))){const i=gt(s,e);i>0&&s.set("expandedHeight",i)}s.set("shouldFixHeight",!0),Xe(e)}),s.emitter.on("change",()=>{An(s,e)}),An(s,e),e.addEventListener("transitionend",i=>{i.propertyName==="height"&&s.cleanUpTransition()})}class Gi extends r{constructor(e,i){super(e),this.rackApi_=i}}function Oi(s,e){return s.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}function un(s,e){return s.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}function Cs(s,e){const i=e??{};return s.addBlade(Object.assign(Object.assign({},i),{view:"separator"}))}function gn(s,e){return s.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}class Wt{constructor(e){this.emitter=new k,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(e){for(const i of this.allItems())if(e(i))return i;return null}includes(e){return this.cache_.has(e)}add(e,i){if(this.includes(e))throw D.shouldNeverHappen();const l=i!==void 0?i:this.items_.length;this.items_.splice(l,0,e),this.cache_.add(e);const _=this.extract_(e);_&&(_.emitter.on("add",this.onSubListAdd_),_.emitter.on("remove",this.onSubListRemove_),_.allItems().forEach(B=>{this.cache_.add(B)})),this.emitter.emit("add",{index:l,item:e,root:this,target:this})}remove(e){const i=this.items_.indexOf(e);if(i<0)return;this.items_.splice(i,1),this.cache_.delete(e);const l=this.extract_(e);l&&(l.emitter.off("add",this.onSubListAdd_),l.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:i,item:e,root:this,target:this})}onSubListAdd_(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})}onSubListRemove_(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})}}class Ii extends r{constructor(e){super(e),this.onBindingChange_=this.onBindingChange_.bind(this),this.emitter_=new k,this.controller_.binding.emitter.on("change",this.onBindingChange_)}get label(){return this.controller_.props.get("label")}set label(e){this.controller_.props.set("label",e)}on(e,i){const l=i.bind(this);return this.emitter_.on(e,_=>{l(_.event)}),this}refresh(){this.controller_.binding.read()}onBindingChange_(e){const i=e.sender.target.read();this.emitter_.emit("change",{event:new h(this,i,this.controller_.binding.target.presetKey,e.options.last)})}}class xe extends Je{constructor(e,i){super(e,i),this.binding=i.binding}}class bn extends r{constructor(e){super(e),this.onBindingUpdate_=this.onBindingUpdate_.bind(this),this.emitter_=new k,this.controller_.binding.emitter.on("update",this.onBindingUpdate_)}get label(){return this.controller_.props.get("label")}set label(e){this.controller_.props.set("label",e)}on(e,i){const l=i.bind(this);return this.emitter_.on(e,_=>{l(_.event)}),this}refresh(){this.controller_.binding.read()}onBindingUpdate_(e){const i=e.sender.target.read();this.emitter_.emit("update",{event:new g(this,i,this.controller_.binding.target.presetKey)})}}class Qe extends Je{constructor(e,i){super(e,i),this.binding=i.binding,this.viewProps.bindDisabled(this.binding.ticker),this.viewProps.handleDispose(()=>{this.binding.dispose()})}}function Kn(s){return s instanceof ft?s.apiSet_:s instanceof Gi?s.rackApi_.apiSet_:null}function xi(s,e){const i=s.find(l=>l.controller_===e);if(!i)throw D.shouldNeverHappen();return i}function mn(s,e,i){if(!G.isBindable(s))throw D.notBindable();return new G(s,e,i)}class ft extends r{constructor(e,i){super(e),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.onRackInputChange_=this.onRackInputChange_.bind(this),this.onRackMonitorUpdate_=this.onRackMonitorUpdate_.bind(this),this.emitter_=new k,this.apiSet_=new Wt(Kn),this.pool_=i;const l=this.controller_.rack;l.emitter.on("add",this.onRackAdd_),l.emitter.on("remove",this.onRackRemove_),l.emitter.on("inputchange",this.onRackInputChange_),l.emitter.on("monitorupdate",this.onRackMonitorUpdate_),l.children.forEach(_=>{this.setUpApi_(_)})}get children(){return this.controller_.rack.children.map(e=>xi(this.apiSet_,e))}addInput(e,i,l){const _=l??{},B=this.controller_.view.element.ownerDocument,L=this.pool_.createInput(B,mn(e,i,_.presetKey),_),q=new Ii(L);return this.add(q,_.index)}addMonitor(e,i,l){const _=l??{},B=this.controller_.view.element.ownerDocument,L=this.pool_.createMonitor(B,mn(e,i),_),q=new bn(L);return this.add(q,_.index)}addFolder(e){return un(this,e)}addButton(e){return Oi(this,e)}addSeparator(e){return Cs(this,e)}addTab(e){return gn(this,e)}add(e,i){this.controller_.rack.add(e.controller_,i);const l=this.apiSet_.find(_=>_.controller_===e.controller_);return l&&this.apiSet_.remove(l),this.apiSet_.add(e),e}remove(e){this.controller_.rack.remove(e.controller_)}addBlade(e){const i=this.controller_.view.element.ownerDocument,l=this.pool_.createBlade(i,e),_=this.pool_.createBladeApi(l);return this.add(_,e.index)}on(e,i){const l=i.bind(this);return this.emitter_.on(e,_=>{l(_.event)}),this}setUpApi_(e){this.apiSet_.find(i=>i.controller_===e)||this.apiSet_.add(this.pool_.createBladeApi(e))}onRackAdd_(e){this.setUpApi_(e.bladeController)}onRackRemove_(e){if(e.isRoot){const i=xi(this.apiSet_,e.bladeController);this.apiSet_.remove(i)}}onRackInputChange_(e){const i=e.bladeController;if(i instanceof xe){const l=xi(this.apiSet_,i),_=i.binding;this.emitter_.emit("change",{event:new h(l,_.target.read(),_.target.presetKey,e.options.last)})}else if(i instanceof ut){const l=xi(this.apiSet_,i);this.emitter_.emit("change",{event:new h(l,i.value.rawValue,void 0,e.options.last)})}}onRackMonitorUpdate_(e){if(!(e.bladeController instanceof Qe))throw D.shouldNeverHappen();const i=xi(this.apiSet_,e.bladeController),l=e.bladeController.binding;this.emitter_.emit("update",{event:new g(i,l.target.read(),l.target.presetKey)})}}class di extends Gi{constructor(e,i){super(e,new ft(e.rackController,i)),this.emitter_=new k,this.controller_.foldable.value("expanded").emitter.on("change",l=>{this.emitter_.emit("fold",{event:new m(this,l.sender.rawValue)})}),this.rackApi_.on("change",l=>{this.emitter_.emit("change",{event:l})}),this.rackApi_.on("update",l=>{this.emitter_.emit("update",{event:l})})}get expanded(){return this.controller_.foldable.get("expanded")}set expanded(e){this.controller_.foldable.set("expanded",e)}get title(){return this.controller_.props.get("title")}set title(e){this.controller_.props.set("title",e)}get children(){return this.rackApi_.children}addInput(e,i,l){return this.rackApi_.addInput(e,i,l)}addMonitor(e,i,l){return this.rackApi_.addMonitor(e,i,l)}addFolder(e){return this.rackApi_.addFolder(e)}addButton(e){return this.rackApi_.addButton(e)}addSeparator(e){return this.rackApi_.addSeparator(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,i){return this.rackApi_.add(e,i)}remove(e){this.rackApi_.remove(e)}addBlade(e){return this.rackApi_.addBlade(e)}on(e,i){const l=i.bind(this);return this.emitter_.on(e,_=>{l(_.event)}),this}}class Ui extends Nt{constructor(e){super({blade:e.blade,view:e.view,viewProps:e.rackController.viewProps}),this.rackController=e.rackController}}class Es{constructor(e,i){const l=z(i.viewName);this.element=e.createElement("div"),this.element.classList.add(l()),i.viewProps.bindClassModifiers(this.element)}}function Is(s,e){for(let i=0;i<s.length;i++){const l=s[i];if(l instanceof xe&&l.binding===e)return l}return null}function xs(s,e){for(let i=0;i<s.length;i++){const l=s[i];if(l instanceof Qe&&l.binding===e)return l}return null}function qn(s,e){for(let i=0;i<s.length;i++){const l=s[i];if(l instanceof ut&&l.value===e)return l}return null}function ji(s){return s instanceof Qt?s.rack:s instanceof Ui?s.rackController.rack:null}function Bs(s){const e=ji(s);return e?e.bcSet_:null}class ys{constructor(e){var i,l;this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildInputChange_=this.onChildInputChange_.bind(this),this.onChildMonitorUpdate_=this.onChildMonitorUpdate_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onDescendantLayout_=this.onDescendantLayout_.bind(this),this.onDescendantInputChange_=this.onDescendantInputChange_.bind(this),this.onDescendantMonitorUpdate_=this.onDescendantMonitorUpdate_.bind(this),this.emitter=new k,this.blade_=(i=e.blade)!==null&&i!==void 0?i:null,(l=this.blade_)===null||l===void 0||l.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=e.viewProps,this.bcSet_=new Wt(Bs),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(e,i){var l;(l=e.parent)===null||l===void 0||l.remove(e),Q(e,"parent")?e.parent=this:(e.parent_=this,Yt({key:"parent",target:"BladeController",place:"BladeRack.add"})),this.bcSet_.add(e,i)}remove(e){Q(e,"parent")?e.parent=null:(e.parent_=null,Yt({key:"parent",target:"BladeController",place:"BladeRack.remove"})),this.bcSet_.remove(e)}find(e){return this.bcSet_.allItems().filter(i=>i instanceof e)}onSetAdd_(e){this.updatePositions_();const i=e.target===e.root;if(this.emitter.emit("add",{bladeController:e.item,index:e.index,isRoot:i,sender:this}),!i)return;const l=e.item;if(l.viewProps.emitter.on("change",this.onChildViewPropsChange_),l.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),l.viewProps.handleDispose(this.onChildDispose_),l instanceof xe)l.binding.emitter.on("change",this.onChildInputChange_);else if(l instanceof Qe)l.binding.emitter.on("update",this.onChildMonitorUpdate_);else if(l instanceof ut)l.value.emitter.on("change",this.onChildValueChange_);else{const _=ji(l);if(_){const B=_.emitter;B.on("layout",this.onDescendantLayout_),B.on("inputchange",this.onDescendantInputChange_),B.on("monitorupdate",this.onDescendantMonitorUpdate_)}}}onSetRemove_(e){this.updatePositions_();const i=e.target===e.root;if(this.emitter.emit("remove",{bladeController:e.item,isRoot:i,sender:this}),!i)return;const l=e.item;if(l instanceof xe)l.binding.emitter.off("change",this.onChildInputChange_);else if(l instanceof Qe)l.binding.emitter.off("update",this.onChildMonitorUpdate_);else if(l instanceof ut)l.value.emitter.off("change",this.onChildValueChange_);else{const _=ji(l);if(_){const B=_.emitter;B.off("layout",this.onDescendantLayout_),B.off("inputchange",this.onDescendantInputChange_),B.off("monitorupdate",this.onDescendantMonitorUpdate_)}}}updatePositions_(){const e=this.bcSet_.items.filter(_=>!_.viewProps.get("hidden")),i=e[0],l=e[e.length-1];this.bcSet_.items.forEach(_=>{const B=[];_===i&&(B.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&B.push("veryfirst")),_===l&&(B.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&B.push("verylast")),_.blade.set("positions",B)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(e=>e.viewProps.get("disposed")).forEach(e=>{this.bcSet_.remove(e)})}onChildInputChange_(e){const i=Is(this.find(xe),e.sender);if(!i)throw D.alreadyDisposed();this.emitter.emit("inputchange",{bladeController:i,options:e.options,sender:this})}onChildMonitorUpdate_(e){const i=xs(this.find(Qe),e.sender);if(!i)throw D.alreadyDisposed();this.emitter.emit("monitorupdate",{bladeController:i,sender:this})}onChildValueChange_(e){const i=qn(this.find(ut),e.sender);if(!i)throw D.alreadyDisposed();this.emitter.emit("inputchange",{bladeController:i,options:e.options,sender:this})}onDescendantLayout_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onDescendantInputChange_(e){this.emitter.emit("inputchange",{bladeController:e.bladeController,options:e.options,sender:this})}onDescendantMonitorUpdate_(e){this.emitter.emit("monitorupdate",{bladeController:e.bladeController,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class Qt extends Nt{constructor(e,i){super(Object.assign(Object.assign({},i),{view:new Es(e,{viewName:"brk",viewProps:i.viewProps})})),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const l=new ys({blade:i.root?void 0:i.blade,viewProps:i.viewProps});l.emitter.on("add",this.onRackAdd_),l.emitter.on("remove",this.onRackRemove_),this.rack=l,this.viewProps.handleDispose(()=>{for(let _=this.rack.children.length-1;_>=0;_--)this.rack.children[_].viewProps.set("disposed",!0)})}onRackAdd_(e){e.isRoot&&$t(this.view.element,e.bladeController.view.element,e.index)}onRackRemove_(e){e.isRoot&&Vi(e.bladeController.view.element)}}const kt=z("cnt");class de{constructor(e,i){var l;this.className_=z((l=i.viewName)!==null&&l!==void 0?l:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),kt()),i.viewProps.bindClassModifiers(this.element),this.foldable_=i.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),U(this.foldable_,"completed",K(this.element,this.className_(void 0,"cpl")));const _=e.createElement("button");_.classList.add(this.className_("b")),U(i.props,"title",se=>{C(se)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),i.viewProps.bindDisabled(_),this.element.appendChild(_),this.buttonElement=_;const B=e.createElement("div");B.classList.add(this.className_("i")),this.element.appendChild(B);const L=e.createElement("div");L.classList.add(this.className_("t")),oe(i.props.value("title"),L),this.buttonElement.appendChild(L),this.titleElement=L;const q=e.createElement("div");q.classList.add(this.className_("m")),this.buttonElement.appendChild(q);const ie=i.containerElement;ie.classList.add(this.className_("c")),this.element.appendChild(ie),this.containerElement=ie}}class Bi extends Ui{constructor(e,i){var l;const _=je.create((l=i.expanded)!==null&&l!==void 0?l:!0),B=new Qt(e,{blade:i.blade,root:i.root,viewProps:i.viewProps});super(Object.assign(Object.assign({},i),{rackController:B,view:new de(e,{containerElement:B.view.element,foldable:_,props:i.props,viewName:i.root?"rot":void 0,viewProps:i.viewProps})})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=i.props,this.foldable=_,pn(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}const Ce={id:"folder",type:"blade",accept(s){const e=ge,i=Be(s,{title:e.required.string,view:e.required.constant("folder"),expanded:e.optional.boolean});return i?{params:i}:null},controller(s){return new Bi(s.document,{blade:s.blade,expanded:s.params.expanded,props:Z.fromObject({title:s.params.title}),viewProps:s.viewProps})},api(s){return s.controller instanceof Bi?new di(s.controller,s.pool):null}};class le extends ut{constructor(e,i){const l=i.valueController.viewProps;super(Object.assign(Object.assign({},i),{value:i.valueController.value,view:new ke(e,{props:i.props,viewProps:l}),viewProps:l})),this.props=i.props,this.valueController=i.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}class He extends r{}const hi=z("spr");class ne{constructor(e,i){this.element=e.createElement("div"),this.element.classList.add(hi()),i.viewProps.bindClassModifiers(this.element);const l=e.createElement("hr");l.classList.add(hi("r")),this.element.appendChild(l)}}class _t extends Nt{constructor(e,i){super(Object.assign(Object.assign({},i),{view:new ne(e,{viewProps:i.viewProps})}))}}const Qs={id:"separator",type:"blade",accept(s){const e=Be(s,{view:ge.required.constant("separator")});return e?{params:e}:null},controller(s){return new _t(s.document,{blade:s.blade,viewProps:s.viewProps})},api(s){return s.controller instanceof _t?new He(s.controller):null}},Ze=z("tbi");class Xt{constructor(e,i){this.element=e.createElement("div"),this.element.classList.add(Ze()),i.viewProps.bindClassModifiers(this.element),U(i.props,"selected",B=>{B?this.element.classList.add(Ze(void 0,"sel")):this.element.classList.remove(Ze(void 0,"sel"))});const l=e.createElement("button");l.classList.add(Ze("b")),i.viewProps.bindDisabled(l),this.element.appendChild(l),this.buttonElement=l;const _=e.createElement("div");_.classList.add(Ze("t")),oe(i.props.value("title"),_),this.buttonElement.appendChild(_),this.titleElement=_}}class Zt{constructor(e,i){this.emitter=new k,this.onClick_=this.onClick_.bind(this),this.props=i.props,this.viewProps=i.viewProps,this.view=new Xt(e,{props:i.props,viewProps:i.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class vn{constructor(e,i){this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new Zt(e,{props:i.itemProps,viewProps:Ye.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.cc_=new Qt(e,{blade:yt(),viewProps:Ye.create()}),this.props=i.props,U(this.props,"selected",l=>{this.itemController.props.set("selected",l),this.contentController.viewProps.set("hidden",!l)})}get itemController(){return this.ic_}get contentController(){return this.cc_}onItemClick_(){this.props.set("selected",!0)}}class fn{constructor(e,i){this.controller_=e,this.rackApi_=i}get title(){var e;return(e=this.controller_.itemController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller_.itemController.props.set("title",e)}get selected(){return this.controller_.props.get("selected")}set selected(e){this.controller_.props.set("selected",e)}get children(){return this.rackApi_.children}addButton(e){return this.rackApi_.addButton(e)}addFolder(e){return this.rackApi_.addFolder(e)}addSeparator(e){return this.rackApi_.addSeparator(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,i){this.rackApi_.add(e,i)}remove(e){this.rackApi_.remove(e)}addInput(e,i,l){return this.rackApi_.addInput(e,i,l)}addMonitor(e,i,l){return this.rackApi_.addMonitor(e,i,l)}addBlade(e){return this.rackApi_.addBlade(e)}}class _n extends Gi{constructor(e,i){super(e,new ft(e.rackController,i)),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.onSelect_=this.onSelect_.bind(this),this.emitter_=new k,this.pageApiMap_=new Map,this.rackApi_.on("change",l=>{this.emitter_.emit("change",{event:l})}),this.rackApi_.on("update",l=>{this.emitter_.emit("update",{event:l})}),this.controller_.tab.selectedIndex.emitter.on("change",this.onSelect_),this.controller_.pageSet.emitter.on("add",this.onPageAdd_),this.controller_.pageSet.emitter.on("remove",this.onPageRemove_),this.controller_.pageSet.items.forEach(l=>{this.setUpPageApi_(l)})}get pages(){return this.controller_.pageSet.items.map(e=>{const i=this.pageApiMap_.get(e);if(!i)throw D.shouldNeverHappen();return i})}addPage(e){const i=this.controller_.view.element.ownerDocument,l=new vn(i,{itemProps:Z.fromObject({selected:!1,title:e.title}),props:Z.fromObject({selected:!1})});this.controller_.add(l,e.index);const _=this.pageApiMap_.get(l);if(!_)throw D.shouldNeverHappen();return _}removePage(e){this.controller_.remove(e)}on(e,i){const l=i.bind(this);return this.emitter_.on(e,_=>{l(_.event)}),this}setUpPageApi_(e){const i=this.rackApi_.apiSet_.find(_=>_.controller_===e.contentController);if(!i)throw D.shouldNeverHappen();const l=new fn(e,i);this.pageApiMap_.set(e,l)}onPageAdd_(e){this.setUpPageApi_(e.item)}onPageRemove_(e){if(!this.pageApiMap_.get(e.item))throw D.shouldNeverHappen();this.pageApiMap_.delete(e.item)}onSelect_(e){this.emitter_.emit("select",{event:new v(this,e.rawValue)})}}const Hi=-1;class ei{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=ae(!0),this.selectedIndex=ae(Hi),this.items_=[]}add(e,i){const l=i??this.items_.length;this.items_.splice(l,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(e){const i=this.items_.indexOf(e);i<0||(this.items_.splice(i,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=Hi,this.empty.rawValue=!0;return}const e=this.items_.findIndex(i=>i.rawValue);e<0?(this.items_.forEach((i,l)=>{i.rawValue=l===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((i,l)=>{i.rawValue=l===e}),this.selectedIndex.rawValue=e),this.empty.rawValue=!1}onItemSelectedChange_(e){if(e.rawValue){const i=this.items_.findIndex(l=>l===e.sender);this.items_.forEach((l,_)=>{l.rawValue=_===i}),this.selectedIndex.rawValue=i}else this.keepSelection_()}}const Pt=z("tab");class wn{constructor(e,i){this.element=e.createElement("div"),this.element.classList.add(Pt(),kt()),i.viewProps.bindClassModifiers(this.element),S(i.empty,K(this.element,Pt(void 0,"nop")));const l=e.createElement("div");l.classList.add(Pt("t")),this.element.appendChild(l),this.itemsElement=l;const _=e.createElement("div");_.classList.add(Pt("i")),this.element.appendChild(_);const B=i.contentsElement;B.classList.add(Pt("c")),this.element.appendChild(B),this.contentsElement=B}}class ti extends Ui{constructor(e,i){const l=new Qt(e,{blade:i.blade,viewProps:i.viewProps}),_=new ei;super({blade:i.blade,rackController:l,view:new wn(e,{contentsElement:l.view.element,empty:_.empty,viewProps:i.viewProps})}),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.pageSet_=new Wt(()=>null),this.pageSet_.emitter.on("add",this.onPageAdd_),this.pageSet_.emitter.on("remove",this.onPageRemove_),this.tab=_}get pageSet(){return this.pageSet_}add(e,i){this.pageSet_.add(e,i)}remove(e){this.pageSet_.remove(this.pageSet_.items[e])}onPageAdd_(e){const i=e.item;$t(this.view.itemsElement,i.itemController.view.element,e.index),i.itemController.viewProps.set("parent",this.viewProps),this.rackController.rack.add(i.contentController,e.index),this.tab.add(i.props.value("selected"))}onPageRemove_(e){const i=e.item;Vi(i.itemController.view.element),i.itemController.viewProps.set("parent",null),this.rackController.rack.remove(i.contentController),this.tab.remove(i.props.value("selected"))}}const Cn={id:"tab",type:"blade",accept(s){const e=ge,i=Be(s,{pages:e.required.array(e.required.object({title:e.required.string})),view:e.required.constant("tab")});return!i||i.pages.length===0?null:{params:i}},controller(s){const e=new ti(s.document,{blade:s.blade,viewProps:s.viewProps});return s.params.pages.forEach(i=>{const l=new vn(s.document,{itemProps:Z.fromObject({selected:!1,title:i.title}),props:Z.fromObject({selected:!1})});e.add(l)}),e},api(s){return s.controller instanceof ti?new _n(s.controller,s.pool):null}};function Ki(s,e){const i=s.accept(e.params);if(!i)return null;const l=ge.optional.boolean(e.params.disabled).value,_=ge.optional.boolean(e.params.hidden).value;return s.controller({blade:yt(),document:e.document,params:Object.assign(Object.assign({},i.params),{disabled:l,hidden:_}),viewProps:Ye.create({disabled:l,hidden:_})})}class qi{constructor(){this.disabled=!1,this.emitter=new k}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class Le{constructor(e,i){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=e,this.emitter=new k,this.interval_=i,this.setTimer_()}get disabled(){return this.disabled_}set disabled(e){this.disabled_=e,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const e=this.doc_.defaultView;e&&e.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const e=this.doc_.defaultView;e&&(this.timerId_=e.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class Dt{constructor(e){this.onValueChange_=this.onValueChange_.bind(this),this.reader=e.reader,this.writer=e.writer,this.emitter=new k,this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.target=e.target,this.read()}read(){const e=this.target.read();e!==void 0&&(this.value.rawValue=this.reader(e))}write_(e){this.writer(this.target,e)}onValueChange_(e){this.write_(e.rawValue),this.emitter.emit("change",{options:e.options,rawValue:e.rawValue,sender:this})}}function Ai(s,e){for(;s.length<e;)s.push(void 0)}function ct(s){const e=[];return Ai(e,s),ae(e)}function ks(s){const e=s.indexOf(void 0);return e<0?s:s.slice(0,e)}function Ps(s,e){const i=[...ks(s),e];return i.length>s.length?i.splice(0,i.length-s.length):Ai(i,s.length),i}class En{constructor(e){this.onTick_=this.onTick_.bind(this),this.reader_=e.reader,this.target=e.target,this.emitter=new k,this.value=e.value,this.ticker=e.ticker,this.ticker.emitter.on("tick",this.onTick_),this.read()}dispose(){this.ticker.dispose()}read(){const e=this.target.read();if(e===void 0)return;const i=this.value.rawValue,l=this.reader_(e);this.value.rawValue=Ps(i,l),this.emitter.emit("update",{rawValue:l,sender:this})}onTick_(e){this.read()}}class yi{constructor(e){this.constraints=e}constrain(e){return this.constraints.reduce((i,l)=>l.constrain(i),e)}}function St(s,e){if(s instanceof e)return s;if(s instanceof yi){const i=s.constraints.reduce((l,_)=>l||(_ instanceof e?_:null),null);if(i)return i}return null}class ii{constructor(e){this.values=Z.fromObject({max:e.max,min:e.min})}constrain(e){const i=this.values.get("max"),l=this.values.get("min");return Math.min(Math.max(e,l),i)}}class Qi{constructor(e){this.values=Z.fromObject({options:e})}get options(){return this.values.get("options")}constrain(e){const i=this.values.get("options");return i.length===0||i.filter(l=>l.value===e).length>0?e:i[0].value}}class In{constructor(e){this.values=Z.fromObject({max:e.max,min:e.min})}get maxValue(){return this.values.get("max")}get minValue(){return this.values.get("min")}constrain(e){const i=this.values.get("max"),l=this.values.get("min");let _=e;return C(l)||(_=Math.max(_,l)),C(i)||(_=Math.min(_,i)),_}}class wt{constructor(e,i=0){this.step=e,this.origin=i}constrain(e){const i=this.origin%this.step,l=Math.round((e-i)/this.step);return i+l*this.step}}const xn=z("lst");class Ds{constructor(e,i){this.onValueChange_=this.onValueChange_.bind(this),this.props_=i.props,this.element=e.createElement("div"),this.element.classList.add(xn()),i.viewProps.bindClassModifiers(this.element);const l=e.createElement("select");l.classList.add(xn("s")),U(this.props_,"options",B=>{Ei(l),B.forEach((L,q)=>{const ie=e.createElement("option");ie.dataset.index=String(q),ie.textContent=L.text,ie.value=String(L.value),l.appendChild(ie)})}),i.viewProps.bindDisabled(l),this.element.appendChild(l),this.selectElement=l;const _=e.createElement("div");_.classList.add(xn("m")),_.appendChild(Vt(e,"dropdown")),this.element.appendChild(_),i.value.emitter.on("change",this.onValueChange_),this.value_=i.value,this.update_()}update_(){this.selectElement.value=String(this.value_.rawValue)}onValueChange_(){this.update_()}}class Ot{constructor(e,i){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=i.props,this.value=i.value,this.viewProps=i.viewProps,this.view=new Ds(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(e){const i=e.currentTarget.selectedOptions.item(0);if(!i)return;const l=Number(i.dataset.index);this.value.rawValue=this.props.get("options")[l].value}}const Yn=z("pop");class Ss{constructor(e,i){this.element=e.createElement("div"),this.element.classList.add(Yn()),i.viewProps.bindClassModifiers(this.element),S(i.shows,K(this.element,Yn(void 0,"v")))}}class Jn{constructor(e,i){this.shows=ae(!1),this.viewProps=i.viewProps,this.view=new Ss(e,{shows:this.shows,viewProps:this.viewProps})}}const Rt=z("txt");class Rs{constructor(e,i){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Rt()),i.viewProps.bindClassModifiers(this.element),this.props_=i.props,this.props_.emitter.on("change",this.onChange_);const l=e.createElement("input");l.classList.add(Rt("i")),l.type="text",i.viewProps.bindDisabled(l),this.element.appendChild(l),this.inputElement=l,i.value.emitter.on("change",this.onChange_),this.value_=i.value,this.refresh()}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)}onChange_(){this.refresh()}}class pi{constructor(e,i){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=i.parser,this.props=i.props,this.value=i.value,this.viewProps=i.viewProps,this.view=new Rs(e,{props:i.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const i=e.currentTarget.value,l=this.parser_(i);C(l)||(this.value.rawValue=l),this.view.refresh()}}function Bn(s){return String(s)}function Ut(s){return s==="false"?!1:!!s}function ki(s){return Bn(s)}class $n{constructor(e){this.text=e}evaluate(){return Number(this.text)}toString(){return this.text}}const Ls={"**":(s,e)=>Math.pow(s,e),"*":(s,e)=>s*e,"/":(s,e)=>s/e,"%":(s,e)=>s%e,"+":(s,e)=>s+e,"-":(s,e)=>s-e,"<<":(s,e)=>s<<e,">>":(s,e)=>s>>e,">>>":(s,e)=>s>>>e,"&":(s,e)=>s&e,"^":(s,e)=>s^e,"|":(s,e)=>s|e};class Ms{constructor(e,i,l){this.left=i,this.operator=e,this.right=l}evaluate(){const e=Ls[this.operator];if(!e)throw new Error(`unexpected binary operator: '${this.operator}`);return e(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const Lt={"+":s=>s,"-":s=>-s,"~":s=>~s};class Wn{constructor(e,i){this.operator=e,this.expression=i}evaluate(){const e=Lt[this.operator];if(!e)throw new Error(`unexpected unary operator: '${this.operator}`);return e(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function ui(s){return(e,i)=>{for(let l=0;l<s.length;l++){const _=s[l](e,i);if(_!=="")return _}return""}}function ni(s,e){var i;const l=s.substr(e).match(/^\s+/);return(i=l&&l[0])!==null&&i!==void 0?i:""}function Xn(s,e){const i=s.substr(e,1);return i.match(/^[1-9]$/)?i:""}function gi(s,e){var i;const l=s.substr(e).match(/^[0-9]+/);return(i=l&&l[0])!==null&&i!==void 0?i:""}function w(s,e){const i=gi(s,e);if(i!=="")return i;const l=s.substr(e,1);if(e+=1,l!=="-"&&l!=="+")return"";const _=gi(s,e);return _===""?"":l+_}function d(s,e){const i=s.substr(e,1);if(e+=1,i.toLowerCase()!=="e")return"";const l=w(s,e);return l===""?"":i+l}function b(s,e){const i=s.substr(e,1);if(i==="0")return i;const l=Xn(s,e);return e+=l.length,l===""?"":l+gi(s,e)}function E(s,e){const i=b(s,e);if(e+=i.length,i==="")return"";const l=s.substr(e,1);if(e+=l.length,l!==".")return"";const _=gi(s,e);return e+=_.length,i+l+_+d(s,e)}function y(s,e){const i=s.substr(e,1);if(e+=i.length,i!==".")return"";const l=gi(s,e);return e+=l.length,l===""?"":i+l+d(s,e)}function V(s,e){const i=b(s,e);return e+=i.length,i===""?"":i+d(s,e)}const H=ui([E,y,V]);function W(s,e){var i;const l=s.substr(e).match(/^[01]+/);return(i=l&&l[0])!==null&&i!==void 0?i:""}function $(s,e){const i=s.substr(e,2);if(e+=i.length,i.toLowerCase()!=="0b")return"";const l=W(s,e);return l===""?"":i+l}function X(s,e){var i;const l=s.substr(e).match(/^[0-7]+/);return(i=l&&l[0])!==null&&i!==void 0?i:""}function he(s,e){const i=s.substr(e,2);if(e+=i.length,i.toLowerCase()!=="0o")return"";const l=X(s,e);return l===""?"":i+l}function we(s,e){var i;const l=s.substr(e).match(/^[0-9a-f]+/i);return(i=l&&l[0])!==null&&i!==void 0?i:""}function Me(s,e){const i=s.substr(e,2);if(e+=i.length,i.toLowerCase()!=="0x")return"";const l=we(s,e);return l===""?"":i+l}const Pe=ui([$,he,Me]),$e=ui([Pe,H]);function bt(s,e){const i=$e(s,e);return e+=i.length,i===""?null:{evaluable:new $n(i),cursor:e}}function fe(s,e){const i=s.substr(e,1);if(e+=i.length,i!=="(")return null;const l=Ts(s,e);if(!l)return null;e=l.cursor,e+=ni(s,e).length;const _=s.substr(e,1);return e+=_.length,_!==")"?null:{evaluable:l.evaluable,cursor:e}}function Pi(s,e){var i;return(i=bt(s,e))!==null&&i!==void 0?i:fe(s,e)}function si(s,e){const i=Pi(s,e);if(i)return i;const l=s.substr(e,1);if(e+=l.length,l!=="+"&&l!=="-"&&l!=="~")return null;const _=si(s,e);return _?(e=_.cursor,{cursor:e,evaluable:new Wn(l,_.evaluable)}):null}function Mo(s,e,i){i+=ni(e,i).length;const l=s.filter(_=>e.startsWith(_,i))[0];return l?(i+=l.length,i+=ni(e,i).length,{cursor:i,operator:l}):null}function co(s,e){return(i,l)=>{const _=s(i,l);if(!_)return null;l=_.cursor;let B=_.evaluable;for(;;){const L=Mo(e,i,l);if(!L)break;l=L.cursor;const q=s(i,l);if(!q)return null;l=q.cursor,B=new Ms(L.operator,B,q.evaluable)}return B?{cursor:l,evaluable:B}:null}}const ho=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((s,e)=>co(s,e),si);function Ts(s,e){return e+=ni(s,e).length,ho(s,e)}function Ao(s){const e=Ts(s,0);return!e||e.cursor+ni(s,e.cursor).length!==s.length?null:e.evaluable}function dt(s){var e;const i=Ao(s);return(e=i==null?void 0:i.evaluate())!==null&&e!==void 0?e:null}function Fs(s){if(typeof s=="number")return s;if(typeof s=="string"){const e=dt(s);if(!C(e))return e}return 0}function zs(s){return String(s)}function We(s){return e=>e.toFixed(Math.max(Math.min(s,20),0))}const po=We(0);function yn(s){return po(s)+"%"}function Zn(s){return String(s)}function Ns(s){return s}function Qn({primary:s,secondary:e,forward:i,backward:l}){let _=!1;function B(L){_||(_=!0,L(),_=!1)}s.emitter.on("change",L=>{B(()=>{e.setRawValue(i(s,e),L.options)})}),e.emitter.on("change",L=>{B(()=>{s.setRawValue(l(s,e),L.options)}),B(()=>{e.setRawValue(i(s,e),L.options)})}),B(()=>{e.setRawValue(i(s,e),{forceEmit:!1,last:!0})})}function ot(s,e){const i=s*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+i:e.downKey?-i:0}function Yi(s){return{altKey:s.altKey,downKey:s.key==="ArrowDown",shiftKey:s.shiftKey,upKey:s.key==="ArrowUp"}}function jt(s){return{altKey:s.altKey,downKey:s.key==="ArrowLeft",shiftKey:s.shiftKey,upKey:s.key==="ArrowRight"}}function kn(s){return s==="ArrowUp"||s==="ArrowDown"}function Vs(s){return kn(s)||s==="ArrowLeft"||s==="ArrowRight"}function Pn(s,e){var i,l;const _=e.ownerDocument.defaultView,B=e.getBoundingClientRect();return{x:s.pageX-(((i=_&&_.scrollX)!==null&&i!==void 0?i:0)+B.left),y:s.pageY-(((l=_&&_.scrollY)!==null&&l!==void 0?l:0)+B.top)}}class Di{constructor(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new k,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}computePosition_(e){const i=this.elem_.getBoundingClientRect();return{bounds:{width:i.width,height:i.height},point:e?{x:e.x,y:e.y}:null}}onMouseDown_(e){var i;e.preventDefault(),(i=e.currentTarget)===null||i===void 0||i.focus();const l=this.elem_.ownerDocument;l.addEventListener("mousemove",this.onDocumentMouseMove_),l.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(Pn(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseMove_(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(Pn(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseUp_(e){const i=this.elem_.ownerDocument;i.removeEventListener("mousemove",this.onDocumentMouseMove_),i.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(Pn(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onTouchStart_(e){e.preventDefault();const i=e.targetTouches.item(0),l=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(i?{x:i.clientX-l.left,y:i.clientY-l.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=i}onTouchMove_(e){const i=e.targetTouches.item(0),l=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(i?{x:i.clientX-l.left,y:i.clientY-l.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=i}onTouchEnd_(e){var i;const l=(i=e.targetTouches.item(0))!==null&&i!==void 0?i:this.lastTouch_,_=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(l?{x:l.clientX-_.left,y:l.clientY-_.top}:void 0),sender:this,shiftKey:e.shiftKey})}}function ye(s,e,i,l,_){const B=(s-e)/(i-e);return l+B*(_-l)}function ht(s){return String(s.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function Te(s,e,i){return Math.min(Math.max(s,e),i)}function es(s,e){return(s%e+e)%e}const At=z("txt");class uo{constructor(e,i){this.onChange_=this.onChange_.bind(this),this.props_=i.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(At(),At(void 0,"num")),i.arrayPosition&&this.element.classList.add(At(void 0,i.arrayPosition)),i.viewProps.bindClassModifiers(this.element);const l=e.createElement("input");l.classList.add(At("i")),l.type="text",i.viewProps.bindDisabled(l),this.element.appendChild(l),this.inputElement=l,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=i.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(At()),this.inputElement.classList.add(At("i"));const _=e.createElement("div");_.classList.add(At("k")),this.element.appendChild(_),this.knobElement=_;const B=e.createElementNS(Oe,"svg");B.classList.add(At("g")),this.knobElement.appendChild(B);const L=e.createElementNS(Oe,"path");L.classList.add(At("gb")),B.appendChild(L),this.guideBodyElem_=L;const q=e.createElementNS(Oe,"path");q.classList.add(At("gh")),B.appendChild(q),this.guideHeadElem_=q;const ie=e.createElement("div");ie.classList.add(z("tt")()),this.knobElement.appendChild(ie),this.tooltipElem_=ie,i.value.emitter.on("change",this.onChange_),this.value=i.value,this.refresh()}onDraggingChange_(e){if(e.rawValue===null){this.element.classList.remove(At(void 0,"drg"));return}this.element.classList.add(At(void 0,"drg"));const i=e.rawValue/this.props_.get("draggingScale"),l=i+(i>0?-1:i<0?1:0),_=Te(-l,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${l+_},0 L${l},4 L${l+_},8`,`M ${i},-1 L${i},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${i},4`);const B=this.props_.get("formatter");this.tooltipElem_.textContent=B(this.value.rawValue),this.tooltipElem_.style.left=`${i}px`}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)}onChange_(){this.refresh()}}class Mt{constructor(e,i){var l;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=i.baseStep,this.parser_=i.parser,this.props=i.props,this.sliderProps_=(l=i.sliderProps)!==null&&l!==void 0?l:null,this.value=i.value,this.viewProps=i.viewProps,this.dragging_=ae(null),this.view=new uo(e,{arrayPosition:i.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const _=new Di(this.view.knobElement);_.emitter.on("down",this.onPointerDown_),_.emitter.on("move",this.onPointerMove_),_.emitter.on("up",this.onPointerUp_)}constrainValue_(e){var i,l;const _=(i=this.sliderProps_)===null||i===void 0?void 0:i.get("minValue"),B=(l=this.sliderProps_)===null||l===void 0?void 0:l.get("maxValue");let L=e;return _!==void 0&&(L=Math.max(L,_)),B!==void 0&&(L=Math.min(L,B)),L}onInputChange_(e){const i=e.currentTarget.value,l=this.parser_(i);C(l)||(this.value.rawValue=this.constrainValue_(l)),this.view.refresh()}onInputKeyDown_(e){const i=ot(this.baseStep_,Yi(e));i!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+i),{forceEmit:!1,last:!1})}onInputKeyUp_(e){ot(this.baseStep_,Yi(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(e){if(!e.point)return null;const i=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+i*this.props.get("draggingScale"))}onPointerMove_(e){const i=this.computeDraggingValue_(e.data);i!==null&&(this.value.setRawValue(i,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(e){const i=this.computeDraggingValue_(e.data);i!==null&&(this.value.setRawValue(i,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const ts=z("sld");class go{constructor(e,i){this.onChange_=this.onChange_.bind(this),this.props_=i.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(ts()),i.viewProps.bindClassModifiers(this.element);const l=e.createElement("div");l.classList.add(ts("t")),i.viewProps.bindTabIndex(l),this.element.appendChild(l),this.trackElement=l;const _=e.createElement("div");_.classList.add(ts("k")),this.trackElement.appendChild(_),this.knobElement=_,i.value.emitter.on("change",this.onChange_),this.value=i.value,this.update_()}update_(){const e=Te(ye(this.value.rawValue,this.props_.get("minValue"),this.props_.get("maxValue"),0,100),0,100);this.knobElement.style.width=`${e}%`}onChange_(){this.update_()}}class bo{constructor(e,i){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=i.baseStep,this.value=i.value,this.viewProps=i.viewProps,this.props=i.props,this.view=new go(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Di(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,i){e.point&&this.value.setRawValue(ye(Te(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("minValue"),this.props.get("maxValue")),i)}onPointerDownOrMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const i=ot(this.baseStep_,jt(e));i!==0&&this.value.setRawValue(this.value.rawValue+i,{forceEmit:!1,last:!1})}onKeyUp_(e){ot(this.baseStep_,jt(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Gs=z("sldtxt");class To{constructor(e,i){this.element=e.createElement("div"),this.element.classList.add(Gs());const l=e.createElement("div");l.classList.add(Gs("s")),this.sliderView_=i.sliderView,l.appendChild(this.sliderView_.element),this.element.appendChild(l);const _=e.createElement("div");_.classList.add(Gs("t")),this.textView_=i.textView,_.appendChild(this.textView_.element),this.element.appendChild(_)}}class Os{constructor(e,i){this.value=i.value,this.viewProps=i.viewProps,this.sliderC_=new bo(e,{baseStep:i.baseStep,props:i.sliderProps,value:i.value,viewProps:this.viewProps}),this.textC_=new Mt(e,{baseStep:i.baseStep,parser:i.parser,props:i.textProps,sliderProps:i.sliderProps,value:i.value,viewProps:i.viewProps}),this.view=new To(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}}function Dn(s,e){s.write(e)}function Sn(s){const e=ge;if(Array.isArray(s))return e.required.array(e.required.object({text:e.required.string,value:e.required.raw}))(s).value;if(typeof s=="object")return e.required.raw(s).value}function Us(s){if(s==="inline"||s==="popup")return s}function oi(s){const e=ge;return e.required.object({max:e.optional.number,min:e.optional.number,step:e.optional.number})(s).value}function Ji(s){if(Array.isArray(s))return s;const e=[];return Object.keys(s).forEach(i=>{e.push({text:i,value:s[i]})}),e}function is(s){return C(s)?null:new Qi(Ji(s))}function mo(s){const e=s?St(s,wt):null;return e?e.step:null}function Si(s,e){const i=s&&St(s,wt);return i?ht(i.step):Math.max(ht(e),2)}function $i(s){return mo(s)??1}function bi(s,e){var i;const l=s&&St(s,wt),_=Math.abs((i=l==null?void 0:l.step)!==null&&i!==void 0?i:e);return _===0?.1:Math.pow(10,Math.floor(Math.log10(_))-1)}const ns=z("ckb");class Fo{constructor(e,i){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(ns()),i.viewProps.bindClassModifiers(this.element);const l=e.createElement("label");l.classList.add(ns("l")),this.element.appendChild(l);const _=e.createElement("input");_.classList.add(ns("i")),_.type="checkbox",l.appendChild(_),this.inputElement=_,i.viewProps.bindDisabled(this.inputElement);const B=e.createElement("div");B.classList.add(ns("w")),l.appendChild(B);const L=Vt(e,"check");B.appendChild(L),i.value.emitter.on("change",this.onValueChange_),this.value=i.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class zo{constructor(e,i){this.onInputChange_=this.onInputChange_.bind(this),this.value=i.value,this.viewProps=i.viewProps,this.view=new Fo(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const i=e.currentTarget;this.value.rawValue=i.checked}}function No(s){const e=[],i=is(s.options);return i&&e.push(i),new yi(e)}const u={id:"input-bool",type:"input",accept:(s,e)=>{if(typeof s!="boolean")return null;const i=Be(e,{options:ge.optional.custom(Sn)});return i?{initialValue:s,params:i}:null},binding:{reader:s=>Ut,constraint:s=>No(s.params),writer:s=>Dn},controller:s=>{const e=s.document,i=s.value,l=s.constraint,_=l&&St(l,Qi);return _?new Ot(e,{props:new Z({options:_.values.value("options")}),value:i,viewProps:s.viewProps}):new zo(e,{value:i,viewProps:s.viewProps})}},a=z("col");class A{constructor(e,i){this.element=e.createElement("div"),this.element.classList.add(a()),i.foldable.bindExpandedClass(this.element,a(void 0,"expanded")),U(i.foldable,"completed",K(this.element,a(void 0,"cpl")));const l=e.createElement("div");l.classList.add(a("h")),this.element.appendChild(l);const _=e.createElement("div");_.classList.add(a("s")),l.appendChild(_),this.swatchElement=_;const B=e.createElement("div");if(B.classList.add(a("t")),l.appendChild(B),this.textElement=B,i.pickerLayout==="inline"){const L=e.createElement("div");L.classList.add(a("p")),this.element.appendChild(L),this.pickerElement=L}else this.pickerElement=null}}function f(s,e,i){const l=Te(s/255,0,1),_=Te(e/255,0,1),B=Te(i/255,0,1),L=Math.max(l,_,B),q=Math.min(l,_,B),ie=L-q;let se=0,me=0;const Ee=(q+L)/2;return ie!==0&&(me=ie/(1-Math.abs(L+q-1)),l===L?se=(_-B)/ie:_===L?se=2+(B-l)/ie:se=4+(l-_)/ie,se=se/6+(se<0?1:0)),[se*360,me*100,Ee*100]}function I(s,e,i){const l=(s%360+360)%360,_=Te(e/100,0,1),B=Te(i/100,0,1),L=(1-Math.abs(2*B-1))*_,q=L*(1-Math.abs(l/60%2-1)),ie=B-L/2;let se,me,Ee;return l>=0&&l<60?[se,me,Ee]=[L,q,0]:l>=60&&l<120?[se,me,Ee]=[q,L,0]:l>=120&&l<180?[se,me,Ee]=[0,L,q]:l>=180&&l<240?[se,me,Ee]=[0,q,L]:l>=240&&l<300?[se,me,Ee]=[q,0,L]:[se,me,Ee]=[L,0,q],[(se+ie)*255,(me+ie)*255,(Ee+ie)*255]}function R(s,e,i){const l=Te(s/255,0,1),_=Te(e/255,0,1),B=Te(i/255,0,1),L=Math.max(l,_,B),q=Math.min(l,_,B),ie=L-q;let se;ie===0?se=0:L===l?se=60*(((_-B)/ie%6+6)%6):L===_?se=60*((B-l)/ie+2):se=60*((l-_)/ie+4);const me=L===0?0:ie/L,Ee=L;return[se,me*100,Ee*100]}function j(s,e,i){const l=es(s,360),_=Te(e/100,0,1),B=Te(i/100,0,1),L=B*_,q=L*(1-Math.abs(l/60%2-1)),ie=B-L;let se,me,Ee;return l>=0&&l<60?[se,me,Ee]=[L,q,0]:l>=60&&l<120?[se,me,Ee]=[q,L,0]:l>=120&&l<180?[se,me,Ee]=[0,L,q]:l>=180&&l<240?[se,me,Ee]=[0,q,L]:l>=240&&l<300?[se,me,Ee]=[q,0,L]:[se,me,Ee]=[L,0,q],[(se+ie)*255,(me+ie)*255,(Ee+ie)*255]}function Y(s,e,i){const l=i+e*(100-Math.abs(2*i-100))/200;return[s,l!==0?e*(100-Math.abs(2*i-100))/l:0,i+e*(100-Math.abs(2*i-100))/(2*100)]}function be(s,e,i){const l=100-Math.abs(i*(200-e)/100-100);return[s,l!==0?e*i/l:0,i*(200-e)/(2*100)]}function Ke(s){return[s[0],s[1],s[2]]}function Ht(s,e){return[s[0],s[1],s[2],e]}const js={hsl:{hsl:(s,e,i)=>[s,e,i],hsv:Y,rgb:I},hsv:{hsl:be,hsv:(s,e,i)=>[s,e,i],rgb:j},rgb:{hsl:f,hsv:R,rgb:(s,e,i)=>[s,e,i]}};function ss(s,e){return[e==="float"?1:s==="rgb"?255:360,e==="float"?1:s==="rgb"?255:100,e==="float"?1:s==="rgb"?255:100]}function Vo(s,e){return s===e?e:es(s,e)}function Sc(s,e,i){var l;const _=ss(e,i);return[e==="rgb"?Te(s[0],0,_[0]):Vo(s[0],_[0]),Te(s[1],0,_[1]),Te(s[2],0,_[2]),Te((l=s[3])!==null&&l!==void 0?l:1,0,1)]}function lr(s,e,i,l){const _=ss(e,i),B=ss(e,l);return s.map((L,q)=>L/_[q]*B[q])}function Rc(s,e,i){const l=lr(s,e.mode,e.type,"int"),_=js[e.mode][i.mode](...l);return lr(_,i.mode,"int",i.type)}function vo(s,e){return typeof s!="object"||C(s)?!1:e in s&&typeof s[e]=="number"}class ce{static black(e="int"){return new ce([0,0,0],"rgb",e)}static fromObject(e,i="int"){const l="a"in e?[e.r,e.g,e.b,e.a]:[e.r,e.g,e.b];return new ce(l,"rgb",i)}static toRgbaObject(e,i="int"){return e.toRgbaObject(i)}static isRgbColorObject(e){return vo(e,"r")&&vo(e,"g")&&vo(e,"b")}static isRgbaColorObject(e){return this.isRgbColorObject(e)&&vo(e,"a")}static isColorObject(e){return this.isRgbColorObject(e)}static equals(e,i){if(e.mode!==i.mode)return!1;const l=e.comps_,_=i.comps_;for(let B=0;B<l.length;B++)if(l[B]!==_[B])return!1;return!0}constructor(e,i,l="int"){this.mode=i,this.type=l,this.comps_=Sc(e,i,l)}getComponents(e,i="int"){return Ht(Rc(Ke(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:i}),this.comps_[3])}toRgbaObject(e="int"){const i=this.getComponents("rgb",e);return{r:i[0],g:i[1],b:i[2],a:i[3]}}}const Wi=z("colp");class Lc{constructor(e,i){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(Wi()),i.viewProps.bindClassModifiers(this.element);const l=e.createElement("div");l.classList.add(Wi("hsv"));const _=e.createElement("div");_.classList.add(Wi("sv")),this.svPaletteView_=i.svPaletteView,_.appendChild(this.svPaletteView_.element),l.appendChild(_);const B=e.createElement("div");B.classList.add(Wi("h")),this.hPaletteView_=i.hPaletteView,B.appendChild(this.hPaletteView_.element),l.appendChild(B),this.element.appendChild(l);const L=e.createElement("div");if(L.classList.add(Wi("rgb")),this.textView_=i.textView,L.appendChild(this.textView_.element),this.element.appendChild(L),i.alphaViews){this.alphaViews_={palette:i.alphaViews.palette,text:i.alphaViews.text};const q=e.createElement("div");q.classList.add(Wi("a"));const ie=e.createElement("div");ie.classList.add(Wi("ap")),ie.appendChild(this.alphaViews_.palette.element),q.appendChild(ie);const se=e.createElement("div");se.classList.add(Wi("at")),se.appendChild(this.alphaViews_.text.element),q.appendChild(se),this.element.appendChild(q)}}get allFocusableElements(){const e=[this.svPaletteView_.element,this.hPaletteView_.element,this.textView_.modeSelectElement,...this.textView_.textViews.map(i=>i.inputElement)];return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e}}function Mc(s){return s==="int"?"int":s==="float"?"float":void 0}function Go(s){const e=ge;return Be(s,{alpha:e.optional.boolean,color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(Mc)}),expanded:e.optional.boolean,picker:e.optional.custom(Us)})}function Rn(s){return s?.1:1}function Ln(s){var e;return(e=s.color)===null||e===void 0?void 0:e.type}function Tc(s,e){return s.alpha===e.alpha&&s.mode===e.mode&&s.notation===e.notation&&s.type===e.type}function Kt(s,e){const i=s.match(/^(.+)%$/);return Math.min(i?parseFloat(i[1])*.01*e:parseFloat(s),e)}const Fc={deg:s=>s,grad:s=>s*360/400,rad:s=>s*360/(2*Math.PI),turn:s=>s*360};function cr(s){const e=s.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(s);const i=parseFloat(e[1]),l=e[2];return Fc[l](i)}function dr(s){const e=s.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const i=[Kt(e[1],255),Kt(e[2],255),Kt(e[3],255)];return isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function hr(s){return e=>{const i=dr(e);return i?new ce(i,"rgb",s):null}}function Ar(s){const e=s.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const i=[Kt(e[1],255),Kt(e[2],255),Kt(e[3],255),Kt(e[4],1)];return isNaN(i[0])||isNaN(i[1])||isNaN(i[2])||isNaN(i[3])?null:i}function pr(s){return e=>{const i=Ar(e);return i?new ce(i,"rgb",s):null}}function ur(s){const e=s.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const i=[cr(e[1]),Kt(e[2],100),Kt(e[3],100)];return isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function gr(s){return e=>{const i=ur(e);return i?new ce(i,"hsl",s):null}}function br(s){const e=s.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const i=[cr(e[1]),Kt(e[2],100),Kt(e[3],100),Kt(e[4],1)];return isNaN(i[0])||isNaN(i[1])||isNaN(i[2])||isNaN(i[3])?null:i}function mr(s){return e=>{const i=br(e);return i?new ce(i,"hsl",s):null}}function vr(s){const e=s.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];const i=s.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return i?[parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16)]:null}function zc(s){const e=vr(s);return e?new ce(e,"rgb","int"):null}function fr(s){const e=s.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),ye(parseInt(e[4]+e[4],16),0,255,0,1)];const i=s.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return i?[parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16),ye(parseInt(i[4],16),0,255,0,1)]:null}function Nc(s){const e=fr(s);return e?new ce(e,"rgb","int"):null}function _r(s){const e=s.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const i=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function wr(s){return e=>{const i=_r(e);return i?new ce(i,"rgb",s):null}}function Cr(s){const e=s.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const i=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(i[0])||isNaN(i[1])||isNaN(i[2])||isNaN(i[3])?null:i}function Er(s){return e=>{const i=Cr(e);return i?new ce(i,"rgb",s):null}}const Vc=[{parser:vr,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:fr,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:dr,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:Ar,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:ur,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:br,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:_r,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:Cr,result:{alpha:!0,mode:"rgb",notation:"object"}}];function Gc(s){return Vc.reduce((e,{parser:i,result:l})=>e||(i(s)?l:null),null)}function Oo(s,e="int"){const i=Gc(s);return i?i.notation==="hex"&&e!=="float"?Object.assign(Object.assign({},i),{type:"int"}):i.notation==="func"?Object.assign(Object.assign({},i),{type:e}):null:null}const Ir={int:[zc,Nc,hr("int"),pr("int"),gr("int"),mr("int"),wr("int"),Er("int")],float:[hr("float"),pr("float"),gr("float"),mr("float"),wr("float"),Er("float")]};function Oc(s){const e=Ir[s];return i=>typeof i!="string"?ce.black(s):e.reduce((_,B)=>_||B(i),null)??ce.black(s)}function Uo(s){const e=Ir[s];return i=>e.reduce((l,_)=>l||_(i),null)}function xr(s){const e=Te(Math.floor(s),0,255).toString(16);return e.length===1?`0${e}`:e}function Br(s,e="#"){const i=Ke(s.getComponents("rgb")).map(xr).join("");return`${e}${i}`}function jo(s,e="#"){const i=s.getComponents("rgb"),l=[i[0],i[1],i[2],i[3]*255].map(xr).join("");return`${e}${l}`}function yr(s,e){const i=We(e==="float"?2:0);return`rgb(${Ke(s.getComponents("rgb",e)).map(l=>i(l)).join(", ")})`}function Uc(s){return e=>yr(e,s)}function fo(s,e){const i=We(2),l=We(e==="float"?2:0);return`rgba(${s.getComponents("rgb",e).map((_,B)=>(B===3?i:l)(_)).join(", ")})`}function jc(s){return e=>fo(e,s)}function Hc(s){const e=[We(0),yn,yn];return`hsl(${Ke(s.getComponents("hsl")).map((i,l)=>e[l](i)).join(", ")})`}function Kc(s){const e=[We(0),yn,yn,We(2)];return`hsla(${s.getComponents("hsl").map((i,l)=>e[l](i)).join(", ")})`}function Qr(s,e){const i=We(e==="float"?2:0),l=["r","g","b"];return`{${Ke(s.getComponents("rgb",e)).map((_,B)=>`${l[B]}: ${i(_)}`).join(", ")}}`}function qc(s){return e=>Qr(e,s)}function kr(s,e){const i=We(2),l=We(e==="float"?2:0),_=["r","g","b","a"];return`{${s.getComponents("rgb",e).map((B,L)=>{const q=L===3?i:l;return`${_[L]}: ${q(B)}`}).join(", ")}}`}function Yc(s){return e=>kr(e,s)}const Jc=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:Br},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:jo},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:Hc},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:Kc},...["int","float"].reduce((s,e)=>[...s,{format:{alpha:!1,mode:"rgb",notation:"func",type:e},stringifier:Uc(e)},{format:{alpha:!0,mode:"rgb",notation:"func",type:e},stringifier:jc(e)},{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:qc(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:Yc(e)}],[])];function Ho(s){return Jc.reduce((e,i)=>e||(Tc(i.format,s)?i.stringifier:null),null)}const Hs=z("apl");class $c{constructor(e,i){this.onValueChange_=this.onValueChange_.bind(this),this.value=i.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Hs()),i.viewProps.bindClassModifiers(this.element),i.viewProps.bindTabIndex(this.element);const l=e.createElement("div");l.classList.add(Hs("b")),this.element.appendChild(l);const _=e.createElement("div");_.classList.add(Hs("c")),l.appendChild(_),this.colorElem_=_;const B=e.createElement("div");B.classList.add(Hs("m")),this.element.appendChild(B),this.markerElem_=B;const L=e.createElement("div");L.classList.add(Hs("p")),this.markerElem_.appendChild(L),this.previewElem_=L,this.update_()}update_(){const e=this.value.rawValue,i=e.getComponents("rgb"),l=new ce([i[0],i[1],i[2],0],"rgb"),_=new ce([i[0],i[1],i[2],255],"rgb"),B=["to right",fo(l),fo(_)];this.colorElem_.style.background=`linear-gradient(${B.join(",")})`,this.previewElem_.style.backgroundColor=fo(e);const L=ye(i[3],0,1,0,100);this.markerElem_.style.left=`${L}%`}onValueChange_(){this.update_()}}class Wc{constructor(e,i){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=i.value,this.viewProps=i.viewProps,this.view=new $c(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Di(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,i){if(!e.point)return;const l=e.point.x/e.bounds.width,_=this.value.rawValue,[B,L,q]=_.getComponents("hsv");this.value.setRawValue(new ce([B,L,q,l],"hsv"),i)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const i=ot(Rn(!0),jt(e));if(i===0)return;const l=this.value.rawValue,[_,B,L,q]=l.getComponents("hsv");this.value.setRawValue(new ce([_,B,L,q+i],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){ot(Rn(!0),jt(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const os=z("coltxt");function Xc(s){const e=s.createElement("select"),i=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"}];return e.appendChild(i.reduce((l,_)=>{const B=s.createElement("option");return B.textContent=_.text,B.value=_.value,l.appendChild(B),l},s.createDocumentFragment())),e}class Zc{constructor(e,i){this.element=e.createElement("div"),this.element.classList.add(os()),i.viewProps.bindClassModifiers(this.element);const l=e.createElement("div");l.classList.add(os("m")),this.modeElem_=Xc(e),this.modeElem_.classList.add(os("ms")),l.appendChild(this.modeSelectElement),i.viewProps.bindDisabled(this.modeElem_);const _=e.createElement("div");_.classList.add(os("mm")),_.appendChild(Vt(e,"dropdown")),l.appendChild(_),this.element.appendChild(l);const B=e.createElement("div");B.classList.add(os("w")),this.element.appendChild(B),this.textsElem_=B,this.textViews_=i.textViews,this.applyTextViews_(),S(i.colorMode,L=>{this.modeElem_.value=L})}get modeSelectElement(){return this.modeElem_}get textViews(){return this.textViews_}set textViews(e){this.textViews_=e,this.applyTextViews_()}applyTextViews_(){Ei(this.textsElem_);const e=this.element.ownerDocument;this.textViews_.forEach(i=>{const l=e.createElement("div");l.classList.add(os("c")),l.appendChild(i.element),this.textsElem_.appendChild(l)})}}function ed(s){return We(s==="float"?2:0)}function td(s,e,i){const l=ss(s,e)[i];return new ii({min:0,max:l})}function Ko(s,e,i){return new Mt(s,{arrayPosition:i===0?"fst":i===3-1?"lst":"mid",baseStep:Rn(!1),parser:e.parser,props:Z.fromObject({draggingScale:e.colorType==="float"?.01:1,formatter:ed(e.colorType)}),value:ae(0,{constraint:td(e.colorMode,e.colorType,i)}),viewProps:e.viewProps})}class id{constructor(e,i){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=i.colorType,this.parser_=i.parser,this.value=i.value,this.viewProps=i.viewProps,this.colorMode=ae(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new Zc(e,{colorMode:this.colorMode,textViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(e){const i={colorMode:this.colorMode.rawValue,colorType:this.colorType_,parser:this.parser_,viewProps:this.viewProps},l=[Ko(e,i,0),Ko(e,i,1),Ko(e,i,2)];return l.forEach((_,B)=>{Qn({primary:this.value,secondary:_.value,forward:L=>L.rawValue.getComponents(this.colorMode.rawValue,this.colorType_)[B],backward:(L,q)=>{const ie=this.colorMode.rawValue,se=L.rawValue.getComponents(ie,this.colorType_);return se[B]=q.rawValue,new ce(Ht(Ke(se),se[3]),ie,this.colorType_)}})}),l}onModeSelectChange_(e){const i=e.currentTarget;this.colorMode.rawValue=i.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.textViews=[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}}const qo=z("hpl");class nd{constructor(e,i){this.onValueChange_=this.onValueChange_.bind(this),this.value=i.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(qo()),i.viewProps.bindClassModifiers(this.element),i.viewProps.bindTabIndex(this.element);const l=e.createElement("div");l.classList.add(qo("c")),this.element.appendChild(l);const _=e.createElement("div");_.classList.add(qo("m")),this.element.appendChild(_),this.markerElem_=_,this.update_()}update_(){const e=this.value.rawValue,[i]=e.getComponents("hsv");this.markerElem_.style.backgroundColor=yr(new ce([i,100,100],"hsv"));const l=ye(i,0,360,0,100);this.markerElem_.style.left=`${l}%`}onValueChange_(){this.update_()}}class sd{constructor(e,i){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=i.value,this.viewProps=i.viewProps,this.view=new nd(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Di(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,i){if(!e.point)return;const l=ye(Te(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),_=this.value.rawValue,[,B,L,q]=_.getComponents("hsv");this.value.setRawValue(new ce([l,B,L,q],"hsv"),i)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const i=ot(Rn(!1),jt(e));if(i===0)return;const l=this.value.rawValue,[_,B,L,q]=l.getComponents("hsv");this.value.setRawValue(new ce([_+i,B,L,q],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){ot(Rn(!1),jt(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Yo=z("svp"),Pr=64;class od{constructor(e,i){this.onValueChange_=this.onValueChange_.bind(this),this.value=i.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Yo()),i.viewProps.bindClassModifiers(this.element),i.viewProps.bindTabIndex(this.element);const l=e.createElement("canvas");l.height=Pr,l.width=Pr,l.classList.add(Yo("c")),this.element.appendChild(l),this.canvasElement=l;const _=e.createElement("div");_.classList.add(Yo("m")),this.element.appendChild(_),this.markerElem_=_,this.update_()}update_(){const e=Ni(this.canvasElement);if(!e)return;const i=this.value.rawValue.getComponents("hsv"),l=this.canvasElement.width,_=this.canvasElement.height,B=e.getImageData(0,0,l,_),L=B.data;for(let se=0;se<_;se++)for(let me=0;me<l;me++){const Ee=ye(me,0,l,0,100),Mn=ye(se,0,_,100,0),Tn=j(i[0],Ee,Mn),cs=(se*l+me)*4;L[cs]=Tn[0],L[cs+1]=Tn[1],L[cs+2]=Tn[2],L[cs+3]=255}e.putImageData(B,0,0);const q=ye(i[1],0,100,0,100);this.markerElem_.style.left=`${q}%`;const ie=ye(i[2],0,100,100,0);this.markerElem_.style.top=`${ie}%`}onValueChange_(){this.update_()}}class ad{constructor(e,i){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=i.value,this.viewProps=i.viewProps,this.view=new od(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Di(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,i){if(!e.point)return;const l=ye(e.point.x,0,e.bounds.width,0,100),_=ye(e.point.y,0,e.bounds.height,100,0),[B,,,L]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new ce([B,l,_,L],"hsv"),i)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){Vs(e.key)&&e.preventDefault();const[i,l,_,B]=this.value.rawValue.getComponents("hsv"),L=Rn(!1),q=ot(L,jt(e)),ie=ot(L,Yi(e));q===0&&ie===0||this.value.setRawValue(new ce([i,l+q,_+ie,B],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){const i=Rn(!1),l=ot(i,jt(e)),_=ot(i,Yi(e));l===0&&_===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class rd{constructor(e,i){this.value=i.value,this.viewProps=i.viewProps,this.hPaletteC_=new sd(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new ad(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=i.supportsAlpha?{palette:new Wc(e,{value:this.value,viewProps:this.viewProps}),text:new Mt(e,{parser:dt,baseStep:.1,props:Z.fromObject({draggingScale:.01,formatter:We(2)}),value:ae(0,{constraint:new ii({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&Qn({primary:this.value,secondary:this.alphaIcs_.text.value,forward:l=>l.rawValue.getComponents()[3],backward:(l,_)=>{const B=l.rawValue.getComponents();return B[3]=_.rawValue,new ce(B,l.rawValue.mode)}}),this.textC_=new id(e,{colorType:i.colorType,parser:dt,value:this.value,viewProps:this.viewProps}),this.view=new Lc(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:i.supportsAlpha,svPaletteView:this.svPaletteC_.view,textView:this.textC_.view,viewProps:this.viewProps})}get textController(){return this.textC_}}const Jo=z("colsw");class ld{constructor(e,i){this.onValueChange_=this.onValueChange_.bind(this),i.value.emitter.on("change",this.onValueChange_),this.value=i.value,this.element=e.createElement("div"),this.element.classList.add(Jo()),i.viewProps.bindClassModifiers(this.element);const l=e.createElement("div");l.classList.add(Jo("sw")),this.element.appendChild(l),this.swatchElem_=l;const _=e.createElement("button");_.classList.add(Jo("b")),i.viewProps.bindDisabled(_),this.element.appendChild(_),this.buttonElement=_,this.update_()}update_(){const e=this.value.rawValue;this.swatchElem_.style.backgroundColor=jo(e)}onValueChange_(){this.update_()}}class cd{constructor(e,i){this.value=i.value,this.viewProps=i.viewProps,this.view=new ld(e,{value:this.value,viewProps:this.viewProps})}}class $o{constructor(e,i){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=i.value,this.viewProps=i.viewProps,this.foldable_=je.create(i.expanded),this.swatchC_=new cd(e,{value:this.value,viewProps:this.viewProps});const l=this.swatchC_.view.buttonElement;l.addEventListener("blur",this.onButtonBlur_),l.addEventListener("click",this.onButtonClick_),this.textC_=new pi(e,{parser:i.parser,props:Z.fromObject({formatter:i.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new A(e,{foldable:this.foldable_,pickerLayout:i.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=i.pickerLayout==="popup"?new Jn(e,{viewProps:this.viewProps}):null;const _=new rd(e,{colorType:i.colorType,supportsAlpha:i.supportsAlpha,value:this.value,viewProps:this.viewProps});_.view.allFocusableElements.forEach(B=>{B.addEventListener("blur",this.onPopupChildBlur_),B.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=_,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(_.view.element),Qn({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:B=>B.rawValue,backward:(B,L)=>L.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),pn(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(e){if(!this.popC_)return;const i=this.view.element,l=e.relatedTarget;(!l||!i.contains(l))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const i=this.popC_.view.element,l=M(e);l&&i.contains(l)||l&&l===this.swatchC_.view.buttonElement&&!Jt(i.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function dd(s,e){return ce.isColorObject(s)?ce.fromObject(s,e):ce.black(e)}function hd(s){return Ke(s.getComponents("rgb")).reduce((e,i)=>e<<8|Math.floor(i)&255,0)}function Ad(s){return s.getComponents("rgb").reduce((e,i,l)=>{const _=Math.floor(l===3?i*255:i)&255;return e<<8|_},0)>>>0}function pd(s){return new ce([s>>16&255,s>>8&255,s&255],"rgb")}function ud(s){return new ce([s>>24&255,s>>16&255,s>>8&255,ye(s&255,0,255,0,1)],"rgb")}function gd(s){return typeof s!="number"?ce.black():pd(s)}function bd(s){return typeof s!="number"?ce.black():ud(s)}function md(s){const e=Ho(s);return e?(i,l)=>{Dn(i,e(l))}:null}function vd(s){const e=s?Ad:hd;return(i,l)=>{Dn(i,e(l))}}function fd(s,e,i){const l=e.toRgbaObject(i);s.writeProperty("r",l.r),s.writeProperty("g",l.g),s.writeProperty("b",l.b),s.writeProperty("a",l.a)}function _d(s,e,i){const l=e.toRgbaObject(i);s.writeProperty("r",l.r),s.writeProperty("g",l.g),s.writeProperty("b",l.b)}function wd(s,e){return(i,l)=>{s?fd(i,l,e):_d(i,l,e)}}function Wo(s){var e;return!!(s!=null&&s.alpha||!((e=s==null?void 0:s.color)===null||e===void 0)&&e.alpha)}function Cd(s){return s?e=>jo(e,"0x"):e=>Br(e,"0x")}function Ed(s){return"color"in s||"view"in s&&s.view==="color"}const Id={id:"input-color-number",type:"input",accept:(s,e)=>{if(typeof s!="number"||!Ed(e))return null;const i=Go(e);return i?{initialValue:s,params:i}:null},binding:{reader:s=>Wo(s.params)?bd:gd,equals:ce.equals,writer:s=>vd(Wo(s.params))},controller:s=>{const e=Wo(s.params),i="expanded"in s.params?s.params.expanded:void 0,l="picker"in s.params?s.params.picker:void 0;return new $o(s.document,{colorType:"int",expanded:i??!1,formatter:Cd(e),parser:Uo("int"),pickerLayout:l??"popup",supportsAlpha:e,value:s.value,viewProps:s.viewProps})}};function xd(s){return ce.isRgbaColorObject(s)}function Bd(s){return e=>dd(e,s)}function yd(s,e){return i=>s?kr(i,e):Qr(i,e)}const Qd={id:"input-color-object",type:"input",accept:(s,e)=>{if(!ce.isColorObject(s))return null;const i=Go(e);return i?{initialValue:s,params:i}:null},binding:{reader:s=>Bd(Ln(s.params)),equals:ce.equals,writer:s=>wd(xd(s.initialValue),Ln(s.params))},controller:s=>{var e;const i=ce.isRgbaColorObject(s.initialValue),l="expanded"in s.params?s.params.expanded:void 0,_="picker"in s.params?s.params.picker:void 0,B=(e=Ln(s.params))!==null&&e!==void 0?e:"int";return new $o(s.document,{colorType:B,expanded:l??!1,formatter:yd(i,B),parser:Uo(B),pickerLayout:_??"popup",supportsAlpha:i,value:s.value,viewProps:s.viewProps})}},kd={id:"input-color-string",type:"input",accept:(s,e)=>{if(typeof s!="string"||"view"in e&&e.view==="text")return null;const i=Oo(s,Ln(e));if(!i||!Ho(i))return null;const l=Go(e);return l?{initialValue:s,params:l}:null},binding:{reader:s=>{var e;return Oc((e=Ln(s.params))!==null&&e!==void 0?e:"int")},equals:ce.equals,writer:s=>{const e=Oo(s.initialValue,Ln(s.params));if(!e)throw D.shouldNeverHappen();const i=md(e);if(!i)throw D.notBindable();return i}},controller:s=>{const e=Oo(s.initialValue,Ln(s.params));if(!e)throw D.shouldNeverHappen();const i=Ho(e);if(!i)throw D.shouldNeverHappen();const l="expanded"in s.params?s.params.expanded:void 0,_="picker"in s.params?s.params.picker:void 0;return new $o(s.document,{colorType:e.type,expanded:l??!1,formatter:i,parser:Uo(e.type),pickerLayout:_??"popup",supportsAlpha:e.alpha,value:s.value,viewProps:s.viewProps})}};class Xi{constructor(e){this.components=e.components,this.asm_=e.assembly}constrain(e){const i=this.asm_.toComponents(e).map((l,_)=>{var B,L;return(L=(B=this.components[_])===null||B===void 0?void 0:B.constrain(l))!==null&&L!==void 0?L:l});return this.asm_.fromComponents(i)}}const Dr=z("pndtxt");class Pd{constructor(e,i){this.textViews=i.textViews,this.element=e.createElement("div"),this.element.classList.add(Dr()),this.textViews.forEach(l=>{const _=e.createElement("div");_.classList.add(Dr("a")),_.appendChild(l.element),this.element.appendChild(_)})}}function Dd(s,e,i){return new Mt(s,{arrayPosition:i===0?"fst":i===e.axes.length-1?"lst":"mid",baseStep:e.axes[i].baseStep,parser:e.parser,props:e.axes[i].textProps,value:ae(0,{constraint:e.axes[i].constraint}),viewProps:e.viewProps})}class Xo{constructor(e,i){this.value=i.value,this.viewProps=i.viewProps,this.acs_=i.axes.map((l,_)=>Dd(e,i,_)),this.acs_.forEach((l,_)=>{Qn({primary:this.value,secondary:l.value,forward:B=>i.assembly.toComponents(B.rawValue)[_],backward:(B,L)=>{const q=i.assembly.toComponents(B.rawValue);return q[_]=L.rawValue,i.assembly.fromComponents(q)}})}),this.view=new Pd(e,{textViews:this.acs_.map(l=>l.view)})}}function Sr(s,e){return"step"in s&&!C(s.step)?new wt(s.step,e):null}function Rr(s){return!C(s.max)&&!C(s.min)?new ii({max:s.max,min:s.min}):!C(s.max)||!C(s.min)?new In({max:s.max,min:s.min}):null}function Sd(s){const e=St(s,ii);if(e)return[e.values.get("min"),e.values.get("max")];const i=St(s,In);return i?[i.minValue,i.maxValue]:[void 0,void 0]}function Rd(s,e){const i=[],l=Sr(s,e);l&&i.push(l);const _=Rr(s);_&&i.push(_);const B=is(s.options);return B&&i.push(B),new yi(i)}const Ld={id:"input-number",type:"input",accept:(s,e)=>{if(typeof s!="number")return null;const i=ge,l=Be(e,{format:i.optional.function,max:i.optional.number,min:i.optional.number,options:i.optional.custom(Sn),step:i.optional.number});return l?{initialValue:s,params:l}:null},binding:{reader:s=>Fs,constraint:s=>Rd(s.params,s.initialValue),writer:s=>Dn},controller:s=>{var e;const i=s.value,l=s.constraint,_=l&&St(l,Qi);if(_)return new Ot(s.document,{props:new Z({options:_.values.value("options")}),value:i,viewProps:s.viewProps});const B=(e="format"in s.params?s.params.format:void 0)!==null&&e!==void 0?e:We(Si(l,i.rawValue)),L=l&&St(l,ii);return L?new Os(s.document,{baseStep:$i(l),parser:dt,sliderProps:new Z({maxValue:L.values.value("max"),minValue:L.values.value("min")}),textProps:Z.fromObject({draggingScale:bi(l,i.rawValue),formatter:B}),value:i,viewProps:s.viewProps}):new Mt(s.document,{baseStep:$i(l),parser:dt,props:Z.fromObject({draggingScale:bi(l,i.rawValue),formatter:B}),value:i,viewProps:s.viewProps})}};class Zi{constructor(e=0,i=0){this.x=e,this.y=i}getComponents(){return[this.x,this.y]}static isObject(e){if(C(e))return!1;const i=e.x,l=e.y;return!(typeof i!="number"||typeof l!="number")}static equals(e,i){return e.x===i.x&&e.y===i.y}toObject(){return{x:this.x,y:this.y}}}const Lr={toComponents:s=>s.getComponents(),fromComponents:s=>new Zi(...s)},as=z("p2d");class Md{constructor(e,i){this.element=e.createElement("div"),this.element.classList.add(as()),i.viewProps.bindClassModifiers(this.element),S(i.expanded,K(this.element,as(void 0,"expanded")));const l=e.createElement("div");l.classList.add(as("h")),this.element.appendChild(l);const _=e.createElement("button");_.classList.add(as("b")),_.appendChild(Vt(e,"p2dpad")),i.viewProps.bindDisabled(_),l.appendChild(_),this.buttonElement=_;const B=e.createElement("div");if(B.classList.add(as("t")),l.appendChild(B),this.textElement=B,i.pickerLayout==="inline"){const L=e.createElement("div");L.classList.add(as("p")),this.element.appendChild(L),this.pickerElement=L}else this.pickerElement=null}}const en=z("p2dp");class Td{constructor(e,i){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.invertsY_=i.invertsY,this.maxValue_=i.maxValue,this.element=e.createElement("div"),this.element.classList.add(en()),i.layout==="popup"&&this.element.classList.add(en(void 0,"p")),i.viewProps.bindClassModifiers(this.element);const l=e.createElement("div");l.classList.add(en("p")),i.viewProps.bindTabIndex(l),this.element.appendChild(l),this.padElement=l;const _=e.createElementNS(Oe,"svg");_.classList.add(en("g")),this.padElement.appendChild(_),this.svgElem_=_;const B=e.createElementNS(Oe,"line");B.classList.add(en("ax")),B.setAttributeNS(null,"x1","0"),B.setAttributeNS(null,"y1","50%"),B.setAttributeNS(null,"x2","100%"),B.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(B);const L=e.createElementNS(Oe,"line");L.classList.add(en("ax")),L.setAttributeNS(null,"x1","50%"),L.setAttributeNS(null,"y1","0"),L.setAttributeNS(null,"x2","50%"),L.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(L);const q=e.createElementNS(Oe,"line");q.classList.add(en("l")),q.setAttributeNS(null,"x1","50%"),q.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(q),this.lineElem_=q;const ie=e.createElement("div");ie.classList.add(en("m")),this.padElement.appendChild(ie),this.markerElem_=ie,i.value.emitter.on("change",this.onValueChange_),this.value=i.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[e,i]=this.value.rawValue.getComponents(),l=this.maxValue_,_=ye(e,-l,+l,0,100),B=ye(i,-l,+l,0,100),L=this.invertsY_?100-B:B;this.lineElem_.setAttributeNS(null,"x2",`${_}%`),this.lineElem_.setAttributeNS(null,"y2",`${L}%`),this.markerElem_.style.left=`${_}%`,this.markerElem_.style.top=`${L}%`}onValueChange_(){this.update_()}onFoldableChange_(){this.update_()}}function Mr(s,e,i){return[ot(e[0],jt(s)),ot(e[1],Yi(s))*(i?1:-1)]}class Fd{constructor(e,i){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=i.value,this.viewProps=i.viewProps,this.baseSteps_=i.baseSteps,this.maxValue_=i.maxValue,this.invertsY_=i.invertsY,this.view=new Td(e,{invertsY:this.invertsY_,layout:i.layout,maxValue:this.maxValue_,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Di(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(e,i){if(!e.point)return;const l=this.maxValue_,_=ye(e.point.x,0,e.bounds.width,-l,+l),B=ye(this.invertsY_?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-l,+l);this.value.setRawValue(new Zi(_,B),i)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onPadKeyDown_(e){Vs(e.key)&&e.preventDefault();const[i,l]=Mr(e,this.baseSteps_,this.invertsY_);i===0&&l===0||this.value.setRawValue(new Zi(this.value.rawValue.x+i,this.value.rawValue.y+l),{forceEmit:!1,last:!1})}onPadKeyUp_(e){const[i,l]=Mr(e,this.baseSteps_,this.invertsY_);i===0&&l===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class zd{constructor(e,i){var l,_;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=i.value,this.viewProps=i.viewProps,this.foldable_=je.create(i.expanded),this.popC_=i.pickerLayout==="popup"?new Jn(e,{viewProps:this.viewProps}):null;const B=new Fd(e,{baseSteps:[i.axes[0].baseStep,i.axes[1].baseStep],invertsY:i.invertsY,layout:i.pickerLayout,maxValue:i.maxValue,value:this.value,viewProps:this.viewProps});B.view.allFocusableElements.forEach(L=>{L.addEventListener("blur",this.onPopupChildBlur_),L.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=B,this.textC_=new Xo(e,{assembly:Lr,axes:i.axes,parser:i.parser,value:this.value,viewProps:this.viewProps}),this.view=new Md(e,{expanded:this.foldable_.value("expanded"),pickerLayout:i.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(l=this.view.buttonElement)===null||l===void 0||l.addEventListener("blur",this.onPadButtonBlur_),(_=this.view.buttonElement)===null||_===void 0||_.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Qn({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:L=>L.rawValue,backward:(L,q)=>q.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),pn(this.foldable_,this.view.pickerElement))}onPadButtonBlur_(e){if(!this.popC_)return;const i=this.view.element,l=e.relatedTarget;(!l||!i.contains(l))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const i=this.popC_.view.element,l=M(e);l&&i.contains(l)||l&&l===this.view.buttonElement&&!Jt(i.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.view.buttonElement.focus()}}class rs{constructor(e=0,i=0,l=0){this.x=e,this.y=i,this.z=l}getComponents(){return[this.x,this.y,this.z]}static isObject(e){if(C(e))return!1;const i=e.x,l=e.y,_=e.z;return!(typeof i!="number"||typeof l!="number"||typeof _!="number")}static equals(e,i){return e.x===i.x&&e.y===i.y&&e.z===i.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const Tr={toComponents:s=>s.getComponents(),fromComponents:s=>new rs(...s)};function Nd(s){return rs.isObject(s)?new rs(s.x,s.y,s.z):new rs}function Vd(s,e){s.writeProperty("x",e.x),s.writeProperty("y",e.y),s.writeProperty("z",e.z)}function Gd(s,e){return new Xi({assembly:Tr,components:[Ri("x"in s?s.x:void 0,e.x),Ri("y"in s?s.y:void 0,e.y),Ri("z"in s?s.z:void 0,e.z)]})}function Zo(s,e){return{baseStep:$i(e),constraint:e,textProps:Z.fromObject({draggingScale:bi(e,s),formatter:We(Si(e,s))})}}const Od={id:"input-point3d",type:"input",accept:(s,e)=>{if(!rs.isObject(s))return null;const i=ge,l=Be(e,{x:i.optional.custom(oi),y:i.optional.custom(oi),z:i.optional.custom(oi)});return l?{initialValue:s,params:l}:null},binding:{reader:s=>Nd,constraint:s=>Gd(s.params,s.initialValue),equals:rs.equals,writer:s=>Vd},controller:s=>{const e=s.value,i=s.constraint;if(!(i instanceof Xi))throw D.shouldNeverHappen();return new Xo(s.document,{assembly:Tr,axes:[Zo(e.rawValue.x,i.components[0]),Zo(e.rawValue.y,i.components[1]),Zo(e.rawValue.z,i.components[2])],parser:dt,value:e,viewProps:s.viewProps})}};class ls{constructor(e=0,i=0,l=0,_=0){this.x=e,this.y=i,this.z=l,this.w=_}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(e){if(C(e))return!1;const i=e.x,l=e.y,_=e.z,B=e.w;return!(typeof i!="number"||typeof l!="number"||typeof _!="number"||typeof B!="number")}static equals(e,i){return e.x===i.x&&e.y===i.y&&e.z===i.z&&e.w===i.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const Fr={toComponents:s=>s.getComponents(),fromComponents:s=>new ls(...s)};function Ud(s){return ls.isObject(s)?new ls(s.x,s.y,s.z,s.w):new ls}function jd(s,e){s.writeProperty("x",e.x),s.writeProperty("y",e.y),s.writeProperty("z",e.z),s.writeProperty("w",e.w)}function Hd(s,e){return new Xi({assembly:Fr,components:[Ri("x"in s?s.x:void 0,e.x),Ri("y"in s?s.y:void 0,e.y),Ri("z"in s?s.z:void 0,e.z),Ri("w"in s?s.w:void 0,e.w)]})}function Kd(s,e){return{baseStep:$i(e),constraint:e,textProps:Z.fromObject({draggingScale:bi(e,s),formatter:We(Si(e,s))})}}const qd={id:"input-point4d",type:"input",accept:(s,e)=>{if(!ls.isObject(s))return null;const i=ge,l=Be(e,{x:i.optional.custom(oi),y:i.optional.custom(oi),z:i.optional.custom(oi),w:i.optional.custom(oi)});return l?{initialValue:s,params:l}:null},binding:{reader:s=>Ud,constraint:s=>Hd(s.params,s.initialValue),equals:ls.equals,writer:s=>jd},controller:s=>{const e=s.value,i=s.constraint;if(!(i instanceof Xi))throw D.shouldNeverHappen();return new Xo(s.document,{assembly:Fr,axes:e.rawValue.getComponents().map((l,_)=>Kd(l,i.components[_])),parser:dt,value:e,viewProps:s.viewProps})}};function Yd(s){const e=[],i=is(s.options);return i&&e.push(i),new yi(e)}const Jd={id:"input-string",type:"input",accept:(s,e)=>{if(typeof s!="string")return null;const i=Be(e,{options:ge.optional.custom(Sn)});return i?{initialValue:s,params:i}:null},binding:{reader:s=>Zn,constraint:s=>Yd(s.params),writer:s=>Dn},controller:s=>{const e=s.document,i=s.value,l=s.constraint,_=l&&St(l,Qi);return _?new Ot(e,{props:new Z({options:_.values.value("options")}),value:i,viewProps:s.viewProps}):new pi(e,{parser:B=>B,props:Z.fromObject({formatter:Ns}),value:i,viewProps:s.viewProps})}},Ks={monitor:{defaultInterval:200,defaultLineCount:3}},zr=z("mll");class $d{constructor(e,i){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=i.formatter,this.element=e.createElement("div"),this.element.classList.add(zr()),i.viewProps.bindClassModifiers(this.element);const l=e.createElement("textarea");l.classList.add(zr("i")),l.style.height=`calc(var(--bld-us) * ${i.lineCount})`,l.readOnly=!0,i.viewProps.bindDisabled(l),this.element.appendChild(l),this.textareaElem_=l,i.value.emitter.on("change",this.onValueUpdate_),this.value=i.value,this.update_()}update_(){const e=this.textareaElem_,i=e.scrollTop===e.scrollHeight-e.clientHeight,l=[];this.value.rawValue.forEach(_=>{_!==void 0&&l.push(this.formatter_(_))}),e.textContent=l.join(`
`),i&&(e.scrollTop=e.scrollHeight)}onValueUpdate_(){this.update_()}}class ea{constructor(e,i){this.value=i.value,this.viewProps=i.viewProps,this.view=new $d(e,{formatter:i.formatter,lineCount:i.lineCount,value:this.value,viewProps:this.viewProps})}}const Nr=z("sgl");class Wd{constructor(e,i){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=i.formatter,this.element=e.createElement("div"),this.element.classList.add(Nr()),i.viewProps.bindClassModifiers(this.element);const l=e.createElement("input");l.classList.add(Nr("i")),l.readOnly=!0,l.type="text",i.viewProps.bindDisabled(l),this.element.appendChild(l),this.inputElement=l,i.value.emitter.on("change",this.onValueUpdate_),this.value=i.value,this.update_()}update_(){const e=this.value.rawValue,i=e[e.length-1];this.inputElement.value=i!==void 0?this.formatter_(i):""}onValueUpdate_(){this.update_()}}class ta{constructor(e,i){this.value=i.value,this.viewProps=i.viewProps,this.view=new Wd(e,{formatter:i.formatter,value:this.value,viewProps:this.viewProps})}}const Xd={id:"monitor-bool",type:"monitor",accept:(s,e)=>{if(typeof s!="boolean")return null;const i=Be(e,{lineCount:ge.optional.number});return i?{initialValue:s,params:i}:null},binding:{reader:s=>Ut},controller:s=>{var e;return s.value.rawValue.length===1?new ta(s.document,{formatter:ki,value:s.value,viewProps:s.viewProps}):new ea(s.document,{formatter:ki,lineCount:(e=s.params.lineCount)!==null&&e!==void 0?e:Ks.monitor.defaultLineCount,value:s.value,viewProps:s.viewProps})}},tn=z("grl");class Zd{constructor(e,i){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(tn()),i.viewProps.bindClassModifiers(this.element),this.formatter_=i.formatter,this.props_=i.props,this.cursor_=i.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const l=e.createElementNS(Oe,"svg");l.classList.add(tn("g")),l.style.height=`calc(var(--bld-us) * ${i.lineCount})`,this.element.appendChild(l),this.svgElem_=l;const _=e.createElementNS(Oe,"polyline");this.svgElem_.appendChild(_),this.lineElem_=_;const B=e.createElement("div");B.classList.add(tn("t"),z("tt")()),this.element.appendChild(B),this.tooltipElem_=B,i.value.emitter.on("change",this.onValueUpdate_),this.value=i.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const e=this.svgElem_.getBoundingClientRect(),i=this.value.rawValue.length-1,l=this.props_.get("minValue"),_=this.props_.get("maxValue"),B=[];this.value.rawValue.forEach((me,Ee)=>{if(me===void 0)return;const Mn=ye(Ee,0,i,0,e.width),Tn=ye(me,l,_,e.height,0);B.push([Mn,Tn].join(","))}),this.lineElem_.setAttributeNS(null,"points",B.join(" "));const L=this.tooltipElem_,q=this.value.rawValue[this.cursor_.rawValue];if(q===void 0){L.classList.remove(tn("t","a"));return}const ie=ye(this.cursor_.rawValue,0,i,0,e.width),se=ye(q,l,_,e.height,0);L.style.left=`${ie}px`,L.style.top=`${se}px`,L.textContent=`${this.formatter_(q)}`,L.classList.contains(tn("t","a"))||(L.classList.add(tn("t","a"),tn("t","in")),Xe(L),L.classList.remove(tn("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class eh{constructor(e,i){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props_=i.props,this.value=i.value,this.viewProps=i.viewProps,this.cursor_=ae(-1),this.view=new Zd(e,{cursor:this.cursor_,formatter:i.formatter,lineCount:i.lineCount,props:this.props_,value:this.value,viewProps:this.viewProps}),!Jt(e))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const l=new Di(this.view.element);l.emitter.on("down",this.onGraphPointerDown_),l.emitter.on("move",this.onGraphPointerMove_),l.emitter.on("up",this.onGraphPointerUp_)}}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(e){const i=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor(ye(e.offsetX,0,i.width,0,this.value.rawValue.length))}onGraphPointerDown_(e){this.onGraphPointerMove_(e)}onGraphPointerMove_(e){if(!e.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(ye(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function ia(s){return"format"in s&&!C(s.format)?s.format:We(2)}function th(s){var e;return s.value.rawValue.length===1?new ta(s.document,{formatter:ia(s.params),value:s.value,viewProps:s.viewProps}):new ea(s.document,{formatter:ia(s.params),lineCount:(e=s.params.lineCount)!==null&&e!==void 0?e:Ks.monitor.defaultLineCount,value:s.value,viewProps:s.viewProps})}function ih(s){var e,i,l;return new eh(s.document,{formatter:ia(s.params),lineCount:(e=s.params.lineCount)!==null&&e!==void 0?e:Ks.monitor.defaultLineCount,props:Z.fromObject({maxValue:(i="max"in s.params?s.params.max:null)!==null&&i!==void 0?i:100,minValue:(l="min"in s.params?s.params.min:null)!==null&&l!==void 0?l:0}),value:s.value,viewProps:s.viewProps})}function Vr(s){return"view"in s&&s.view==="graph"}const nh={id:"monitor-number",type:"monitor",accept:(s,e)=>{if(typeof s!="number")return null;const i=ge,l=Be(e,{format:i.optional.function,lineCount:i.optional.number,max:i.optional.number,min:i.optional.number,view:i.optional.string});return l?{initialValue:s,params:l}:null},binding:{defaultBufferSize:s=>Vr(s)?64:1,reader:s=>Fs},controller:s=>Vr(s.params)?ih(s):th(s)},sh={id:"monitor-string",type:"monitor",accept:(s,e)=>{if(typeof s!="string")return null;const i=ge,l=Be(e,{lineCount:i.optional.number,multiline:i.optional.boolean});return l?{initialValue:s,params:l}:null},binding:{reader:s=>Zn},controller:s=>{var e;const i=s.value;return i.rawValue.length>1||"multiline"in s.params&&s.params.multiline?new ea(s.document,{formatter:Ns,lineCount:(e=s.params.lineCount)!==null&&e!==void 0?e:Ks.monitor.defaultLineCount,value:i,viewProps:s.viewProps}):new ta(s.document,{formatter:Ns,value:i,viewProps:s.viewProps})}};function oh(s,e){var i;const l=s.accept(e.target.read(),e.params);if(C(l))return null;const _=ge,B={target:e.target,initialValue:l.initialValue,params:l.params},L=s.binding.reader(B),q=s.binding.constraint?s.binding.constraint(B):void 0,ie=ae(L(l.initialValue),{constraint:q,equals:s.binding.equals}),se=new Dt({reader:L,target:e.target,value:ie,writer:s.binding.writer(B)}),me=_.optional.boolean(e.params.disabled).value,Ee=_.optional.boolean(e.params.hidden).value,Mn=s.controller({constraint:q,document:e.document,initialValue:l.initialValue,params:l.params,value:se.value,viewProps:Ye.create({disabled:me,hidden:Ee})});return new xe(e.document,{binding:se,blade:yt(),props:Z.fromObject({label:"label"in e.params?(i=_.optional.string(e.params.label).value)!==null&&i!==void 0?i:null:e.target.key}),valueController:Mn})}function ah(s,e){return e===0?new qi:new Le(s,e??Ks.monitor.defaultInterval)}function rh(s,e){var i,l,_;const B=ge,L=s.accept(e.target.read(),e.params);if(C(L))return null;const q={target:e.target,initialValue:L.initialValue,params:L.params},ie=s.binding.reader(q),se=(l=(i=B.optional.number(e.params.bufferSize).value)!==null&&i!==void 0?i:s.binding.defaultBufferSize&&s.binding.defaultBufferSize(L.params))!==null&&l!==void 0?l:1,me=B.optional.number(e.params.interval).value,Ee=new En({reader:ie,target:e.target,ticker:ah(e.document,me),value:ct(se)}),Mn=B.optional.boolean(e.params.disabled).value,Tn=B.optional.boolean(e.params.hidden).value,cs=s.controller({document:e.document,params:L.params,value:Ee.value,viewProps:Ye.create({disabled:Mn,hidden:Tn})});return new Qe(e.document,{binding:Ee,blade:yt(),props:Z.fromObject({label:"label"in e.params?(_=B.optional.string(e.params.label).value)!==null&&_!==void 0?_:null:e.target.key}),valueController:cs})}class lh{constructor(){this.pluginsMap_={blades:[],inputs:[],monitors:[]}}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(e){e.type==="blade"?this.pluginsMap_.blades.unshift(e):e.type==="input"?this.pluginsMap_.inputs.unshift(e):e.type==="monitor"&&this.pluginsMap_.monitors.unshift(e)}createInput(e,i,l){const _=i.read();if(C(_))throw new D({context:{key:i.key},type:"nomatchingcontroller"});const B=this.pluginsMap_.inputs.reduce((L,q)=>L??oh(q,{document:e,target:i,params:l}),null);if(B)return B;throw new D({context:{key:i.key},type:"nomatchingcontroller"})}createMonitor(e,i,l){const _=this.pluginsMap_.monitors.reduce((B,L)=>B??rh(L,{document:e,params:l,target:i}),null);if(_)return _;throw new D({context:{key:i.key},type:"nomatchingcontroller"})}createBlade(e,i){const l=this.pluginsMap_.blades.reduce((_,B)=>_??Ki(B,{document:e,params:i}),null);if(!l)throw new D({type:"nomatchingview",context:{params:i}});return l}createBladeApi(e){if(e instanceof xe)return new Ii(e);if(e instanceof Qe)return new bn(e);if(e instanceof Qt)return new ft(e,this);const i=this.pluginsMap_.blades.reduce((l,_)=>l??_.api({controller:e,pool:this}),null);if(!i)throw D.shouldNeverHappen();return i}}function ch(){const s=new lh;return[gh,Od,qd,Jd,Ld,kd,Qd,Id,u,Xd,sh,nh,Gt,Ce,Qs,Cn].forEach(e=>{s.register(e)}),s}function dh(s){return Zi.isObject(s)?new Zi(s.x,s.y):new Zi}function hh(s,e){s.writeProperty("x",e.x),s.writeProperty("y",e.y)}function Ri(s,e){if(!s)return;const i=[],l=Sr(s,e);l&&i.push(l);const _=Rr(s);return _&&i.push(_),new yi(i)}function Ah(s,e){return new Xi({assembly:Lr,components:[Ri("x"in s?s.x:void 0,e.x),Ri("y"in s?s.y:void 0,e.y)]})}function Gr(s,e){const[i,l]=s?Sd(s):[];if(!C(i)||!C(l))return Math.max(Math.abs(i??0),Math.abs(l??0));const _=$i(s);return Math.max(Math.abs(_)*10,Math.abs(e)*10)}function ph(s,e){const i=e instanceof Xi?e.components[0]:void 0,l=e instanceof Xi?e.components[1]:void 0,_=Gr(i,s.x),B=Gr(l,s.y);return Math.max(_,B)}function Or(s,e){return{baseStep:$i(e),constraint:e,textProps:Z.fromObject({draggingScale:bi(e,s),formatter:We(Si(e,s))})}}function uh(s){if(!("y"in s))return!1;const e=s.y;return e&&"inverted"in e?!!e.inverted:!1}const gh={id:"input-point2d",type:"input",accept:(s,e)=>{if(!Zi.isObject(s))return null;const i=ge,l=Be(e,{expanded:i.optional.boolean,picker:i.optional.custom(Us),x:i.optional.custom(oi),y:i.optional.object({inverted:i.optional.boolean,max:i.optional.number,min:i.optional.number,step:i.optional.number})});return l?{initialValue:s,params:l}:null},binding:{reader:s=>dh,constraint:s=>Ah(s.params,s.initialValue),equals:Zi.equals,writer:s=>hh},controller:s=>{const e=s.document,i=s.value,l=s.constraint;if(!(l instanceof Xi))throw D.shouldNeverHappen();const _="expanded"in s.params?s.params.expanded:void 0,B="picker"in s.params?s.params.picker:void 0;return new zd(e,{axes:[Or(i.rawValue.x,l.components[0]),Or(i.rawValue.y,l.components[1])],expanded:_??!1,invertsY:uh(s.params),maxValue:ph(i.rawValue,l),parser:dt,pickerLayout:B??"popup",value:i,viewProps:s.viewProps})}};class Ur extends r{constructor(e){super(e),this.emitter_=new k,this.controller_.valueController.value.emitter.on("change",i=>{this.emitter_.emit("change",{event:new h(this,i.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(e){this.controller_.props.set("label",e)}get options(){return this.controller_.valueController.props.get("options")}set options(e){this.controller_.valueController.props.set("options",e)}get value(){return this.controller_.valueController.value.rawValue}set value(e){this.controller_.valueController.value.rawValue=e}on(e,i){const l=i.bind(this);return this.emitter_.on(e,_=>{l(_.event)}),this}}class jr extends r{constructor(e){super(e),this.emitter_=new k,this.controller_.valueController.value.emitter.on("change",i=>{this.emitter_.emit("change",{event:new h(this,i.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(e){this.controller_.props.set("label",e)}get maxValue(){return this.controller_.valueController.sliderController.props.get("maxValue")}set maxValue(e){this.controller_.valueController.sliderController.props.set("maxValue",e)}get minValue(){return this.controller_.valueController.sliderController.props.get("minValue")}set minValue(e){this.controller_.valueController.sliderController.props.set("minValue",e)}get value(){return this.controller_.valueController.value.rawValue}set value(e){this.controller_.valueController.value.rawValue=e}on(e,i){const l=i.bind(this);return this.emitter_.on(e,_=>{l(_.event)}),this}}class Hr extends r{constructor(e){super(e),this.emitter_=new k,this.controller_.valueController.value.emitter.on("change",i=>{this.emitter_.emit("change",{event:new h(this,i.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(e){this.controller_.props.set("label",e)}get formatter(){return this.controller_.valueController.props.get("formatter")}set formatter(e){this.controller_.valueController.props.set("formatter",e)}get value(){return this.controller_.valueController.value.rawValue}set value(e){this.controller_.valueController.value.rawValue=e}on(e,i){const l=i.bind(this);return this.emitter_.on(e,_=>{l(_.event)}),this}}const bh=function(){return{id:"list",type:"blade",accept(s){const e=ge,i=Be(s,{options:e.required.custom(Sn),value:e.required.raw,view:e.required.constant("list"),label:e.optional.string});return i?{params:i}:null},controller(s){const e=new Qi(Ji(s.params.options)),i=ae(s.params.value,{constraint:e}),l=new Ot(s.document,{props:new Z({options:e.values.value("options")}),value:i,viewProps:s.viewProps});return new le(s.document,{blade:s.blade,props:Z.fromObject({label:s.params.label}),valueController:l})},api(s){return!(s.controller instanceof le)||!(s.controller.valueController instanceof Ot)?null:new Ur(s.controller)}}}();function mh(s){return s.reduce((e,i)=>Object.assign(e,{[i.presetKey]:i.read()}),{})}function vh(s,e){s.forEach(i=>{const l=e[i.target.presetKey];l!==void 0&&i.writer(i.target,i.reader(l))})}class fh extends di{constructor(e,i){super(e,i)}get element(){return this.controller_.view.element}importPreset(e){const i=this.controller_.rackController.rack.find(xe).map(l=>l.binding);vh(i,e),this.refresh()}exportPreset(){const e=this.controller_.rackController.rack.find(xe).map(i=>i.binding.target);return mh(e)}refresh(){this.controller_.rackController.rack.find(xe).forEach(e=>{e.binding.read()}),this.controller_.rackController.rack.find(Qe).forEach(e=>{e.binding.read()})}}class _h extends Bi{constructor(e,i){super(e,{expanded:i.expanded,blade:i.blade,props:i.props,root:!0,viewProps:i.viewProps})}}const wh={id:"slider",type:"blade",accept(s){const e=ge,i=Be(s,{max:e.required.number,min:e.required.number,view:e.required.constant("slider"),format:e.optional.function,label:e.optional.string,value:e.optional.number});return i?{params:i}:null},controller(s){var e,i;const l=(e=s.params.value)!==null&&e!==void 0?e:0,_=new ii({max:s.params.max,min:s.params.min}),B=new Os(s.document,{baseStep:1,parser:dt,sliderProps:new Z({maxValue:_.values.value("max"),minValue:_.values.value("min")}),textProps:Z.fromObject({draggingScale:bi(void 0,l),formatter:(i=s.params.format)!==null&&i!==void 0?i:zs}),value:ae(l,{constraint:_}),viewProps:s.viewProps});return new le(s.document,{blade:s.blade,props:Z.fromObject({label:s.params.label}),valueController:B})},api(s){return!(s.controller instanceof le)||!(s.controller.valueController instanceof Os)?null:new jr(s.controller)}},Ch=function(){return{id:"text",type:"blade",accept(s){const e=ge,i=Be(s,{parse:e.required.function,value:e.required.raw,view:e.required.constant("text"),format:e.optional.function,label:e.optional.string});return i?{params:i}:null},controller(s){var e;const i=new pi(s.document,{parser:s.params.parse,props:Z.fromObject({formatter:(e=s.params.format)!==null&&e!==void 0?e:l=>String(l)}),value:ae(s.params.value),viewProps:s.viewProps});return new le(s.document,{blade:s.blade,props:Z.fromObject({label:s.params.label}),valueController:i})},api(s){return!(s.controller instanceof le)||!(s.controller.valueController instanceof pi)?null:new Hr(s.controller)}}}();function Eh(s){const e=s.createElement("div");return e.classList.add(z("dfw")()),s.body&&s.body.appendChild(e),e}function Kr(s,e,i){if(s.querySelector(`style[data-tp-style=${e}]`))return;const l=s.createElement("style");l.dataset.tpStyle=e,l.textContent=i,s.head.appendChild(l)}class Ih extends fh{constructor(e){var i,l;const _=e??{},B=(i=_.document)!==null&&i!==void 0?i:Ci(),L=ch(),q=new _h(B,{expanded:_.expanded,blade:yt(),props:Z.fromObject({title:_.title}),viewProps:Ye.create()});super(q,L),this.pool_=L,this.containerElem_=(l=_.container)!==null&&l!==void 0?l:Eh(B),this.containerElem_.appendChild(this.element),this.doc_=B,this.usesDefaultWrapper_=!_.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw D.alreadyDisposed();return this.doc_}dispose(){const e=this.containerElem_;if(!e)throw D.alreadyDisposed();if(this.usesDefaultWrapper_){const i=e.parentElement;i&&i.removeChild(e)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(e){("plugin"in e?[e.plugin]:"plugins"in e?e.plugins:[]).forEach(i=>{this.pool_.register(i),this.embedPluginStyle_(i)})}embedPluginStyle_(e){e.css&&Kr(this.document,`plugin-${e.id}`,e.css)}setUpDefaultPlugins_(){Kr(this.document,"default",'.tp-tbiv_b,.tp-coltxtv_ms,.tp-ckbv_i,.tp-rotv_b,.tp-fldv_b,.tp-mllv_i,.tp-sglv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-mllv_i,.tp-sglv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-mllv_i::-webkit-scrollbar,.tp-sglv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-mllv_i::-webkit-scrollbar-corner,.tp-sglv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-mllv_i::-webkit-scrollbar-thumb,.tp-sglv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-v-p))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tabv_c .tp-brkv>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:var(--cnt-h-p);padding-right:calc(4px + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--bld-us)*3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_c{padding-bottom:var(--cnt-v-p);padding-left:4px;padding-top:var(--cnt-v-p)}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);bottom:2px;content:"";left:0;pointer-events:none;position:absolute;right:0;top:0}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}'),this.pool_.getAll().forEach(e=>{this.embedPluginStyle_(e)}),this.registerPlugin({plugins:[wh,bh,Cn,Ch]})}}const xh=new n("3.1.9");t.BladeApi=r,t.ButtonApi=F,t.FolderApi=di,t.InputBindingApi=Ii,t.ListApi=Ur,t.MonitorBindingApi=bn,t.Pane=Ih,t.SeparatorApi=He,t.SliderApi=jr,t.TabApi=_n,t.TabPageApi=fn,t.TextApi=Hr,t.TpChangeEvent=h,t.VERSION=xh,Object.defineProperty(t,"__esModule",{value:!0})})})(Ta,Ta.exports);var ws=Ta.exports;function tl(p,o){if(o===dA)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),p;if(o===La||o===Jl){let t=p.getIndex();if(t===null){const h=[],g=p.getAttribute("position");if(g!==void 0){for(let m=0;m<g.count;m++)h.push(m);p.setIndex(h),t=p.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),p}const n=t.count-2,r=[];if(o===La)for(let h=1;h<=n;h++)r.push(t.getX(0)),r.push(t.getX(h)),r.push(t.getX(h+1));else for(let h=0;h<n;h++)h%2===0?(r.push(t.getX(h)),r.push(t.getX(h+1)),r.push(t.getX(h+2))):(r.push(t.getX(h+2)),r.push(t.getX(h+1)),r.push(t.getX(h)));r.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const c=p.clone();return c.setIndex(r),c.clearGroups(),c}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",o),p}class gc extends qa{constructor(o){super(o),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new Rp(t)}),this.register(function(t){return new Gp(t)}),this.register(function(t){return new Op(t)}),this.register(function(t){return new Up(t)}),this.register(function(t){return new Mp(t)}),this.register(function(t){return new Tp(t)}),this.register(function(t){return new Fp(t)}),this.register(function(t){return new zp(t)}),this.register(function(t){return new Sp(t)}),this.register(function(t){return new Np(t)}),this.register(function(t){return new Lp(t)}),this.register(function(t){return new Vp(t)}),this.register(function(t){return new Pp(t)}),this.register(function(t){return new jp(t)}),this.register(function(t){return new Hp(t)})}load(o,t,n,r){const c=this;let h;this.resourcePath!==""?h=this.resourcePath:this.path!==""?h=this.path:h=Pa.extractUrlBase(o),this.manager.itemStart(o);const g=function(v){r?r(v):console.error(v),c.manager.itemError(o),c.manager.itemEnd(o)},m=new rn(this.manager);m.setPath(this.path),m.setResponseType("arraybuffer"),m.setRequestHeader(this.requestHeader),m.setWithCredentials(this.withCredentials),m.load(o,function(v){try{c.parse(v,h,function(C){t(C),c.manager.itemEnd(o)},g)}catch(C){g(C)}},n,g)}setDRACOLoader(o){return this.dracoLoader=o,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(o){return this.ktx2Loader=o,this}setMeshoptDecoder(o){return this.meshoptDecoder=o,this}register(o){return this.pluginCallbacks.indexOf(o)===-1&&this.pluginCallbacks.push(o),this}unregister(o){return this.pluginCallbacks.indexOf(o)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(o),1),this}parse(o,t,n,r){let c;const h={},g={},m=new TextDecoder;if(typeof o=="string")c=JSON.parse(o);else if(o instanceof ArrayBuffer)if(m.decode(new Uint8Array(o,0,4))===bc){try{h[Ae.KHR_BINARY_GLTF]=new Kp(o)}catch(C){r&&r(C);return}c=JSON.parse(h[Ae.KHR_BINARY_GLTF].content)}else c=JSON.parse(m.decode(o));else c=o;if(c.asset===void 0||c.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const v=new ou(c,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});v.fileLoader.setRequestHeader(this.requestHeader);for(let C=0;C<this.pluginCallbacks.length;C++){const x=this.pluginCallbacks[C](v);g[x.name]=x,h[x.name]=!0}if(c.extensionsUsed)for(let C=0;C<c.extensionsUsed.length;++C){const x=c.extensionsUsed[C],Q=c.extensionsRequired||[];switch(x){case Ae.KHR_MATERIALS_UNLIT:h[x]=new Dp;break;case Ae.KHR_DRACO_MESH_COMPRESSION:h[x]=new qp(c,this.dracoLoader);break;case Ae.KHR_TEXTURE_TRANSFORM:h[x]=new Yp;break;case Ae.KHR_MESH_QUANTIZATION:h[x]=new Jp;break;default:Q.indexOf(x)>=0&&g[x]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+x+'".')}}v.setExtensions(h),v.setPlugins(g),v.parse(n,r)}parseAsync(o,t){const n=this;return new Promise(function(r,c){n.parse(o,t,r,c)})}}function kp(){let p={};return{get:function(o){return p[o]},add:function(o,t){p[o]=t},remove:function(o){delete p[o]},removeAll:function(){p={}}}}const Ae={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Pp{constructor(o){this.parser=o,this.name=Ae.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const o=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const c=t[n];c.extensions&&c.extensions[this.name]&&c.extensions[this.name].light!==void 0&&o._addNodeRef(this.cache,c.extensions[this.name].light)}}_loadLight(o){const t=this.parser,n="light:"+o;let r=t.cache.get(n);if(r)return r;const c=t.json,h=((c.extensions&&c.extensions[this.name]||{}).lights||[])[o];let g;const m=new Ft(16777215);h.color!==void 0&&m.fromArray(h.color);const v=h.range!==void 0?h.range:0;switch(h.type){case"directional":g=new Sa(m),g.target.position.set(0,0,-1),g.add(g.target);break;case"point":g=new Ol(m),g.distance=v;break;case"spot":g=new Da(m),g.distance=v,h.spot=h.spot||{},h.spot.innerConeAngle=h.spot.innerConeAngle!==void 0?h.spot.innerConeAngle:0,h.spot.outerConeAngle=h.spot.outerConeAngle!==void 0?h.spot.outerConeAngle:Math.PI/4,g.angle=h.spot.outerConeAngle,g.penumbra=1-h.spot.innerConeAngle/h.spot.outerConeAngle,g.target.position.set(0,0,-1),g.add(g.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+h.type)}return g.position.set(0,0,0),g.decay=2,on(g,h),h.intensity!==void 0&&(g.intensity=h.intensity),g.name=t.createUniqueName(h.name||"light_"+o),r=Promise.resolve(g),t.cache.add(n,r),r}getDependency(o,t){if(o==="light")return this._loadLight(t)}createNodeAttachment(o){const t=this,n=this.parser,r=n.json.nodes[o],c=(r.extensions&&r.extensions[this.name]||{}).light;return c===void 0?null:this._loadLight(c).then(function(h){return n._getNodeRef(t.cache,c,h)})}}class Dp{constructor(){this.name=Ae.KHR_MATERIALS_UNLIT}getMaterialType(){return vi}extendParams(o,t,n){const r=[];o.color=new Ft(1,1,1),o.opacity=1;const c=t.pbrMetallicRoughness;if(c){if(Array.isArray(c.baseColorFactor)){const h=c.baseColorFactor;o.color.fromArray(h),o.opacity=h[3]}c.baseColorTexture!==void 0&&r.push(n.assignTexture(o,"map",c.baseColorTexture,ri))}return Promise.all(r)}}class Sp{constructor(o){this.parser=o,this.name=Ae.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(o,t){const n=this.parser.json.materials[o];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name].emissiveStrength;return r!==void 0&&(t.emissiveIntensity=r),Promise.resolve()}}class Rp{constructor(o){this.parser=o,this.name=Ae.KHR_MATERIALS_CLEARCOAT}getMaterialType(o){const t=this.parser.json.materials[o];return!t.extensions||!t.extensions[this.name]?null:Tt}extendMaterialParams(o,t){const n=this.parser,r=n.json.materials[o];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const c=[],h=r.extensions[this.name];if(h.clearcoatFactor!==void 0&&(t.clearcoat=h.clearcoatFactor),h.clearcoatTexture!==void 0&&c.push(n.assignTexture(t,"clearcoatMap",h.clearcoatTexture)),h.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=h.clearcoatRoughnessFactor),h.clearcoatRoughnessTexture!==void 0&&c.push(n.assignTexture(t,"clearcoatRoughnessMap",h.clearcoatRoughnessTexture)),h.clearcoatNormalTexture!==void 0&&(c.push(n.assignTexture(t,"clearcoatNormalMap",h.clearcoatNormalTexture)),h.clearcoatNormalTexture.scale!==void 0)){const g=h.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Et(g,g)}return Promise.all(c)}}class Lp{constructor(o){this.parser=o,this.name=Ae.KHR_MATERIALS_IRIDESCENCE}getMaterialType(o){const t=this.parser.json.materials[o];return!t.extensions||!t.extensions[this.name]?null:Tt}extendMaterialParams(o,t){const n=this.parser,r=n.json.materials[o];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const c=[],h=r.extensions[this.name];return h.iridescenceFactor!==void 0&&(t.iridescence=h.iridescenceFactor),h.iridescenceTexture!==void 0&&c.push(n.assignTexture(t,"iridescenceMap",h.iridescenceTexture)),h.iridescenceIor!==void 0&&(t.iridescenceIOR=h.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),h.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=h.iridescenceThicknessMinimum),h.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=h.iridescenceThicknessMaximum),h.iridescenceThicknessTexture!==void 0&&c.push(n.assignTexture(t,"iridescenceThicknessMap",h.iridescenceThicknessTexture)),Promise.all(c)}}class Mp{constructor(o){this.parser=o,this.name=Ae.KHR_MATERIALS_SHEEN}getMaterialType(o){const t=this.parser.json.materials[o];return!t.extensions||!t.extensions[this.name]?null:Tt}extendMaterialParams(o,t){const n=this.parser,r=n.json.materials[o];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const c=[];t.sheenColor=new Ft(0,0,0),t.sheenRoughness=0,t.sheen=1;const h=r.extensions[this.name];return h.sheenColorFactor!==void 0&&t.sheenColor.fromArray(h.sheenColorFactor),h.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=h.sheenRoughnessFactor),h.sheenColorTexture!==void 0&&c.push(n.assignTexture(t,"sheenColorMap",h.sheenColorTexture,ri)),h.sheenRoughnessTexture!==void 0&&c.push(n.assignTexture(t,"sheenRoughnessMap",h.sheenRoughnessTexture)),Promise.all(c)}}class Tp{constructor(o){this.parser=o,this.name=Ae.KHR_MATERIALS_TRANSMISSION}getMaterialType(o){const t=this.parser.json.materials[o];return!t.extensions||!t.extensions[this.name]?null:Tt}extendMaterialParams(o,t){const n=this.parser,r=n.json.materials[o];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const c=[],h=r.extensions[this.name];return h.transmissionFactor!==void 0&&(t.transmission=h.transmissionFactor),h.transmissionTexture!==void 0&&c.push(n.assignTexture(t,"transmissionMap",h.transmissionTexture)),Promise.all(c)}}class Fp{constructor(o){this.parser=o,this.name=Ae.KHR_MATERIALS_VOLUME}getMaterialType(o){const t=this.parser.json.materials[o];return!t.extensions||!t.extensions[this.name]?null:Tt}extendMaterialParams(o,t){const n=this.parser,r=n.json.materials[o];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const c=[],h=r.extensions[this.name];t.thickness=h.thicknessFactor!==void 0?h.thicknessFactor:0,h.thicknessTexture!==void 0&&c.push(n.assignTexture(t,"thicknessMap",h.thicknessTexture)),t.attenuationDistance=h.attenuationDistance||1/0;const g=h.attenuationColor||[1,1,1];return t.attenuationColor=new Ft(g[0],g[1],g[2]),Promise.all(c)}}class zp{constructor(o){this.parser=o,this.name=Ae.KHR_MATERIALS_IOR}getMaterialType(o){const t=this.parser.json.materials[o];return!t.extensions||!t.extensions[this.name]?null:Tt}extendMaterialParams(o,t){const n=this.parser.json.materials[o];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name];return t.ior=r.ior!==void 0?r.ior:1.5,Promise.resolve()}}class Np{constructor(o){this.parser=o,this.name=Ae.KHR_MATERIALS_SPECULAR}getMaterialType(o){const t=this.parser.json.materials[o];return!t.extensions||!t.extensions[this.name]?null:Tt}extendMaterialParams(o,t){const n=this.parser,r=n.json.materials[o];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const c=[],h=r.extensions[this.name];t.specularIntensity=h.specularFactor!==void 0?h.specularFactor:1,h.specularTexture!==void 0&&c.push(n.assignTexture(t,"specularIntensityMap",h.specularTexture));const g=h.specularColorFactor||[1,1,1];return t.specularColor=new Ft(g[0],g[1],g[2]),h.specularColorTexture!==void 0&&c.push(n.assignTexture(t,"specularColorMap",h.specularColorTexture,ri)),Promise.all(c)}}class Vp{constructor(o){this.parser=o,this.name=Ae.KHR_MATERIALS_ANISOTROPY}getMaterialType(o){const t=this.parser.json.materials[o];return!t.extensions||!t.extensions[this.name]?null:Tt}extendMaterialParams(o,t){const n=this.parser,r=n.json.materials[o];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const c=[],h=r.extensions[this.name];return h.anisotropyStrength!==void 0&&(t.anisotropy=h.anisotropyStrength),h.anisotropyRotation!==void 0&&(t.anisotropyRotation=h.anisotropyRotation),h.anisotropyTexture!==void 0&&c.push(n.assignTexture(t,"anisotropyMap",h.anisotropyTexture)),Promise.all(c)}}class Gp{constructor(o){this.parser=o,this.name=Ae.KHR_TEXTURE_BASISU}loadTexture(o){const t=this.parser,n=t.json,r=n.textures[o];if(!r.extensions||!r.extensions[this.name])return null;const c=r.extensions[this.name],h=t.options.ktx2Loader;if(!h){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(o,c.source,h)}}class Op{constructor(o){this.parser=o,this.name=Ae.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(o){const t=this.name,n=this.parser,r=n.json,c=r.textures[o];if(!c.extensions||!c.extensions[t])return null;const h=c.extensions[t],g=r.images[h.source];let m=n.textureLoader;if(g.uri){const v=n.options.manager.getHandler(g.uri);v!==null&&(m=v)}return this.detectSupport().then(function(v){if(v)return n.loadTextureImage(o,h.source,m);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(o)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(o){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){o(t.height===1)}})),this.isSupported}}class Up{constructor(o){this.parser=o,this.name=Ae.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(o){const t=this.name,n=this.parser,r=n.json,c=r.textures[o];if(!c.extensions||!c.extensions[t])return null;const h=c.extensions[t],g=r.images[h.source];let m=n.textureLoader;if(g.uri){const v=n.options.manager.getHandler(g.uri);v!==null&&(m=v)}return this.detectSupport().then(function(v){if(v)return n.loadTextureImage(o,h.source,m);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(o)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(o){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){o(t.height===1)}})),this.isSupported}}class jp{constructor(o){this.name=Ae.EXT_MESHOPT_COMPRESSION,this.parser=o}loadBufferView(o){const t=this.parser.json,n=t.bufferViews[o];if(n.extensions&&n.extensions[this.name]){const r=n.extensions[this.name],c=this.parser.getDependency("buffer",r.buffer),h=this.parser.options.meshoptDecoder;if(!h||!h.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return c.then(function(g){const m=r.byteOffset||0,v=r.byteLength||0,C=r.count,x=r.byteStride,Q=new Uint8Array(g,m,v);return h.decodeGltfBufferAsync?h.decodeGltfBufferAsync(C,x,Q,r.mode,r.filter).then(function(P){return P.buffer}):h.ready.then(function(){const P=new ArrayBuffer(C*x);return h.decodeGltfBuffer(new Uint8Array(P),C,x,Q,r.mode,r.filter),P})})}else return null}}class Hp{constructor(o){this.name=Ae.EXT_MESH_GPU_INSTANCING,this.parser=o}createNodeMesh(o){const t=this.parser.json,n=t.nodes[o];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const r=t.meshes[n.mesh];for(const m of r.primitives)if(m.mode!==qt.TRIANGLES&&m.mode!==qt.TRIANGLE_STRIP&&m.mode!==qt.TRIANGLE_FAN&&m.mode!==void 0)return null;const c=n.extensions[this.name].attributes,h=[],g={};for(const m in c)h.push(this.parser.getDependency("accessor",c[m]).then(v=>(g[m]=v,g[m])));return h.length<1?null:(h.push(this.parser.createNodeMesh(o)),Promise.all(h).then(m=>{const v=m.pop(),C=v.isGroup?v.children:[v],x=m[0].count,Q=[];for(const P of C){const D=new _s,G=new Se,F=new Hn,k=new Se(1,1,1),T=new $h(P.geometry,P.material,x);for(let z=0;z<x;z++)g.TRANSLATION&&G.fromBufferAttribute(g.TRANSLATION,z),g.ROTATION&&F.fromBufferAttribute(g.ROTATION,z),g.SCALE&&k.fromBufferAttribute(g.SCALE,z),T.setMatrixAt(z,D.compose(G,F,k));for(const z in g)z!=="TRANSLATION"&&z!=="ROTATION"&&z!=="SCALE"&&P.geometry.setAttribute(z,g[z]);It.prototype.copy.call(T,P),this.parser.assignFinalMaterial(T),Q.push(T)}return v.isGroup?(v.clear(),v.add(...Q),v):Q[0]}))}}const bc="glTF",Ys=12,il={JSON:1313821514,BIN:5130562};class Kp{constructor(o){this.name=Ae.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(o,0,Ys),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(o.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==bc)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-Ys,c=new DataView(o,Ys);let h=0;for(;h<r;){const g=c.getUint32(h,!0);h+=4;const m=c.getUint32(h,!0);if(h+=4,m===il.JSON){const v=new Uint8Array(o,Ys+h,g);this.content=n.decode(v)}else if(m===il.BIN){const v=Ys+h;this.body=o.slice(v,v+g)}h+=g}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class qp{constructor(o,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Ae.KHR_DRACO_MESH_COMPRESSION,this.json=o,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(o,t){const n=this.json,r=this.dracoLoader,c=o.extensions[this.name].bufferView,h=o.extensions[this.name].attributes,g={},m={},v={};for(const C in h){const x=Fa[C]||C.toLowerCase();g[x]=h[C]}for(const C in o.attributes){const x=Fa[C]||C.toLowerCase();if(h[C]!==void 0){const Q=n.accessors[o.attributes[C]],P=fs[Q.componentType];v[x]=P.name,m[x]=Q.normalized===!0}}return t.getDependency("bufferView",c).then(function(C){return new Promise(function(x){r.decodeDracoFile(C,function(Q){for(const P in Q.attributes){const D=Q.attributes[P],G=m[P];G!==void 0&&(D.normalized=G)}x(Q)},g,v)})})}}class Yp{constructor(){this.name=Ae.KHR_TEXTURE_TRANSFORM}extendTexture(o,t){return(t.texCoord===void 0||t.texCoord===o.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(o=o.clone(),t.texCoord!==void 0&&(o.channel=t.texCoord),t.offset!==void 0&&o.offset.fromArray(t.offset),t.rotation!==void 0&&(o.rotation=t.rotation),t.scale!==void 0&&o.repeat.fromArray(t.scale),o.needsUpdate=!0),o}}class Jp{constructor(){this.name=Ae.KHR_MESH_QUANTIZATION}}class mc extends mA{constructor(o,t,n,r){super(o,t,n,r)}copySampleValue_(o){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,c=o*r*3+r;for(let h=0;h!==r;h++)t[h]=n[c+h];return t}interpolate_(o,t,n,r){const c=this.resultBuffer,h=this.sampleValues,g=this.valueSize,m=g*2,v=g*3,C=r-t,x=(n-t)/C,Q=x*x,P=Q*x,D=o*v,G=D-v,F=-2*P+3*Q,k=P-Q,T=1-F,z=k-Q+x;for(let J=0;J!==g;J++){const O=h[G+J+g],S=h[G+J+m]*C,U=h[D+J+g],ee=h[D+J]*C;c[J]=T*O+z*S+F*U+k*ee}return c}}const $p=new Hn;class Wp extends mc{interpolate_(o,t,n,r){const c=super.interpolate_(o,t,n,r);return $p.fromArray(c).normalize().toArray(c),c}}const qt={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},fs={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},nl={9728:$l,9729:io,9984:Wl,9985:Xl,9986:Zl,9987:Do},sl={33071:ec,33648:tc,10497:yo},ua={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Fa={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},nn={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Xp={CUBICSPLINE:void 0,LINEAR:ql,STEP:hA},ga={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Zp(p){return p.DefaultMaterial===void 0&&(p.DefaultMaterial=new vs({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:ic})),p.DefaultMaterial}function Fn(p,o,t){for(const n in t.extensions)p[n]===void 0&&(o.userData.gltfExtensions=o.userData.gltfExtensions||{},o.userData.gltfExtensions[n]=t.extensions[n])}function on(p,o){o.extras!==void 0&&(typeof o.extras=="object"?Object.assign(p.userData,o.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+o.extras))}function eu(p,o,t){let n=!1,r=!1,c=!1;for(let v=0,C=o.length;v<C;v++){const x=o[v];if(x.POSITION!==void 0&&(n=!0),x.NORMAL!==void 0&&(r=!0),x.COLOR_0!==void 0&&(c=!0),n&&r&&c)break}if(!n&&!r&&!c)return Promise.resolve(p);const h=[],g=[],m=[];for(let v=0,C=o.length;v<C;v++){const x=o[v];if(n){const Q=x.POSITION!==void 0?t.getDependency("accessor",x.POSITION):p.attributes.position;h.push(Q)}if(r){const Q=x.NORMAL!==void 0?t.getDependency("accessor",x.NORMAL):p.attributes.normal;g.push(Q)}if(c){const Q=x.COLOR_0!==void 0?t.getDependency("accessor",x.COLOR_0):p.attributes.color;m.push(Q)}}return Promise.all([Promise.all(h),Promise.all(g),Promise.all(m)]).then(function(v){const C=v[0],x=v[1],Q=v[2];return n&&(p.morphAttributes.position=C),r&&(p.morphAttributes.normal=x),c&&(p.morphAttributes.color=Q),p.morphTargetsRelative=!0,p})}function tu(p,o){if(p.updateMorphTargets(),o.weights!==void 0)for(let t=0,n=o.weights.length;t<n;t++)p.morphTargetInfluences[t]=o.weights[t];if(o.extras&&Array.isArray(o.extras.targetNames)){const t=o.extras.targetNames;if(p.morphTargetInfluences.length===t.length){p.morphTargetDictionary={};for(let n=0,r=t.length;n<r;n++)p.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function iu(p){let o;const t=p.extensions&&p.extensions[Ae.KHR_DRACO_MESH_COMPRESSION];if(t?o="draco:"+t.bufferView+":"+t.indices+":"+ba(t.attributes):o=p.indices+":"+ba(p.attributes)+":"+p.mode,p.targets!==void 0)for(let n=0,r=p.targets.length;n<r;n++)o+=":"+ba(p.targets[n]);return o}function ba(p){let o="";const t=Object.keys(p).sort();for(let n=0,r=t.length;n<r;n++)o+=t[n]+":"+p[t[n]]+";";return o}function za(p){switch(p){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function nu(p){return p.search(/\.jpe?g($|\?)/i)>0||p.search(/^data\:image\/jpeg/)===0?"image/jpeg":p.search(/\.webp($|\?)/i)>0||p.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const su=new _s;class ou{constructor(o={},t={}){this.json=o,this.extensions={},this.plugins={},this.options=t,this.cache=new kp,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=!1,c=-1;typeof navigator<"u"&&(n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,c=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||n||r&&c<98?this.textureLoader=new Vl(this.options.manager):this.textureLoader=new Wh(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new rn(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(o){this.extensions=o}setPlugins(o){this.plugins=o}parse(o,t){const n=this,r=this.json,c=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(h){return h._markDefs&&h._markDefs()}),Promise.all(this._invokeAll(function(h){return h.beforeRoot&&h.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(h){const g={scene:h[0][r.scene||0],scenes:h[0],animations:h[1],cameras:h[2],asset:r.asset,parser:n,userData:{}};Fn(c,g,r),on(g,r),Promise.all(n._invokeAll(function(m){return m.afterRoot&&m.afterRoot(g)})).then(function(){o(g)})}).catch(t)}_markDefs(){const o=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let r=0,c=t.length;r<c;r++){const h=t[r].joints;for(let g=0,m=h.length;g<m;g++)o[h[g]].isBone=!0}for(let r=0,c=o.length;r<c;r++){const h=o[r];h.mesh!==void 0&&(this._addNodeRef(this.meshCache,h.mesh),h.skin!==void 0&&(n[h.mesh].isSkinnedMesh=!0)),h.camera!==void 0&&this._addNodeRef(this.cameraCache,h.camera)}}_addNodeRef(o,t){t!==void 0&&(o.refs[t]===void 0&&(o.refs[t]=o.uses[t]=0),o.refs[t]++)}_getNodeRef(o,t,n){if(o.refs[t]<=1)return n;const r=n.clone(),c=(h,g)=>{const m=this.associations.get(h);m!=null&&this.associations.set(g,m);for(const[v,C]of h.children.entries())c(C,g.children[v])};return c(n,r),r.name+="_instance_"+o.uses[t]++,r}_invokeOne(o){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=o(t[n]);if(r)return r}return null}_invokeAll(o){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const c=o(t[r]);c&&n.push(c)}return n}getDependency(o,t){const n=o+":"+t;let r=this.cache.get(n);if(!r){switch(o){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(c){return c.loadNode&&c.loadNode(t)});break;case"mesh":r=this._invokeOne(function(c){return c.loadMesh&&c.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(c){return c.loadBufferView&&c.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(c){return c.loadMaterial&&c.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(c){return c.loadTexture&&c.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(c){return c.loadAnimation&&c.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(c){return c!=this&&c.getDependency&&c.getDependency(o,t)}),!r)throw new Error("Unknown type: "+o);break}this.cache.add(n,r)}return r}getDependencies(o){let t=this.cache.get(o);if(!t){const n=this,r=this.json[o+(o==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(c,h){return n.getDependency(o,h)})),this.cache.add(o,t)}return t}loadBuffer(o){const t=this.json.buffers[o],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&o===0)return Promise.resolve(this.extensions[Ae.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(c,h){n.load(Pa.resolveURL(t.uri,r.path),c,void 0,function(){h(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(o){const t=this.json.bufferViews[o];return this.getDependency("buffer",t.buffer).then(function(n){const r=t.byteLength||0,c=t.byteOffset||0;return n.slice(c,c+r)})}loadAccessor(o){const t=this,n=this.json,r=this.json.accessors[o];if(r.bufferView===void 0&&r.sparse===void 0){const h=ua[r.type],g=fs[r.componentType],m=r.normalized===!0,v=new g(r.count*h);return Promise.resolve(new eo(v,h,m))}const c=[];return r.bufferView!==void 0?c.push(this.getDependency("bufferView",r.bufferView)):c.push(null),r.sparse!==void 0&&(c.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),c.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(c).then(function(h){const g=h[0],m=ua[r.type],v=fs[r.componentType],C=v.BYTES_PER_ELEMENT,x=C*m,Q=r.byteOffset||0,P=r.bufferView!==void 0?n.bufferViews[r.bufferView].byteStride:void 0,D=r.normalized===!0;let G,F;if(P&&P!==x){const k=Math.floor(Q/P),T="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+k+":"+r.count;let z=t.cache.get(T);z||(G=new v(g,k*P,r.count*P/C),z=new Xh(G,P/C),t.cache.add(T,z)),F=new AA(z,m,Q%P/C,D)}else g===null?G=new v(r.count*m):G=new v(g,Q,r.count*m),F=new eo(G,m,D);if(r.sparse!==void 0){const k=ua.SCALAR,T=fs[r.sparse.indices.componentType],z=r.sparse.indices.byteOffset||0,J=r.sparse.values.byteOffset||0,O=new T(h[1],z,r.sparse.count*k),S=new v(h[2],J,r.sparse.count*m);g!==null&&(F=new eo(F.array.slice(),F.itemSize,F.normalized));for(let U=0,ee=O.length;U<ee;U++){const K=O[U];if(F.setX(K,S[U*m]),m>=2&&F.setY(K,S[U*m+1]),m>=3&&F.setZ(K,S[U*m+2]),m>=4&&F.setW(K,S[U*m+3]),m>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return F})}loadTexture(o){const t=this.json,n=this.options,r=t.textures[o].source,c=t.images[r];let h=this.textureLoader;if(c.uri){const g=n.manager.getHandler(c.uri);g!==null&&(h=g)}return this.loadTextureImage(o,r,h)}loadTextureImage(o,t,n){const r=this,c=this.json,h=c.textures[o],g=c.images[t],m=(g.uri||g.bufferView)+":"+h.sampler;if(this.textureCache[m])return this.textureCache[m];const v=this.loadImageSource(t,n).then(function(C){C.flipY=!1,C.name=h.name||g.name||"",C.name===""&&typeof g.uri=="string"&&g.uri.startsWith("data:image/")===!1&&(C.name=g.uri);const x=(c.samplers||{})[h.sampler]||{};return C.magFilter=nl[x.magFilter]||io,C.minFilter=nl[x.minFilter]||Do,C.wrapS=sl[x.wrapS]||yo,C.wrapT=sl[x.wrapT]||yo,r.associations.set(C,{textures:o}),C}).catch(function(){return null});return this.textureCache[m]=v,v}loadImageSource(o,t){const n=this,r=this.json,c=this.options;if(this.sourceCache[o]!==void 0)return this.sourceCache[o].then(x=>x.clone());const h=r.images[o],g=self.URL||self.webkitURL;let m=h.uri||"",v=!1;if(h.bufferView!==void 0)m=n.getDependency("bufferView",h.bufferView).then(function(x){v=!0;const Q=new Blob([x],{type:h.mimeType});return m=g.createObjectURL(Q),m});else if(h.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+o+" is missing URI and bufferView");const C=Promise.resolve(m).then(function(x){return new Promise(function(Q,P){let D=Q;t.isImageBitmapLoader===!0&&(D=function(G){const F=new Ra(G);F.needsUpdate=!0,Q(F)}),t.load(Pa.resolveURL(x,c.path),D,void 0,P)})}).then(function(x){return v===!0&&g.revokeObjectURL(m),x.userData.mimeType=h.mimeType||nu(h.uri),x}).catch(function(x){throw console.error("THREE.GLTFLoader: Couldn't load texture",m),x});return this.sourceCache[o]=C,C}assignTexture(o,t,n,r){const c=this;return this.getDependency("texture",n.index).then(function(h){if(!h)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(h=h.clone(),h.channel=n.texCoord),c.extensions[Ae.KHR_TEXTURE_TRANSFORM]){const g=n.extensions!==void 0?n.extensions[Ae.KHR_TEXTURE_TRANSFORM]:void 0;if(g){const m=c.associations.get(h);h=c.extensions[Ae.KHR_TEXTURE_TRANSFORM].extendTexture(h,g),c.associations.set(h,m)}}return r!==void 0&&(h.colorSpace=r),o[t]=h,h})}assignFinalMaterial(o){const t=o.geometry;let n=o.material;const r=t.attributes.tangent===void 0,c=t.attributes.color!==void 0,h=t.attributes.normal===void 0;if(o.isPoints){const g="PointsMaterial:"+n.uuid;let m=this.cache.get(g);m||(m=new Ul,ln.prototype.copy.call(m,n),m.color.copy(n.color),m.map=n.map,m.sizeAttenuation=!1,this.cache.add(g,m)),n=m}else if(o.isLine){const g="LineBasicMaterial:"+n.uuid;let m=this.cache.get(g);m||(m=new Ya,ln.prototype.copy.call(m,n),m.color.copy(n.color),m.map=n.map,this.cache.add(g,m)),n=m}if(r||c||h){let g="ClonedMaterial:"+n.uuid+":";r&&(g+="derivative-tangents:"),c&&(g+="vertex-colors:"),h&&(g+="flat-shading:");let m=this.cache.get(g);m||(m=n.clone(),c&&(m.vertexColors=!0),h&&(m.flatShading=!0),r&&(m.normalScale&&(m.normalScale.y*=-1),m.clearcoatNormalScale&&(m.clearcoatNormalScale.y*=-1)),this.cache.add(g,m),this.associations.set(m,this.associations.get(n))),n=m}o.material=n}getMaterialType(){return vs}loadMaterial(o){const t=this,n=this.json,r=this.extensions,c=n.materials[o];let h;const g={},m=c.extensions||{},v=[];if(m[Ae.KHR_MATERIALS_UNLIT]){const x=r[Ae.KHR_MATERIALS_UNLIT];h=x.getMaterialType(),v.push(x.extendParams(g,c,t))}else{const x=c.pbrMetallicRoughness||{};if(g.color=new Ft(1,1,1),g.opacity=1,Array.isArray(x.baseColorFactor)){const Q=x.baseColorFactor;g.color.fromArray(Q),g.opacity=Q[3]}x.baseColorTexture!==void 0&&v.push(t.assignTexture(g,"map",x.baseColorTexture,ri)),g.metalness=x.metallicFactor!==void 0?x.metallicFactor:1,g.roughness=x.roughnessFactor!==void 0?x.roughnessFactor:1,x.metallicRoughnessTexture!==void 0&&(v.push(t.assignTexture(g,"metalnessMap",x.metallicRoughnessTexture)),v.push(t.assignTexture(g,"roughnessMap",x.metallicRoughnessTexture))),h=this._invokeOne(function(Q){return Q.getMaterialType&&Q.getMaterialType(o)}),v.push(Promise.all(this._invokeAll(function(Q){return Q.extendMaterialParams&&Q.extendMaterialParams(o,g)})))}c.doubleSided===!0&&(g.side=Ja);const C=c.alphaMode||ga.OPAQUE;if(C===ga.BLEND?(g.transparent=!0,g.depthWrite=!1):(g.transparent=!1,C===ga.MASK&&(g.alphaTest=c.alphaCutoff!==void 0?c.alphaCutoff:.5)),c.normalTexture!==void 0&&h!==vi&&(v.push(t.assignTexture(g,"normalMap",c.normalTexture)),g.normalScale=new Et(1,1),c.normalTexture.scale!==void 0)){const x=c.normalTexture.scale;g.normalScale.set(x,x)}return c.occlusionTexture!==void 0&&h!==vi&&(v.push(t.assignTexture(g,"aoMap",c.occlusionTexture)),c.occlusionTexture.strength!==void 0&&(g.aoMapIntensity=c.occlusionTexture.strength)),c.emissiveFactor!==void 0&&h!==vi&&(g.emissive=new Ft().fromArray(c.emissiveFactor)),c.emissiveTexture!==void 0&&h!==vi&&v.push(t.assignTexture(g,"emissiveMap",c.emissiveTexture,ri)),Promise.all(v).then(function(){const x=new h(g);return c.name&&(x.name=c.name),on(x,c),t.associations.set(x,{materials:o}),c.extensions&&Fn(r,x,c),x})}createUniqueName(o){const t=Zh.sanitizeNodeName(o||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(o){const t=this,n=this.extensions,r=this.primitiveCache;function c(g){return n[Ae.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(g,t).then(function(m){return ol(m,g,t)})}const h=[];for(let g=0,m=o.length;g<m;g++){const v=o[g],C=iu(v),x=r[C];if(x)h.push(x.promise);else{let Q;v.extensions&&v.extensions[Ae.KHR_DRACO_MESH_COMPRESSION]?Q=c(v):Q=ol(new Bo,v,t),r[C]={primitive:v,promise:Q},h.push(Q)}}return Promise.all(h)}loadMesh(o){const t=this,n=this.json,r=this.extensions,c=n.meshes[o],h=c.primitives,g=[];for(let m=0,v=h.length;m<v;m++){const C=h[m].material===void 0?Zp(this.cache):this.getDependency("material",h[m].material);g.push(C)}return g.push(t.loadGeometries(h)),Promise.all(g).then(function(m){const v=m.slice(0,m.length-1),C=m[m.length-1],x=[];for(let P=0,D=C.length;P<D;P++){const G=C[P],F=h[P];let k;const T=v[P];if(F.mode===qt.TRIANGLES||F.mode===qt.TRIANGLE_STRIP||F.mode===qt.TRIANGLE_FAN||F.mode===void 0)k=c.isSkinnedMesh===!0?new eA(G,T):new ro(G,T),k.isSkinnedMesh===!0&&k.normalizeSkinWeights(),F.mode===qt.TRIANGLE_STRIP?k.geometry=tl(k.geometry,Jl):F.mode===qt.TRIANGLE_FAN&&(k.geometry=tl(k.geometry,La));else if(F.mode===qt.LINES)k=new tA(G,T);else if(F.mode===qt.LINE_STRIP)k=new jl(G,T);else if(F.mode===qt.LINE_LOOP)k=new iA(G,T);else if(F.mode===qt.POINTS)k=new Hl(G,T);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+F.mode);Object.keys(k.geometry.morphAttributes).length>0&&tu(k,c),k.name=t.createUniqueName(c.name||"mesh_"+o),on(k,c),F.extensions&&Fn(r,k,F),t.assignFinalMaterial(k),x.push(k)}for(let P=0,D=x.length;P<D;P++)t.associations.set(x[P],{meshes:o,primitives:P});if(x.length===1)return c.extensions&&Fn(r,x[0],c),x[0];const Q=new na;c.extensions&&Fn(r,Q,c),t.associations.set(Q,{meshes:o});for(let P=0,D=x.length;P<D;P++)Q.add(x[P]);return Q})}loadCamera(o){let t;const n=this.json.cameras[o],r=n[n.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new Kl(nA.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):n.type==="orthographic"&&(t=new $a(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),on(t,n),Promise.resolve(t)}loadSkin(o){const t=this.json.skins[o],n=[];for(let r=0,c=t.joints.length;r<c;r++)n.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(r){const c=r.pop(),h=r,g=[],m=[];for(let v=0,C=h.length;v<C;v++){const x=h[v];if(x){g.push(x);const Q=new _s;c!==null&&Q.fromArray(c.array,v*16),m.push(Q)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[v])}return new sA(g,m)})}loadAnimation(o){const t=this.json.animations[o],n=t.name?t.name:"animation_"+o,r=[],c=[],h=[],g=[],m=[];for(let v=0,C=t.channels.length;v<C;v++){const x=t.channels[v],Q=t.samplers[x.sampler],P=x.target,D=P.node,G=t.parameters!==void 0?t.parameters[Q.input]:Q.input,F=t.parameters!==void 0?t.parameters[Q.output]:Q.output;P.node!==void 0&&(r.push(this.getDependency("node",D)),c.push(this.getDependency("accessor",G)),h.push(this.getDependency("accessor",F)),g.push(Q),m.push(P))}return Promise.all([Promise.all(r),Promise.all(c),Promise.all(h),Promise.all(g),Promise.all(m)]).then(function(v){const C=v[0],x=v[1],Q=v[2],P=v[3],D=v[4],G=[];for(let F=0,k=C.length;F<k;F++){const T=C[F],z=x[F],J=Q[F],O=P[F],S=D[F];if(T===void 0)continue;T.updateMatrix();let U;switch(nn[S.path]){case nn.weights:U=uA;break;case nn.rotation:U=Yr;break;case nn.position:case nn.scale:default:U=pA;break}const ee=T.name?T.name:T.uuid,K=O.interpolation!==void 0?Xp[O.interpolation]:ql,oe=[];nn[S.path]===nn.weights?T.traverse(function(_e){_e.morphTargetInfluences&&oe.push(_e.name?_e.name:_e.uuid)}):oe.push(ee);let re=J.array;if(J.normalized){const _e=za(re.constructor),pe=new Float32Array(re.length);for(let ve=0,ue=re.length;ve<ue;ve++)pe[ve]=re[ve]*_e;re=pe}for(let _e=0,pe=oe.length;_e<pe;_e++){const ve=new U(oe[_e]+"."+nn[S.path],z.array,re,K);O.interpolation==="CUBICSPLINE"&&(ve.createInterpolant=function(ue){const ae=this instanceof Yr?Wp:mc;return new ae(this.times,this.values,this.getValueSize()/3,ue)},ve.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),G.push(ve)}}return new oA(n,void 0,G)})}createNodeMesh(o){const t=this.json,n=this,r=t.nodes[o];return r.mesh===void 0?null:n.getDependency("mesh",r.mesh).then(function(c){const h=n._getNodeRef(n.meshCache,r.mesh,c);return r.weights!==void 0&&h.traverse(function(g){if(g.isMesh)for(let m=0,v=r.weights.length;m<v;m++)g.morphTargetInfluences[m]=r.weights[m]}),h})}loadNode(o){const t=this.json,n=this,r=t.nodes[o],c=n._loadNodeShallow(o),h=[],g=r.children||[];for(let v=0,C=g.length;v<C;v++)h.push(n.getDependency("node",g[v]));const m=r.skin===void 0?Promise.resolve(null):n.getDependency("skin",r.skin);return Promise.all([c,Promise.all(h),m]).then(function(v){const C=v[0],x=v[1],Q=v[2];Q!==null&&C.traverse(function(P){P.isSkinnedMesh&&P.bind(Q,su)});for(let P=0,D=x.length;P<D;P++)C.add(x[P]);return C})}_loadNodeShallow(o){const t=this.json,n=this.extensions,r=this;if(this.nodeCache[o]!==void 0)return this.nodeCache[o];const c=t.nodes[o],h=c.name?r.createUniqueName(c.name):"",g=[],m=r._invokeOne(function(v){return v.createNodeMesh&&v.createNodeMesh(o)});return m&&g.push(m),c.camera!==void 0&&g.push(r.getDependency("camera",c.camera).then(function(v){return r._getNodeRef(r.cameraCache,c.camera,v)})),r._invokeAll(function(v){return v.createNodeAttachment&&v.createNodeAttachment(o)}).forEach(function(v){g.push(v)}),this.nodeCache[o]=Promise.all(g).then(function(v){let C;if(c.isBone===!0?C=new aA:v.length>1?C=new na:v.length===1?C=v[0]:C=new It,C!==v[0])for(let x=0,Q=v.length;x<Q;x++)C.add(v[x]);if(c.name&&(C.userData.name=c.name,C.name=h),on(C,c),c.extensions&&Fn(n,C,c),c.matrix!==void 0){const x=new _s;x.fromArray(c.matrix),C.applyMatrix4(x)}else c.translation!==void 0&&C.position.fromArray(c.translation),c.rotation!==void 0&&C.quaternion.fromArray(c.rotation),c.scale!==void 0&&C.scale.fromArray(c.scale);return r.associations.has(C)||r.associations.set(C,{}),r.associations.get(C).nodes=o,C}),this.nodeCache[o]}loadScene(o){const t=this.extensions,n=this.json.scenes[o],r=this,c=new na;n.name&&(c.name=r.createUniqueName(n.name)),on(c,n),n.extensions&&Fn(t,c,n);const h=n.nodes||[],g=[];for(let m=0,v=h.length;m<v;m++)g.push(r.getDependency("node",h[m]));return Promise.all(g).then(function(m){for(let C=0,x=m.length;C<x;C++)c.add(m[C]);const v=C=>{const x=new Map;for(const[Q,P]of r.associations)(Q instanceof ln||Q instanceof Ra)&&x.set(Q,P);return C.traverse(Q=>{const P=r.associations.get(Q);P!=null&&x.set(Q,P)}),x};return r.associations=v(c),c})}}function au(p,o,t){const n=o.attributes,r=new gA;if(n.POSITION!==void 0){const g=t.json.accessors[n.POSITION],m=g.min,v=g.max;if(m!==void 0&&v!==void 0){if(r.set(new Se(m[0],m[1],m[2]),new Se(v[0],v[1],v[2])),g.normalized){const C=za(fs[g.componentType]);r.min.multiplyScalar(C),r.max.multiplyScalar(C)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const c=o.targets;if(c!==void 0){const g=new Se,m=new Se;for(let v=0,C=c.length;v<C;v++){const x=c[v];if(x.POSITION!==void 0){const Q=t.json.accessors[x.POSITION],P=Q.min,D=Q.max;if(P!==void 0&&D!==void 0){if(m.setX(Math.max(Math.abs(P[0]),Math.abs(D[0]))),m.setY(Math.max(Math.abs(P[1]),Math.abs(D[1]))),m.setZ(Math.max(Math.abs(P[2]),Math.abs(D[2]))),Q.normalized){const G=za(fs[Q.componentType]);m.multiplyScalar(G)}g.max(m)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(g)}p.boundingBox=r;const h=new bA;r.getCenter(h.center),h.radius=r.min.distanceTo(r.max)/2,p.boundingSphere=h}function ol(p,o,t){const n=o.attributes,r=[];function c(h,g){return t.getDependency("accessor",h).then(function(m){p.setAttribute(g,m)})}for(const h in n){const g=Fa[h]||h.toLowerCase();g in p.attributes||r.push(c(n[h],g))}if(o.indices!==void 0&&!p.index){const h=t.getDependency("accessor",o.indices).then(function(g){p.setIndex(g)});r.push(h)}return on(p,o),au(p,o,t),Promise.all(r).then(function(){return o.targets!==void 0?eu(p,o.targets,t):p})}const Ve={Handedness:Object.freeze({NONE:"none",LEFT:"left",RIGHT:"right"}),ComponentState:Object.freeze({DEFAULT:"default",TOUCHED:"touched",PRESSED:"pressed"}),ComponentProperty:Object.freeze({BUTTON:"button",X_AXIS:"xAxis",Y_AXIS:"yAxis",STATE:"state"}),ComponentType:Object.freeze({TRIGGER:"trigger",SQUEEZE:"squeeze",TOUCHPAD:"touchpad",THUMBSTICK:"thumbstick",BUTTON:"button"}),ButtonTouchThreshold:.05,AxisTouchThreshold:.1,VisualResponseProperty:Object.freeze({TRANSFORM:"transform",VISIBILITY:"visibility"})};async function vc(p){const o=await fetch(p);if(o.ok)return o.json();throw new Error(o.statusText)}async function ru(p){if(!p)throw new Error("No basePath supplied");return await vc(`${p}/profilesList.json`)}async function lu(p,o,t=null,n=!0){if(!p)throw new Error("No xrInputSource supplied");if(!o)throw new Error("No basePath supplied");const r=await ru(o);let c;if(p.profiles.some(m=>{const v=r[m];return v&&(c={profileId:m,profilePath:`${o}/${v.path}`,deprecated:!!v.deprecated}),!!c}),!c){if(!t)throw new Error("No matching profile name found");const m=r[t];if(!m)throw new Error(`No matching profile name found and default profile "${t}" missing.`);c={profileId:t,profilePath:`${o}/${m.path}`,deprecated:!!m.deprecated}}const h=await vc(c.profilePath);let g;if(n){let m;if(p.handedness==="any"?m=h.layouts[Object.keys(h.layouts)[0]]:m=h.layouts[p.handedness],!m)throw new Error(`No matching handedness, ${p.handedness}, in profile ${c.profileId}`);m.assetPath&&(g=c.profilePath.replace("profile.json",m.assetPath))}return{profile:h,assetPath:g}}const cu={xAxis:0,yAxis:0,button:0,state:Ve.ComponentState.DEFAULT};function du(p=0,o=0){let t=p,n=o;if(Math.sqrt(p*p+o*o)>1){const r=Math.atan2(o,p);t=Math.cos(r),n=Math.sin(r)}return{normalizedXAxis:t*.5+.5,normalizedYAxis:n*.5+.5}}class hu{constructor(o){this.componentProperty=o.componentProperty,this.states=o.states,this.valueNodeName=o.valueNodeName,this.valueNodeProperty=o.valueNodeProperty,this.valueNodeProperty===Ve.VisualResponseProperty.TRANSFORM&&(this.minNodeName=o.minNodeName,this.maxNodeName=o.maxNodeName),this.value=0,this.updateFromComponent(cu)}updateFromComponent({xAxis:o,yAxis:t,button:n,state:r}){const{normalizedXAxis:c,normalizedYAxis:h}=du(o,t);switch(this.componentProperty){case Ve.ComponentProperty.X_AXIS:this.value=this.states.includes(r)?c:.5;break;case Ve.ComponentProperty.Y_AXIS:this.value=this.states.includes(r)?h:.5;break;case Ve.ComponentProperty.BUTTON:this.value=this.states.includes(r)?n:0;break;case Ve.ComponentProperty.STATE:this.valueNodeProperty===Ve.VisualResponseProperty.VISIBILITY?this.value=this.states.includes(r):this.value=this.states.includes(r)?1:0;break;default:throw new Error(`Unexpected visualResponse componentProperty ${this.componentProperty}`)}}}class Au{constructor(o,t){if(!o||!t||!t.visualResponses||!t.gamepadIndices||Object.keys(t.gamepadIndices).length===0)throw new Error("Invalid arguments supplied");this.id=o,this.type=t.type,this.rootNodeName=t.rootNodeName,this.touchPointNodeName=t.touchPointNodeName,this.visualResponses={},Object.keys(t.visualResponses).forEach(n=>{const r=new hu(t.visualResponses[n]);this.visualResponses[n]=r}),this.gamepadIndices=Object.assign({},t.gamepadIndices),this.values={state:Ve.ComponentState.DEFAULT,button:this.gamepadIndices.button!==void 0?0:void 0,xAxis:this.gamepadIndices.xAxis!==void 0?0:void 0,yAxis:this.gamepadIndices.yAxis!==void 0?0:void 0}}get data(){return{id:this.id,...this.values}}updateFromGamepad(o){if(this.values.state=Ve.ComponentState.DEFAULT,this.gamepadIndices.button!==void 0&&o.buttons.length>this.gamepadIndices.button){const t=o.buttons[this.gamepadIndices.button];this.values.button=t.value,this.values.button=this.values.button<0?0:this.values.button,this.values.button=this.values.button>1?1:this.values.button,t.pressed||this.values.button===1?this.values.state=Ve.ComponentState.PRESSED:(t.touched||this.values.button>Ve.ButtonTouchThreshold)&&(this.values.state=Ve.ComponentState.TOUCHED)}this.gamepadIndices.xAxis!==void 0&&o.axes.length>this.gamepadIndices.xAxis&&(this.values.xAxis=o.axes[this.gamepadIndices.xAxis],this.values.xAxis=this.values.xAxis<-1?-1:this.values.xAxis,this.values.xAxis=this.values.xAxis>1?1:this.values.xAxis,this.values.state===Ve.ComponentState.DEFAULT&&Math.abs(this.values.xAxis)>Ve.AxisTouchThreshold&&(this.values.state=Ve.ComponentState.TOUCHED)),this.gamepadIndices.yAxis!==void 0&&o.axes.length>this.gamepadIndices.yAxis&&(this.values.yAxis=o.axes[this.gamepadIndices.yAxis],this.values.yAxis=this.values.yAxis<-1?-1:this.values.yAxis,this.values.yAxis=this.values.yAxis>1?1:this.values.yAxis,this.values.state===Ve.ComponentState.DEFAULT&&Math.abs(this.values.yAxis)>Ve.AxisTouchThreshold&&(this.values.state=Ve.ComponentState.TOUCHED)),Object.values(this.visualResponses).forEach(t=>{t.updateFromComponent(this.values)})}}class pu{constructor(o,t,n){if(!o)throw new Error("No xrInputSource supplied");if(!t)throw new Error("No profile supplied");this.xrInputSource=o,this.assetUrl=n,this.id=t.profileId,this.layoutDescription=t.layouts[o.handedness],this.components={},Object.keys(this.layoutDescription.components).forEach(r=>{const c=this.layoutDescription.components[r];this.components[r]=new Au(r,c)}),this.updateFromGamepad()}get gripSpace(){return this.xrInputSource.gripSpace}get targetRaySpace(){return this.xrInputSource.targetRaySpace}get data(){const o=[];return Object.values(this.components).forEach(t=>{o.push(t.data)}),o}updateFromGamepad(){Object.values(this.components).forEach(o=>{o.updateFromGamepad(this.xrInputSource.gamepad)})}}const uu="https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@1.0/dist/profiles",gu="generic-trigger";class bu extends It{constructor(){super(),this.motionController=null,this.envMap=null}setEnvironmentMap(o){return this.envMap==o?this:(this.envMap=o,this.traverse(t=>{t.isMesh&&(t.material.envMap=this.envMap,t.material.needsUpdate=!0)}),this)}updateMatrixWorld(o){super.updateMatrixWorld(o),this.motionController&&(this.motionController.updateFromGamepad(),Object.values(this.motionController.components).forEach(t=>{Object.values(t.visualResponses).forEach(n=>{const{valueNode:r,minNode:c,maxNode:h,value:g,valueNodeProperty:m}=n;r&&(m===Ve.VisualResponseProperty.VISIBILITY?r.visible=g:m===Ve.VisualResponseProperty.TRANSFORM&&(r.quaternion.slerpQuaternions(c.quaternion,h.quaternion,g),r.position.lerpVectors(c.position,h.position,g)))})}))}}function mu(p,o){Object.values(p.components).forEach(t=>{const{type:n,touchPointNodeName:r,visualResponses:c}=t;if(n===Ve.ComponentType.TOUCHPAD)if(t.touchPointNode=o.getObjectByName(r),t.touchPointNode){const h=new vA(.001),g=new vi({color:255}),m=new ro(h,g);t.touchPointNode.add(m)}else console.warn(`Could not find touch dot, ${t.touchPointNodeName}, in touchpad component ${t.id}`);Object.values(c).forEach(h=>{const{valueNodeName:g,minNodeName:m,maxNodeName:v,valueNodeProperty:C}=h;if(C===Ve.VisualResponseProperty.TRANSFORM){if(h.minNode=o.getObjectByName(m),h.maxNode=o.getObjectByName(v),!h.minNode){console.warn(`Could not find ${m} in the model`);return}if(!h.maxNode){console.warn(`Could not find ${v} in the model`);return}}h.valueNode=o.getObjectByName(g),h.valueNode||console.warn(`Could not find ${g} in the model`)})})}function al(p,o){mu(p.motionController,o),p.envMap&&o.traverse(t=>{t.isMesh&&(t.material.envMap=p.envMap,t.material.needsUpdate=!0)}),p.add(o)}class vu{constructor(o=null){this.gltfLoader=o,this.path=uu,this._assetCache={},this.gltfLoader||(this.gltfLoader=new gc)}createControllerModel(o){const t=new bu;let n=null;return o.addEventListener("connected",r=>{const c=r.data;c.targetRayMode!=="tracked-pointer"||!c.gamepad||lu(c,this.path,gu).then(({profile:h,assetPath:g})=>{t.motionController=new pu(c,h,g);const m=this._assetCache[t.motionController.assetUrl];if(m)n=m.scene.clone(),al(t,n);else{if(!this.gltfLoader)throw new Error("GLTFLoader not set.");this.gltfLoader.setPath(""),this.gltfLoader.load(t.motionController.assetUrl,v=>{this._assetCache[t.motionController.assetUrl]=v,n=v.scene.clone(),al(t,n)},null,()=>{throw new Error(`Asset ${t.motionController.assetUrl} missing or malformed.`)})}}).catch(h=>{console.warn(h)})}),o.addEventListener("disconnected",()=>{t.motionController=null,t.remove(n),n=null}),t}}new Ft;var fu=`varying vec3 worldPosition;

uniform float uDistance;

void main() {
  vec3 pos = position.xzy * uDistance;
  pos.xz += cameraPosition.xz;

  worldPosition = pos;

  gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);
}`,_u=`varying vec3 worldPosition;

uniform float uCellSize;
uniform float uLargeCellSize;
uniform vec3 uColor;
uniform float uDistance;

float getGrid(float size) {
  vec2 r = worldPosition.xz / size;
  vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
  float line = min(grid.x, grid.y);

  return 1.0 - min(line, 1.0);
}

void main() {
  float d = 1.0 - min(distance(cameraPosition.xz, worldPosition.xz) / uDistance, 1.0);

  float g1 = getGrid(uCellSize);
  float g2 = getGrid(uLargeCellSize);

  gl_FragColor = vec4(uColor.rgb, mix(g2, g1, g1) * pow(d, 3.0));
  gl_FragColor.a = mix(0.5 * gl_FragColor.a, gl_FragColor.a, g2);

  if (gl_FragColor.a <= 0.0) discard;
}`;class wu extends ro{constructor(t=1,n=10,r="white",c=8e3){const h=new rA,g=new Yl({side:Ja,uniforms:{uCellSize:{value:t},uLargeCellSize:{value:n},uColor:{value:new Ft(r)},uDistance:{value:c}},transparent:!0,vertexShader:fu,fragmentShader:_u,extensions:{derivatives:!0}});super(h,g);N(this,"frustumCulled",!1);N(this,"material");this.material=g}get cellSize(){return this.material.uniforms.uCellSize.value}set cellSize(t){this.material.uniforms.uCellSize.value=t}get largeCellSize(){return this.material.uniforms.uLargeCellSize.value}set largeCellSize(t){this.material.uniforms.uLargeCellSize.value=t}get color(){return this.material.uniforms.uColor.value}set color(t){this.material.uniforms.uColor.value=t}get distance(){return this.material.uniforms.uDistance.value}set distance(t){this.material.uniforms.uDistance.value=t}}new Se;`${Ti.logdepthbuf_pars_vertex}${Ti.fog_pars_vertex}${Ti.logdepthbuf_vertex}`,Ti.fog_vertex,`${Ti.fog_vertex}`;`${Ti.fog_pars_fragment}${Ti.logdepthbuf_pars_fragment}${Ti.logdepthbuf_fragment}${Ti.fog_fragment}`;const tr=(p,o)=>{if(o===0)return p;const t=p.replace("#","");let n=Number.parseInt(t.substring(0,2),16),r=Number.parseInt(t.substring(2,4),16),c=Number.parseInt(t.substring(4,6),16);n=Math.round(n*(1-o/100)),r=Math.round(r*(1-o/100)),c=Math.round(c*(1-o/100)),n=n<0?0:n>255?255:n,r=r<0?0:r>255?255:r,c=c<0?0:c>255?255:c;const h=`${n<16?"0":""}${n.toString(16)}`,g=`${r<16?"0":""}${r.toString(16)}`,m=`${c<16?"0":""}${c.toString(16)}`;return`#${h}${g}${m}`},us="#ff3653",gs="#8adb00",bs="#2c8fff",rl=tr(us,50),ll=tr(gs,50),cl=tr(bs,50),_o=128*window.devicePixelRatio,Cu=3*Math.PI,wo=new Hn,ma=new Hn,Eu=new Yh(.8,.05,.05).translate(.4,0,0),to=64,fc=p=>{const{context:o,text:t}=p.userData;o.beginPath(),o.arc(to/2,to/2,to/4,0,2*Math.PI),o.closePath(),o.fillStyle=p.userData.color,o.fill(),t!==""&&(o.font="bold 23px system-ui",o.textAlign="center",o.fillStyle="#000000",o.fillText(t,32,41)),p.material.needsUpdate=!0,p.material.map.needsUpdate=!0},va=p=>{const o=new vi({color:p,toneMapped:!1});return new ro(Eu,o)},As=(p,o="")=>{const t=document.createElement("canvas");t.width=to,t.height=to;const n=t.getContext("2d"),r=new wA(t),c=new CA({map:r,toneMapped:!1}),h=new sc(c);return h.userData.color=p,h.userData.text=o,h.userData.context=n,fc(h),h};class Iu extends It{constructor(t,n){super();N(this,"isViewHelper",!0);N(this,"animating",!1);N(this,"center",new Se);N(this,"point",new Se);N(this,"viewport",new _A);N(this,"targetQuaternion",new Hn);N(this,"radius",0);N(this,"orthoCamera",new $a(-2,2,2,-2,-4,4));N(this,"axes");N(this,"btns");N(this,"camera");N(this,"renderer");N(this,"render",t=>{if(this.animating){const h=t*Cu/1e3;wo.rotateTowards(ma,h),this.camera.position.set(0,0,1).applyQuaternion(wo).multiplyScalar(this.radius).add(this.center),this.camera.quaternion.rotateTowards(this.targetQuaternion,h),wo.angleTo(ma)===0&&(this.animating=!1)}this.quaternion.copy(this.camera.quaternion).invert(),this.updateMatrixWorld();const{x:n,y:r,z:c}=this.point.set(0,0,1).applyQuaternion(this.camera.quaternion);this.btns[0].userData.color=n>=0?us:rl,this.btns[1].userData.color=r>=0?gs:ll,this.btns[2].userData.color=c>=0?bs:cl,this.btns[3].userData.color=n<0?us:rl,this.btns[4].userData.color=r<0?gs:ll,this.btns[5].userData.color=c<0?bs:cl;for(const h of this.btns)fc(h);console.log(this.btns[0].userData);{const h=this.renderer.domElement.offsetWidth*window.devicePixelRatio-_o,g=this.renderer.domElement.offsetHeight*window.devicePixelRatio-_o,{autoClear:m,outputColorSpace:v}=this.renderer;this.renderer.autoClear=!1,this.renderer.outputColorSpace="srgb-linear",this.renderer.getViewport(this.viewport),this.renderer.setViewport(h,g,_o,_o),this.renderer.render(this,this.orthoCamera),this.renderer.setViewport(this.viewport),this.renderer.autoClear=m,this.renderer.outputColorSpace=v}});N(this,"dispose",()=>{var t;for(let n of[...this.axes,...this.btns])n instanceof sc&&((t=n.material.map)==null||t.dispose()),n.material instanceof ln&&n.material.dispose()});this.camera=t,this.renderer=n;const r=new Et,c=new It;this.orthoCamera.position.set(0,0,2),this.axes=[va(us),va(gs),va(bs)],this.btns=[As(us,"X"),As(gs,"Y"),As(bs,"Z"),As(us),As(gs),As(bs)],this.axes[1].rotation.z=Math.PI/2,this.axes[2].rotation.y=-Math.PI/2,this.btns[0].position.x=1,this.btns[1].position.y=1,this.btns[2].position.z=1,this.btns[3].position.x=-1,this.btns[4].position.y=-1,this.btns[5].position.z=-1,this.btns[3].scale.setScalar(.8),this.btns[4].scale.setScalar(.8),this.btns[5].scale.setScalar(.8),this.add(...this.axes,...this.btns);const h=[...this.btns],g=new Se,m=new nc,v=Q=>{if(this.animating===!0)return!1;const{domElement:P}=n,D=P.getBoundingClientRect();r.x=Q.clientX-D.left-D.width+128,r.y=Q.clientY-D.top,r.x=r.x/128*2-1,r.y=r.y/128*2-1,m.setFromCamera(r,this.orthoCamera);const G=m.intersectObjects(h),[F]=G;if(console.log(F),F){const k=F.object;return x(k,this.center),this.animating=!0,!0}else return!1};n.domElement.addEventListener("click",v);const C=new Wa,x=(Q,P)=>{Q.position.x===1?(g.set(1,0,0),this.targetQuaternion.setFromEuler(C.set(0,Math.PI*.5,0))):Q.position.y===1?(g.set(0,1,0),this.targetQuaternion.setFromEuler(C.set(-Math.PI*.5,0,0))):Q.position.z===1?(g.set(0,0,1),this.targetQuaternion.setFromEuler(C.set(0,0,0))):Q.position.x===-1?(g.set(-1,0,0),this.targetQuaternion.setFromEuler(C.set(0,-Math.PI*.5,0))):Q.position.y===-1?(g.set(0,-1,0),this.targetQuaternion.setFromEuler(C.set(Math.PI*.5,0,0))):Q.position.z===-1&&(g.set(0,0,-1),this.targetQuaternion.setFromEuler(C.set(0,Math.PI,0))),this.radius=t.position.distanceTo(P),g.multiplyScalar(this.radius).add(P),c.position.copy(P),c.lookAt(t.position),wo.copy(c.quaternion),c.lookAt(g),ma.copy(c.quaternion)}}}new Se,new Se,new Se;performance.now();performance.now();lA.enabled=!0;cA.enabled=!0;new Jh;new rn;new gc;new Vl;const ai=(p,o)=>localStorage.setItem(p,JSON.stringify(o)),mi=p=>{try{return JSON.parse(localStorage.getItem(p)??"null")}catch{return null}};new vu;new _s;const xu=ws.FolderApi.prototype.addFolder,Bu=ws.FolderApi.prototype.dispose;ws.FolderApi.prototype.addFolder=function(p){const o=`${String(p.index??-1)}.${p.title}`,t=xu.call(this,{expanded:mi(`pane.${o}`)!==null,...p});return t.element.id=o,t.on("fold",n=>{const r=`pane.${o}`;n.expanded?ai(r,!0):ai(r,null)}),t};ws.FolderApi.prototype.dispose=function(){Bu.call(this)};const dl={type:"change"},fa={type:"start"},hl={type:"end"};class yu extends fA{constructor(o,t){super(),this.object=o,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new Se,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:ds.ROTATE,MIDDLE:ds.DOLLY,RIGHT:ds.PAN},this.touches={ONE:hs.ROTATE,TWO:hs.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return g.phi},this.getAzimuthalAngle=function(){return g.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(M){M.addEventListener("keydown",Ci),this._domElementKeyEvents=M},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",Ci),this._domElementKeyEvents=null},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(dl),n.update(),c=r.NONE},this.update=function(){const M=new Se,te=new Hn().setFromUnitVectors(o.up,new Se(0,1,0)),Ie=te.clone().invert(),ke=new Se,Je=new Hn,Gt=new Se,ut=2*Math.PI;return function(){const yt=n.object.position;M.copy(yt).sub(n.target),M.applyQuaternion(te),g.setFromVector3(M),n.autoRotate&&c===r.NONE&&K(U()),n.enableDamping?(g.theta+=m.theta*n.dampingFactor,g.phi+=m.phi*n.dampingFactor):(g.theta+=m.theta,g.phi+=m.phi);let je=n.minAzimuthAngle,gt=n.maxAzimuthAngle;return isFinite(je)&&isFinite(gt)&&(je<-Math.PI?je+=ut:je>Math.PI&&(je-=ut),gt<-Math.PI?gt+=ut:gt>Math.PI&&(gt-=ut),je<=gt?g.theta=Math.max(je,Math.min(gt,g.theta)):g.theta=g.theta>(je+gt)/2?Math.max(je,g.theta):Math.min(gt,g.theta)),g.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,g.phi)),g.makeSafe(),g.radius*=v,g.radius=Math.max(n.minDistance,Math.min(n.maxDistance,g.radius)),n.enableDamping===!0?n.target.addScaledVector(C,n.dampingFactor):n.target.add(C),M.setFromSpherical(g),M.applyQuaternion(Ie),yt.copy(n.target).add(M),n.object.lookAt(n.target),n.enableDamping===!0?(m.theta*=1-n.dampingFactor,m.phi*=1-n.dampingFactor,C.multiplyScalar(1-n.dampingFactor)):(m.set(0,0,0),C.set(0,0,0)),v=1,x||ke.distanceToSquared(n.object.position)>h||8*(1-Je.dot(n.object.quaternion))>h||Gt.distanceToSquared(n.target)>0?(n.dispatchEvent(dl),ke.copy(n.object.position),Je.copy(n.object.quaternion),Gt.copy(n.target),x=!1,!0):!1}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",Vt),n.domElement.removeEventListener("pointerdown",Nt),n.domElement.removeEventListener("pointercancel",Xe),n.domElement.removeEventListener("wheel",zi),n.domElement.removeEventListener("pointermove",Oe),n.domElement.removeEventListener("pointerup",Xe),n._domElementKeyEvents!==null&&(n._domElementKeyEvents.removeEventListener("keydown",Ci),n._domElementKeyEvents=null)};const n=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let c=r.NONE;const h=1e-6,g=new Jr,m=new Jr;let v=1;const C=new Se;let x=!1;const Q=new Et,P=new Et,D=new Et,G=new Et,F=new Et,k=new Et,T=new Et,z=new Et,J=new Et,O=[],S={};function U(){return 2*Math.PI/60/60*n.autoRotateSpeed}function ee(){return Math.pow(.95,n.zoomSpeed)}function K(M){m.theta-=M}function oe(M){m.phi-=M}const re=function(){const M=new Se;return function(te,Ie){M.setFromMatrixColumn(Ie,0),M.multiplyScalar(-te),C.add(M)}}(),_e=function(){const M=new Se;return function(te,Ie){n.screenSpacePanning===!0?M.setFromMatrixColumn(Ie,1):(M.setFromMatrixColumn(Ie,0),M.crossVectors(n.object.up,M)),M.multiplyScalar(te),C.add(M)}}(),pe=function(){const M=new Se;return function(te,Ie){const ke=n.domElement;if(n.object.isPerspectiveCamera){const Je=n.object.position;M.copy(Je).sub(n.target);let Gt=M.length();Gt*=Math.tan(n.object.fov/2*Math.PI/180),re(2*te*Gt/ke.clientHeight,n.object.matrix),_e(2*Ie*Gt/ke.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(re(te*(n.object.right-n.object.left)/n.object.zoom/ke.clientWidth,n.object.matrix),_e(Ie*(n.object.top-n.object.bottom)/n.object.zoom/ke.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function ve(M){n.object.isPerspectiveCamera?v/=M:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*M)),n.object.updateProjectionMatrix(),x=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function ue(M){n.object.isPerspectiveCamera?v*=M:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/M)),n.object.updateProjectionMatrix(),x=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function ae(M){Q.set(M.clientX,M.clientY)}function Z(M){T.set(M.clientX,M.clientY)}function Fe(M){G.set(M.clientX,M.clientY)}function rt(M){P.set(M.clientX,M.clientY),D.subVectors(P,Q).multiplyScalar(n.rotateSpeed);const te=n.domElement;K(2*Math.PI*D.x/te.clientHeight),oe(2*Math.PI*D.y/te.clientHeight),Q.copy(P),n.update()}function Bt(M){z.set(M.clientX,M.clientY),J.subVectors(z,T),J.y>0?ve(ee()):J.y<0&&ue(ee()),T.copy(z),n.update()}function Re(M){F.set(M.clientX,M.clientY),k.subVectors(F,G).multiplyScalar(n.panSpeed),pe(k.x,k.y),G.copy(F),n.update()}function ze(M){M.deltaY<0?ue(ee()):M.deltaY>0&&ve(ee()),n.update()}function ge(M){let te=!1;switch(M.code){case n.keys.UP:M.ctrlKey||M.metaKey||M.shiftKey?oe(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):pe(0,n.keyPanSpeed),te=!0;break;case n.keys.BOTTOM:M.ctrlKey||M.metaKey||M.shiftKey?oe(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):pe(0,-n.keyPanSpeed),te=!0;break;case n.keys.LEFT:M.ctrlKey||M.metaKey||M.shiftKey?K(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):pe(n.keyPanSpeed,0),te=!0;break;case n.keys.RIGHT:M.ctrlKey||M.metaKey||M.shiftKey?K(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):pe(-n.keyPanSpeed,0),te=!0;break}te&&(M.preventDefault(),n.update())}function Be(){if(O.length===1)Q.set(O[0].pageX,O[0].pageY);else{const M=.5*(O[0].pageX+O[1].pageX),te=.5*(O[0].pageY+O[1].pageY);Q.set(M,te)}}function Yt(){if(O.length===1)G.set(O[0].pageX,O[0].pageY);else{const M=.5*(O[0].pageX+O[1].pageX),te=.5*(O[0].pageY+O[1].pageY);G.set(M,te)}}function _i(){const M=O[0].pageX-O[1].pageX,te=O[0].pageY-O[1].pageY,Ie=Math.sqrt(M*M+te*te);T.set(0,Ie)}function Ge(){n.enableZoom&&_i(),n.enablePan&&Yt()}function li(){n.enableZoom&&_i(),n.enableRotate&&Be()}function wi(M){if(O.length==1)P.set(M.pageX,M.pageY);else{const Ie=ci(M),ke=.5*(M.pageX+Ie.x),Je=.5*(M.pageY+Ie.y);P.set(ke,Je)}D.subVectors(P,Q).multiplyScalar(n.rotateSpeed);const te=n.domElement;K(2*Math.PI*D.x/te.clientHeight),oe(2*Math.PI*D.y/te.clientHeight),Q.copy(P)}function Ye(M){if(O.length===1)F.set(M.pageX,M.pageY);else{const te=ci(M),Ie=.5*(M.pageX+te.x),ke=.5*(M.pageY+te.y);F.set(Ie,ke)}k.subVectors(F,G).multiplyScalar(n.panSpeed),pe(k.x,k.y),G.copy(F)}function zt(M){const te=ci(M),Ie=M.pageX-te.x,ke=M.pageY-te.y,Je=Math.sqrt(Ie*Ie+ke*ke);z.set(0,Je),J.set(0,Math.pow(z.y/T.y,n.zoomSpeed)),ve(J.y),T.copy(z)}function Fi(M){n.enableZoom&&zt(M),n.enablePan&&Ye(M)}function lt(M){n.enableZoom&&zt(M),n.enableRotate&&wi(M)}function Nt(M){n.enabled!==!1&&(O.length===0&&(n.domElement.setPointerCapture(M.pointerId),n.domElement.addEventListener("pointermove",Oe),n.domElement.addEventListener("pointerup",Xe)),$t(M),M.pointerType==="touch"?Ni(M):dn(M))}function Oe(M){n.enabled!==!1&&(M.pointerType==="touch"?hn(M):Jt(M))}function Xe(M){Vi(M),O.length===0&&(n.domElement.releasePointerCapture(M.pointerId),n.domElement.removeEventListener("pointermove",Oe),n.domElement.removeEventListener("pointerup",Xe)),n.dispatchEvent(hl),c=r.NONE}function dn(M){let te;switch(M.button){case 0:te=n.mouseButtons.LEFT;break;case 1:te=n.mouseButtons.MIDDLE;break;case 2:te=n.mouseButtons.RIGHT;break;default:te=-1}switch(te){case ds.DOLLY:if(n.enableZoom===!1)return;Z(M),c=r.DOLLY;break;case ds.ROTATE:if(M.ctrlKey||M.metaKey||M.shiftKey){if(n.enablePan===!1)return;Fe(M),c=r.PAN}else{if(n.enableRotate===!1)return;ae(M),c=r.ROTATE}break;case ds.PAN:if(M.ctrlKey||M.metaKey||M.shiftKey){if(n.enableRotate===!1)return;ae(M),c=r.ROTATE}else{if(n.enablePan===!1)return;Fe(M),c=r.PAN}break;default:c=r.NONE}c!==r.NONE&&n.dispatchEvent(fa)}function Jt(M){switch(c){case r.ROTATE:if(n.enableRotate===!1)return;rt(M);break;case r.DOLLY:if(n.enableZoom===!1)return;Bt(M);break;case r.PAN:if(n.enablePan===!1)return;Re(M);break}}function zi(M){n.enabled===!1||n.enableZoom===!1||c!==r.NONE||(M.preventDefault(),n.dispatchEvent(fa),ze(M),n.dispatchEvent(hl))}function Ci(M){n.enabled===!1||n.enablePan===!1||ge(M)}function Ni(M){switch(Ei(M),O.length){case 1:switch(n.touches.ONE){case hs.ROTATE:if(n.enableRotate===!1)return;Be(),c=r.TOUCH_ROTATE;break;case hs.PAN:if(n.enablePan===!1)return;Yt(),c=r.TOUCH_PAN;break;default:c=r.NONE}break;case 2:switch(n.touches.TWO){case hs.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Ge(),c=r.TOUCH_DOLLY_PAN;break;case hs.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;li(),c=r.TOUCH_DOLLY_ROTATE;break;default:c=r.NONE}break;default:c=r.NONE}c!==r.NONE&&n.dispatchEvent(fa)}function hn(M){switch(Ei(M),c){case r.TOUCH_ROTATE:if(n.enableRotate===!1)return;wi(M),n.update();break;case r.TOUCH_PAN:if(n.enablePan===!1)return;Ye(M),n.update();break;case r.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Fi(M),n.update();break;case r.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;lt(M),n.update();break;default:c=r.NONE}}function Vt(M){n.enabled!==!1&&M.preventDefault()}function $t(M){O.push(M)}function Vi(M){delete S[M.pointerId];for(let te=0;te<O.length;te++)if(O[te].pointerId==M.pointerId){O.splice(te,1);return}}function Ei(M){let te=S[M.pointerId];te===void 0&&(te=new Et,S[M.pointerId]=te),te.set(M.pageX,M.pageY)}function ci(M){const te=M.pointerId===O[0].pointerId?O[1]:O[0];return S[te.pointerId]}n.domElement.addEventListener("contextmenu",Vt),n.domElement.addEventListener("pointerdown",Nt),n.domElement.addEventListener("pointercancel",Xe),n.domElement.addEventListener("wheel",zi,{passive:!1}),this.update()}}const at={camera:void 0,composer:void 0,debugRoot:void 0,renderer:void 0,root:void 0,scene:void 0},Qu=()=>{const{camera:p,renderer:o}=at,t=new Iu(p,o);return()=>t.dispose()};var Qo=(p=>(p[p.NONE=0]="NONE",p[p.ORBIT=1]="ORBIT",p))(Qo||{});let ps;const _c=(p,o)=>{const{renderer:t}=at,n=()=>{ai("three-inspect.camera",{position:o.position.toArray(),quaternion:o.quaternion.toArray(),target:ps==null?void 0:ps.target.toArray(),zoom:o.zoom})};ps!==void 0&&(ps.dispose(),window.removeEventListener("pointerup",n),window.removeEventListener("wheel",n)),p===1?(ai("three-inspect.controls",1),ps=new yu(o,t.domElement),window.addEventListener("pointerup",n,{passive:!0}),window.addEventListener("wheel",n,{passive:!0}),Qu()):(ai("three-inspect.camera",null),ai("controls",null))};let ir=-1;const no=[],wc=()=>{for(let p=0,o=no.length;p<o;p+=1)no[p]();ir=requestAnimationFrame(wc)},ku=()=>{ir=requestAnimationFrame(wc)},Pu=()=>{cancelAnimationFrame(ir)},nr=p=>{no.push(p)},sr=p=>{no.splice(no.indexOf(p),1)},Du=`*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:var(--tp-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;font-weight:inherit;line-height:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]{display:none}*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.container{width:100%}@media (min-width: 640px){.container{max-width:640px}}@media (min-width: 768px){.container{max-width:768px}}@media (min-width: 1024px){.container{max-width:1024px}}@media (min-width: 1280px){.container{max-width:1280px}}@media (min-width: 1536px){.container{max-width:1536px}}.visible{visibility:visible}.absolute{position:absolute}.relative{position:relative}.sticky{position:sticky}.bottom-0{bottom:0}.left-0{left:0}.right-0{right:0}.top-0{top:0}.z-10{z-index:10}.z-50{z-index:50}.z-\\[100\\]{z-index:100}.inline{display:inline}.flex{display:flex}.grid{display:grid}.hidden{display:none}.h-\\[105px\\]{height:105px}.h-screen{height:100vh}.w-6{width:1.5rem}.w-\\[350px\\]{width:350px}.w-full{width:100%}.w-screen{width:100vw}.grow{flex-grow:1}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.resize{resize:both}.flex-col{flex-direction:column}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.overflow-x-hidden{overflow-x:hidden}.bg-\\[\\#28292e\\]{--tw-bg-opacity: 1;background-color:rgb(40 41 46 / var(--tw-bg-opacity))}.bg-\\[\\#333\\]{--tw-bg-opacity: 1;background-color:rgb(51 51 51 / var(--tw-bg-opacity))}.bg-zinc-400{--tw-bg-opacity: 1;background-color:rgb(161 161 170 / var(--tw-bg-opacity))}.bg-zinc-600{--tw-bg-opacity: 1;background-color:rgb(82 82 91 / var(--tw-bg-opacity))}.fill-zinc-100{fill:#f4f4f5}.fill-zinc-400{fill:#a1a1aa}.p-1{padding:.25rem}.px-2{padding-left:.5rem;padding-right:.5rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-1\\.5{padding-top:.375rem;padding-bottom:.375rem}.font-mono{font-family:var(--tp-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace)}.text-\\[11px\\]{font-size:11px}.text-zinc-400{--tw-text-opacity: 1;color:rgb(161 161 170 / var(--tw-text-opacity))}.text-zinc-800{--tw-text-opacity: 1;color:rgb(39 39 42 / var(--tw-text-opacity))}.shadow{--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.blur{--tw-blur: blur(8px);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}*{--bs-br: 0px !important;scrollbar-width:none}*::-webkit-scrollbar{display:none}.tp-grlv_g{height:30px!important}.tp-imgv{height:20px!important;transition:.2s!important}.tp-imgv:hover{height:80px!important}.tp-rotv_c{height:0!important;padding:0!important;margin-top:5px;width:100%!important}.stats .tp-rotv_c{height:auto!important}.orbit-controls-gizmo{position:absolute;top:10px;left:-90px;z-index:10}.hover\\:bg-\\[rgba\\(255\\,255\\,255\\,0\\.05\\)\\]:hover{background-color:#ffffff0d}.hover\\:bg-zinc-600:hover{--tw-bg-opacity: 1;background-color:rgb(82 82 91 / var(--tw-bg-opacity))}.hover\\:fill-zinc-100:hover{fill:#f4f4f5}.hover\\:fill-zinc-300:hover{fill:#d4d4d8}
`,Al="tv-flex",pl="tv-grid",ul="tv-hidden",gl="tv-scrollable",Xs="tv-resizable",bl="tv-readonly",ml="tv-disabled",vl="tv-focus",ko="tv-multiple-values",fl="tv-error",_l="flash",Su="tv-default-mousedown",Cc="font-regular";class Ru{constructor(o,t,n){N(this,"owner");N(this,"name");N(this,"fn");this.owner=o,this.name=t,this.fn=n}unbind(){this.owner&&(this.owner.unbind(this.name??void 0,this.fn),this.owner=null,this.name=null,this.fn=null)}call(...o){this.fn&&this.fn.call(this.owner,...o)}on(o,t){var n;return(n=this.owner)==null?void 0:n.on(o,t)}}class Lu{constructor(){N(this,"_suspendEvents",!1);N(this,"_additionalEmitters",[]);N(this,"_events");Object.defineProperty(this,"_events",{configurable:!1,enumerable:!1,value:{},writable:!0})}set suspendEvents(o){this._suspendEvents=!!o}get suspendEvents(){return this._suspendEvents}on(o,t){const n=this._events[o];return n===void 0?this._events[o]=[t]:n.indexOf(t)===-1&&n.push(t),new Ru(this,o,t)}once(o,t){const n=this.on(o,(...r)=>{t.call(this,...r),n.unbind()});return n}emit(o,...t){if(this._suspendEvents)return this;let n=this._events[o];if(n!=null&&n.length){n=n.slice(0);for(let r=0;r<n.length;r+=1)if(n[r])try{n[r].call(this,...t)}catch(c){console.error("%c%s %c(event error)","color: #06f",o,"color: #f00"),console.error(c.stack)}}if(this._additionalEmitters.length){const r=this._additionalEmitters.slice();for(let c=0,h=r.length;c<h;c+=1)r[c].emit(o,...t)}return this}unbind(o,t){if(o){const n=this._events[o];if(!n)return this;if(t){const r=n.indexOf(t);r!==-1&&(n.length===1?delete this._events[o]:n.splice(r,1))}else delete this._events[o]}else this._events={};return this}addEmitter(o){this._additionalEmitters.includes(o)||this._additionalEmitters.push(o)}removeEmitter(o){const t=this._additionalEmitters.indexOf(o);t!==-1&&this._additionalEmitters.splice(t,1)}}const Mu=["flexDirection","flexGrow","flexBasis","flexShrink","flexWrap","alignItems","alignSelf","justifyContent","justifySelf"];class pt extends Lu{constructor(t={}){super();N(this,"_destroyed",!1);N(this,"_parent",null);N(this,"_eventsParent",[]);N(this,"_dom");N(this,"_hiddenParents");N(this,"_flashTimeout",null);N(this,"_suppressChange",!1);N(this,"_ignoreParent",!1);N(this,"_enabled",!0);N(this,"_readOnly",!1);N(this,"_hidden",!1);N(this,"_hasError",!1);N(this,"_domContent",null);N(this,"_onMouseOver",t=>{this.emit("hover",t)});N(this,"_onMouseOut",t=>{this.emit("hoverend",t)});if(typeof t.dom=="string"?this._dom=document.createElement(t.dom):t.dom instanceof Node?this._dom=t.dom:this._dom=document.createElement("div"),t.id!==void 0&&(this._dom.id=t.id),this._dom.ui=this,this._dom.addEventListener("mouseover",this._onMouseOver),this._dom.addEventListener("mouseout",this._onMouseOut),this._dom.classList.add("tv-element",Cc),t.class){const n=Array.isArray(t.class)?t.class:[t.class];for(const r of n)this._dom.classList.add(r)}this.enabled=t.enabled??!0,this._hiddenParents=!t.isRoot,this.hidden=t.hidden??!1,this.readOnly=t.readOnly??!1,this.ignoreParent=t.ignoreParent??!1,t.width!==void 0&&(this.width=t.width),t.height!==void 0&&(this.height=t.height),t.tabIndex!==void 0&&(this.tabIndex=t.tabIndex);for(const n in t)t[n]!==void 0&&Mu.indexOf(n)!==-1&&(this[n]=t[n])}destroy(){if(this._destroyed)return;if(this._destroyed=!0,this.parent){const n=this.parent;for(const r of this._eventsParent)r.unbind();this._eventsParent.length=0,"remove"in n&&!n._destroyed&&n.remove(this),this._parent=null,!n._destroyed&&this._dom&&this._dom.parentElement&&this._dom.parentElement.removeChild(this._dom)}const t=this._dom;t&&(t.removeEventListener("mouseover",this._onMouseOver),t.removeEventListener("mouseout",this._onMouseOut),delete t.ui,this._dom=null),this._flashTimeout&&window.clearTimeout(this._flashTimeout),this.emit("destroy",t,this),this.unbind()}flash(){this._flashTimeout||(this.class.add(_l),this._flashTimeout=window.setTimeout(()=>{this._flashTimeout=null,this.class.remove(_l)},200))}_onClick(t){this.enabled&&this.emit("click",t)}_onHiddenToRootChange(t){this.emit(t?"hideToRoot":"showToRoot")}_onEnabledChange(t){t?this.class.remove(ml):this.class.add(ml),this.emit(t?"enable":"disable")}_onParentDestroy(){this.destroy()}_onParentDisable(){this._ignoreParent||this._enabled&&this._onEnabledChange(!1)}_onParentEnable(){this._ignoreParent||this._enabled&&this._onEnabledChange(!0)}_onParentShowToRoot(){const t=this.hiddenToRoot;this._hiddenParents=!1,t!==this.hiddenToRoot&&this._onHiddenToRootChange(this.hiddenToRoot)}_onParentHideToRoot(){const t=this.hiddenToRoot;this._hiddenParents=!0,t!==this.hiddenToRoot&&this._onHiddenToRootChange(this.hiddenToRoot)}_onReadOnlyChange(t){t?this.class.add(bl):this.class.remove(bl),this.emit("readOnly",t)}_onParentReadOnlyChange(t){this._ignoreParent||(t?this._readOnly||this._onReadOnlyChange(!0):this._readOnly||this._onReadOnlyChange(!1))}set enabled(t){if(this._enabled===t)return;const n=this.enabled;this._enabled=t,n!==t&&this._onEnabledChange(t)}get enabled(){return this._ignoreParent?this._enabled:this._enabled&&(!this._parent||this._parent.enabled)}set ignoreParent(t){this._ignoreParent=t,this._onEnabledChange(this.enabled),this._onReadOnlyChange(this.readOnly)}get ignoreParent(){return this._ignoreParent}get dom(){return this._dom}set parent(t){if(t===this._parent)return;const n=this.enabled,r=this.readOnly,c=this.hiddenToRoot;if(this._parent){for(let v=0;v<this._eventsParent.length;v+=1)this._eventsParent[v].unbind();this._eventsParent.length=0}this._parent=t,this._parent?(this._eventsParent.push(this._parent.once("destroy",this._onParentDestroy.bind(this))),this._eventsParent.push(this._parent.on("disable",this._onParentDisable.bind(this))),this._eventsParent.push(this._parent.on("enable",this._onParentEnable.bind(this))),this._eventsParent.push(this._parent.on("readOnly",this._onParentReadOnlyChange.bind(this))),this._eventsParent.push(this._parent.on("showToRoot",this._onParentShowToRoot.bind(this))),this._eventsParent.push(this._parent.on("hideToRoot",this._onParentHideToRoot.bind(this))),this._hiddenParents=this._parent.hiddenToRoot):this._hiddenParents=!0,this.emit("parent",this._parent);const h=this.enabled;h!==n&&this._onEnabledChange(h);const g=this.readOnly;g!==r&&this._onReadOnlyChange(g);const m=this.hiddenToRoot;m!==c&&this._onHiddenToRootChange(m)}get parent(){return this._parent}set hidden(t){if(t===this._hidden)return;const n=this.hiddenToRoot;this._hidden=t,t?this.class.add(ul):this.class.remove(ul),this.emit(t?"hide":"show"),this.hiddenToRoot!==n&&this._onHiddenToRootChange(this.hiddenToRoot)}get hidden(){return this._hidden}get hiddenToRoot(){return this._hidden||this._hiddenParents}set readOnly(t){this._readOnly!==t&&(this._readOnly=t,this._onReadOnlyChange(t))}get readOnly(){var t;return this._ignoreParent?this._readOnly:this._readOnly||!!((t=this._parent)!=null&&t.readOnly)}set error(t){this._hasError!==t&&(this._hasError=t,t?this.class.add(fl):this.class.remove(fl))}get error(){return this._hasError}get style(){return this._dom.style}get class(){return this._dom.classList}set width(t){this.style.width=typeof t=="number"?`${String(t)}px`:t}get width(){return this._dom.clientWidth}set height(t){this.style.height=typeof t=="number"?`${String(t)}px`:t}get height(){return this._dom.clientHeight}set tabIndex(t){this._dom.tabIndex=t}get tabIndex(){return this._dom.tabIndex}get destroyed(){return this._destroyed}set flexDirection(t){this.style.flexDirection=t}get flexDirection(){return this.style.flexDirection}set flexGrow(t){this.style.flexGrow=t}get flexGrow(){return this.style.flexGrow}set flexBasis(t){this.style.flexBasis=t}get flexBasis(){return this.style.flexBasis}set flexShrink(t){this.style.flexShrink=t}get flexShrink(){return this.style.flexShrink}set flexWrap(t){this.style.flexWrap=t}get flexWrap(){return this.style.flexWrap}set alignItems(t){this.style.alignItems=t}get alignItems(){return this.style.alignItems}set alignSelf(t){this.style.alignSelf=t}get alignSelf(){return this.style.alignSelf}set justifyContent(t){this.style.justifyContent=t}get justifyContent(){return this.style.justifyContent}set justifySelf(t){this.style.justifySelf=t}get justifySelf(){return this.style.justifySelf}set disabled(t){this.enabled=!t}get disabled(){return!this.enabled}set element(t){this._dom=t}get element(){return this.dom}set innerElement(t){this._domContent=t}get innerElement(){return this._domContent}}N(pt,"EVENT_ENABLE","enable"),N(pt,"EVENT_DISABLE","disable"),N(pt,"EVENT_HIDE","hide"),N(pt,"EVENT_HIDE_TO_ROOT","hideToRoot"),N(pt,"EVENT_SHOW","show"),N(pt,"EVENT_SHOW_TO_ROOT","showToRoot"),N(pt,"EVENT_READ_ONLY","readOnly"),N(pt,"EVENT_PARENT","parent"),N(pt,"EVENT_CLICK","click"),N(pt,"EVENT_HOVER","hover"),N(pt,"EVENT_HOVER_END","hoverend"),N(pt,"EVENT_DESTROY","destroy");const wl=4,Cl=[null,"top","right","bottom","left"],El=`${Xs}-resizing`,Tu="tv-resizable-handle",Zs="tv-container-dragged",Il=`${Zs}-child`,zn=p=>"dom"in p?p.dom:p;class Vn extends pt{constructor(t={}){super(t);N(this,"_scrollable",!1);N(this,"_flex",!1);N(this,"_grid",!1);N(this,"_domResizeHandle",null);N(this,"_resizeTouchId",null);N(this,"_resizeData",null);N(this,"_resizeHorizontally",!0);N(this,"_resizeMin",100);N(this,"_resizeMax",300);N(this,"_draggedStartIndex",-1);N(this,"_domContent");N(this,"_resizable",null);N(this,"_onScroll",t=>{this.emit("scroll",t)});N(this,"_onResizeStart",t=>{t.preventDefault(),t.stopPropagation(),window.addEventListener("mousemove",this._onResizeMove),window.addEventListener("mouseup",this._onResizeEnd),this._resizeStart()});N(this,"_onResizeMove",t=>{t.preventDefault(),t.stopPropagation(),this._resizeMove(t.clientX,t.clientY)});N(this,"_onResizeEnd",t=>{t.preventDefault(),t.stopPropagation(),window.removeEventListener("mousemove",this._onResizeMove),window.removeEventListener("mouseup",this._onResizeEnd),this._resizeEnd()});N(this,"_onResizeTouchStart",t=>{t.preventDefault(),t.stopPropagation();for(let n=0;n<t.changedTouches.length;n+=1){const r=t.changedTouches[n];r.target===this._domResizeHandle&&(this._resizeTouchId=r.identifier)}window.addEventListener("touchmove",this._onResizeTouchMove),window.addEventListener("touchend",this._onResizeTouchEnd),this._resizeStart()});N(this,"_onResizeTouchMove",t=>{for(let n=0;n<t.changedTouches.length;n+=1){const r=t.changedTouches[n];if(r.identifier===this._resizeTouchId){t.stopPropagation(),t.preventDefault(),this._resizeMove(r.clientX,r.clientY);break}}});N(this,"_onResizeTouchEnd",t=>{for(let n=0;n<t.changedTouches.length;n+=1)if(t.changedTouches[n].identifier!==this._resizeTouchId){this._resizeTouchId=null,t.preventDefault(),t.stopPropagation(),window.removeEventListener("touchmove",this._onResizeTouchMove),window.removeEventListener("touchend",this._onResizeTouchEnd),this._resizeEnd();break}});this.class.add("tv-container"),this.domContent=this._dom,this._domContent=this._dom,t.scrollable&&(this.scrollable=!0),this.flex=!!t.flex;let n=!!t.grid;n&&this.flex&&(console.error('Invalid Container arguments: "grid" and "flex" cannot both be true.'),n=!1),this.grid=n,this.resizable=t.resizable??null,t.resizeMin!==void 0&&(this.resizeMin=t.resizeMin),t.resizeMax!==void 0&&(this.resizeMax=t.resizeMax)}destroy(){this._destroyed||(this.domContent=null,this._domResizeHandle&&(this._domResizeHandle.removeEventListener("mousedown",this._onResizeStart),window.removeEventListener("mousemove",this._onResizeMove),window.removeEventListener("mouseup",this._onResizeEnd),this._domResizeHandle.removeEventListener("touchstart",this._onResizeTouchStart),window.removeEventListener("touchmove",this._onResizeTouchMove),window.removeEventListener("touchend",this._onResizeTouchEnd)),super.destroy())}append(t){const n=zn(t);this._domContent.appendChild(n),this._onAppendChild(t)}appendBefore(t,n){const r=zn(t);this._domContent.appendChild(r);const c=n&&zn(n);this._domContent.insertBefore(r,c),this._onAppendChild(t)}appendAfter(t,n){const r=zn(t),c=n&&zn(n),h=c?c.nextSibling:null;h?this._domContent.insertBefore(r,h):this._domContent.appendChild(r),this._onAppendChild(t)}prepend(t){const n=zn(t),r=this._domContent.firstChild;r?this._domContent.insertBefore(n,r):this._domContent.appendChild(n),this._onAppendChild(t)}remove(t){if(t.parent!==this)return;const n=zn(t);this._domContent.removeChild(n),this._onRemoveChild(t)}move(t,n){let r=-1;for(let c=0;c<this.dom.childNodes.length;c+=1)if(this.dom.childNodes[c].ui===t){r=c;break}r===-1?this.appendBefore(t,this.dom.childNodes[n]):n!==r&&(this.remove(t),n<r?this.appendBefore(t,this.dom.childNodes[n]):this.appendAfter(t,this.dom.childNodes[n-1]))}clear(){for(let t=this._domContent.childNodes.length-1;t>-1;t-=1){const n=this._domContent.childNodes[t];n.ui&&n.ui!==this&&n.ui.destroy()}this._domResizeHandle&&(this._domResizeHandle.removeEventListener("mousedown",this._onResizeStart),this._domResizeHandle.removeEventListener("touchstart",this._onResizeTouchStart),this._domResizeHandle=null),this._domContent.innerHTML="",this.resizable&&(this._domResizeHandle=this._createResizeHandle(),this._dom.appendChild(this._domResizeHandle))}_onAppendChild(t){t.parent=this,this.emit("append",t)}_onRemoveChild(t){t.parent=null,this.emit("remove",t)}_createResizeHandle(){const t=document.createElement("div");return t.classList.add(Tu),t.ui=this,t.addEventListener("mousedown",this._onResizeStart),t.addEventListener("touchstart",this._onResizeTouchStart,{passive:!1}),t}_resizeStart(){this.class.add(El)}_resizeMove(t,n){if(!this._resizeData){this._resizeData={height:this.dom.clientHeight,width:this.dom.clientWidth,x:t,y:n};return}if(this._resizeHorizontally){let r=this._resizeData.x-t;this._resizable==="right"&&(r=-r),this.width=wl+Math.max(this._resizeMin,Math.min(this._resizeMax,this._resizeData.width+r))}else{let r=this._resizeData.y-n;this._resizable==="bottom"&&(r=-r),this.height=Math.max(this._resizeMin,Math.min(this._resizeMax,this._resizeData.height+r))}this.emit("resize")}_resizeEnd(){this._resizeData=null,this.class.remove(El)}resize(t=0,n=0){this._resizeStart(),this._resizeMove(0,0),this._resizeMove(-t+wl,-n),this._resizeEnd()}_getDraggedChildIndex(t){for(let n=0;n<this.dom.childNodes.length;n+=1)if(this.dom.childNodes[n].ui===t)return n;return-1}_onChildDragStart(t,n){this.class.add(Il),this._draggedStartIndex=this._getDraggedChildIndex(n),n.class.add(Zs),this.emit("child:dragstart",n,this._draggedStartIndex)}_onChildDragMove(t,n){const r=this.dom.getBoundingClientRect(),c=t.clientX<r.left||t.clientX>r.right||t.clientY<r.top||t.clientY>r.bottom,h=this._getDraggedChildIndex(n);if(c){n.class.remove(Zs),this._draggedStartIndex!==h&&(this.remove(n),this._draggedStartIndex<h?this.appendBefore(n,this.dom.childNodes[this._draggedStartIndex]):this.appendAfter(n,this.dom.childNodes[this._draggedStartIndex-1]));return}n.class.add(Zs);const g=t.clientY-r.top;let m=null;for(let v=0;v<this.dom.childNodes.length;v+=1){const C=this.dom.childNodes[v].ui,x=C.dom.offsetTop;if(v<h){if(g<=x+C.header.height){m=v;break}}else if(v>h&&g+n.height>=x+C.height){m=v;break}}m!==null&&h!==m&&(this.remove(n),m<h?this.appendBefore(n,this.dom.childNodes[m]):this.appendAfter(n,this.dom.childNodes[m-1]))}_onChildDragEnd(t,n){this.class.remove(Il),n.class.remove(Zs);const r=this._getDraggedChildIndex(n);this.emit("child:dragend",n,r,this._draggedStartIndex),this._draggedStartIndex=-1}forEachChild(t){for(let n=0;n<this.dom.childNodes.length;n+=1){const r=this.dom.childNodes[n].ui;if(r&&t(r,n)===!1)break}}set flex(t){t!==this._flex&&(this._flex=t,t?this.class.add(Al):this.class.remove(Al))}get flex(){return this._flex}set grid(t){t!==this._grid&&(this._grid=t,t?this.class.add(pl):this.class.remove(pl))}get grid(){return this._grid}set scrollable(t){this._scrollable!==t&&(this._scrollable=t,t?this.class.add(gl):this.class.remove(gl))}get scrollable(){return this._scrollable}set resizable(t){if(t!==this._resizable){if(Cl.indexOf(t)===-1){console.error(`Invalid resizable value: must be one of ${Cl.join(",")}`);return}this._resizable&&this.class.remove(`${Xs}-${this._resizable}`),this._resizable=t,this._resizeHorizontally=t==="right"||t==="left",t?(this.class.add(Xs),this.class.add(`${Xs}-${t}`),this._domResizeHandle||(this._domResizeHandle=this._createResizeHandle()),this._dom.appendChild(this._domResizeHandle)):(this.class.remove(Xs),this._domResizeHandle&&this._dom.removeChild(this._domResizeHandle))}}get resizable(){return this._resizable}set resizeMin(t){this._resizeMin=Math.max(0,Math.min(t,this._resizeMax))}get resizeMin(){return this._resizeMin}set resizeMax(t){this._resizeMax=Math.max(this._resizeMin,t)}get resizeMax(){return this._resizeMax}set domContent(t){this._domContent!==t&&(this._domContent&&this._domContent.removeEventListener("scroll",this._onScroll),this._domContent=t,this._domContent&&this._domContent.addEventListener("scroll",this._onScroll))}get domContent(){return this._domContent}}N(Vn,"EVENT_APPEND","append"),N(Vn,"EVENT_REMOVE","remove"),N(Vn,"EVENT_SCROLL","scroll"),N(Vn,"EVENT_RESIZE","resize");const Fu="tv-label";class xl extends pt{constructor(t={}){super({dom:"span",...t});N(this,"_unsafe");N(this,"_text","");N(this,"renderChanges",!1);this.class.add(Fu),this._unsafe=t.unsafe??!1,this.text=t.text??t.value??"",t.allowTextSelection&&this.class.add(Su),t.nativeTooltip&&(this.dom.title=this.text),this.placeholder=t.placeholder??null,this.renderChanges=t.renderChanges??!1,this.on("change",()=>{this.renderChanges&&this.flash()})}_updateText(t){return this.class.remove(ko),this._text===t?!1:(this._text=t,this._unsafe?this._dom.innerHTML=t:this._dom.textContent=t,this.emit("change",t),!0)}set text(t){this._updateText(t??"")}get text(){return this._text}set value(t){this.text=t}get value(){return this.text}set values(t){t.some(n=>n!==t[0])?(this._updateText(""),this.class.add(ko)):this._updateText(t[0])}set placeholder(t){t?this.dom.setAttribute("placeholder",t):this.dom.removeAttribute("placeholder")}get placeholder(){return this.dom.getAttribute("placeholder")??""}}const zu="tv-input-element";class Nu extends pt{constructor(t={}){super(t);N(this,"_domInput");N(this,"_suspendInputChangeEvt");N(this,"_prevValue");N(this,"_keyChange",!1);N(this,"_renderChanges",!1);N(this,"_blurOnEnter",!0);N(this,"_blurOnEscape",!0);N(this,"_onInputKeyDownEvt");N(this,"_onInputChangeEvt");N(this,"_onInputFocus",t=>{this.class.add(vl),this.emit("focus",t),this._prevValue=this._domInput.value});N(this,"_onInputBlur",t=>{this.class.remove(vl),this.emit("blur",t)});N(this,"_onInputKeyUp",t=>{t.key!=="Escape"&&this._onInputChange(t),this.emit("keyup",t)});N(this,"_onInputCtxMenu",t=>{this._domInput.select()});N(this,"_updateInputReadOnly",()=>{!this.enabled||this.readOnly?this._domInput.setAttribute("readonly","true"):this._domInput.removeAttribute("readonly")});this.class.add(zu);let n=t.input;n||(n=document.createElement("input"),n.type="text"),n.ui=this,n.tabIndex=0,n.autocomplete="off",this._onInputKeyDownEvt=this._onInputKeyDown.bind(this),this._onInputChangeEvt=this._onInputChange.bind(this),n.addEventListener("change",this._onInputChangeEvt),n.addEventListener("keydown",this._onInputKeyDownEvt),n.addEventListener("focus",this._onInputFocus),n.addEventListener("blur",this._onInputBlur),n.addEventListener("contextmenu",this._onInputCtxMenu,!1),this.dom.appendChild(n),this._domInput=n,this._suspendInputChangeEvt=!1,t.value!==void 0&&(this._domInput.value=t.value),this.placeholder=t.placeholder??"",this.renderChanges=t.renderChanges??!1,this.blurOnEnter=t.blurOnEnter??!0,this.blurOnEscape=t.blurOnEscape??!0,this.keyChange=t.keyChange??!1,this._prevValue=null,this.on("change",()=>{this.renderChanges&&this.flash()}),this.on("disable",this._updateInputReadOnly),this.on("enable",this._updateInputReadOnly),this.on("readOnly",this._updateInputReadOnly),this._updateInputReadOnly()}destroy(){if(this._destroyed)return;const t=this._domInput;t.removeEventListener("change",this._onInputChangeEvt),t.removeEventListener("keydown",this._onInputKeyDownEvt),t.removeEventListener("focus",this._onInputFocus),t.removeEventListener("blur",this._onInputBlur),t.removeEventListener("keyup",this._onInputKeyUp),t.removeEventListener("contextmenu",this._onInputCtxMenu),super.destroy()}_onInputKeyDown(t){if(t.key==="Enter"&&this.blurOnEnter)this._suspendInputChangeEvt=this.keyChange,this._domInput.blur(),this._suspendInputChangeEvt=!1;else if(t.key==="Escape"){this._suspendInputChangeEvt=!0;const n=this._domInput.value;this._domInput.value=this._prevValue??"",this._suspendInputChangeEvt=!1,this.keyChange&&n!==this._prevValue&&this._onInputChange(t),this.blurOnEscape&&this._domInput.blur()}this.emit("keydown",t)}_onInputChange(t){}focus(t){this._domInput.focus(),t&&this._domInput.select()}blur(){this._domInput.blur()}set placeholder(t){t?this.dom.setAttribute("placeholder",t):this.dom.removeAttribute("placeholder")}get placeholder(){return this.dom.getAttribute("placeholder")??""}set keyChange(t){this._keyChange!==t&&(this._keyChange=t,t?this._domInput.addEventListener("keyup",this._onInputKeyUp):this._domInput.removeEventListener("keyup",this._onInputKeyUp))}get keyChange(){return this._keyChange}get input(){return this._domInput}set blurOnEnter(t){this._blurOnEnter=t}get blurOnEnter(){return this._blurOnEnter}set blurOnEscape(t){this._blurOnEnter=t}get blurOnEscape(){return this._blurOnEnter}set renderChanges(t){this._renderChanges=t}get renderChanges(){return this._renderChanges}}class Vu extends Nu{constructor(t={}){super(t);N(this,"_onValidate");this.class.add("tv-text-input"),t.onValidate&&(this.onValidate=t.onValidate)}_onInputChange(){if(!this._suspendInputChangeEvt){if(this._onValidate){const t=!this._onValidate(this.value);if(this.error=t,t)return}else this.error=!1;this.emit("change",this.value)}}_updateValue(t){let n=t;if(this.class.remove(ko),n&&typeof n=="object")if(Array.isArray(n)){let r=!1;for(let c=0;c<n.length;c+=1)if(n[c]&&typeof n[c]=="object"){r=!0;break}n=r?"[Not available]":n.map(c=>c===null?"null":c).join(",")}else n="[Not available]";return n===this.value?!1:(this._suspendInputChangeEvt=!0,this._domInput.value=n==null?"":String(n),this._suspendInputChangeEvt=!1,this.emit("change",n),!0)}set value(t){this._updateValue(t)&&(this.error=!1)}get value(){return this._domInput.value}set values(t){t.some(n=>n!==t[0])?(this._updateValue(null),this.class.add(ko)):this._updateValue(t[0])}set onValidate(t){this._onValidate=t}get onValidate(){return this._onValidate}}const _a="tv-item-selected",wa="tv-item-open",Gu="tv-item-contents",Ca="tv-item-empty",Ea="tv-item-rename",Ct=class Ct extends Vn{constructor(t={}){super(t);N(this,"_containerContents");N(this,"_labelIcon");N(this,"_labelText");N(this,"_numChildren",0);N(this,"_treeView");N(this,"_allowDrag",!0);N(this,"_allowDrop",!0);N(this,"_allowSelect",!0);N(this,"_icon");N(this,"_onContentKeyDown",t=>{t.target.tagName!=="INPUT"&&this.allowSelect&&this._treeView&&this._treeView._onChildKeyDown(t,this)});N(this,"_onContentMouseDown",t=>{var n;!((n=this._treeView)!=null&&n.allowDrag)||!this._allowDrag||(this._treeView._updateModifierKeys(t),t.stopPropagation())});N(this,"_onContentMouseUp",t=>{t.stopPropagation(),t.preventDefault(),window.removeEventListener("mouseup",this._onContentMouseUp),this._treeView&&this._treeView._onChildDragEnd(t,this)});N(this,"_onContentMouseOver",t=>{t.stopPropagation(),this._treeView&&this._treeView._onChildDragOver(t,this),this.emit("hover",t)});N(this,"_onContentDragStart",t=>{var n;t.stopPropagation(),t.preventDefault(),(n=this._treeView)!=null&&n.allowDrag&&(this.class.contains(Ea)||(this._treeView._onChildDragStart(t,this),window.addEventListener("mouseup",this._onContentMouseUp)))});N(this,"_onContentClick",t=>{if(!this.allowSelect||t.button!==0||t.target.tagName==="INPUT")return;t.stopPropagation();const n=this._containerContents.dom.getBoundingClientRect();this._numChildren>0&&t.clientX-n.left<0?(this.open=!this.open,t.altKey&&this._dfs(r=>{r.open=this.open}),this.focus()):this._treeView&&this._treeView._onChildClick(t,this)});N(this,"_onContentDblClick",t=>{var r;if(!((r=this._treeView)!=null&&r.allowRenaming)||t.button!==0||t.target.tagName==="INPUT")return;t.stopPropagation();const n=this._containerContents.dom.getBoundingClientRect();this.numChildren&&t.clientX-n.left<0||(this.allowSelect&&(this._treeView.deselect(),this._treeView._onChildClick(t,this)),this.rename())});N(this,"_onContentContextMenu",t=>{var n,r;(r=(n=this._treeView)==null?void 0:n._onContextMenu)==null||r.call(n,t,this)});N(this,"_onContentFocus",t=>{this.emit("focus")});N(this,"_onContentBlur",t=>{this.emit("blur")});this.class.add("tv-item",Ca),this._containerContents=new Vn({class:Gu,flex:!0,flexDirection:"row",tabIndex:0}),this.append(this._containerContents),this._containerContents.dom.innerHTML+='<svg class="icon-minus" viewBox="0 0 32 32"><path fill="#fff" d="M8 14.656h16v2.688h-16v-2.688z"></path></svg>',this._containerContents.dom.innerHTML+='<svg class="icon-plus" viewBox="0 0 768 768"><path fill="#fff" d="M607.5 415.5h-192v192h-63v-192h-192v-63h192v-192h63v192h192v63z"></path></svg>',this._containerContents.dom.draggable=!0,this._labelIcon=new xl({class:"tv-item-icon"}),this._containerContents.append(this._labelIcon),this.icon=t.icon,this._labelText=new xl({class:"tv-item-text"}),this._containerContents.append(this._labelText),this.allowSelect=t.allowSelect??!0,this.allowDrop=t.allowDrop??!0,this.allowDrag=t.allowDrag??!0,t.text&&(this.text=t.text),t.selected&&(this.selected=t.selected);const n=this._containerContents.dom;n.addEventListener("focus",this._onContentFocus),n.addEventListener("blur",this._onContentBlur),n.addEventListener("keydown",this._onContentKeyDown),n.addEventListener("dragstart",this._onContentDragStart),n.addEventListener("mousedown",this._onContentMouseDown),n.addEventListener("mouseover",this._onContentMouseOver),n.addEventListener("click",this._onContentClick),n.addEventListener("dblclick",this._onContentDblClick),n.addEventListener("contextmenu",this._onContentContextMenu)}destroy(){if(this._destroyed)return;const{dom:t}=this._containerContents;t.removeEventListener("focus",this._onContentFocus),t.removeEventListener("blur",this._onContentBlur),t.removeEventListener("keydown",this._onContentKeyDown),t.removeEventListener("dragstart",this._onContentDragStart),t.removeEventListener("mousedown",this._onContentMouseDown),t.removeEventListener("mouseover",this._onContentMouseOver),t.removeEventListener("click",this._onContentClick),t.removeEventListener("dblclick",this._onContentDblClick),t.removeEventListener("contextmenu",this._onContentContextMenu),window.removeEventListener("mouseup",this._onContentMouseUp),super.destroy()}_onAppendChild(t){super._onAppendChild(t),t instanceof Ct&&(this._numChildren+=1,this._parent!==this._treeView&&this.class.remove(Ca),this._treeView&&this._treeView._onAppendTreeViewItem(t))}_onRemoveChild(t){t instanceof Ct&&(this._numChildren-=1,this._numChildren===0&&this.class.add(Ca),this._treeView&&this._treeView._onRemoveTreeViewItem(t)),super._onRemoveChild(t)}_dfs(t){t(this);let n=this.firstChild;for(;n;)n._dfs(t),n=n.nextSibling}rename(){this.class.add(Ea);const t=new Vu({class:Cc,renderChanges:!1,value:this.text});t.on("blur",()=>{t.destroy()}),t.on("destroy",()=>{this.class.remove(Ea),this.focus()}),t.on("change",n=>{const r=n.trim();r&&(this.text=r,t.destroy())}),t.on("disable",()=>{t.input.removeAttribute("readonly")}),this._containerContents.append(t),t.focus(!0)}focus(){this._containerContents.dom.focus()}blur(){this._containerContents.dom.blur()}set selected(t){if(t===this.selected){t&&this.focus();return}t?(this._containerContents.class.add(_a),this.emit("select",this),this._treeView&&this._treeView._onChildSelected(this),this.focus()):(this._containerContents.class.remove(_a),this.blur(),this.emit("deselect",this),this._treeView&&this._treeView._onChildDeselected(this))}get selected(){return this._containerContents.class.contains(_a)}set text(t){this._labelText.value!==t&&(this._labelText.value=t,this._treeView&&this._treeView._onChildRename(this,t))}get text(){return this._labelText.value}get textLabel(){return this._labelText}get iconLabel(){return this._labelIcon}set open(t){if(this.open!==t)if(t){if(!this.numChildren)return;this.class.add(wa),this.emit("open",this)}else this.class.remove(wa),this.emit("close",this)}get open(){return this.class.contains(wa)||this.parent===this._treeView}set parentsOpen(t){let n=this.parent;for(;n&&n instanceof Ct;)n.open=t,n=n.parent}get parentsOpen(){let t=this.parent;for(;t&&t instanceof Ct;){if(!t.open)return!1;t=t.parent}return!0}set allowDrop(t){this._allowDrop=t}get allowDrop(){return this._allowDrop}set allowDrag(t){this._allowDrag=t}get allowDrag(){return this._allowDrag}set allowSelect(t){this._allowSelect=t}get allowSelect(){return this._allowSelect}set treeView(t){this._treeView=t}get treeView(){return this._treeView}get numChildren(){return this._numChildren}get firstChild(){if(this._numChildren){for(let t=0;t<this.dom.childNodes.length;t+=1)if(this.dom.childNodes[t].ui instanceof Ct)return this.dom.childNodes[t].ui}return null}get lastChild(){if(this._numChildren){for(let t=this.dom.childNodes.length-1;t>=0;t-=1)if(this.dom.childNodes[t].ui instanceof Ct)return this.dom.childNodes[t].ui}return null}get nextSibling(){let t=this.dom.nextSibling;for(;t&&!(t.ui instanceof Ct);)t=t.nextSibling;return t&&t.ui}get previousSibling(){let t=this.dom.previousSibling;for(;t&&!(t.ui instanceof Ct);)t=t.previousSibling;return t&&t.ui}set icon(t){this._icon!==t&&(this._icon=t,t?this._labelIcon.dom.setAttribute("data-icon",String.fromCodePoint(Number.parseInt(t,16))):(this._labelIcon.dom.style.display="none",this._labelIcon.dom.removeAttribute("data-icon")))}get icon(){return this._icon}};N(Ct,"EVENT_SELECT","select"),N(Ct,"EVENT_DESELECT","deselect"),N(Ct,"EVENT_OPEN","open"),N(Ct,"EVENT_CLOSE","close");let xt=Ct;const Ou=`@charset "UTF-8";:host{--font-family: inconsolatamedium, Monaco, Menlo, "Ubuntu Mono", Consolas, source-code-pro, monospace;--bg-darkest: #202020;--bg-darker: #202020;--bg-dark: #282828;--bg-primary: #333333;--color-line: #333333;--color-icon: #666666;--text-darkest: rgb(170 170 170 / 50%);--text-dark: rgb(170 170 170 / 50%);--text-secondary: #aaaaaa;--text-primary: #ffffff;--text-active: #4CAF50;--error: #fb222f;--error-secondary: #d34141;--border-primary: #aaaaaa;--element-shadow-hover: 0 0 2px 1px rgba(255, 102, 0, .3);--element-shadow-active: 0 0 0 1px rgba(255, 102, 0, .3);--element-shadow-error: 0 0 0 1px var(--error-secondary);--element-color-placeholder: #829193;--field-padding: 3px;--disabled-opacity: .4;--element-margin: 6px;--element-opacity-disabled: .4;--element-opacity-readonly: .7}.tv-container{position:relative;min-width:0;min-height:0}.tv-container.tv-resizable>.tv-resizable-handle{position:absolute;z-index:1;opacity:0;background-color:transparent}.tv-container.tv-resizable>.tv-resizable-handle:hover{opacity:1}.tv-container.tv-resizable.tv-resizable-resizing>.tv-resizable-handle{opacity:1}.tv-container.tv-resizable.tv-resizable-left>.tv-resizable-handle,.tv-container.tv-resizable.tv-resizable-right>.tv-resizable-handle{top:0;bottom:0;width:1px;height:auto;cursor:ew-resize}.tv-container.tv-resizable.tv-resizable-left>.tv-resizable-handle{left:0;border-left:3px solid var(--bg-darkest)}.tv-container.tv-resizable.tv-resizable-right>.tv-resizable-handle{right:0;border-right:3px solid var(--bg-darkest)}.tv-container.tv-resizable.tv-resizable-top>.tv-resizable-handle,.tv-container.tv-resizable.tv-resizable-bottom>.tv-resizable-handle{left:0;right:0;width:auto;height:1px;cursor:ns-resize}.tv-container.tv-resizable.tv-resizable-top>.tv-resizable-handle{top:0;border-top:3px solid var(--bg-darkest)}.tv-container.tv-resizable.tv-resizable-bottom>.tv-resizable-handle{bottom:0;border-bottom:3px solid var(--bg-darkest)}.tv-container-dragged{outline:2px solid var(--text-primary);box-sizing:border-box;opacity:.7;z-index:1}.tv-container-dragged-child{outline:1px dotted var(--text-active);box-sizing:border-box}@keyframes tv-flash-animation{0%{outline-color:var(--text-active)}to{outline-color:rgba(var(--text-active),0)}}.tv-element{font-weight:400;font-style:normal;border:0 solid var(--border-primary)}.tv-element.flash{outline:1px solid var(--text-active);animation:tv-flash-animation .2s ease-in-out forwards}.tv-element:focus{outline:none}.tv-element::-moz-focus-inner{border:0}.tv-element.tv-hidden{display:none}.tv-input-element{display:inline-block;border:1px solid var(--bg-darker);border-radius:2px;box-sizing:border-box;margin:var(--element-margin);min-height:24px;height:24px;background-color:var(--bg-dark);vertical-align:top;transition:color .1s,background-color .1s,box-shadow .1s;position:relative;color:var(--text-secondary)}.tv-input-element>input{height:100%;width:calc(100% - 16px);padding:0 var(--element-margin);line-height:1;color:inherit;background:transparent;border:none;outline:none;box-shadow:none;font-family:var(--font-family);font-weight:400;font-size:12px}.tv-input-element:before{color:inherit}.tv-input-element.tv-multiple-values:before{position:absolute;padding:0 8px;content:"...";white-space:nowrap;font-family:var(--font-family);font-weight:400;font-size:12px;top:5px}.tv-input-element:not(.tv-disabled,.tv-readonly):hover{background-color:var(--bg-darker);color:var(--text-primary)}.tv-input-element:not(.tv-disabled,.tv-readonly):not(.tv-error):hover{box-shadow:var(--element-shadow-hover)}.tv-input-element:not(.tv-disabled,.tv-readonly).tv-focus{background-color:var(--bg-darkest);box-shadow:var(--element-shadow-active)}.tv-input-element.tv-focus:after,.tv-input-element.tv-focus:before,.tv-input-element:hover:after,.tv-input-element:hover:before{display:none}.tv-input-element.tv-readonly{border-color:transparent}.tv-input-element.tv-disabled{color:var(--text-darkest)}.tv-input-element.tv-error{color:var(--text-secondary);box-shadow:var(--element-shadow-error)}.tv-input-element[placeholder]{position:relative}.tv-input-element[placeholder]:after{content:attr(placeholder);background-color:var(--bg-dark);position:absolute;top:0;right:0;padding:0 8px;line-height:22px;font-size:10px;font-weight:600;white-space:nowrap;color:var(--element-color-placeholder);pointer-events:none}.tv-label{display:inline-block;box-sizing:border-box;margin:var(--element-margin);vertical-align:middle;transition:opacity .1s;color:var(--text-secondary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;user-select:none}.tv-label.tv-default-mousedown{user-select:initial}.tv-label.tv-multiple-values{position:relative;color:transparent}.tv-label.tv-multiple-values:before{content:"...";color:var(--text-secondary);white-space:nowrap;font-family:var(--font-family);font-weight:400;font-size:12px}.tv-label.tv-error{color:var(--error-secondary)}.tv-label.tv-selectable:hover{color:var(--text-active);text-decoration:underline;-webkit-touch-callout:none;user-select:none}.tv-label[placeholder]{position:relative}.tv-label[placeholder]:after{content:attr(placeholder);position:absolute;top:0;right:0;padding:0 8px;color:#999;pointer-events:none}@font-face{font-family:plusminus;font-weight:400;font-style:normal;font-display:block;src:url(data:application/octet-stream;base64,d09GMgABAAAAAAIwAA0AAAAABfgAAAHdAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP0ZGVE0cGh4GYACCXhEICoEEdwsQAAE2AiQDGgQgBYMbB08b9ATIngXlmGuJ8SoMIRZRsZl/ekTw/n6fc8598IHUlkA1VShRNdXA8c3GF5hkhanQ64qWQG+qm8oPha05+yUS9oRC13hgWQsEyteqVv9/VZNP3eT/L9AsHJO6TDJaYF1i4dgYYNp5gIGOTZsyCtADo6yd/1efyWczfAZJsv8mymY0CgHfr5/vw5//JurZwgAzkEJohAqJUi7EAzX5Mj/iPlXHXxujS9XERO12mo8yN52zvUABAdKVhLLtUgIHpASWStsMPR0phZXzMTUY5ufM9IJaEXoAQiEaogCRSABAUMETIaaNQQtGqLEYVgNUgECIVpioB3Hj4ZpRnC5nrwxiWPo5BIAp+4zEVxfZE94PBHDnzXA1rm3+1+lXvNcOytr8hI4EgV9slUY8fiM0FSD2AiQqwWeB1kCABADAyGsBQmtCILXWECha2wlUWgcI1PpOEGi0ngjQs9hfEVVXGGEg8YWg4OtAhe+kajMmVGPkSsOeTX5mzZ0dnZ2dMLs8+5xPsMvS2tPB1A1PyPLQm7Em32fp5m7rNwLL43ApGKwfM3eU7gdjbek0hTv1sLRwznwZHeADy+JCG9tqrc78/PnCEpDSupZIGUWJKurmyOF72YTc0dPWe5/JRt17IwA=)}.tv{-webkit-touch-callout:none;user-select:none;min-width:max-content}.tv-item{position:relative;padding-left:24px}.tv-item:before{content:"\\a0";position:absolute;background-color:var(--color-icon);width:2px;left:14px;top:-12px;bottom:12px}.tv-item:last-child:before{height:25px;bottom:auto}.tv-item.tv-disabled>.tv-item-contents>.tv-item-text{opacity:var(--disabled-opacity)}.tv-item-contents{position:relative;color:var(--text-secondary);margin-left:3px;border:1px solid transparent;align-items:center;height:24px;box-sizing:border-box}.tv-item-contents:hover{cursor:pointer;color:var(--text-primary);background-color:var(--bg-dark)}.tv-item-contents:hover>.tv-item-icon{color:var(--text-primary)}.tv-item-icon{color:var(--text-darkest);margin:0 2px 0 0;flex-shrink:0}.tv-item-icon:before{content:"\\a0";position:absolute;background-color:var(--color-icon);left:-12px;top:10px;width:24px;height:2px}.tv-item-icon:after{content:attr(data-icon);display:inline-block;vertical-align:sub;width:22px;height:22px;position:relative;z-index:1;text-align:center}.tv-item-text{margin:0;flex-shrink:0;position:relative;z-index:1;transition:opacity .1s;padding-right:8px;color:inherit}.tv-item-contents.tv-item-selected{background-color:var(--bg-darkest);color:var(--text-primary)}.tv-item-contents.tv-item-selected>.tv-item-icon{color:var(--text-primary)}.tv-item .icon-plus,.tv-item .icon-minus{position:absolute;font-size:10px;font-weight:700;text-align:center;color:var(--text-secondary);background-color:var(--bg-dark);top:0;left:-24px;width:16px;height:16px;line-height:16px;margin:3px;cursor:pointer;z-index:1;box-sizing:border-box;padding:2px}.tv-item .tv-item.tv-item-empty .icon-plus,.tv-item .tv-item.tv-item-empty .icon-minus{display:none}.tv-item>.tv-item-contents .icon-minus{display:none}.tv-item.tv-item-open>.tv-item-contents .icon-minus{display:block}.tv-item.tv-item-open>.tv-item-contents .icon-plus{display:none}.tv>.tv-item{padding-left:0}.tv>.tv-item:before{content:none}.tv>.tv-item>.tv-item-contents{margin-left:0}.tv>.tv-item>.tv-item-contents>.tv-item-icon:before{content:none}.tv>.tv-item>.tv-item-contents>.tv-item-icon:after{margin-left:0}.tv>.tv-item>.tv-item{padding-left:21px}.tv>.tv-item>.tv-item:before{left:11px}.tv:not(.tv-filtering)>.tv-item .tv-item:not(.tv-item-open,.tv-item-empty)>.tv-item{display:none}.tv-item-dragged>.tv-item-contents{background-color:rgba(var(--bg-dark),.5);color:var(--text-primary)}.tv-drag-handle{position:fixed;width:32px;height:20px;top:0;bottom:0;z-index:4;margin-top:-1px;margin-left:-1px}.tv-drag-handle.before{border-top:4px solid var(--text-active);padding-right:8px;height:24px}.tv-drag-handle.inside{border:4px solid var(--text-active)}.tv-drag-handle.after{border-bottom:4px solid var(--text-active);padding-right:8px;height:24px}.tv-item-contents:after{content:" ";display:block;clear:both}.tv-item.tv-item-rename>.tv-item-contents>.tv-item-text{display:none}.tv-item.tv-item-rename>.tv-item-contents>.tv-text-input{margin:0;flex-grow:1;box-shadow:none!important;border:0;background-color:transparent}.tv-item.tv-item-rename>.tv-item-contents>.tv-text-input>input{font-family:inherit;font-size:14px;padding:0}.tv.tv-filtering .tv-item{padding-left:0}.tv.tv-filtering .tv-item:before{display:none}.tv.tv-filtering .tv-item:not(.tv-filtering-result)>.tv-item-contents{display:none}.tv.tv-filtering .tv-item-contents{margin-left:0}.tv-filtering-result .tv-item-contents:before,.tv-filtering-result .tv-item-icon:before{display:none}.tv-no-select{-webkit-touch-callout:none;user-select:none}.tv-flex{flex-direction:column}.tv-flex:not(.tv-hidden){display:flex}.tv-grid{display:grid}.tv-scrollable{overflow:auto}.tv-hidden{display:none}.font-thin{font-weight:100;font-style:normal}.font-light{font-weight:200;font-style:normal}.font-regular{font-weight:400;font-style:normal}.font-bold{font-weight:700;font-style:normal}.fixed-font{font-family:var(--font-family);font-weight:400;font-size:12px}
`,Uu=(p,o)=>{if(p.length===0)return o.length;if(o.length===0)return p.length;if(p===o)return 0;const t=[];for(let n=0;n<=o.length;n++)t[n]=[n];for(let n=0;n<=p.length;n++)t[0][n]=n;for(let n=1;n<=o.length;n++)for(let r=1;r<=p.length;r++)o.charAt(n-1)===p.charAt(r-1)?t[n][r]=t[n-1][r-1]:t[n][r]=Math.min(t[n-1][r-1]+1,Math.min(t[n][r-1]+1,t[n-1][r]+1));return t[o.length][p.length]},ju=(p,o)=>{if(p===o)return p.length;let t=0;const n=new Set;for(let r=0;r<o.length;r++)n.add(o.charAt(r));for(let r=0;r<p.length;r++)n.has(p.charAt(r))&&t++;return t},Bl=p=>{const o=[],t=p.replace(/([^A-Z])([A-Z][^A-Z])/g,"$1 $2").replace(/([A-Z0-9]{2,})/g," $1").split(/(\s|\-|_)/g);for(let n=0;n<t.length;n++)t[n]=t[n].toLowerCase().trim(),t[n]&&t[n]!=="-"&&t[n]!=="_"&&o.push(t[n]);return o},Hu=(p,o,t)=>{const n=[];for(const r of p){if(r.subFull!==1/0){n.push(r),r.edits===1/0&&(r.edits=0),r.sub===1/0&&(r.sub=r.subFull);continue}else if(r.name===o||r.name.startsWith(o)){n.push(r),r.edits===1/0&&(r.edits=0),r.sub===1/0&&(r.sub=0);continue}if(ju(o,r.name)/o.length<(t.containsCharsTolerance??0))continue;let c=1/0,h=1/0;for(let g=0;g<r.tokens.length;g++){if(r.tokens[g]===o){c=0,h=g;break}const m=Uu(o,r.tokens[g]);if((h===1/0||m<c)&&r.tokens[g].indexOf(o)!==-1){h=g,c=m;continue}else h===1/0&&m<c&&m/Math.max(o.length,r.tokens[g].length)<=(t.editsDistanceTolerance??0)&&(c=m)}c!==1/0&&(n.push(r),r.edits=r.edits===1/0?c:r.edits+c,r.sub=r.sub===1/0?h:r.sub+h)}return n},Ku=(p,o="",t={})=>{if(o=o.toLowerCase().trim(),!o)return[];const n=Bl(o);if(!n.length)return[];t.containsCharsTolerance??(t.containsCharsTolerance=.5),t.editsDistanceTolerance??(t.editsDistanceTolerance=.5);let r=[];for(const h of p){const g=h[0].toLowerCase().trim().indexOf(o);r.push({name:h[0],item:h[1],tokens:Bl(h[0]),edits:1/0,subFull:g!==-1?g:1/0,sub:1/0})}for(let h=0;h<n.length;h++)r=Hu(r,n[h],t);r.sort((h,g)=>h.subFull!==g.subFull?h.subFull-g.subFull:h.sub!==g.sub?h.sub-g.sub:h.edits!==g.edits?h.edits-g.edits:h.name.length-g.name.length);let c=r.map(h=>h.item);return t.hasOwnProperty("limitResults")&&c.length>(t.limitResults??0)&&(c=c.slice(0,t.limitResults)),c},Ia="tv-item-dragged",qu="tv-drag-handle",yl="tv-filtering",Co="tv-filtering-result",sn="inside",Js="before",Eo="after",xa=(p,o)=>Array.prototype.indexOf.call(o.dom.childNodes,p.dom)-1,Ql=p=>{p.parentsOpen=!0},kl=p=>{if(p.numChildren>0&&p.open)return p.firstChild;const o=p.nextSibling;if(o)return o;let t=p.parent;if(!(t instanceof xt))return null;let n=t.nextSibling;for(;!n&&(t=t.parent,t instanceof xt);)n=t.nextSibling;return n},Yu=p=>{if(!p.numChildren||!p.open)return null;let o=p.lastChild;for(;o!=null&&o.numChildren&&o.open;)o=o.lastChild;return o},Pl=p=>{const o=p.previousSibling;if(o)return o.numChildren>0&&o.open?Yu(o):o;const t=p.parent;return t instanceof xt?t:null};class Nn extends Vn{constructor(t={}){super(t);N(this,"_selectedItems",[]);N(this,"_dragItems",[]);N(this,"_allowDrag");N(this,"_allowReordering");N(this,"_allowRenaming");N(this,"_dragging",!1);N(this,"_dragOverItem",null);N(this,"_dragArea",sn);N(this,"_dragScroll",0);N(this,"_dragScrollInterval",null);N(this,"_dragHandle");N(this,"_dragScrollElement");N(this,"_onContextMenu");N(this,"_onReparentFn");N(this,"_pressedCtrl",!1);N(this,"_pressedShift",!1);N(this,"_filter",null);N(this,"_filterResults",[]);N(this,"_wasDraggingAllowedBeforeFiltering");N(this,"_updateModifierKeys",t=>{this._pressedCtrl=(t==null?void 0:t.ctrlKey)??(t==null?void 0:t.metaKey)??!1,this._pressedShift=(t==null?void 0:t.shiftKey)??!1});N(this,"_onMouseLeave",t=>{!this._allowDrag||!this._dragging||(this._dragOverItem=null,this._updateDragHandle())});N(this,"_onMouseMove",t=>{if(!this._dragging)return;const n=this.dom.getBoundingClientRect();this._dragScroll=0;let r=n.top,c=n.bottom;if(this._dragScrollElement!==this){const h=this._dragScrollElement.dom.getBoundingClientRect();r=Math.max(r+this._dragScrollElement.dom.scrollTop,h.top),c=Math.min(c+this._dragScrollElement.dom.scrollTop,h.bottom)}r=Math.max(0,r),c=Math.min(c,document.body.clientHeight),t.pageY<r+32&&this._dragScrollElement.dom.scrollTop>0?this._dragScroll=-1:t.pageY>c-32&&this._dragScrollElement.dom.scrollHeight>this._dragScrollElement.height+this._dragScrollElement.dom.scrollTop&&(this._dragScroll=1)});N(this,"_onDragMove",t=>{if(t.preventDefault(),t.stopPropagation(),!this._allowDrag||!this._dragOverItem)return;const n=this._dragHandle.dom.getBoundingClientRect(),r=Math.floor((t.clientY-n.top)/n.height*5),c=this._dragArea,h=this._dragOverItem;if(this._dragOverItem.parent===this){let g=!1;for(let m=0;m<this._dragItems.length;m+=1)if(this._dragItems[m].parent===this._dragOverItem){g=!0,this._dragOverItem=null;break}g||(this._dragArea=sn)}else{let g=!1;for(let m=0;m<this._dragItems.length;m+=1)if(this._dragItems[m].dom.contains(this._dragOverItem.dom)){g=!0;break}if(g)this._dragOverItem=null;else if(this._allowReordering&&r<=1&&this._dragOverItem.previousSibling&&this._dragItems.indexOf(this._dragOverItem.previousSibling)===-1)this._dragArea=Js;else if(this._allowReordering&&r>=4&&this._dragOverItem.nextSibling&&this._dragItems.indexOf(this._dragOverItem.nextSibling)===-1&&(this._dragOverItem.numChildren===0||!this._dragOverItem.open))this._dragArea=Eo;else{let m=!1;if(this._allowReordering&&this._dragOverItem.open){for(let v=0;v<this._dragItems.length;v+=1)if(this._dragItems[v].parent===this._dragOverItem){m=!0,this._dragArea=Js;break}}m||(this._dragArea=sn)}}(c!==this._dragArea||h!==this._dragOverItem)&&this._updateDragHandle()});const n=document.createElement("style");n.innerHTML=Ou,this.dom.append(n),this.class.add("tv"),this._allowDrag=t.allowDrag??!0,this._allowReordering=t.allowReordering??!0,this._allowRenaming=t.allowRenaming??!1,this._dragHandle=new pt({class:qu}),this._dragScrollElement=t.dragScrollElement??this,this.append(this._dragHandle),this._onContextMenu=t.onContextMenu,this._onReparentFn=t.onReparent,this._wasDraggingAllowedBeforeFiltering=this._allowDrag,window.addEventListener("keydown",this._updateModifierKeys),window.addEventListener("keyup",this._updateModifierKeys),window.addEventListener("mousedown",()=>this._updateModifierKeys()),this.dom.addEventListener("mouseleave",this._onMouseLeave),this._dragHandle.dom.addEventListener("mousemove",this._onDragMove),this._dragHandle.on("destroy",r=>{r.removeEventListener("mousemove",this._onDragMove)})}destroy(){this._destroyed||(window.removeEventListener("keydown",this._updateModifierKeys),window.removeEventListener("keyup",this._updateModifierKeys),window.removeEventListener("mousedown",()=>this._updateModifierKeys()),window.removeEventListener("mousemove",this._onMouseMove),this.dom.removeEventListener("mouseleave",this._onMouseLeave),this._dragScrollInterval&&(window.clearInterval(this._dragScrollInterval),this._dragScrollInterval=null),super.destroy())}_getChildrenRange(t,n){const r=[];if(this._filterResults.length){const c=this.dom.querySelectorAll(`.tv-item.${Co}`);let h=-1,g=-1;for(let m=0;m<c.length;m+=1){const v=c[m].ui;if(v===t?h=m:v===n&&(g=m),h!==-1&&g!==-1){const C=h<g?h:g,x=h<g?g:h;for(let Q=C;Q<=x;Q+=1)r.push(c[Q].ui);break}}}else{let c=t;const h=t.dom.getBoundingClientRect(),g=n.dom.getBoundingClientRect();if(h.top<g.top)for(;c&&c!==n;)c=kl(c),c&&c!==n&&r.push(c);else for(;c&&c!==n;)c=Pl(c),c&&c!==n&&r.push(c);r.push(n)}return r}_onAppendChild(t){super._onAppendChild(t),t instanceof xt&&this._onAppendTreeViewItem(t)}_onRemoveChild(t){t instanceof xt&&this._onRemoveTreeViewItem(t),super._onRemoveChild(t)}_onAppendTreeViewItem(t){t.treeView=this,this._filter&&this._searchItems([[t.text,t]],this._filter),t.forEachChild(n=>{n instanceof xt&&this._onAppendTreeViewItem(n)})}_onRemoveTreeViewItem(t){t.selected=!1,t.forEachChild((n,r)=>{n instanceof xt&&this._onRemoveTreeViewItem(n)})}_onChildKeyDown(t,n){if(["Tab","ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].indexOf(t.key)!==-1)if(t.preventDefault(),t.stopPropagation(),t.key==="ArrowDown"){if(this._selectedItems.length){const r=kl(n);r&&(this._pressedShift||this._pressedCtrl?r.selected=!0:this._selectSingleItem(r))}}else if(t.key==="ArrowUp"){if(this._selectedItems.length){const r=Pl(n);r&&(this._pressedShift||this._pressedCtrl?r.selected=!0:this._selectSingleItem(r))}}else t.key==="ArrowLeft"?n.parent!==this&&(n.open=!1):t.key==="ArrowRight"?n.open=!0:t.key}_onChildClick(t,n){if(t.button===0&&n.allowSelect)if(this._pressedCtrl)n.selected=!n.selected;else if(this._pressedShift){if(!this._selectedItems.length||this._selectedItems.length===1&&this._selectedItems[0]===n){n.selected=!0;return}const r=this._selectedItems[this._selectedItems.length-1];Ql(r),this._getChildrenRange(r,n).forEach(c=>{c.allowSelect&&(c.selected=!0)})}else this._selectSingleItem(n)}traverseDepthFirst(t){const n=r=>{if(!(!r||!(r instanceof xt))&&(t(r),r.numChildren))for(let c=0;c<r.dom.childNodes.length;c+=1)n(r.dom.childNodes[c].ui)};for(let r=0;r<this.dom.childNodes.length;r+=1)n(this.dom.childNodes[r].ui)}_getTreeOrder(){const t=new Map;let n=0;return this.traverseDepthFirst(r=>{n+=1,t.set(r,n)}),t}_onChildDragStart(t,n){if(!(!this.allowDrag||this._dragging)){if(this._dragItems=[],this._selectedItems.indexOf(n)===-1)n.class.add(Ia),this._dragItems.push(n);else{const r=[];let c=-1;for(let h=0;h<this._selectedItems.length;h+=1){let g=this._selectedItems[h].parent,m=0,v=!1;for(;g&&g instanceof xt;){if(this._selectedItems.indexOf(g)!==-1){v=!0;break}m+=1,g=g.parent}if(!v){if(c===-1)c=m;else if(c!==m)return;r.push(this._selectedItems[h])}}this._dragItems=r}this._dragItems.length&&(this._dragItems.forEach(r=>{r.class.add(Ia)}),this.isDragging=!0,this.emit("dragstart",this._dragItems.slice()))}}_onChildDragEnd(t,n){if(!this.allowDrag||!this._dragging)return;this._dragItems.forEach(h=>h.class.remove(Ia));let r=!1;for(let h=0;h<this._dragItems.length;h+=1)if(this._dragItems[h].parent===this){r=!0;break}const c=this._dragOverItem;if(!r&&c){if(this._dragItems.length>1){const h=this._getTreeOrder();this._dragItems.sort((g,m)=>(h.get(g)??0)-(h.get(m)??0))}if(this._dragItems.length){const h=[];if(this._onReparentFn){const g=[],m=v=>{let C=g.findIndex(x=>x.parent===v);return C===-1&&(g.push({children:[...v.dom.childNodes],parent:v}),C=g.length-1),g[C].children};this._dragItems.forEach(v=>{if(v.parent===c&&this._dragArea===sn||(h.push({item:v,oldParent:v.parent}),!v.parent))return;const C=m(v.parent),x=C.indexOf(v.dom);C.splice(x,1)}),h.forEach((v,C)=>{if(this._dragArea===Js){if(v.newParent=c.parent,!c.parent)return;const x=m(c.parent),Q=x.indexOf(c.dom);x.splice(Q,0,v.item.dom),v.newChildIndex=Q}else if(this._dragArea===sn){v.newParent=c;const x=m(c);x.push(v.item.dom),v.newChildIndex=x.length-1}else if(this._dragArea===Eo){if(v.newParent=c.parent,!c.parent)return;const x=m(c.parent),Q=C>0?h[C-1].item:c,P=x.indexOf(Q.dom);x.splice(P+1,0,v.item.dom),v.newChildIndex=P+1}v.newChildIndex-=1})}else this._dragItems.forEach(g=>{g.parent===this._dragOverItem&&this._dragArea===sn||(h.push({item:g,oldParent:g.parent}),g.parent.remove(g))}),h.forEach((g,m)=>{this._dragArea===Js?(g.newParent=c.parent,c.parent.appendBefore(g.item,c),g.newChildIndex=xa(g.item,g.newParent)):this._dragArea===sn?(g.newParent=c,c.append(g.item),c.open=!0,g.newChildIndex=xa(g.item,g.newParent)):this._dragArea===Eo&&(g.newParent=c.parent,c.parent.appendAfter(g.item,m>0?h[m-1].item:this._dragOverItem),g.newChildIndex=xa(g.item,g.newParent))});h.length&&(this._onReparentFn&&this._onReparentFn(h),this.emit("reparent",h))}}this._dragItems=[],this.isDragging=!1,this.emit("dragend")}_onChildDragOver(t,n){!this._allowDrag||!this._dragging||(n.allowDrop&&this._dragItems.indexOf(n)===-1?this._dragOverItem=n:this._dragOverItem=null,this._updateDragHandle(),this._onDragMove(t))}_scrollWhileDragging(){this._dragging&&this._dragScroll!==0&&(this._dragScrollElement.dom.scrollTop+=this._dragScroll*8,this._dragOverItem=null,this._updateDragHandle())}_updateDragHandle(t,n){if(!n&&(!this._allowDrag||!this._dragging))return;const r=t??this._dragOverItem;if(!r||r.hidden||!r.parentsOpen)this._dragHandle.hidden=!0;else{const c=r._containerContents.dom.getBoundingClientRect();this._dragHandle.hidden=!1,this._dragHandle.class.remove(Eo,Js,sn),this._dragHandle.class.add(this._dragArea);const h=c.top;let g=c.left,m=c.width;if(this.dom.parentElement){const v=this.dom.parentElement.getBoundingClientRect();g=Math.max(g,v.left),m=Math.min(m,this.dom.parentElement.clientWidth-g+v.left)}this._dragHandle.style.top=`${h}px`,this._dragHandle.style.left=`${g}px`,this._dragHandle.style.width=`${m-7}px`}}_selectSingleItem(t){let n=!1;for(let r=this._selectedItems.length-1;r>-1;r-=1)this._selectedItems[r]&&this._selectedItems[r]!==t&&(this._selectedItems[r].selected=!1,n=!0);n?t.selected=!0:t.selected=!t.selected}_onChildSelected(t){this._selectedItems.push(t),Ql(t),this.emit("select",t)}_onChildDeselected(t){const n=this._selectedItems.indexOf(t);n!==-1&&(this._selectedItems.splice(n,1),this.emit("deselect",t))}_onChildRename(t,n){if(this._filter){t.class.remove(Co);const r=this._filterResults.indexOf(t);r!==-1&&this._filterResults.splice(r,1),this._searchItems([[t.text,t]],this._filter)}this.emit("rename",t,n)}_searchItems(t,n){const r=Ku(t,n);r.length&&r.forEach(c=>{this._filterResults.push(c),c.class.add(Co)})}_applyFilter(t){this._clearFilter(),this._wasDraggingAllowedBeforeFiltering=this._allowDrag,this._allowDrag=!1,this.class.add(yl);const n=[];this.traverseDepthFirst(r=>{n.push([r.text,r])}),this._searchItems(n,t)}_clearFilter(){this._filterResults.forEach(t=>{t.destroyed||t.class.remove(Co)}),this._filterResults.length=0,this.class.remove(yl),this._allowDrag=this._wasDraggingAllowedBeforeFiltering}showDragHandle(t){this._updateDragHandle(t,!0)}deselect(){for(let t=this._selectedItems.length-1;t>-1;t-=1)this._selectedItems[t]&&(this._selectedItems[t].selected=!1)}clearTreeItems(){for(let t=this.dom.childNodes.length-1;t>-1;t-=1){const n=this.dom.childNodes[t];if(!n)continue;const r=n.ui;r instanceof xt&&r.destroy()}this._selectedItems=[],this._dragItems=[],this._allowDrag=this._wasDraggingAllowedBeforeFiltering}set allowDrag(t){this._allowDrag=t,this._filter&&(this._wasDraggingAllowedBeforeFiltering=t)}get allowDrag(){return this._allowDrag}set allowReordering(t){this._allowReordering=t}get allowReordering(){return this._allowReordering}set allowRenaming(t){this._allowRenaming=t}get allowRenaming(){return this._allowRenaming}set isDragging(t){this._dragging!==t&&(t?(this._dragging=!0,this._updateDragHandle(),(this.scrollable||this._dragScrollElement!==this)&&(window.removeEventListener("mousemove",this._onMouseMove),window.addEventListener("mousemove",this._onMouseMove),this._dragScrollInterval||(this._dragScrollInterval=window.setInterval(()=>{this._scrollWhileDragging()},1e3/60)))):(this._dragOverItem=null,this._updateDragHandle(),this._dragging=!1,window.removeEventListener("mousemove",this._onMouseMove),this._dragScrollInterval&&(window.clearInterval(this._dragScrollInterval),this._dragScrollInterval=null)))}get isDragging(){return this._dragging}get selected(){return this._selectedItems.slice()}set filter(t){this._filter!==t&&(this._filter=t,t?this._applyFilter(t):this._clearFilter())}get filter(){return this._filter}get pressedCtrl(){return this._pressedCtrl}get pressedShift(){return this._pressedShift}}N(Nn,"EVENT_DRAGSTART","dragstart"),N(Nn,"EVENT_DRAGEND","dragend"),N(Nn,"EVENT_REPARENT","reparent"),N(Nn,"EVENT_SELECT","select"),N(Nn,"EVENT_DESELECT","deselect"),N(Nn,"EVENT_RENAME","rename");class Ju extends Nn{constructor(t={}){super(t);N(this,"wc",document.createElement("tree-view"));N(this,"shadowRoot",this.wc.attachShadow({mode:"open"}));this.shadowRoot.append(this.dom)}}const $u=()=>{const p=document.createElement("div");p.className="relative flex flex-col grow bg-[#28292e]",at.debugRoot=p;const o=document.createElement("nav");o.className="tp-rotv z-50 sticky flex top-0 w-full overflow-x-auto z-1 bg-[#28292e] font-mono text-[11px]",p.append(o);const t=document.createElement("section");t.className="flex flex-col grow overflow-x-hidden overflow-y-auto",t.dataset.pane="World",p.append(t);const n=new Ju;n.scrollable=!0,n.allowRenaming=!1,n.dom.style.cssText="font-family: monospace; font-size: 11px; height: 300px;",n.wc.classList.add("sticky","top-0","z-10","bg-[#333]"),t.append(n.wc);const r=new xt({text:"Scene"});n.append(r);const c=document.createElement("div");return t.append(c),{controls:p,nav:o,pane:c,treeroot:r,treeview:n}};var Na={exports:{}};(function(p,o){(function(t,n){n(o)})(lo,function(t){class n{constructor(a){this.controller_=a}get element(){return this.controller_.view.element}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(a){this.controller_.viewProps.set("disabled",a)}get hidden(){return this.controller_.viewProps.get("hidden")}set hidden(a){this.controller_.viewProps.set("hidden",a)}dispose(){this.controller_.viewProps.set("disposed",!0)}}class r{constructor(a){this.target=a}}class c extends r{constructor(a,A,f,I){super(a),this.value=A,this.presetKey=f,this.last=I??!0}}function h(u){return u==null}const g={alreadydisposed:()=>"View has been already disposed",invalidparams:u=>`Invalid parameters for '${u.name}'`,nomatchingcontroller:u=>`No matching controller for '${u.key}'`,nomatchingview:u=>`No matching view for '${JSON.stringify(u.params)}'`,notbindable:()=>"Value is not bindable",propertynotfound:u=>`Property '${u.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class m{constructor(a){var A;this.message=(A=g[a.type](a.context))!==null&&A!==void 0?A:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=a.type}static alreadyDisposed(){return new m({type:"alreadydisposed"})}static notBindable(){return new m({type:"notbindable"})}static propertyNotFound(a){return new m({type:"propertynotfound",context:{name:a}})}static shouldNeverHappen(){return new m({type:"shouldneverhappen"})}}class v{constructor(){this.observers_={}}on(a,A){let f=this.observers_[a];return f||(f=this.observers_[a]=[]),f.push({handler:A}),this}off(a,A){const f=this.observers_[a];return f&&(this.observers_[a]=f.filter(I=>I.handler!==A)),this}emit(a,A){const f=this.observers_[a];f&&f.forEach(I=>{I.handler(A)})}}const C="tp";function x(u){return(a,A)=>[C,"-",u,"v",a?`_${a}`:"",A?`-${A}`:""].join("")}function Q(u,a){return A=>a(u(A))}function P(u){return u.rawValue}function D(u,a){u.emitter.on("change",Q(P,a)),a(u.rawValue)}function G(u,a,A){D(u.value(a),A)}function F(u,a,A){A?u.classList.add(a):u.classList.remove(a)}function k(u,a){return A=>{F(u,a,A)}}function T(u,a){D(u,A=>{a.textContent=A??""})}const z=x("btn");class J{constructor(a,A){this.element=a.createElement("div"),this.element.classList.add(z()),A.viewProps.bindClassModifiers(this.element);const f=a.createElement("button");f.classList.add(z("b")),A.viewProps.bindDisabled(f),this.element.appendChild(f),this.buttonElement=f;const I=a.createElement("div");I.classList.add(z("t")),T(A.props.value("title"),I),this.buttonElement.appendChild(I)}}class O{constructor(a,A){this.emitter=new v,this.onClick_=this.onClick_.bind(this),this.props=A.props,this.viewProps=A.viewProps,this.view=new J(a,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class S{constructor(a,A){var f;this.constraint_=A==null?void 0:A.constraint,this.equals_=(f=A==null?void 0:A.equals)!==null&&f!==void 0?f:(I,R)=>I===R,this.emitter=new v,this.rawValue_=a}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(a){this.setRawValue(a,{forceEmit:!1,last:!0})}setRawValue(a,A){const f=A??{forceEmit:!1,last:!0},I=this.constraint_?this.constraint_.constrain(a):a,R=this.rawValue_;this.equals_(R,I)&&!f.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=I,this.emitter.emit("change",{options:f,previousRawValue:R,rawValue:I,sender:this}))}}class U{constructor(a){this.emitter=new v,this.value_=a}get rawValue(){return this.value_}set rawValue(a){this.setRawValue(a,{forceEmit:!1,last:!0})}setRawValue(a,A){const f=A??{forceEmit:!1,last:!0},I=this.value_;I===a&&!f.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=a,this.emitter.emit("change",{options:f,previousRawValue:I,rawValue:this.value_,sender:this}))}}function ee(u,a){const A=a==null?void 0:a.constraint,f=a==null?void 0:a.equals;return!A&&!f?new U(u):new S(u,a)}class K{constructor(a){this.emitter=new v,this.valMap_=a;for(const A in this.valMap_)this.valMap_[A].emitter.on("change",()=>{this.emitter.emit("change",{key:A,sender:this})})}static createCore(a){return Object.keys(a).reduce((A,f)=>Object.assign(A,{[f]:ee(a[f])}),{})}static fromObject(a){const A=this.createCore(a);return new K(A)}get(a){return this.valMap_[a].rawValue}set(a,A){this.valMap_[a].rawValue=A}value(a){return this.valMap_[a]}}function oe(u,a){return Object.keys(a).reduce((f,I)=>{if(f===void 0)return;const R=a[I],j=R(u[I]);return j.succeeded?Object.assign(Object.assign({},f),{[I]:j.value}):void 0},{})}function re(u,a){return u.reduce((A,f)=>{if(A===void 0)return;const I=a(f);if(!(!I.succeeded||I.value===void 0))return[...A,I.value]},[])}function _e(u){return u===null?!1:typeof u=="object"}function pe(u){return a=>A=>{if(!a&&A===void 0)return{succeeded:!1,value:void 0};if(a&&A===void 0)return{succeeded:!0,value:void 0};const f=u(A);return f!==void 0?{succeeded:!0,value:f}:{succeeded:!1,value:void 0}}}function ve(u){return{custom:a=>pe(a)(u),boolean:pe(a=>typeof a=="boolean"?a:void 0)(u),number:pe(a=>typeof a=="number"?a:void 0)(u),string:pe(a=>typeof a=="string"?a:void 0)(u),function:pe(a=>typeof a=="function"?a:void 0)(u),constant:a=>pe(A=>A===a?a:void 0)(u),raw:pe(a=>a)(u),object:a=>pe(A=>{if(_e(A))return oe(A,a)})(u),array:a=>pe(A=>{if(Array.isArray(A))return re(A,a)})(u)}}const ue={optional:ve(!0),required:ve(!1)};function ae(u,a){const A=ue.required.object(a)(u);return A.succeeded?A.value:void 0}function Z(u){console.warn([`Missing '${u.key}' of ${u.target} in ${u.place}.`,"Please rebuild plugins with the latest core package."].join(" "))}function Fe(u){return u&&u.parentElement&&u.parentElement.removeChild(u),null}class rt{constructor(a){this.value_=a}static create(a){return[new rt(a),(A,f)=>{a.setRawValue(A,f)}]}get emitter(){return this.value_.emitter}get rawValue(){return this.value_.rawValue}}const Bt=x("");function Re(u,a){return k(u,Bt(void 0,a))}class ze extends K{constructor(a){var A;super(a),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=rt.create(ee(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(A=this.get("parent"))===null||A===void 0||A.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(a){var A,f,I;const R=a??{};return new ze(K.createCore({disabled:(A=R.disabled)!==null&&A!==void 0?A:!1,disposed:!1,hidden:(f=R.hidden)!==null&&f!==void 0?f:!1,parent:(I=R.parent)!==null&&I!==void 0?I:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(a){D(this.globalDisabled_,Re(a,"disabled")),G(this,"hidden",Re(a,"hidden"))}bindDisabled(a){D(this.globalDisabled_,A=>{a.disabled=A})}bindTabIndex(a){D(this.globalDisabled_,A=>{a.tabIndex=A?-1:0})}handleDispose(a){this.value("disposed").emitter.on("change",A=>{A&&a()})}getGlobalDisabled_(){const a=this.get("parent");return(a?a.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(a){var A;const f=a.previousRawValue;f==null||f.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(A=this.get("parent"))===null||A===void 0||A.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}function ge(){return["veryfirst","first","last","verylast"]}const Be=x(""),Yt={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class _i{constructor(a){this.parent_=null,this.blade=a.blade,this.view=a.view,this.viewProps=a.viewProps;const A=this.view.element;this.blade.value("positions").emitter.on("change",()=>{ge().forEach(f=>{A.classList.remove(Be(void 0,Yt[f]))}),this.blade.get("positions").forEach(f=>{A.classList.add(Be(void 0,Yt[f]))})}),this.viewProps.handleDispose(()=>{Fe(A)})}get parent(){return this.parent_}set parent(a){if(this.parent_=a,!("parent"in this.viewProps.valMap_)){Z({key:"parent",target:ze.name,place:"BladeController.parent"});return}this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}}const Ge="http://www.w3.org/2000/svg";function li(u){u.offsetHeight}function wi(u,a){const A=u.style.transition;u.style.transition="none",a(),u.style.transition=A}function Ye(u){return u.ontouchstart!==void 0}function zt(u){for(;u.childNodes.length>0;)u.removeChild(u.childNodes[0])}function Fi(u){return u.relatedTarget?u.relatedTarget:"explicitOriginalTarget"in u?u.explicitOriginalTarget:null}const lt=x("lbl");function Nt(u,a){const A=u.createDocumentFragment();return a.split(`
`).map(f=>u.createTextNode(f)).forEach((f,I)=>{I>0&&A.appendChild(u.createElement("br")),A.appendChild(f)}),A}class Oe{constructor(a,A){this.element=a.createElement("div"),this.element.classList.add(lt()),A.viewProps.bindClassModifiers(this.element);const f=a.createElement("div");f.classList.add(lt("l")),G(A.props,"label",R=>{h(R)?this.element.classList.add(lt(void 0,"nol")):(this.element.classList.remove(lt(void 0,"nol")),zt(f),f.appendChild(Nt(a,R)))}),this.element.appendChild(f),this.labelElement=f;const I=a.createElement("div");I.classList.add(lt("v")),this.element.appendChild(I),this.valueElement=I}}class Xe extends _i{constructor(a,A){const f=A.valueController.viewProps;super(Object.assign(Object.assign({},A),{view:new Oe(a,{props:A.props,viewProps:f}),viewProps:f})),this.props=A.props,this.valueController=A.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}class dn extends _i{constructor(a){super(a),this.value=a.value}}class Jt extends K{constructor(a){super(a)}static create(a){const A={completed:!0,expanded:a,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},f=K.createCore(A);return new Jt(f)}get styleExpanded(){var a;return(a=this.get("temporaryExpanded"))!==null&&a!==void 0?a:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const a=this.get("expandedHeight");return this.get("shouldFixHeight")&&!h(a)?`${a}px`:"auto"}bindExpandedClass(a,A){const f=()=>{this.styleExpanded?a.classList.add(A):a.classList.remove(A)};G(this,"expanded",f),G(this,"temporaryExpanded",f)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function zi(u){return Jt.create(u)}function Ci(u,a){let A=0;return wi(a,()=>{u.set("expandedHeight",null),u.set("temporaryExpanded",!0),li(a),A=a.clientHeight,u.set("temporaryExpanded",null),li(a)}),A}function Ni(u,a){a.style.height=u.styleHeight}function hn(u,a){u.value("expanded").emitter.on("beforechange",()=>{u.set("completed",!1),h(u.get("expandedHeight"))&&u.set("expandedHeight",Ci(u,a)),u.set("shouldFixHeight",!0),li(a)}),u.emitter.on("change",()=>{Ni(u,a)}),Ni(u,a),a.addEventListener("transitionend",A=>{A.propertyName==="height"&&u.cleanUpTransition()})}class Vt{constructor(a,A){const f=x(A.viewName);this.element=a.createElement("div"),this.element.classList.add(f()),A.viewProps.bindClassModifiers(this.element)}}class $t extends dn{constructor(a,A){const f=A.valueController.viewProps;super(Object.assign(Object.assign({},A),{value:A.valueController.value,view:new Oe(a,{props:A.props,viewProps:f}),viewProps:f})),this.props=A.props,this.valueController=A.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}class Vi{constructor(){this.disabled=!1,this.emitter=new v}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class Ei{constructor(a,A){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=a,this.emitter=new v,this.interval_=A,this.setTimer_()}get disabled(){return this.disabled_}set disabled(a){this.disabled_=a,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const a=this.doc_.defaultView;a&&a.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const a=this.doc_.defaultView;a&&(this.timerId_=a.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class ci{constructor(a){this.constraints=a}constrain(a){return this.constraints.reduce((A,f)=>f.constrain(A),a)}}function M(u,a){if(u instanceof a)return u;if(u instanceof ci){const A=u.constraints.reduce((f,I)=>f||(I instanceof a?I:null),null);if(A)return A}return null}class te{constructor(a){this.values=K.fromObject({max:a.max,min:a.min})}constrain(a){const A=this.values.get("max"),f=this.values.get("min");return Math.min(Math.max(a,f),A)}}class Ie{constructor(a){this.values=K.fromObject({max:a.max,min:a.min})}get maxValue(){return this.values.get("max")}get minValue(){return this.values.get("min")}constrain(a){const A=this.values.get("max"),f=this.values.get("min");let I=a;return h(f)||(I=Math.max(I,f)),h(A)||(I=Math.min(I,A)),I}}class ke{constructor(a,A=0){this.step=a,this.origin=A}constrain(a){const A=this.origin%this.step,f=Math.round((a-A)/this.step);return A+f*this.step}}const Je=x("pop");class Gt{constructor(a,A){this.element=a.createElement("div"),this.element.classList.add(Je()),A.viewProps.bindClassModifiers(this.element),D(A.shows,k(this.element,Je(void 0,"v")))}}class ut{constructor(a,A){this.shows=ee(!1),this.viewProps=A.viewProps,this.view=new Gt(a,{shows:this.shows,viewProps:this.viewProps})}}const yt=x("txt");class je{constructor(a,A){this.onChange_=this.onChange_.bind(this),this.element=a.createElement("div"),this.element.classList.add(yt()),A.viewProps.bindClassModifiers(this.element),this.props_=A.props,this.props_.emitter.on("change",this.onChange_);const f=a.createElement("input");f.classList.add(yt("i")),f.type="text",A.viewProps.bindDisabled(f),this.element.appendChild(f),this.inputElement=f,A.value.emitter.on("change",this.onChange_),this.value_=A.value,this.refresh()}refresh(){const a=this.props_.get("formatter");this.inputElement.value=a(this.value_.rawValue)}onChange_(){this.refresh()}}class gt{constructor(a,A){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=A.parser,this.props=A.props,this.value=A.value,this.viewProps=A.viewProps,this.view=new je(a,{props:A.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(a){const A=a.currentTarget.value,f=this.parser_(A);h(f)||(this.value.rawValue=f),this.view.refresh()}}function An(u){return u==="false"?!1:!!u}class pn{constructor(a){this.text=a}evaluate(){return Number(this.text)}toString(){return this.text}}const Gi={"**":(u,a)=>Math.pow(u,a),"*":(u,a)=>u*a,"/":(u,a)=>u/a,"%":(u,a)=>u%a,"+":(u,a)=>u+a,"-":(u,a)=>u-a,"<<":(u,a)=>u<<a,">>":(u,a)=>u>>a,">>>":(u,a)=>u>>>a,"&":(u,a)=>u&a,"^":(u,a)=>u^a,"|":(u,a)=>u|a};class Oi{constructor(a,A,f){this.left=A,this.operator=a,this.right=f}evaluate(){const a=Gi[this.operator];if(!a)throw new Error(`unexpected binary operator: '${this.operator}`);return a(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const un={"+":u=>u,"-":u=>-u,"~":u=>~u};class Cs{constructor(a,A){this.operator=a,this.expression=A}evaluate(){const a=un[this.operator];if(!a)throw new Error(`unexpected unary operator: '${this.operator}`);return a(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function gn(u){return(a,A)=>{for(let f=0;f<u.length;f++){const I=u[f](a,A);if(I!=="")return I}return""}}function Wt(u,a){var A;const f=u.substr(a).match(/^\s+/);return(A=f&&f[0])!==null&&A!==void 0?A:""}function Ii(u,a){const A=u.substr(a,1);return A.match(/^[1-9]$/)?A:""}function xe(u,a){var A;const f=u.substr(a).match(/^[0-9]+/);return(A=f&&f[0])!==null&&A!==void 0?A:""}function bn(u,a){const A=xe(u,a);if(A!=="")return A;const f=u.substr(a,1);if(a+=1,f!=="-"&&f!=="+")return"";const I=xe(u,a);return I===""?"":f+I}function Qe(u,a){const A=u.substr(a,1);if(a+=1,A.toLowerCase()!=="e")return"";const f=bn(u,a);return f===""?"":A+f}function Kn(u,a){const A=u.substr(a,1);if(A==="0")return A;const f=Ii(u,a);return a+=f.length,f===""?"":f+xe(u,a)}function xi(u,a){const A=Kn(u,a);if(a+=A.length,A==="")return"";const f=u.substr(a,1);if(a+=f.length,f!==".")return"";const I=xe(u,a);return a+=I.length,A+f+I+Qe(u,a)}function mn(u,a){const A=u.substr(a,1);if(a+=A.length,A!==".")return"";const f=xe(u,a);return a+=f.length,f===""?"":A+f+Qe(u,a)}function ft(u,a){const A=Kn(u,a);return a+=A.length,A===""?"":A+Qe(u,a)}const di=gn([xi,mn,ft]);function Ui(u,a){var A;const f=u.substr(a).match(/^[01]+/);return(A=f&&f[0])!==null&&A!==void 0?A:""}function Es(u,a){const A=u.substr(a,2);if(a+=A.length,A.toLowerCase()!=="0b")return"";const f=Ui(u,a);return f===""?"":A+f}function Is(u,a){var A;const f=u.substr(a).match(/^[0-7]+/);return(A=f&&f[0])!==null&&A!==void 0?A:""}function xs(u,a){const A=u.substr(a,2);if(a+=A.length,A.toLowerCase()!=="0o")return"";const f=Is(u,a);return f===""?"":A+f}function qn(u,a){var A;const f=u.substr(a).match(/^[0-9a-f]+/i);return(A=f&&f[0])!==null&&A!==void 0?A:""}function ji(u,a){const A=u.substr(a,2);if(a+=A.length,A.toLowerCase()!=="0x")return"";const f=qn(u,a);return f===""?"":A+f}const Bs=gn([Es,xs,ji]),ys=gn([Bs,di]);function Qt(u,a){const A=ys(u,a);return a+=A.length,A===""?null:{evaluable:new pn(A),cursor:a}}function kt(u,a){const A=u.substr(a,1);if(a+=A.length,A!=="(")return null;const f=hi(u,a);if(!f)return null;a=f.cursor,a+=Wt(u,a).length;const I=u.substr(a,1);return a+=I.length,I!==")"?null:{evaluable:f.evaluable,cursor:a}}function de(u,a){var A;return(A=Qt(u,a))!==null&&A!==void 0?A:kt(u,a)}function Bi(u,a){const A=de(u,a);if(A)return A;const f=u.substr(a,1);if(a+=f.length,f!=="+"&&f!=="-"&&f!=="~")return null;const I=Bi(u,a);return I?(a=I.cursor,{cursor:a,evaluable:new Cs(f,I.evaluable)}):null}function Ce(u,a,A){A+=Wt(a,A).length;const f=u.filter(I=>a.startsWith(I,A))[0];return f?(A+=f.length,A+=Wt(a,A).length,{cursor:A,operator:f}):null}function le(u,a){return(A,f)=>{const I=u(A,f);if(!I)return null;f=I.cursor;let R=I.evaluable;for(;;){const j=Ce(a,A,f);if(!j)break;f=j.cursor;const Y=u(A,f);if(!Y)return null;f=Y.cursor,R=new Oi(j.operator,R,Y.evaluable)}return R?{cursor:f,evaluable:R}:null}}const He=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((u,a)=>le(u,a),Bi);function hi(u,a){return a+=Wt(u,a).length,He(u,a)}function ne(u){const a=hi(u,0);return!a||a.cursor+Wt(u,a.cursor).length!==u.length?null:a.evaluable}function _t(u){var a;const A=ne(u);return(a=A==null?void 0:A.evaluate())!==null&&a!==void 0?a:null}function Qs(u){if(typeof u=="number")return u;if(typeof u=="string"){const a=_t(u);if(!h(a))return a}return 0}function Ze(u){return a=>a.toFixed(Math.max(Math.min(u,20),0))}function Xt(u){return String(u)}function Zt(u,a){for(;u.length<a;)u.push(void 0)}function vn(u){const a=[];return Zt(a,u),ee(a)}function fn(u){const a=u.indexOf(void 0);return a<0?u:u.slice(0,a)}function _n(u,a){const A=[...fn(u),a];return A.length>u.length?A.splice(0,A.length-u.length):Zt(A,u.length),A}function Hi({primary:u,secondary:a,forward:A,backward:f}){let I=!1;function R(j){I||(I=!0,j(),I=!1)}u.emitter.on("change",j=>{R(()=>{a.setRawValue(A(u,a),j.options)})}),a.emitter.on("change",j=>{R(()=>{u.setRawValue(f(u,a),j.options)}),R(()=>{a.setRawValue(A(u,a),j.options)})}),R(()=>{a.setRawValue(A(u,a),{forceEmit:!1,last:!0})})}function ei(u,a){const A=u*(a.altKey?.1:1)*(a.shiftKey?10:1);return a.upKey?+A:a.downKey?-A:0}function Pt(u){return{altKey:u.altKey,downKey:u.key==="ArrowDown",shiftKey:u.shiftKey,upKey:u.key==="ArrowUp"}}function wn(u){return{altKey:u.altKey,downKey:u.key==="ArrowLeft",shiftKey:u.shiftKey,upKey:u.key==="ArrowRight"}}function ti(u){return u==="ArrowUp"||u==="ArrowDown"}function Cn(u){return ti(u)||u==="ArrowLeft"||u==="ArrowRight"}function Ki(u,a){var A,f;const I=a.ownerDocument.defaultView,R=a.getBoundingClientRect();return{x:u.pageX-(((A=I&&I.scrollX)!==null&&A!==void 0?A:0)+R.left),y:u.pageY-(((f=I&&I.scrollY)!==null&&f!==void 0?f:0)+R.top)}}class qi{constructor(a){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=a,this.emitter=new v,a.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),a.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),a.addEventListener("touchend",this.onTouchEnd_),a.addEventListener("mousedown",this.onMouseDown_)}computePosition_(a){const A=this.elem_.getBoundingClientRect();return{bounds:{width:A.width,height:A.height},point:a?{x:a.x,y:a.y}:null}}onMouseDown_(a){var A;a.preventDefault(),(A=a.currentTarget)===null||A===void 0||A.focus();const f=this.elem_.ownerDocument;f.addEventListener("mousemove",this.onDocumentMouseMove_),f.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:a.altKey,data:this.computePosition_(Ki(a,this.elem_)),sender:this,shiftKey:a.shiftKey})}onDocumentMouseMove_(a){this.emitter.emit("move",{altKey:a.altKey,data:this.computePosition_(Ki(a,this.elem_)),sender:this,shiftKey:a.shiftKey})}onDocumentMouseUp_(a){const A=this.elem_.ownerDocument;A.removeEventListener("mousemove",this.onDocumentMouseMove_),A.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:a.altKey,data:this.computePosition_(Ki(a,this.elem_)),sender:this,shiftKey:a.shiftKey})}onTouchStart_(a){a.preventDefault();const A=a.targetTouches.item(0),f=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:a.altKey,data:this.computePosition_(A?{x:A.clientX-f.left,y:A.clientY-f.top}:void 0),sender:this,shiftKey:a.shiftKey}),this.lastTouch_=A}onTouchMove_(a){const A=a.targetTouches.item(0),f=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:a.altKey,data:this.computePosition_(A?{x:A.clientX-f.left,y:A.clientY-f.top}:void 0),sender:this,shiftKey:a.shiftKey}),this.lastTouch_=A}onTouchEnd_(a){var A;const f=(A=a.targetTouches.item(0))!==null&&A!==void 0?A:this.lastTouch_,I=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:a.altKey,data:this.computePosition_(f?{x:f.clientX-I.left,y:f.clientY-I.top}:void 0),sender:this,shiftKey:a.shiftKey})}}function Le(u,a,A,f,I){const R=(u-a)/(A-a);return f+R*(I-f)}function Dt(u){return String(u.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function Ai(u,a,A){return Math.min(Math.max(u,a),A)}const ct=x("txt");class ks{constructor(a,A){this.onChange_=this.onChange_.bind(this),this.props_=A.props,this.props_.emitter.on("change",this.onChange_),this.element=a.createElement("div"),this.element.classList.add(ct(),ct(void 0,"num")),A.arrayPosition&&this.element.classList.add(ct(void 0,A.arrayPosition)),A.viewProps.bindClassModifiers(this.element);const f=a.createElement("input");f.classList.add(ct("i")),f.type="text",A.viewProps.bindDisabled(f),this.element.appendChild(f),this.inputElement=f,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=A.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(ct()),this.inputElement.classList.add(ct("i"));const I=a.createElement("div");I.classList.add(ct("k")),this.element.appendChild(I),this.knobElement=I;const R=a.createElementNS(Ge,"svg");R.classList.add(ct("g")),this.knobElement.appendChild(R);const j=a.createElementNS(Ge,"path");j.classList.add(ct("gb")),R.appendChild(j),this.guideBodyElem_=j;const Y=a.createElementNS(Ge,"path");Y.classList.add(ct("gh")),R.appendChild(Y),this.guideHeadElem_=Y;const be=a.createElement("div");be.classList.add(x("tt")()),this.knobElement.appendChild(be),this.tooltipElem_=be,A.value.emitter.on("change",this.onChange_),this.value=A.value,this.refresh()}onDraggingChange_(a){if(a.rawValue===null){this.element.classList.remove(ct(void 0,"drg"));return}this.element.classList.add(ct(void 0,"drg"));const A=a.rawValue/this.props_.get("draggingScale"),f=A+(A>0?-1:A<0?1:0),I=Ai(-f,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${f+I},0 L${f},4 L${f+I},8`,`M ${A},-1 L${A},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${A},4`);const R=this.props_.get("formatter");this.tooltipElem_.textContent=R(this.value.rawValue),this.tooltipElem_.style.left=`${A}px`}refresh(){const a=this.props_.get("formatter");this.inputElement.value=a(this.value.rawValue)}onChange_(){this.refresh()}}class Ps{constructor(a,A){var f;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=A.baseStep,this.parser_=A.parser,this.props=A.props,this.sliderProps_=(f=A.sliderProps)!==null&&f!==void 0?f:null,this.value=A.value,this.viewProps=A.viewProps,this.dragging_=ee(null),this.view=new ks(a,{arrayPosition:A.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const I=new qi(this.view.knobElement);I.emitter.on("down",this.onPointerDown_),I.emitter.on("move",this.onPointerMove_),I.emitter.on("up",this.onPointerUp_)}constrainValue_(a){var A,f;const I=(A=this.sliderProps_)===null||A===void 0?void 0:A.get("minValue"),R=(f=this.sliderProps_)===null||f===void 0?void 0:f.get("maxValue");let j=a;return I!==void 0&&(j=Math.max(j,I)),R!==void 0&&(j=Math.min(j,R)),j}onInputChange_(a){const A=a.currentTarget.value,f=this.parser_(A);h(f)||(this.value.rawValue=this.constrainValue_(f)),this.view.refresh()}onInputKeyDown_(a){const A=ei(this.baseStep_,Pt(a));A!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+A),{forceEmit:!1,last:!1})}onInputKeyUp_(a){ei(this.baseStep_,Pt(a))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(a){if(!a.point)return null;const A=a.point.x-a.bounds.width/2;return this.constrainValue_(this.originRawValue_+A*this.props.get("draggingScale"))}onPointerMove_(a){const A=this.computeDraggingValue_(a.data);A!==null&&(this.value.setRawValue(A,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(a){const A=this.computeDraggingValue_(a.data);A!==null&&(this.value.setRawValue(A,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}function En(u,a){u.write(a)}function yi(u){const a=u?M(u,ke):null;return a?a.step:null}function St(u,a){const A=u&&M(u,ke);return A?Dt(A.step):Math.max(Dt(a),2)}function ii(u){return yi(u)??1}function Qi(u,a){var A;const f=u&&M(u,ke),I=Math.abs((A=f==null?void 0:f.step)!==null&&A!==void 0?A:a);return I===0?.1:Math.pow(10,Math.floor(Math.log10(I))-1)}function In(u){return[u[0],u[1],u[2]]}function wt(u,a){const A=Ze(a==="float"?2:0);return`rgb(${In(u.getComponents("rgb",a)).map(f=>A(f)).join(", ")})`}function xn(u){return a=>wt(a,u)}function Ds(u,a){const A=Ze(2),f=Ze(a==="float"?2:0);return`rgba(${u.getComponents("rgb",a).map((I,R)=>(R===3?A:f)(I)).join(", ")})`}function Ot(u){return a=>Ds(a,u)}function Yn(u,a){const A=Ze(a==="float"?2:0),f=["r","g","b"];return`{${In(u.getComponents("rgb",a)).map((I,R)=>`${f[R]}: ${A(I)}`).join(", ")}}`}function Ss(u){return a=>Yn(a,u)}function Jn(u,a){const A=Ze(2),f=Ze(a==="float"?2:0),I=["r","g","b","a"];return`{${u.getComponents("rgb",a).map((R,j)=>{const Y=j===3?A:f;return`${I[j]}: ${Y(R)}`}).join(", ")}}`}function Rt(u){return a=>Jn(a,u)}[...["int","float"].reduce((u,a)=>[...u,{format:{alpha:!1,mode:"rgb",notation:"func",type:a},stringifier:xn(a)},{format:{alpha:!0,mode:"rgb",notation:"func",type:a},stringifier:Ot(a)},{format:{alpha:!1,mode:"rgb",notation:"object",type:a},stringifier:Ss(a)},{format:{alpha:!0,mode:"rgb",notation:"object",type:a},stringifier:Rt(a)}],[])];class Rs{constructor(a){this.components=a.components,this.asm_=a.assembly}constrain(a){const A=this.asm_.toComponents(a).map((f,I)=>{var R,j;return(j=(R=this.components[I])===null||R===void 0?void 0:R.constrain(f))!==null&&j!==void 0?j:f});return this.asm_.fromComponents(A)}}const pi=x("pndtxt");class Bn{constructor(a,A){this.textViews=A.textViews,this.element=a.createElement("div"),this.element.classList.add(pi()),this.textViews.forEach(f=>{const I=a.createElement("div");I.classList.add(pi("a")),I.appendChild(f.element),this.element.appendChild(I)})}}function Ut(u,a,A){return new Ps(u,{arrayPosition:A===0?"fst":A===a.axes.length-1?"lst":"mid",baseStep:a.axes[A].baseStep,parser:a.parser,props:a.axes[A].textProps,value:ee(0,{constraint:a.axes[A].constraint}),viewProps:a.viewProps})}class ki{constructor(a,A){this.value=A.value,this.viewProps=A.viewProps,this.acs_=A.axes.map((f,I)=>Ut(a,A,I)),this.acs_.forEach((f,I)=>{Hi({primary:this.value,secondary:f.value,forward:R=>A.assembly.toComponents(R.rawValue)[I],backward:(R,j)=>{const Y=A.assembly.toComponents(R.rawValue);return Y[I]=j.rawValue,A.assembly.fromComponents(Y)}})}),this.view=new Bn(a,{textViews:this.acs_.map(f=>f.view)})}}function $n(u,a){return"step"in u&&!h(u.step)?new ke(u.step,a):null}function Ls(u){return!h(u.max)&&!h(u.min)?new te({max:u.max,min:u.min}):!h(u.max)||!h(u.min)?new Ie({max:u.max,min:u.min}):null}const Ms={monitor:{defaultInterval:200,defaultLineCount:3}},Lt=x("grl");class Wn{constructor(a,A){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=a.createElement("div"),this.element.classList.add(Lt()),A.viewProps.bindClassModifiers(this.element),this.formatter_=A.formatter,this.props_=A.props,this.cursor_=A.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const f=a.createElementNS(Ge,"svg");f.classList.add(Lt("g")),f.style.height=`calc(var(--bld-us) * ${A.lineCount})`,this.element.appendChild(f),this.svgElem_=f;const I=a.createElementNS(Ge,"polyline");this.svgElem_.appendChild(I),this.lineElem_=I;const R=a.createElement("div");R.classList.add(Lt("t"),x("tt")()),this.element.appendChild(R),this.tooltipElem_=R,A.value.emitter.on("change",this.onValueUpdate_),this.value=A.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const a=this.svgElem_.getBoundingClientRect(),A=this.value.rawValue.length-1,f=this.props_.get("minValue"),I=this.props_.get("maxValue"),R=[];this.value.rawValue.forEach((Ht,js)=>{if(Ht===void 0)return;const ss=Le(js,0,A,0,a.width),Vo=Le(Ht,f,I,a.height,0);R.push([ss,Vo].join(","))}),this.lineElem_.setAttributeNS(null,"points",R.join(" "));const j=this.tooltipElem_,Y=this.value.rawValue[this.cursor_.rawValue];if(Y===void 0){j.classList.remove(Lt("t","a"));return}const be=Le(this.cursor_.rawValue,0,A,0,a.width),Ke=Le(Y,f,I,a.height,0);j.style.left=`${be}px`,j.style.top=`${Ke}px`,j.textContent=`${this.formatter_(Y)}`,j.classList.contains(Lt("t","a"))||(j.classList.add(Lt("t","a"),Lt("t","in")),li(j),j.classList.remove(Lt("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class ui{constructor(a,A){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props_=A.props,this.value=A.value,this.viewProps=A.viewProps,this.cursor_=ee(-1),this.view=new Wn(a,{cursor:this.cursor_,formatter:A.formatter,lineCount:A.lineCount,props:this.props_,value:this.value,viewProps:this.viewProps}),!Ye(a))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const f=new qi(this.view.element);f.emitter.on("down",this.onGraphPointerDown_),f.emitter.on("move",this.onGraphPointerMove_),f.emitter.on("up",this.onGraphPointerUp_)}}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(a){const A=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor(Le(a.offsetX,0,A.width,0,this.value.rawValue.length))}onGraphPointerDown_(a){this.onGraphPointerMove_(a)}onGraphPointerMove_(a){if(!a.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(Le(a.data.point.x,0,a.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}class ni{constructor(a){this.controller_=a}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(a){this.controller_.viewProps.set("disabled",a)}get title(){var a;return(a=this.controller_.props.get("title"))!==null&&a!==void 0?a:""}set title(a){this.controller_.props.set("title",a)}on(a,A){const f=A.bind(this);return this.controller_.emitter.on(a,()=>{f(new r(this))}),this}}class Xn extends r{constructor(a,A,f){super(a),this.cell=A,this.index=f}}class gi extends n{constructor(a){super(a),this.cellToApiMap_=new Map,this.emitter_=new v;const A=this.controller_.valueController;A.cellControllers.forEach((f,I)=>{const R=new ni(f);this.cellToApiMap_.set(f,R),f.emitter.on("click",()=>{const j=I%A.size[0],Y=Math.floor(I/A.size[0]);this.emitter_.emit("click",{event:new Xn(this,R,[j,Y])})})})}cell(a,A){const f=this.controller_.valueController,I=f.cellControllers[A*f.size[0]+a];return this.cellToApiMap_.get(I)}on(a,A){const f=A.bind(this);return this.emitter_.on(a,I=>{f(I.event)}),this}}class w{constructor(a,A){this.size=A.size;const[f,I]=this.size,R=[];for(let j=0;j<I;j++)for(let Y=0;Y<f;Y++){const be=new O(a,{props:K.fromObject(Object.assign({},A.cellConfig(Y,j))),viewProps:ze.create()});R.push(be)}this.cellCs_=R,this.viewProps=ze.create(),this.viewProps.handleDispose(()=>{this.cellCs_.forEach(j=>{j.viewProps.set("disposed",!0)})}),this.view=new Vt(a,{viewProps:this.viewProps,viewName:"btngrid"}),this.view.element.style.gridTemplateColumns=`repeat(${f}, 1fr)`,this.cellCs_.forEach(j=>{this.view.element.appendChild(j.view.element)})}get cellControllers(){return this.cellCs_}}const d={id:"buttongrid",type:"blade",css:'.tp-cbzgv,.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-radv_b:hover,.tp-rslv_k:hover,.tp-cbzv_b:hover{background-color:var(--btn-bg-h)}.tp-radv_b:focus,.tp-rslv_k:focus,.tp-cbzv_b:focus{background-color:var(--btn-bg-f)}.tp-radv_b:active,.tp-rslv_k:active,.tp-cbzv_b:active{background-color:var(--btn-bg-a)}.tp-radv_b:disabled,.tp-rslv_k:disabled,.tp-cbzv_b:disabled{opacity:.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:.5}.tp-btngridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--bld-us)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--bld-s);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-cbzpv_t{margin-top:var(--bld-s)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--bld-us)*5);width:100%}.tp-cbzgv_u{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:rgba(0,0,0,0);stroke:var(--in-fg)}.tp-cbzgv_v{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity .2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:.2em;opacity:.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:.5}.tp-rslv_t{height:calc(var(--bld-us));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--bld-us) - 8px);margin-top:calc((var(--bld-us) - 8px)/-2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:.5}.tp-radgridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:.5}.tp-radgridv .tp-radv_b{border-radius:0}',accept(u){const a=ue,A=ae(u,{cells:a.required.function,size:a.required.array(a.required.number),view:a.required.constant("buttongrid"),label:a.optional.string});return A?{params:A}:null},controller(u){return new Xe(u.document,{blade:u.blade,props:K.fromObject({label:u.params.label}),valueController:new w(u.document,{cellConfig:u.params.cells,size:u.params.size})})},api(u){return!(u.controller instanceof Xe)||!(u.controller.valueController instanceof w)?null:new gi(u.controller)}};class b extends n{get label(){return this.controller_.props.get("label")}set label(a){this.controller_.props.set("label",a)}get value(){return this.controller_.valueController.value.rawValue}set value(a){this.controller_.valueController.value.rawValue=a}on(a,A){const f=A.bind(this);return this.controller_.valueController.value.emitter.on(a,I=>{f(new c(this,I.rawValue,void 0,I.options.last))}),this}}function E(u,a,A){return u*(1-A)+a*A}const y=20,V=.001,H=100;function W(u,a){let A=.25,f=.5,I=-1;for(let R=0;R<y;R++){const[j,Y]=u.curve(f);if(f+=A*(j<a?1:-1),I=Y,A*=.5,Math.abs(a-j)<V)break}return I}class ${constructor(a=0,A=0,f=1,I=1){this.cache_=[],this.comps_=[a,A,f,I]}get x1(){return this.comps_[0]}get y1(){return this.comps_[1]}get x2(){return this.comps_[2]}get y2(){return this.comps_[3]}static isObject(a){return h(a)||!Array.isArray(a)?!1:typeof a[0]=="number"&&typeof a[1]=="number"&&typeof a[2]=="number"&&typeof a[3]=="number"}static equals(a,A){return a.x1===A.x1&&a.y1===A.y1&&a.x2===A.x2&&a.y2===A.y2}curve(a){const A=E(0,this.x1,a),f=E(0,this.y1,a),I=E(this.x1,this.x2,a),R=E(this.y1,this.y2,a),j=E(this.x2,1,a),Y=E(this.y2,1,a),be=E(A,I,a),Ke=E(f,R,a),Ht=E(I,j,a),js=E(R,Y,a);return[E(be,Ht,a),E(Ke,js,a)]}y(a){if(this.cache_.length===0){const A=[];for(let f=0;f<H;f++)A.push(W(this,Le(f,0,H-1,0,1)));this.cache_=A}return this.cache_[Math.round(Le(Ai(a,0,1),0,1,0,H-1))]}toObject(){return[this.comps_[0],this.comps_[1],this.comps_[2],this.comps_[3]]}}const X={toComponents:u=>u.toObject(),fromComponents:u=>new $(...u)};function he(u){const a=Ze(2);return`cubic-bezier(${u.toObject().map(A=>a(A)).join(", ")})`}const we=[0,.5,.5,1];function Me(u){const a=u.match(/^cubic-bezier\s*\(\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*\)$/);if(!a)return new $(...we);const A=[a[1],a[2],a[3],a[4]].reduce((f,I)=>{if(!f)return null;const R=Number(I);return isNaN(R)?null:[...f,R]},[]);return new $(...A??we)}const Pe=x("cbz");class $e{constructor(a,A){this.element=a.createElement("div"),this.element.classList.add(Pe()),A.viewProps.bindClassModifiers(this.element),A.foldable.bindExpandedClass(this.element,Pe(void 0,"expanded")),G(A.foldable,"completed",k(this.element,Pe(void 0,"cpl")));const f=a.createElement("div");f.classList.add(Pe("h")),this.element.appendChild(f);const I=a.createElement("button");I.classList.add(Pe("b")),A.viewProps.bindDisabled(I);const R=a.createElementNS(Ge,"svg");R.innerHTML='<path d="M2 13C8 13 8 3 14 3"/>',I.appendChild(R),f.appendChild(I),this.buttonElement=I;const j=a.createElement("div");if(j.classList.add(Pe("t")),f.appendChild(j),this.textElement=j,A.pickerLayout==="inline"){const Y=a.createElement("div");Y.classList.add(Pe("p")),this.element.appendChild(Y),this.pickerElement=Y}else this.pickerElement=null}}const bt=x("cbzp");class fe{constructor(a,A){this.element=a.createElement("div"),this.element.classList.add(bt()),A.viewProps.bindClassModifiers(this.element);const f=a.createElement("div");f.classList.add(bt("g")),this.element.appendChild(f),this.graphElement=f;const I=a.createElement("div");I.classList.add(bt("t")),this.element.appendChild(I),this.textElement=I}}function Pi(u,a){const A=new MutationObserver(I=>{for(const R of I)R.type==="childList"&&R.addedNodes.forEach(j=>{j.contains(j)&&(a(),A.disconnect())})}),f=u.ownerDocument;A.observe(f.body,{attributes:!0,childList:!0,subtree:!0})}const si=x("cbzg");function Mo(u,a){return A=>a(u(A))}class co{constructor(a,A){this.element=a.createElement("div"),this.element.classList.add(si()),A.viewProps.bindClassModifiers(this.element),A.viewProps.bindTabIndex(this.element);const f=a.createElement("div");f.classList.add(si("p")),this.element.appendChild(f),this.previewElement=f;const I=a.createElementNS(Ge,"svg");I.classList.add(si("g")),this.element.appendChild(I),this.svgElem_=I;const R=a.createElementNS(Ge,"path");R.classList.add(si("u")),this.svgElem_.appendChild(R),this.guideElem_=R;const j=a.createElementNS(Ge,"polyline");j.classList.add(si("l")),this.svgElem_.appendChild(j),this.lineElem_=j,this.handleElems_=[a.createElement("div"),a.createElement("div")],this.handleElems_.forEach(Y=>{Y.classList.add(si("h")),this.element.appendChild(Y)}),this.vectorElems_=[a.createElementNS(Ge,"line"),a.createElementNS(Ge,"line")],this.vectorElems_.forEach(Y=>{Y.classList.add(si("v")),this.svgElem_.appendChild(Y)}),this.value_=A.value,this.value_.emitter.on("change",this.onValueChange_.bind(this)),this.sel_=A.selection,this.handleElems_.forEach((Y,be)=>{D(this.sel_,Mo(Ke=>Ke===be,k(Y,si("h","sel"))))}),Pi(this.element,()=>{this.refresh()})}getVertMargin_(a){return a*.25}valueToPosition(a,A){const f=this.element.getBoundingClientRect(),I=f.width,R=f.height,j=this.getVertMargin_(R);return{x:Le(a,0,1,0,I),y:Le(A,0,1,R-j,j)}}positionToValue(a,A){const f=this.element.getBoundingClientRect(),I=f.width,R=f.height,j=this.getVertMargin_(R);return{x:Ai(Le(a,0,I,0,1),0,1),y:Le(A,R-j,j,0,1)}}refresh(){this.guideElem_.setAttributeNS(null,"d",[0,1].map(R=>{const j=this.valueToPosition(0,R),Y=this.valueToPosition(1,R);return[`M ${j.x},${j.y}`,`L ${Y.x},${Y.y}`].join(" ")}).join(" "));const a=this.value_.rawValue,A=[];let f=0;for(;;){const R=this.valueToPosition(...a.curve(f));if(A.push([R.x,R.y].join(",")),f>=1)break;f=Math.min(f+.05,1)}this.lineElem_.setAttributeNS(null,"points",A.join(" "));const I=a.toObject();[0,1].forEach(R=>{const j=this.valueToPosition(R,R),Y=this.valueToPosition(I[R*2],I[R*2+1]),be=this.vectorElems_[R];be.setAttributeNS(null,"x1",String(j.x)),be.setAttributeNS(null,"y1",String(j.y)),be.setAttributeNS(null,"x2",String(Y.x)),be.setAttributeNS(null,"y2",String(Y.y));const Ke=this.handleElems_[R];Ke.style.left=`${Y.x}px`,Ke.style.top=`${Y.y}px`})}onValueChange_(){this.refresh()}}const ho=24,Ts=400,Ao=1e3,dt=x("cbzprv");class Fs{constructor(a,A){this.stopped_=!0,this.startTime_=-1,this.onDispose_=this.onDispose_.bind(this),this.onTimer_=this.onTimer_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.element=a.createElement("div"),this.element.classList.add(dt()),A.viewProps.bindClassModifiers(this.element);const f=a.createElementNS(Ge,"svg");f.classList.add(dt("g")),this.element.appendChild(f),this.svgElem_=f;const I=a.createElementNS(Ge,"path");I.classList.add(dt("t")),this.svgElem_.appendChild(I),this.ticksElem_=I;const R=a.createElement("div");R.classList.add(dt("m")),this.element.appendChild(R),this.markerElem_=R,this.value_=A.value,this.value_.emitter.on("change",this.onValueChange_),A.viewProps.handleDispose(this.onDispose_),Pi(this.element,()=>{this.refresh()})}play(){this.stop(),this.updateMarker_(0),this.markerElem_.classList.add(dt("m","a")),this.startTime_=new Date().getTime()+Ts,this.stopped_=!1,requestAnimationFrame(this.onTimer_)}stop(){this.stopped_=!0,this.markerElem_.classList.remove(dt("m","a"))}onDispose_(){this.stop()}updateMarker_(a){const A=this.value_.rawValue.y(Ai(a,0,1));this.markerElem_.style.left=`${A*100}%`}refresh(){const a=this.svgElem_.getBoundingClientRect(),A=a.width,f=a.height,I=[],R=this.value_.rawValue;for(let j=0;j<ho;j++){const Y=Le(j,0,ho-1,0,1),be=Le(R.y(Y),0,1,0,A);I.push(`M ${be},0 v${f}`)}this.ticksElem_.setAttributeNS(null,"d",I.join(" "))}onTimer_(){if(this.startTime_===null)return;const a=new Date().getTime()-this.startTime_,A=a/Ao;this.updateMarker_(A),a>Ao+Ts&&this.stop(),this.stopped_||requestAnimationFrame(this.onTimer_)}onValueChange_(){this.refresh(),this.play()}}function zs(u,a,A,f){const I=A-u,R=f-a;return Math.sqrt(I*I+R*R)}function We(u,a,A,f){const I=zs(u,a,A,f),R=Math.atan2(f-a,A-u),j=Math.round(R/(Math.PI/4))*Math.PI/4;return{x:u+Math.cos(j)*I,y:a+Math.sin(j)*I}}class po{constructor(a,A){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=A.baseStep,this.value=A.value,this.sel_=ee(0),this.viewProps=A.viewProps,this.view=new co(a,{selection:this.sel_,value:this.value,viewProps:this.viewProps}),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_),this.prevView_=new Fs(a,{value:this.value,viewProps:this.viewProps}),this.prevView_.element.addEventListener("mousedown",I=>{I.stopImmediatePropagation(),I.preventDefault(),this.prevView_.play()}),this.view.previewElement.appendChild(this.prevView_.element);const f=new qi(this.view.element);f.emitter.on("down",this.onPointerDown_),f.emitter.on("move",this.onPointerMove_),f.emitter.on("up",this.onPointerUp_)}refresh(){this.view.refresh(),this.prevView_.refresh(),this.prevView_.play()}updateValue_(a,A,f){const I=this.sel_.rawValue,R=this.value.rawValue.toObject(),j=this.view.positionToValue(a.x,a.y),Y=A?We(I,I,j.x,j.y):j;R[I*2]=Y.x,R[I*2+1]=Y.y,this.value.setRawValue(new $(...R),f)}onPointerDown_(a){const A=a.data;if(!A.point)return;const f=this.value.rawValue,I=this.view.valueToPosition(f.x1,f.y1),R=zs(A.point.x,A.point.y,I.x,I.y),j=this.view.valueToPosition(f.x2,f.y2),Y=zs(A.point.x,A.point.y,j.x,j.y);this.sel_.rawValue=R<=Y?0:1,this.updateValue_(A.point,a.shiftKey,{forceEmit:!1,last:!1})}onPointerMove_(a){const A=a.data;A.point&&this.updateValue_(A.point,a.shiftKey,{forceEmit:!1,last:!1})}onPointerUp_(a){const A=a.data;A.point&&this.updateValue_(A.point,a.shiftKey,{forceEmit:!0,last:!0})}onKeyDown_(a){Cn(a.key)&&a.preventDefault();const A=this.sel_.rawValue,f=this.value.rawValue.toObject();f[A*2]+=ei(this.baseStep_,wn(a)),f[A*2+1]+=ei(this.baseStep_,Pt(a)),this.value.setRawValue(new $(...f),{forceEmit:!1,last:!1})}onKeyUp_(a){Cn(a.key)&&a.preventDefault();const A=ei(this.baseStep_,wn(a)),f=ei(this.baseStep_,Pt(a));A===0&&f===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class yn{constructor(a,A){this.value=A.value,this.viewProps=A.viewProps,this.view=new fe(a,{viewProps:this.viewProps}),this.gc_=new po(a,{baseStep:A.axis.baseStep,value:this.value,viewProps:this.viewProps}),this.view.graphElement.appendChild(this.gc_.view.element);const f=Object.assign(Object.assign({},A.axis),{constraint:new Ie({max:1,min:0})}),I=Object.assign(Object.assign({},A.axis),{constraint:void 0});this.tc_=new ki(a,{assembly:X,axes:[f,I,f,I],parser:_t,value:this.value,viewProps:this.viewProps}),this.view.textElement.appendChild(this.tc_.view.element)}get allFocusableElements(){return[this.gc_.view.element,...this.tc_.view.textViews.map(a=>a.inputElement)]}refresh(){this.gc_.refresh()}}class Zn{constructor(a,A){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=A.value,this.viewProps=A.viewProps,this.foldable_=zi(A.expanded),this.view=new $e(a,{foldable:this.foldable_,pickerLayout:A.pickerLayout,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("blur",this.onButtonBlur_),this.view.buttonElement.addEventListener("click",this.onButtonClick_),this.tc_=new gt(a,{parser:Me,props:K.fromObject({formatter:he}),value:this.value,viewProps:this.viewProps}),this.view.textElement.appendChild(this.tc_.view.element),this.popC_=A.pickerLayout==="popup"?new ut(a,{viewProps:this.viewProps}):null;const f=new yn(a,{axis:A.axis,value:this.value,viewProps:this.viewProps});f.allFocusableElements.forEach(I=>{I.addEventListener("blur",this.onPopupChildBlur_),I.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=f,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),D(this.popC_.shows,I=>{I&&f.refresh()}),Hi({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:I=>I.rawValue,backward:(I,R)=>R.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),hn(this.foldable_,this.view.pickerElement))}onButtonBlur_(a){if(!this.popC_)return;const A=a.relatedTarget;(!A||!this.popC_.view.element.contains(A))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.allFocusableElements[0].focus()}onPopupChildBlur_(a){if(!this.popC_)return;const A=this.popC_.view.element,f=Fi(a);f&&A.contains(f)||f&&f===this.view.buttonElement&&!Ye(A.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(a){this.popC_&&a.key==="Escape"&&(this.popC_.shows.rawValue=!1)}}function Ns(){return new Rs({assembly:X,components:[0,1,2,3].map(u=>u%2===0?new Ie({min:0,max:1}):void 0)})}const Qn={id:"cubic-bezier",type:"blade",css:'.tp-cbzgv,.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-radv_b:hover,.tp-rslv_k:hover,.tp-cbzv_b:hover{background-color:var(--btn-bg-h)}.tp-radv_b:focus,.tp-rslv_k:focus,.tp-cbzv_b:focus{background-color:var(--btn-bg-f)}.tp-radv_b:active,.tp-rslv_k:active,.tp-cbzv_b:active{background-color:var(--btn-bg-a)}.tp-radv_b:disabled,.tp-rslv_k:disabled,.tp-cbzv_b:disabled{opacity:.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:.5}.tp-btngridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--bld-us)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--bld-s);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-cbzpv_t{margin-top:var(--bld-s)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--bld-us)*5);width:100%}.tp-cbzgv_u{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:rgba(0,0,0,0);stroke:var(--in-fg)}.tp-cbzgv_v{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity .2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:.2em;opacity:.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:.5}.tp-rslv_t{height:calc(var(--bld-us));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--bld-us) - 8px);margin-top:calc((var(--bld-us) - 8px)/-2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:.5}.tp-radgridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:.5}.tp-radgridv .tp-radv_b{border-radius:0}',accept(u){const a=ue,A=ae(u,{value:a.required.array(a.required.number),view:a.required.constant("cubicbezier"),expanded:a.optional.boolean,label:a.optional.string,picker:a.optional.custom(f=>f==="inline"||f==="popup"?f:void 0)});return A?{params:A}:null},controller(u){var a,A;const f=new $(...u.params.value),I=ee(f,{constraint:Ns(),equals:$.equals}),R=new Zn(u.document,{axis:{baseStep:.1,textProps:K.fromObject({draggingScale:.01,formatter:Ze(2)})},expanded:(a=u.params.expanded)!==null&&a!==void 0?a:!1,pickerLayout:(A=u.params.picker)!==null&&A!==void 0?A:"popup",value:I,viewProps:u.viewProps});return new $t(u.document,{blade:u.blade,props:K.fromObject({label:u.params.label}),valueController:R})},api(u){return!(u.controller instanceof $t)||!(u.controller.valueController instanceof Zn)?null:new b(u.controller)}};class ot extends n{begin(){this.controller_.valueController.begin()}end(){this.controller_.valueController.end()}}const Yi=20;class jt{constructor(){this.start_=null,this.duration_=0,this.fps_=null,this.frameCount_=0,this.timestamps_=[]}get duration(){return this.duration_}get fps(){return this.fps_}begin(a){this.start_=a.getTime()}calculateFps_(a){if(this.timestamps_.length===0)return null;const A=this.timestamps_[0];return 1e3*(this.frameCount_-A.frameCount)/(a-A.time)}compactTimestamps_(){if(this.timestamps_.length<=Yi)return;const a=this.timestamps_.length-Yi;this.timestamps_.splice(0,a);const A=this.timestamps_[0].frameCount;this.timestamps_.forEach(f=>{f.frameCount-=A}),this.frameCount_-=A}end(a){if(this.start_===null)return;const A=a.getTime();this.duration_=A-this.start_,this.start_=null,this.fps_=this.calculateFps_(A),this.timestamps_.push({frameCount:this.frameCount_,time:A}),++this.frameCount_,this.compactTimestamps_()}}const kn=x("fps");class Vs{constructor(a,A){this.element=a.createElement("div"),this.element.classList.add(kn()),A.viewProps.bindClassModifiers(this.element),this.graphElement=a.createElement("div"),this.graphElement.classList.add(kn("g")),this.element.appendChild(this.graphElement);const f=a.createElement("div");f.classList.add(kn("l")),this.element.appendChild(f);const I=a.createElement("span");I.classList.add(kn("v")),I.textContent="--",f.appendChild(I),this.valueElement=I;const R=a.createElement("span");R.classList.add(kn("u")),R.textContent="FPS",f.appendChild(R)}}class Pn{constructor(a,A){this.stopwatch_=new jt,this.onTick_=this.onTick_.bind(this),this.ticker_=A.ticker,this.ticker_.emitter.on("tick",this.onTick_),this.value_=A.value,this.viewProps=A.viewProps,this.view=new Vs(a,{viewProps:this.viewProps}),this.graphC_=new ui(a,{formatter:Ze(0),lineCount:A.lineCount,props:K.fromObject({maxValue:A.maxValue,minValue:A.minValue}),value:this.value_,viewProps:this.viewProps}),this.view.graphElement.appendChild(this.graphC_.view.element),this.viewProps.handleDispose(()=>{this.graphC_.viewProps.set("disposed",!0),this.ticker_.dispose()})}begin(){this.stopwatch_.begin(new Date)}end(){this.stopwatch_.end(new Date)}onTick_(){const a=this.stopwatch_.fps;if(a!==null){const A=this.value_.rawValue;this.value_.rawValue=_n(A,a),this.view.valueElement.textContent=a.toFixed(0)}}}function Di(u,a){return a===0?new Vi:new Ei(u,a??Ms.monitor.defaultInterval)}const ye={id:"fpsgraph",type:"blade",accept(u){const a=ue,A=ae(u,{view:a.required.constant("fpsgraph"),interval:a.optional.number,label:a.optional.string,lineCount:a.optional.number,max:a.optional.number,min:a.optional.number});return A?{params:A}:null},controller(u){var a,A,f,I;const R=(a=u.params.interval)!==null&&a!==void 0?a:500;return new Xe(u.document,{blade:u.blade,props:K.fromObject({label:u.params.label}),valueController:new Pn(u.document,{lineCount:(A=u.params.lineCount)!==null&&A!==void 0?A:2,maxValue:(f=u.params.max)!==null&&f!==void 0?f:90,minValue:(I=u.params.min)!==null&&I!==void 0?I:0,ticker:Di(u.document,R),value:vn(80),viewProps:u.viewProps})})},api(u){return!(u.controller instanceof Xe)||!(u.controller.valueController instanceof Pn)?null:new ot(u.controller)}};class ht{constructor(a,A){this.min=a,this.max=A}static isObject(a){if(typeof a!="object"||a===null)return!1;const A=a.min,f=a.max;return!(typeof A!="number"||typeof f!="number")}static equals(a,A){return a.min===A.min&&a.max===A.max}get length(){return this.max-this.min}toObject(){return{min:this.min,max:this.max}}}const Te={fromComponents:u=>new ht(u[0],u[1]),toComponents:u=>[u.min,u.max]};class es{constructor(a){this.edge=a}constrain(a){var A,f,I,R,j,Y,be,Ke;if(a.min<=a.max)return new ht((f=(A=this.edge)===null||A===void 0?void 0:A.constrain(a.min))!==null&&f!==void 0?f:a.min,(R=(I=this.edge)===null||I===void 0?void 0:I.constrain(a.max))!==null&&R!==void 0?R:a.max);const Ht=(a.min+a.max)/2;return new ht((Y=(j=this.edge)===null||j===void 0?void 0:j.constrain(Ht))!==null&&Y!==void 0?Y:Ht,(Ke=(be=this.edge)===null||be===void 0?void 0:be.constrain(Ht))!==null&&Ke!==void 0?Ke:Ht)}}const At=x("rsltxt");class uo{constructor(a,A){this.sliderView_=A.sliderView,this.textView_=A.textView,this.element=a.createElement("div"),this.element.classList.add(At());const f=a.createElement("div");f.classList.add(At("s")),f.appendChild(this.sliderView_.element),this.element.appendChild(f);const I=a.createElement("div");I.classList.add(At("t")),I.appendChild(this.textView_.element),this.element.appendChild(I)}}const Mt=x("rsl");class ts{constructor(a,A){this.onSliderPropsChange_=this.onSliderPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.sliderProps_=A.sliderProps,this.sliderProps_.emitter.on("change",this.onSliderPropsChange_),this.element=a.createElement("div"),this.element.classList.add(Mt()),A.viewProps.bindClassModifiers(this.element),this.value_=A.value,this.value_.emitter.on("change",this.onValueChange_);const f=a.createElement("div");f.classList.add(Mt("t")),this.element.appendChild(f),this.trackElement=f;const I=a.createElement("div");I.classList.add(Mt("b")),f.appendChild(I),this.barElement=I;const R=["min","max"].map(j=>{const Y=a.createElement("div");return Y.classList.add(Mt("k"),Mt("k",j)),f.appendChild(Y),Y});this.knobElements=[R[0],R[1]],this.update_()}valueToX_(a){const A=this.sliderProps_.get("minValue"),f=this.sliderProps_.get("maxValue");return Ai(Le(a,A,f,0,1),0,1)*100}update_(){const a=this.value_.rawValue;a.length===0?this.element.classList.add(Mt(void 0,"zero")):this.element.classList.remove(Mt(void 0,"zero"));const A=[this.valueToX_(a.min),this.valueToX_(a.max)];this.barElement.style.left=`${A[0]}%`,this.barElement.style.right=`${100-A[1]}%`,this.knobElements.forEach((f,I)=>{f.style.left=`${A[I]}%`})}onSliderPropsChange_(){this.update_()}onValueChange_(){this.update_()}}class go{constructor(a,A){this.grabbing_=null,this.grabOffset_=0,this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.sliderProps=A.sliderProps,this.viewProps=A.viewProps,this.value=A.value,this.view=new ts(a,{sliderProps:this.sliderProps,value:this.value,viewProps:A.viewProps});const f=new qi(this.view.trackElement);f.emitter.on("down",this.onPointerDown_),f.emitter.on("move",this.onPointerMove_),f.emitter.on("up",this.onPointerUp_)}ofs_(){return this.grabbing_==="min"?this.view.knobElements[0].getBoundingClientRect().width/2:this.grabbing_==="max"?-this.view.knobElements[1].getBoundingClientRect().width/2:0}valueFromData_(a){if(!a.point)return null;const A=(a.point.x+this.ofs_())/a.bounds.width,f=this.sliderProps.get("minValue"),I=this.sliderProps.get("maxValue");return Le(A,0,1,f,I)}onPointerDown_(a){if(!a.data.point)return;const A=a.data.point.x/a.data.bounds.width,f=this.value.rawValue,I=this.sliderProps.get("minValue"),R=this.sliderProps.get("maxValue"),j=Le(f.min,I,R,0,1),Y=Le(f.max,I,R,0,1);Math.abs(Y-A)<=.025?this.grabbing_="max":Math.abs(j-A)<=.025?this.grabbing_="min":A>=j&&A<=Y?(this.grabbing_="length",this.grabOffset_=Le(A-j,0,1,0,R-I)):A<j?(this.grabbing_="min",this.onPointerMove_(a)):A>Y&&(this.grabbing_="max",this.onPointerMove_(a))}applyPointToValue_(a,A){const f=this.valueFromData_(a);if(f===null)return;const I=this.sliderProps.get("minValue"),R=this.sliderProps.get("maxValue");if(this.grabbing_==="min")this.value.setRawValue(new ht(f,this.value.rawValue.max),A);else if(this.grabbing_==="max")this.value.setRawValue(new ht(this.value.rawValue.min,f),A);else if(this.grabbing_==="length"){const j=this.value.rawValue.length;let Y=f-this.grabOffset_,be=Y+j;Y<I?(Y=I,be=I+j):be>R&&(Y=R-j,be=R),this.value.setRawValue(new ht(Y,be),A)}}onPointerMove_(a){this.applyPointToValue_(a.data,{forceEmit:!1,last:!1})}onPointerUp_(a){this.applyPointToValue_(a.data,{forceEmit:!0,last:!0}),this.grabbing_=null}}class bo{constructor(a,A){this.value=A.value,this.viewProps=A.viewProps,this.sc_=new go(a,A);const f={baseStep:A.baseStep,constraint:A.constraint,textProps:K.fromObject({draggingScale:A.draggingScale,formatter:A.formatter})};this.tc_=new ki(a,{assembly:Te,axes:[f,f],parser:A.parser,value:this.value,viewProps:A.viewProps}),this.view=new uo(a,{sliderView:this.sc_.view,textView:this.tc_.view})}get textController(){return this.tc_}}function Gs(u){return ht.isObject(u)?new ht(u.min,u.max):new ht(0,0)}function To(u,a){u.writeProperty("max",a.max),u.writeProperty("min",a.min)}function Os(u){const a=[],A=Ls(u);A&&a.push(A);const f=$n(u);return f&&a.push(f),new es(new ci(a))}const Dn={id:"input-interval",type:"input",css:'.tp-cbzgv,.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-radv_b:hover,.tp-rslv_k:hover,.tp-cbzv_b:hover{background-color:var(--btn-bg-h)}.tp-radv_b:focus,.tp-rslv_k:focus,.tp-cbzv_b:focus{background-color:var(--btn-bg-f)}.tp-radv_b:active,.tp-rslv_k:active,.tp-cbzv_b:active{background-color:var(--btn-bg-a)}.tp-radv_b:disabled,.tp-rslv_k:disabled,.tp-cbzv_b:disabled{opacity:.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:.5}.tp-btngridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--bld-us)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--bld-s);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-cbzpv_t{margin-top:var(--bld-s)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--bld-us)*5);width:100%}.tp-cbzgv_u{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:rgba(0,0,0,0);stroke:var(--in-fg)}.tp-cbzgv_v{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity .2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:.2em;opacity:.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:.5}.tp-rslv_t{height:calc(var(--bld-us));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--bld-us) - 8px);margin-top:calc((var(--bld-us) - 8px)/-2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:.5}.tp-radgridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:.5}.tp-radgridv .tp-radv_b{border-radius:0}',accept:(u,a)=>{if(!ht.isObject(u))return null;const A=ue,f=ae(a,{format:A.optional.function,max:A.optional.number,min:A.optional.number,step:A.optional.number});return f?{initialValue:new ht(u.min,u.max),params:f}:null},binding:{reader:u=>Gs,constraint:u=>Os(u.params),equals:ht.equals,writer:u=>To},controller(u){var a;const A=u.value,f=u.constraint;if(!(f instanceof es))throw m.shouldNeverHappen();const I=(A.rawValue.min+A.rawValue.max)/2,R=(a=u.params.format)!==null&&a!==void 0?a:Ze(St(f.edge,I)),j=f.edge&&M(f.edge,te);if(j)return new bo(u.document,{baseStep:ii(f.edge),constraint:f.edge,draggingScale:Qi(f.edge,I),formatter:R,parser:_t,sliderProps:new K({maxValue:j.values.value("max"),minValue:j.values.value("min")}),value:A,viewProps:u.viewProps});const Y={baseStep:ii(f.edge),constraint:f.edge,textProps:K.fromObject({draggingScale:I,formatter:R})};return new ki(u.document,{assembly:Te,axes:[Y,Y],parser:_t,value:A,viewProps:u.viewProps})}};class Sn{constructor(a){this.controller_=a}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(a){this.controller_.viewProps.set("disabled",a)}get title(){var a;return(a=this.controller_.props.get("title"))!==null&&a!==void 0?a:""}set title(a){this.controller_.props.set("title",a)}}class Us extends c{constructor(a,A,f,I,R){super(a,I,R),this.cell=A,this.index=f}}class oi extends n{constructor(a){super(a),this.cellToApiMap_=new Map,this.controller_.valueController.cellControllers.forEach(A=>{const f=new Sn(A);this.cellToApiMap_.set(A,f)})}get value(){return this.controller_.value}cell(a,A){const f=this.controller_.valueController,I=f.cellControllers[A*f.size[0]+a];return this.cellToApiMap_.get(I)}on(a,A){const f=A.bind(this);this.controller_.value.emitter.on(a,I=>{const R=this.controller_.valueController,j=R.findCellByValue(I.rawValue);if(!j)return;const Y=this.cellToApiMap_.get(j);if(!Y)return;const be=R.cellControllers.indexOf(j);f(new Us(this,Y,[be%R.size[0],Math.floor(be/R.size[0])],I.rawValue,void 0))})}}const Ji=x("rad");class is{constructor(a,A){this.element=a.createElement("div"),this.element.classList.add(Ji()),A.viewProps.bindClassModifiers(this.element);const f=a.createElement("label");f.classList.add(Ji("l")),this.element.appendChild(f);const I=a.createElement("input");I.classList.add(Ji("i")),I.name=A.name,I.type="radio",A.viewProps.bindDisabled(I),f.appendChild(I),this.inputElement=I;const R=a.createElement("div");R.classList.add(Ji("b")),f.appendChild(R);const j=a.createElement("div");j.classList.add(Ji("t")),R.appendChild(j),G(A.props,"title",Y=>{j.textContent=Y})}}class mo{constructor(a,A){this.props=A.props,this.viewProps=A.viewProps,this.view=new is(a,{name:A.name,props:this.props,viewProps:this.viewProps})}}class Si{constructor(a,A){this.cellCs_=[],this.cellValues_=[],this.onCellInputChange_=this.onCellInputChange_.bind(this),this.size=A.size;const[f,I]=this.size;for(let R=0;R<I;R++)for(let j=0;j<f;j++){const Y=new mo(a,{name:A.groupName,props:K.fromObject(Object.assign({},A.cellConfig(j,R))),viewProps:ze.create()});this.cellCs_.push(Y),this.cellValues_.push(A.cellConfig(j,R).value)}this.value=A.value,D(this.value,R=>{const j=this.findCellByValue(R);j&&(j.view.inputElement.checked=!0)}),this.viewProps=ze.create(),this.view=new Vt(a,{viewProps:this.viewProps,viewName:"radgrid"}),this.view.element.style.gridTemplateColumns=`repeat(${f}, 1fr)`,this.cellCs_.forEach(R=>{R.view.inputElement.addEventListener("change",this.onCellInputChange_),this.view.element.appendChild(R.view.element)})}get cellControllers(){return this.cellCs_}findCellByValue(a){const A=this.cellValues_.findIndex(f=>f===a);return A<0?null:this.cellCs_[A]}onCellInputChange_(a){const A=a.currentTarget,f=this.cellCs_.findIndex(I=>I.view.inputElement===A);f<0||(this.value.rawValue=this.cellValues_[f])}}const $i=function(){return{id:"radiogrid",type:"blade",accept(u){const a=ue,A=ae(u,{cells:a.required.function,groupName:a.required.string,size:a.required.array(a.required.number),value:a.required.raw,view:a.required.constant("radiogrid"),label:a.optional.string});return A?{params:A}:null},controller(u){return new $t(u.document,{blade:u.blade,props:K.fromObject({label:u.params.label}),valueController:new Si(u.document,{groupName:u.params.groupName,cellConfig:u.params.cells,size:u.params.size,value:ee(u.params.value)})})},api(u){return!(u.controller instanceof $t)||!(u.controller.valueController instanceof Si)?null:new oi(u.controller)}}}();function bi(u){return{id:"input-radiogrid",type:"input",accept(a,A){if(!u.isType(a))return null;const f=ue,I=ae(A,{cells:f.required.function,groupName:f.required.string,size:f.required.array(f.required.number),view:f.required.constant("radiogrid")});return I?{initialValue:a,params:I}:null},binding:u.binding,controller:a=>new Si(a.document,{cellConfig:a.params.cells,groupName:a.params.groupName,size:a.params.size,value:a.value})}}const ns=bi({isType:u=>typeof u=="number",binding:{reader:u=>Qs,writer:u=>En}}),Fo=bi({isType:u=>typeof u=="string",binding:{reader:u=>Xt,writer:u=>En}}),zo=bi({isType:u=>typeof u=="boolean",binding:{reader:u=>An,writer:u=>En}}),No=[d,Qn,ye,Dn,$i,zo,ns,Fo];t.ButtonCellApi=ni,t.ButtonGridApi=gi,t.ButtonGridController=w,t.CubicBezier=$,t.CubicBezierApi=b,t.CubicBezierAssembly=X,t.CubicBezierController=Zn,t.CubicBezierGraphController=po,t.CubicBezierGraphView=co,t.CubicBezierPickerController=yn,t.CubicBezierPickerView=fe,t.CubicBezierPreviewView=Fs,t.CubicBezierView=$e,t.FpsGraphBladeApi=ot,t.FpsGraphController=Pn,t.FpsView=Vs,t.Fpswatch=jt,t.Interval=ht,t.IntervalAssembly=Te,t.IntervalConstraint=es,t.RadioCellApi=Sn,t.RadioController=mo,t.RadioGridApi=oi,t.RadioGridController=Si,t.RadioView=is,t.RangeSliderController=go,t.RangeSliderTextController=bo,t.RangeSliderTextView=uo,t.RangeSliderView=ts,t.TpRadioGridChangeEvent=Us,t.plugins=No,Object.defineProperty(t,"__esModule",{value:!0})})})(Na,Na.exports);var Ec=Na.exports;const Wu=Ro(Ec),Ic=So({__proto__:null,default:Wu},[Ec]);var Va={exports:{}};(function(p,o){(function(t,n){n(o)})(lo,function(t){const n="tp";function r(O){return(S,U)=>[n,"-",O,"v",S?`_${S}`:"",U?`-${U}`:""].join("")}function c(O,S){return Object.keys(S).reduce((ee,K)=>{if(ee===void 0)return;const oe=S[K],re=oe(O[K]);return re.succeeded?Object.assign(Object.assign({},ee),{[K]:re.value}):void 0},{})}function h(O,S){return O.reduce((U,ee)=>{if(U===void 0)return;const K=S(ee);if(!(!K.succeeded||K.value===void 0))return[...U,K.value]},[])}function g(O){return O===null?!1:typeof O=="object"}function m(O){return S=>U=>{if(!S&&U===void 0)return{succeeded:!1,value:void 0};if(S&&U===void 0)return{succeeded:!0,value:void 0};const ee=O(U);return ee!==void 0?{succeeded:!0,value:ee}:{succeeded:!1,value:void 0}}}function v(O){return{custom:S=>m(S)(O),boolean:m(S=>typeof S=="boolean"?S:void 0)(O),number:m(S=>typeof S=="number"?S:void 0)(O),string:m(S=>typeof S=="string"?S:void 0)(O),function:m(S=>typeof S=="function"?S:void 0)(O),constant:S=>m(U=>U===S?S:void 0)(O),raw:m(S=>S)(O),object:S=>m(U=>{if(g(U))return c(U,S)})(O),array:S=>m(U=>{if(Array.isArray(U))return h(U,S)})(O)}}const C={optional:v(!0),required:v(!1)};function x(O,S){const U=C.required.object(S)(O);return U.succeeded?U.value:void 0}function Q(O,S,U,ee){function K(oe){return oe instanceof U?oe:new U(function(re){re(oe)})}return new(U||(U=Promise))(function(oe,re){function _e(ue){try{ve(ee.next(ue))}catch(ae){re(ae)}}function pe(ue){try{ve(ee.throw(ue))}catch(ae){re(ae)}}function ve(ue){ue.done?oe(ue.value):K(ue.value).then(_e,pe)}ve((ee=ee.apply(O,S||[])).next())})}function P(){const O=document.createElement("canvas");O.width=128,O.height=64;const S=O.getContext("2d");return S.fillStyle="#222",S.fillRect(0,0,O.width,O.height),S.fillStyle="#ddd",S.font="monospaced",S.textAlign="center",S.textBaseline="middle",S.fillText("No image",O.width*.5,O.height*.5),new Promise(U=>{O.toBlob(ee=>{const K=new Image;K.src=URL.createObjectURL(ee),K.onload=()=>{U(K)}})})}function D(O){return Q(this,void 0,void 0,function*(){const S=new Image;return S.crossOrigin="anonymous",new Promise(U=>{S.src=O,S.onload=()=>{U(S)}})})}function G(O){const S=document.createElement("canvas");S.width=O.width,S.height=O.height,S.getContext("2d").drawImage(O,0,0);const U=new Image;return new Promise(ee=>{S.toBlob(K=>{U.src=URL.createObjectURL(K),U.onload=()=>{ee(U)}})})}const F=r("img");class k{constructor(S,U){this.element=S.createElement("div"),this.element.classList.add(F()),U.viewProps.bindClassModifiers(this.element),this.input=S.createElement("input"),this.input.classList.add(F("input")),this.input.setAttribute("type","file"),this.input.setAttribute("accept",U.extensions.join(",")),this.element.appendChild(this.input),this.image_=S.createElement("img"),this.image_.classList.add(F("image")),this.image_.classList.add(F(`image_${U.imageFit}`)),this.element.classList.add(F("area_root")),this.element.appendChild(this.image_)}changeImage(S){this.image_.src=S}changeDraggingState(S){const U=this.element;S?U==null||U.classList.add(F("area_dragging")):U==null||U.classList.remove(F("area_dragging"))}}class T{constructor(S,U){this.placeholderImage=null,this.value=U.value,this.viewProps=U.viewProps,this.view=new k(S,{viewProps:this.viewProps,extensions:U.extensions,imageFit:U.imageFit}),this.onFile=this.onFile.bind(this),this.onDrop=this.onDrop.bind(this),this.onDragOver=this.onDragOver.bind(this),this.onDragLeave=this.onDragLeave.bind(this),this.view.input.addEventListener("change",this.onFile),this.view.element.addEventListener("drop",this.onDrop),this.view.element.addEventListener("dragover",this.onDragOver),this.view.element.addEventListener("dragleave",this.onDragLeave),this.viewProps.handleDispose(()=>{this.view.input.removeEventListener("change",this.onFile),this.view.input.removeEventListener("drop",this.onDrop),this.view.input.removeEventListener("dragover",this.onDragOver),this.view.input.removeEventListener("dragleave",this.onDragLeave)}),this.value.emitter.on("change",this.handleValueChange.bind(this)),this.handleValueChange()}onFile(S){const U=(S==null?void 0:S.target).files;if(!U||!U.length)return;const ee=U[0],K=URL.createObjectURL(ee);this.setValue(K),this.updateImage(K)}onDrop(S){return Q(this,void 0,void 0,function*(){S.preventDefault();try{const{dataTransfer:U}=S,ee=U==null?void 0:U.files[0];if(ee){const K=URL.createObjectURL(ee);this.updateImage(K),this.setValue(K)}else{const K=U==null?void 0:U.getData("url");if(!K)throw new Error("No url");D(K).then(oe=>Q(this,void 0,void 0,function*(){const re=yield G(oe);this.updateImage(re.src),this.setValue(re)}))}}catch(U){console.error("Could not parse the dropped image",U)}finally{this.view.changeDraggingState(!1)}})}onDragOver(S){S.preventDefault(),this.view.changeDraggingState(!0)}onDragLeave(){this.view.changeDraggingState(!1)}handleImage(S){return Q(this,void 0,void 0,function*(){if(S instanceof HTMLImageElement)G(S).then(U=>{this.updateImage(U.src)});else if(typeof S=="string"){let U="";try{if(S==="placeholder")throw new Error("placeholder");new URL(S),U=(yield D(S)).src}catch{U=(yield this.handlePlaceholderImage()).src}finally{this.updateImage(U),this.setValue(U)}}})}updateImage(S){this.view.changeImage(S)}setValue(S){return Q(this,void 0,void 0,function*(){S instanceof HTMLImageElement?this.value.setRawValue(S):S?this.value.setRawValue(yield D(S)):this.value.setRawValue(yield this.handlePlaceholderImage())})}handleValueChange(){this.handleImage(this.value.rawValue)}handlePlaceholderImage(){return Q(this,void 0,void 0,function*(){return this.placeholderImage||(this.placeholderImage=yield P()),this.placeholderImage})}}const z=[".jpg",".png",".gif"],J={id:"input-image",type:"input",css:".tp-imgv{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-imgv{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-imgv:hover{background-color:var(--in-bg-h)}.tp-imgv:focus{background-color:var(--in-bg-f)}.tp-imgv:active{background-color:var(--in-bg-a)}.tp-imgv:disabled{opacity:0.5}:root{--tp-plugin-image-dragging-color: hsla(230, 100%, 66%, 1.00)}.tp-imgv{cursor:pointer;display:grid;height:calc(var(--bld-us) * 3);overflow:hidden;position:relative}.tp-imgv.tp-v-disabled{opacity:0.5}.tp-imgv_input{width:100%;height:100%;opacity:0}.tp-imgv_image{width:100%;height:100%;position:absolute;pointer-events:none;border:0}.tp-imgv_image_contain{-o-object-fit:contain;object-fit:contain}.tp-imgv_image_cover{-o-object-fit:cover;object-fit:cover}.tp-imgv_area_root{transition:opacity 0.16s ease-in-out}.tp-imgv_area_dragging{border:2px dashed var(--tp-plugin-image-dragging-color);border-radius:6px;opacity:0.6}",accept(O,S){if(!(O instanceof HTMLImageElement||typeof O=="string"))return null;const U=C,ee=x(S,{view:U.required.constant("input-image"),acceptUrl:U.optional.boolean,imageFit:U.optional.custom(K=>K==="contain"||K==="cover"?K:void 0),extensions:U.optional.array(U.required.string)});return ee?{initialValue:O,params:ee}:null},binding:{reader(O){return S=>S instanceof HTMLImageElement?S.src===""?"placeholder":S.src:typeof S=="string"?S:"placeholder"},writer(O){return(S,U)=>{S.write(U)}}},controller(O){var S,U;return new T(O.document,{value:O.value,imageFit:(S=O.params.imageFit)!==null&&S!==void 0?S:"cover",viewProps:O.viewProps,extensions:(U=O.params.extensions)!==null&&U!==void 0?U:z})}};t.plugin=J,Object.defineProperty(t,"__esModule",{value:!0})})})(Va,Va.exports);var xc=Va.exports;const Xu=Ro(xc),Zu=So({__proto__:null,default:Xu},[xc]);var Ga={exports:{}};(function(p,o){(function(t,n){n(o)})(lo,function(t){function n(w){return w==null}const r={alreadydisposed:()=>"View has been already disposed",invalidparams:w=>`Invalid parameters for '${w.name}'`,nomatchingcontroller:w=>`No matching controller for '${w.key}'`,nomatchingview:w=>`No matching view for '${JSON.stringify(w.params)}'`,notbindable:()=>"Value is not bindable",propertynotfound:w=>`Property '${w.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class c{constructor(d){var b;this.message=(b=r[d.type](d.context))!==null&&b!==void 0?b:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=d.type}static alreadyDisposed(){return new c({type:"alreadydisposed"})}static notBindable(){return new c({type:"notbindable"})}static propertyNotFound(d){return new c({type:"propertynotfound",context:{name:d}})}static shouldNeverHappen(){return new c({type:"shouldneverhappen"})}}class h{constructor(){this.observers_={}}on(d,b){let E=this.observers_[d];return E||(E=this.observers_[d]=[]),E.push({handler:b}),this}off(d,b){const E=this.observers_[d];return E&&(this.observers_[d]=E.filter(y=>y.handler!==b)),this}emit(d,b){const E=this.observers_[d];E&&E.forEach(y=>{y.handler(b)})}}const g="tp";function m(w){return(d,b)=>[g,"-",w,"v",d?`_${d}`:"",b?`-${b}`:""].join("")}function v(w,d){return b=>d(w(b))}function C(w){return w.rawValue}function x(w,d){w.emitter.on("change",v(C,d)),d(w.rawValue)}function Q(w,d,b){x(w.value(d),b)}function P(w,d,b){b?w.classList.add(d):w.classList.remove(d)}function D(w,d){return b=>{P(w,d,b)}}class G{constructor(d,b){var E;this.constraint_=b==null?void 0:b.constraint,this.equals_=(E=b==null?void 0:b.equals)!==null&&E!==void 0?E:(y,V)=>y===V,this.emitter=new h,this.rawValue_=d}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(d){this.setRawValue(d,{forceEmit:!1,last:!0})}setRawValue(d,b){const E=b??{forceEmit:!1,last:!0},y=this.constraint_?this.constraint_.constrain(d):d;this.equals_(this.rawValue_,y)&&!E.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=y,this.emitter.emit("change",{options:E,rawValue:y,sender:this}))}}class F{constructor(d){this.emitter=new h,this.value_=d}get rawValue(){return this.value_}set rawValue(d){this.setRawValue(d,{forceEmit:!1,last:!0})}setRawValue(d,b){const E=b??{forceEmit:!1,last:!0};this.value_===d&&!E.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=d,this.emitter.emit("change",{options:E,rawValue:this.value_,sender:this}))}}function k(w,d){const b=d==null?void 0:d.constraint,E=d==null?void 0:d.equals;return!b&&!E?new F(w):new G(w,d)}class T{constructor(d){this.emitter=new h,this.valMap_=d;for(const b in this.valMap_)this.valMap_[b].emitter.on("change",()=>{this.emitter.emit("change",{key:b,sender:this})})}static createCore(d){return Object.keys(d).reduce((b,E)=>Object.assign(b,{[E]:k(d[E])}),{})}static fromObject(d){const b=this.createCore(d);return new T(b)}get(d){return this.valMap_[d].rawValue}set(d,b){this.valMap_[d].rawValue=b}value(d){return this.valMap_[d]}}function z(w,d){return Object.keys(d).reduce((E,y)=>{if(E===void 0)return;const V=d[y],H=V(w[y]);return H.succeeded?Object.assign(Object.assign({},E),{[y]:H.value}):void 0},{})}function J(w,d){return w.reduce((b,E)=>{if(b===void 0)return;const y=d(E);if(!(!y.succeeded||y.value===void 0))return[...b,y.value]},[])}function O(w){return w===null?!1:typeof w=="object"}function S(w){return d=>b=>{if(!d&&b===void 0)return{succeeded:!1,value:void 0};if(d&&b===void 0)return{succeeded:!0,value:void 0};const E=w(b);return E!==void 0?{succeeded:!0,value:E}:{succeeded:!1,value:void 0}}}function U(w){return{custom:d=>S(d)(w),boolean:S(d=>typeof d=="boolean"?d:void 0)(w),number:S(d=>typeof d=="number"?d:void 0)(w),string:S(d=>typeof d=="string"?d:void 0)(w),function:S(d=>typeof d=="function"?d:void 0)(w),constant:d=>S(b=>b===d?d:void 0)(w),raw:S(d=>d)(w),object:d=>S(b=>{if(O(b))return z(b,d)})(w),array:d=>S(b=>{if(Array.isArray(b))return J(b,d)})(w)}}const ee={optional:U(!0),required:U(!1)};function K(w,d){const b=ee.required.object(d)(w);return b.succeeded?b.value:void 0}const oe="http://www.w3.org/2000/svg";function re(w){w.offsetHeight}function _e(w,d){const b=w.style.transition;w.style.transition="none",d(),w.style.transition=b}function pe(w){return w.ontouchstart!==void 0}function ve(w){return w.relatedTarget?w.relatedTarget:"explicitOriginalTarget"in w?w.explicitOriginalTarget:null}class ue extends T{constructor(d){super(d)}static create(d){const b={completed:!0,expanded:d,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},E=T.createCore(b);return new ue(E)}get styleExpanded(){var d;return(d=this.get("temporaryExpanded"))!==null&&d!==void 0?d:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const d=this.get("expandedHeight");return this.get("shouldFixHeight")&&!n(d)?`${d}px`:"auto"}bindExpandedClass(d,b){Q(this,"expanded",()=>{this.styleExpanded?d.classList.add(b):d.classList.remove(b)})}}function ae(w,d){let b=0;return _e(d,()=>{w.set("expandedHeight",null),w.set("temporaryExpanded",!0),re(d),b=d.clientHeight,w.set("temporaryExpanded",null),re(d)}),b}function Z(w,d){d.style.height=w.styleHeight}function Fe(w,d){w.value("expanded").emitter.on("beforechange",()=>{w.set("completed",!1),n(w.get("expandedHeight"))&&w.set("expandedHeight",ae(w,d)),w.set("shouldFixHeight",!0),re(d)}),w.emitter.on("change",()=>{Z(w,d)}),Z(w,d),d.addEventListener("transitionend",b=>{b.propertyName==="height"&&(w.set("shouldFixHeight",!1),w.set("expandedHeight",null),w.set("completed",!0))})}class rt{constructor(d){this.constraints=d}constrain(d){return this.constraints.reduce((b,E)=>E.constrain(b),d)}}class Bt{constructor(d){this.maxValue=d.max,this.minValue=d.min}constrain(d){let b=d;return n(this.minValue)||(b=Math.max(b,this.minValue)),n(this.maxValue)||(b=Math.min(b,this.maxValue)),b}}class Re{constructor(d){this.step=d}constrain(d){return(d<0?-Math.round(-d/this.step):Math.round(d/this.step))*this.step}}const ze=m("pop");class ge{constructor(d,b){this.element=d.createElement("div"),this.element.classList.add(ze()),b.viewProps.bindClassModifiers(this.element),x(b.shows,D(this.element,ze(void 0,"v")))}}class Be{constructor(d,b){this.shows=k(!1),this.viewProps=b.viewProps,this.view=new ge(d,{shows:this.shows,viewProps:this.viewProps})}}class Yt{constructor(d){this.text=d}evaluate(){return Number(this.text)}toString(){return this.text}}const _i={"**":(w,d)=>Math.pow(w,d),"*":(w,d)=>w*d,"/":(w,d)=>w/d,"%":(w,d)=>w%d,"+":(w,d)=>w+d,"-":(w,d)=>w-d,"<<":(w,d)=>w<<d,">>":(w,d)=>w>>d,">>>":(w,d)=>w>>>d,"&":(w,d)=>w&d,"^":(w,d)=>w^d,"|":(w,d)=>w|d};class Ge{constructor(d,b,E){this.left=b,this.operator=d,this.right=E}evaluate(){const d=_i[this.operator];if(!d)throw new Error(`unexpected binary operator: '${this.operator}`);return d(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const li={"+":w=>w,"-":w=>-w,"~":w=>~w};class wi{constructor(d,b){this.operator=d,this.expression=b}evaluate(){const d=li[this.operator];if(!d)throw new Error(`unexpected unary operator: '${this.operator}`);return d(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function Ye(w){return(d,b)=>{for(let E=0;E<w.length;E++){const y=w[E](d,b);if(y!=="")return y}return""}}function zt(w,d){var b;const E=w.substr(d).match(/^\s+/);return(b=E&&E[0])!==null&&b!==void 0?b:""}function Fi(w,d){const b=w.substr(d,1);return b.match(/^[1-9]$/)?b:""}function lt(w,d){var b;const E=w.substr(d).match(/^[0-9]+/);return(b=E&&E[0])!==null&&b!==void 0?b:""}function Nt(w,d){const b=lt(w,d);if(b!=="")return b;const E=w.substr(d,1);if(d+=1,E!=="-"&&E!=="+")return"";const y=lt(w,d);return y===""?"":E+y}function Oe(w,d){const b=w.substr(d,1);if(d+=1,b.toLowerCase()!=="e")return"";const E=Nt(w,d);return E===""?"":b+E}function Xe(w,d){const b=w.substr(d,1);if(b==="0")return b;const E=Fi(w,d);return d+=E.length,E===""?"":E+lt(w,d)}function dn(w,d){const b=Xe(w,d);if(d+=b.length,b==="")return"";const E=w.substr(d,1);if(d+=E.length,E!==".")return"";const y=lt(w,d);return d+=y.length,b+E+y+Oe(w,d)}function Jt(w,d){const b=w.substr(d,1);if(d+=b.length,b!==".")return"";const E=lt(w,d);return d+=E.length,E===""?"":b+E+Oe(w,d)}function zi(w,d){const b=Xe(w,d);return d+=b.length,b===""?"":b+Oe(w,d)}const Ci=Ye([dn,Jt,zi]);function Ni(w,d){var b;const E=w.substr(d).match(/^[01]+/);return(b=E&&E[0])!==null&&b!==void 0?b:""}function hn(w,d){const b=w.substr(d,2);if(d+=b.length,b.toLowerCase()!=="0b")return"";const E=Ni(w,d);return E===""?"":b+E}function Vt(w,d){var b;const E=w.substr(d).match(/^[0-7]+/);return(b=E&&E[0])!==null&&b!==void 0?b:""}function $t(w,d){const b=w.substr(d,2);if(d+=b.length,b.toLowerCase()!=="0o")return"";const E=Vt(w,d);return E===""?"":b+E}function Vi(w,d){var b;const E=w.substr(d).match(/^[0-9a-f]+/i);return(b=E&&E[0])!==null&&b!==void 0?b:""}function Ei(w,d){const b=w.substr(d,2);if(d+=b.length,b.toLowerCase()!=="0x")return"";const E=Vi(w,d);return E===""?"":b+E}const ci=Ye([hn,$t,Ei]),M=Ye([ci,Ci]);function te(w,d){const b=M(w,d);return d+=b.length,b===""?null:{evaluable:new Yt(b),cursor:d}}function Ie(w,d){const b=w.substr(d,1);if(d+=b.length,b!=="(")return null;const E=je(w,d);if(!E)return null;d=E.cursor,d+=zt(w,d).length;const y=w.substr(d,1);return d+=y.length,y!==")"?null:{evaluable:E.evaluable,cursor:d}}function ke(w,d){return te(w,d)||Ie(w,d)}function Je(w,d){const b=ke(w,d);if(b)return b;const E=w.substr(d,1);if(d+=E.length,E!=="+"&&E!=="-"&&E!=="~")return null;const y=Je(w,d);return y?(d=y.cursor,{cursor:d,evaluable:new wi(E,y.evaluable)}):null}function Gt(w,d,b){b+=zt(d,b).length;const E=w.filter(y=>d.startsWith(y,b))[0];return E?(b+=E.length,b+=zt(d,b).length,{cursor:b,operator:E}):null}function ut(w,d){return(b,E)=>{const y=w(b,E);if(!y)return null;E=y.cursor;let V=y.evaluable;for(;;){const H=Gt(d,b,E);if(!H)break;E=H.cursor;const W=w(b,E);if(!W)return null;E=W.cursor,V=new Ge(H.operator,V,W.evaluable)}return V?{cursor:E,evaluable:V}:null}}const yt=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((w,d)=>ut(w,d),Je);function je(w,d){return d+=zt(w,d).length,yt(w,d)}function gt(w){const d=je(w,0);return!d||d.cursor+zt(w,d.cursor).length!==w.length?null:d.evaluable}function An(w){var d;const b=gt(w);return(d=b==null?void 0:b.evaluate())!==null&&d!==void 0?d:null}function pn(w){return d=>d.toFixed(Math.max(Math.min(w,20),0))}function Gi({primary:w,secondary:d,forward:b,backward:E}){let y=!1;function V(H){y||(y=!0,H(),y=!1)}w.emitter.on("change",H=>{V(()=>{d.setRawValue(b(w,d),H.options)})}),d.emitter.on("change",H=>{V(()=>{w.setRawValue(E(w,d),H.options)}),V(()=>{d.setRawValue(b(w,d),H.options)})}),V(()=>{d.setRawValue(b(w,d),{forceEmit:!1,last:!0})})}function Oi(w,d){const b=w*(d.altKey?.1:1)*(d.shiftKey?10:1);return d.upKey?+b:d.downKey?-b:0}function un(w){return{altKey:w.altKey,downKey:w.key==="ArrowDown",shiftKey:w.shiftKey,upKey:w.key==="ArrowUp"}}function Cs(w){return{altKey:w.altKey,downKey:w.key==="ArrowLeft",shiftKey:w.shiftKey,upKey:w.key==="ArrowRight"}}function gn(w){return w==="ArrowUp"||w==="ArrowDown"}function Wt(w){return gn(w)||w==="ArrowLeft"||w==="ArrowRight"}function Ii(w,d){const b=d.ownerDocument.defaultView,E=d.getBoundingClientRect();return{x:w.pageX-((b&&b.scrollX||0)+E.left),y:w.pageY-((b&&b.scrollY||0)+E.top)}}class xe{constructor(d){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=d,this.emitter=new h,d.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),d.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),d.addEventListener("touchend",this.onTouchEnd_),d.addEventListener("mousedown",this.onMouseDown_)}computePosition_(d){const b=this.elem_.getBoundingClientRect();return{bounds:{width:b.width,height:b.height},point:d?{x:d.x,y:d.y}:null}}onMouseDown_(d){var b;d.preventDefault(),(b=d.currentTarget)===null||b===void 0||b.focus();const E=this.elem_.ownerDocument;E.addEventListener("mousemove",this.onDocumentMouseMove_),E.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:d.altKey,data:this.computePosition_(Ii(d,this.elem_)),sender:this,shiftKey:d.shiftKey})}onDocumentMouseMove_(d){this.emitter.emit("move",{altKey:d.altKey,data:this.computePosition_(Ii(d,this.elem_)),sender:this,shiftKey:d.shiftKey})}onDocumentMouseUp_(d){const b=this.elem_.ownerDocument;b.removeEventListener("mousemove",this.onDocumentMouseMove_),b.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:d.altKey,data:this.computePosition_(Ii(d,this.elem_)),sender:this,shiftKey:d.shiftKey})}onTouchStart_(d){d.preventDefault();const b=d.targetTouches.item(0),E=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:d.altKey,data:this.computePosition_(b?{x:b.clientX-E.left,y:b.clientY-E.top}:void 0),sender:this,shiftKey:d.shiftKey}),this.lastTouch_=b}onTouchMove_(d){const b=d.targetTouches.item(0),E=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:d.altKey,data:this.computePosition_(b?{x:b.clientX-E.left,y:b.clientY-E.top}:void 0),sender:this,shiftKey:d.shiftKey}),this.lastTouch_=b}onTouchEnd_(d){var b;const E=(b=d.targetTouches.item(0))!==null&&b!==void 0?b:this.lastTouch_,y=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:d.altKey,data:this.computePosition_(E?{x:E.clientX-y.left,y:E.clientY-y.top}:void 0),sender:this,shiftKey:d.shiftKey})}}function bn(w,d,b){return Math.min(Math.max(w,d),b)}const Qe=m("txt");class Kn{constructor(d,b){this.onChange_=this.onChange_.bind(this),this.props_=b.props,this.props_.emitter.on("change",this.onChange_),this.element=d.createElement("div"),this.element.classList.add(Qe(),Qe(void 0,"num")),b.arrayPosition&&this.element.classList.add(Qe(void 0,b.arrayPosition)),b.viewProps.bindClassModifiers(this.element);const E=d.createElement("input");E.classList.add(Qe("i")),E.type="text",b.viewProps.bindDisabled(E),this.element.appendChild(E),this.inputElement=E,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=b.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(Qe()),this.inputElement.classList.add(Qe("i"));const y=d.createElement("div");y.classList.add(Qe("k")),this.element.appendChild(y),this.knobElement=y;const V=d.createElementNS(oe,"svg");V.classList.add(Qe("g")),this.knobElement.appendChild(V);const H=d.createElementNS(oe,"path");H.classList.add(Qe("gb")),V.appendChild(H),this.guideBodyElem_=H;const W=d.createElementNS(oe,"path");W.classList.add(Qe("gh")),V.appendChild(W),this.guideHeadElem_=W;const $=d.createElement("div");$.classList.add(m("tt")()),this.knobElement.appendChild($),this.tooltipElem_=$,b.value.emitter.on("change",this.onChange_),this.value=b.value,this.refresh()}onDraggingChange_(d){if(d.rawValue===null){this.element.classList.remove(Qe(void 0,"drg"));return}this.element.classList.add(Qe(void 0,"drg"));const b=d.rawValue/this.props_.get("draggingScale"),E=b+(b>0?-1:b<0?1:0),y=bn(-E,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${E+y},0 L${E},4 L${E+y},8`,`M ${b},-1 L${b},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${b},4`);const V=this.props_.get("formatter");this.tooltipElem_.textContent=V(this.value.rawValue),this.tooltipElem_.style.left=`${b}px`}refresh(){const d=this.props_.get("formatter");this.inputElement.value=d(this.value.rawValue)}onChange_(){this.refresh()}}class xi{constructor(d,b){this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=b.baseStep,this.parser_=b.parser,this.props=b.props,this.value=b.value,this.viewProps=b.viewProps,this.dragging_=k(null),this.view=new Kn(d,{arrayPosition:b.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const E=new xe(this.view.knobElement);E.emitter.on("down",this.onPointerDown_),E.emitter.on("move",this.onPointerMove_),E.emitter.on("up",this.onPointerUp_)}onInputChange_(d){const b=d.currentTarget.value,E=this.parser_(b);n(E)||(this.value.rawValue=E),this.view.refresh()}onInputKeyDown_(d){const b=Oi(this.baseStep_,un(d));b!==0&&this.value.setRawValue(this.value.rawValue+b,{forceEmit:!1,last:!1})}onInputKeyUp_(d){Oi(this.baseStep_,un(d))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(d){if(!d.point)return null;const b=d.point.x-d.bounds.width/2;return this.originRawValue_+b*this.props.get("draggingScale")}onPointerMove_(d){const b=this.computeDraggingValue_(d.data);b!==null&&(this.value.setRawValue(b,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(d){const b=this.computeDraggingValue_(d.data);b!==null&&(this.value.setRawValue(b,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}function mn(w){if(w==="inline"||w==="popup")return w}function ft(w){const d=ee;return d.required.object({max:d.optional.number,min:d.optional.number,step:d.optional.number})(w).value}class di{constructor(d){this.components=d.components,this.asm_=d.assembly}constrain(d){const b=this.asm_.toComponents(d).map((E,y)=>{var V,H;return(H=(V=this.components[y])===null||V===void 0?void 0:V.constrain(E))!==null&&H!==void 0?H:E});return this.asm_.fromComponents(b)}}const Ui=m("pndtxt");class Es{constructor(d,b){this.textViews=b.textViews,this.element=d.createElement("div"),this.element.classList.add(Ui()),this.textViews.forEach(E=>{const y=d.createElement("div");y.classList.add(Ui("a")),y.appendChild(E.element),this.element.appendChild(y)})}}function Is(w,d,b){return new xi(w,{arrayPosition:b===0?"fst":b===d.axes.length-1?"lst":"mid",baseStep:d.axes[b].baseStep,parser:d.parser,props:d.axes[b].textProps,value:k(0,{constraint:d.axes[b].constraint}),viewProps:d.viewProps})}class xs{constructor(d,b){this.value=b.value,this.viewProps=b.viewProps,this.acs_=b.axes.map((E,y)=>Is(d,b,y)),this.acs_.forEach((E,y)=>{Gi({primary:this.value,secondary:E.value,forward:V=>b.assembly.toComponents(V.rawValue)[y],backward:(V,H)=>{const W=b.assembly.toComponents(V.rawValue);return W[y]=H.rawValue,b.assembly.fromComponents(W)}})}),this.view=new Es(d,{textViews:this.acs_.map(E=>E.view)})}}class qn{multiply(d){return this.format(this.quat.multiply(d.quat))}premultiply(d){return this.format(d.multiply(this))}slerp(d,b){return this.format(this.quat.slerp(d.quat,b))}}function ji(w,d,b){return Math.min(Math.max(w,d),b)}function Bs(w,d){return Math.floor(w/d)*d}function ys(w,d){return w-Bs(w,d)}function Qt(w){return ys(w+Math.PI,Math.PI*2)-Math.PI}class kt extends qn{constructor(d,b,E,y,V){super(),this.x=d??0,this.y=b??0,this.z=E??0,this.order=y??"XYZ",this.unit=V??"rad"}static fromQuaternion(d,b,E){const y=d.toMat3(),[V,H,W,$]=b==="XYZ"?[0,1,2,1]:b==="XZY"?[0,2,1,-1]:b==="YXZ"?[1,0,2,-1]:b==="YZX"?[1,2,0,1]:b==="ZXY"?[2,0,1,1]:[2,1,0,-1],X=[0,0,0],he=y[W+V*3];return X[H]=-$*Math.asin(ji(he,-1,1)),Math.abs(he)<.999999?(X[V]=$*Math.atan2(y[W+H*3],y[W*4]),X[W]=$*Math.atan2(y[H+V*3],y[V*4])):X[V]=$*Math.atan2(-y[H+W*3],y[H*4]),Math.abs(X[V])+Math.abs(X[W])>Math.PI&&(X[V]=Qt(X[V]+Math.PI),X[H]=Qt(Math.PI-X[H]),X[W]=Qt(X[W]+Math.PI)),new kt(...X,b).reunit(E)}get quat(){return de.fromEuler(this)}getComponents(){return[this.x,this.y,this.z]}toEuler(d,b){return this.reorder(d).reunit(b)}format(d){return d instanceof kt?d.reorder(this.order):d.toEuler(this.order,this.unit)}reorder(d){return d===this.order?this:this.quat.toEuler(d,this.unit)}reunit(d){const b={deg:Math.PI/180,rad:1,turn:2*Math.PI}[this.unit],E={deg:180/Math.PI,rad:1,turn:.5/Math.PI}[d],y=b*E;return new kt(y*this.x,y*this.y,y*this.z,this.order,d)}}class de extends qn{constructor(d,b,E,y){super(),this.x=d??0,this.y=b??0,this.z=E??0,this.w=y??1}static fromAxisAngle(d,b){const E=b/2,y=Math.sin(E);return new de(d.x*y,d.y*y,d.z*y,Math.cos(E))}static fromEuler(d){const b=d.reunit("rad"),[E,y,V,H]=b.order==="XYZ"?[0,1,2,1]:b.order==="XZY"?[0,2,1,-1]:b.order==="YXZ"?[1,0,2,-1]:b.order==="YZX"?[1,2,0,1]:b.order==="ZXY"?[2,0,1,1]:[2,1,0,-1],W=b.getComponents(),$=.5*W[E],X=.5*H*W[y],he=.5*W[V],we=Math.cos($),Me=Math.cos(X),Pe=Math.cos(he),$e=Math.sin($),bt=Math.sin(X),fe=Math.sin(he),Pi=[0,0,0,Pe*Me*we+fe*bt*$e];return Pi[E]=Pe*Me*$e-fe*bt*we,Pi[y]=H*(Pe*bt*we+fe*Me*$e),Pi[V]=fe*Me*we-Pe*bt*$e,new de(...Pi)}static lookRotation(d,b){const{normal:E,tangent:y,binormal:V}=d.orthoNormalize(b),H=V.x,W=y.x,$=E.x,X=V.y,he=y.y,we=E.y,Me=V.z,Pe=y.z,$e=E.z,bt=H+he+$e;if(bt>0){const fe=.5/Math.sqrt(bt+1);return new de((Pe-we)*fe,($-Me)*fe,(X-W)*fe,.25/fe)}else if(H>he&&H>$e){const fe=2*Math.sqrt(1+H-he-$e);return new de(.25*fe,(W+X)/fe,($+Me)/fe,(Pe-we)/fe)}else if(he>$e){const fe=2*Math.sqrt(1+he-H-$e);return new de((W+X)/fe,.25*fe,(we+Pe)/fe,($-Me)/fe)}else{const fe=2*Math.sqrt(1+$e-H-he);return new de(($+Me)/fe,(we+Pe)/fe,.25*fe,(X-W)/fe)}}get quat(){return this}getComponents(){return[this.x,this.y,this.z,this.w]}toEuler(d,b){return kt.fromQuaternion(this,d,b)}get lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}get length(){return Math.sqrt(this.lengthSq)}get normalized(){const d=this.length;return d===0?new de:new de(this.x/d,this.y/d,this.z/d,this.w/d)}get negated(){return new de(-this.x,-this.y,-this.z,-this.w)}get ban360s(){return this.w<0?this.negated:this}multiply(d){const b=d.quat;return new de(this.w*b.x+this.x*b.w+this.y*b.z-this.z*b.y,this.w*b.y-this.x*b.z+this.y*b.w+this.z*b.x,this.w*b.z+this.x*b.y-this.y*b.x+this.z*b.w,this.w*b.w-this.x*b.x-this.y*b.y-this.z*b.z)}format(d){return d.quat}slerp(d,b){let E=d.quat;if(b===0)return this;if(b===1)return E;const y=this.ban360s;E=E.ban360s;let V=y.w*E.w+y.x*E.x+y.y*E.y+y.z*E.z;if(V<0&&(E=E.negated,V=-V),V>=1)return y;const H=1-V*V;if(H<=Number.EPSILON){const we=1-b;return new de(we*y.x+b*E.x,we*y.y+b*E.y,we*y.z+b*E.z,we*y.w+b*E.w).normalized}const W=Math.sqrt(H),$=Math.atan2(W,V),X=Math.sin((1-b)*$)/W,he=Math.sin(b*$)/W;return new de(y.x*X+E.x*he,y.y*X+E.y*he,y.z*X+E.z*he,y.w*X+E.w*he)}toMat3(){const{x:d,y:b,z:E,w:y}=this;return[1-2*b*b-2*E*E,2*d*b+2*E*y,2*d*E-2*b*y,2*d*b-2*E*y,1-2*d*d-2*E*E,2*b*E+2*d*y,2*d*E+2*b*y,2*b*E-2*d*y,1-2*d*d-2*b*b]}}class Bi{constructor(){this.offset=[0,0,-5],this.fov=30,this.aspect=1,this.viewport=[0,0,1,1]}project(d){const b=(this.viewport[0]+this.viewport[2])*.5,E=(this.viewport[1]+this.viewport[3])*.5,y=this.viewport[2]-this.viewport[0],V=this.viewport[3]-this.viewport[1],H=1/Math.tan(this.fov*Math.PI/360),W=-(d.z+this.offset[2]),$=b+(d.x+this.offset[0])/W*H*y*.5/this.aspect,X=E-(d.y+this.offset[1])/W*H*V*.5;return[$,X]}}class Ce{constructor(d,b,E){this.element=d.createElementNS(oe,"path"),this.vertices=b,this.projector=E}setRotation(d){let b="";return this.vertices.forEach((E,y)=>{const V=E.applyQuaternion(d),[H,W]=this.projector.project(V);b+=`${y===0?"M":"L"}${H} ${W}`}),this.element.setAttributeNS(null,"d",b),this}}class le{constructor(d,b,E){this.x=d??0,this.y=b??0,this.z=E??0}getComponents(){return[this.x,this.y,this.z]}get lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}get length(){return Math.sqrt(this.lengthSq)}get normalized(){const d=this.length;return d===0?new le:new le(this.x/d,this.y/d,this.z/d)}get negated(){return new le(-this.x,-this.y,-this.z)}add(d){return new le(this.x+d.x,this.y+d.y,this.z+d.z)}sub(d){return new le(this.x-d.x,this.y-d.y,this.z-d.z)}scale(d){return new le(this.x*d,this.y*d,this.z*d)}dot(d){return this.x*d.x+this.y*d.y+this.z*d.z}cross(d){return new le(this.y*d.z-this.z*d.y,this.z*d.x-this.x*d.z,this.x*d.y-this.y*d.x)}orthoNormalize(d){const b=this.normalized;d=d.normalized;let E=b.dot(d);E===1&&(Math.abs(b.y)>Math.abs(b.z)?d=new le(0,0,1):d=new le(0,1,0),E=b.dot(d)),d=d.sub(b.scale(E)).normalized;const y=d.cross(b);return{normal:b,tangent:d,binormal:y}}applyQuaternion(d){const b=d.w*this.x+d.y*this.z-d.z*this.y,E=d.w*this.y+d.z*this.x-d.x*this.z,y=d.w*this.z+d.x*this.y-d.y*this.x,V=-d.x*this.x-d.y*this.y-d.z*this.z;return new le(b*d.w+V*-d.x+E*-d.z-y*-d.y,E*d.w+V*-d.y+y*-d.x-b*-d.z,y*d.w+V*-d.z+b*-d.y-E*-d.x)}}function He(w,d){const b=d.z>0?new de(0,0,0,1):new de(0,0,1,0);return Math.abs(w.z)>.9999?b:de.lookRotation(w,d)}function hi(w,d,b,E,y,V=1){const H=[];for(let W=0;W<b;W++){const $=w+d*W/(b-1),X=new le;X[E]=V*Math.cos($),X[y]=V*Math.sin($),H.push(X)}return H}const ne=m("rotationgizmo"),_t=new le(0,0,0),Qs=new le(1,0,0),Ze=new le(0,1,0),Xt=new le(0,0,1),Zt=new le(0,0,-1),vn=new le(.7,0,0),fn=new le(0,.7,0),_n=new le(0,0,.7),Hi=new le(-.7,0,0),ei=new le(0,-.7,0),Pt=new le(0,0,-.7),wn=new de(0,0,0,1);function ti(w,d,b){const E=w.createElementNS(oe,"g"),y=w.createElementNS(oe,"circle");y.classList.add(ne(d)),y.setAttributeNS(null,"cx","0"),y.setAttributeNS(null,"cy","0"),y.setAttributeNS(null,"r","8"),E.appendChild(y);const V=w.createElementNS(oe,"text");return V.classList.add(ne("labeltext")),V.setAttributeNS(null,"y","4"),V.setAttributeNS(null,"text-anchor","middle"),V.setAttributeNS(null,"font-size","10"),V.textContent=b,E.appendChild(V),E}class Cn{constructor(d,b){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.onModeChange_=this.onModeChange_.bind(this),this.element=d.createElement("div"),this.element.classList.add(ne()),b.pickerLayout==="popup"&&this.element.classList.add(ne(void 0,"p"));const E=d.createElement("div");E.classList.add(ne("p")),b.viewProps.bindTabIndex(E),this.element.appendChild(E),this.padElement=E;const y=d.createElementNS(oe,"svg");y.classList.add(ne("g")),this.padElement.appendChild(y),this.svgElem_=y,this.projector_=new Bi,this.projector_.viewport=[0,0,136,136];const V=hi(0,Math.PI,33,"x","y"),H=hi(0,2*Math.PI,65,"x","y",1.1);this.xArcB_=new Ce(d,V,this.projector_),this.xArcB_.element.classList.add(ne("arcx")),this.svgElem_.appendChild(this.xArcB_.element),this.yArcB_=new Ce(d,V,this.projector_),this.yArcB_.element.classList.add(ne("arcy")),this.svgElem_.appendChild(this.yArcB_.element),this.zArcB_=new Ce(d,V,this.projector_),this.zArcB_.element.classList.add(ne("arcz")),this.svgElem_.appendChild(this.zArcB_.element),this.xArcBC_=new Ce(d,V,this.projector_),this.xArcBC_.element.classList.add(ne("arcc")),this.svgElem_.appendChild(this.xArcBC_.element),this.yArcBC_=new Ce(d,V,this.projector_),this.yArcBC_.element.classList.add(ne("arcc")),this.svgElem_.appendChild(this.yArcBC_.element),this.zArcBC_=new Ce(d,V,this.projector_),this.zArcBC_.element.classList.add(ne("arcc")),this.svgElem_.appendChild(this.zArcBC_.element);const W=d.createElementNS(oe,"g");y.classList.add(ne("axes")),this.svgElem_.appendChild(W),this.axesElem_=W,this.xAxis_=new Ce(d,[_t,vn],this.projector_),this.xAxis_.element.classList.add(ne("axisx")),this.axesElem_.appendChild(this.xAxis_.element),this.yAxis_=new Ce(d,[_t,fn],this.projector_),this.yAxis_.element.classList.add(ne("axisy")),this.axesElem_.appendChild(this.yAxis_.element),this.zAxis_=new Ce(d,[_t,_n],this.projector_),this.zAxis_.element.classList.add(ne("axisz")),this.axesElem_.appendChild(this.zAxis_.element),this.xnAxis_=new Ce(d,[_t,Hi],this.projector_),this.xnAxis_.element.classList.add(ne("axisn")),this.axesElem_.appendChild(this.xnAxis_.element),this.ynAxis_=new Ce(d,[_t,ei],this.projector_),this.ynAxis_.element.classList.add(ne("axisn")),this.axesElem_.appendChild(this.ynAxis_.element),this.znAxis_=new Ce(d,[_t,Pt],this.projector_),this.znAxis_.element.classList.add(ne("axisn")),this.axesElem_.appendChild(this.znAxis_.element),this.xArcF_=new Ce(d,V,this.projector_),this.xArcF_.element.classList.add(ne("arcx")),this.svgElem_.appendChild(this.xArcF_.element),this.yArcF_=new Ce(d,V,this.projector_),this.yArcF_.element.classList.add(ne("arcy")),this.svgElem_.appendChild(this.yArcF_.element),this.zArcF_=new Ce(d,V,this.projector_),this.zArcF_.element.classList.add(ne("arcz")),this.svgElem_.appendChild(this.zArcF_.element),this.xArcFC_=new Ce(d,V,this.projector_),this.xArcFC_.element.classList.add(ne("arcc")),this.svgElem_.appendChild(this.xArcFC_.element),this.yArcFC_=new Ce(d,V,this.projector_),this.yArcFC_.element.classList.add(ne("arcc")),this.svgElem_.appendChild(this.yArcFC_.element),this.zArcFC_=new Ce(d,V,this.projector_),this.zArcFC_.element.classList.add(ne("arcc")),this.svgElem_.appendChild(this.zArcFC_.element),this.rArc_=new Ce(d,H,this.projector_),this.rArc_.element.classList.add(ne("arcr")),this.rArc_.setRotation(wn),this.svgElem_.appendChild(this.rArc_.element),this.rArcC_=new Ce(d,H,this.projector_),this.rArcC_.element.classList.add(ne("arcc")),this.rArcC_.setRotation(wn),this.svgElem_.appendChild(this.rArcC_.element);const $=d.createElementNS(oe,"g");y.classList.add(ne("labels")),this.svgElem_.appendChild($),this.labelsElem_=$,this.xLabel=ti(d,"labelcirclex","X"),this.labelsElem_.appendChild(this.xLabel),this.yLabel=ti(d,"labelcircley","Y"),this.labelsElem_.appendChild(this.yLabel),this.zLabel=ti(d,"labelcirclez","Z"),this.labelsElem_.appendChild(this.zLabel),this.xnLabel=ti(d,"labelcirclen","-X"),this.labelsElem_.appendChild(this.xnLabel),this.ynLabel=ti(d,"labelcirclen","-Y"),this.labelsElem_.appendChild(this.ynLabel),this.znLabel=ti(d,"labelcirclen","-Z"),this.labelsElem_.appendChild(this.znLabel);const X=()=>{this.xArcB_.element.classList.add(ne("arcx_hover")),this.xArcF_.element.classList.add(ne("arcx_hover"))},he=()=>{this.xArcB_.element.classList.remove(ne("arcx_hover")),this.xArcF_.element.classList.remove(ne("arcx_hover"))};this.xArcBC_.element.addEventListener("mouseenter",X),this.xArcBC_.element.addEventListener("mouseleave",he),this.xArcFC_.element.addEventListener("mouseenter",X),this.xArcFC_.element.addEventListener("mouseleave",he);const we=()=>{this.yArcB_.element.classList.add(ne("arcy_hover")),this.yArcF_.element.classList.add(ne("arcy_hover"))},Me=()=>{this.yArcB_.element.classList.remove(ne("arcy_hover")),this.yArcF_.element.classList.remove(ne("arcy_hover"))};this.yArcBC_.element.addEventListener("mouseenter",we),this.yArcBC_.element.addEventListener("mouseleave",Me),this.yArcFC_.element.addEventListener("mouseenter",we),this.yArcFC_.element.addEventListener("mouseleave",Me);const Pe=()=>{this.zArcB_.element.classList.add(ne("arcz_hover")),this.zArcF_.element.classList.add(ne("arcz_hover"))},$e=()=>{this.zArcB_.element.classList.remove(ne("arcz_hover")),this.zArcF_.element.classList.remove(ne("arcz_hover"))};this.zArcBC_.element.addEventListener("mouseenter",Pe),this.zArcBC_.element.addEventListener("mouseleave",$e),this.zArcFC_.element.addEventListener("mouseenter",Pe),this.zArcFC_.element.addEventListener("mouseleave",$e);const bt=()=>{this.rArc_.element.classList.add(ne("arcr_hover"))},fe=()=>{this.rArc_.element.classList.remove(ne("arcr_hover"))};this.rArcC_.element.addEventListener("mouseenter",bt),this.rArcC_.element.addEventListener("mouseleave",fe),b.value.emitter.on("change",this.onValueChange_),this.value=b.value,b.mode.emitter.on("change",this.onModeChange_),this.mode_=b.mode,this.update_()}get xArcBElement(){return this.xArcBC_.element}get yArcBElement(){return this.yArcBC_.element}get zArcBElement(){return this.zArcBC_.element}get xArcFElement(){return this.xArcFC_.element}get yArcFElement(){return this.yArcFC_.element}get zArcFElement(){return this.zArcFC_.element}get rArcElement(){return this.rArcC_.element}get allFocusableElements(){return[this.padElement]}update_(){const d=this.value.rawValue.quat.normalized;this.xAxis_.setRotation(d),this.yAxis_.setRotation(d),this.zAxis_.setRotation(d),this.xnAxis_.setRotation(d),this.ynAxis_.setRotation(d),this.znAxis_.setRotation(d);const b=Qs.applyQuaternion(d),E=Ze.applyQuaternion(d),y=Xt.applyQuaternion(d),V=b.negated,H=E.negated,W=y.negated;[{el:this.xAxis_.element,v:b},{el:this.yAxis_.element,v:E},{el:this.zAxis_.element,v:y},{el:this.xnAxis_.element,v:V},{el:this.ynAxis_.element,v:H},{el:this.znAxis_.element,v:W}].map(({el:$,v:X})=>(this.axesElem_.removeChild($),{el:$,v:X})).sort(($,X)=>$.v.z-X.v.z).forEach(({el:$})=>{this.axesElem_.appendChild($)}),this.xArcB_.setRotation(He(b,Zt)),this.yArcB_.setRotation(He(E,Zt)),this.zArcB_.setRotation(He(y,Zt)),this.xArcBC_.setRotation(He(b,Zt)),this.yArcBC_.setRotation(He(E,Zt)),this.zArcBC_.setRotation(He(y,Zt)),this.xArcF_.setRotation(He(b,Xt)),this.yArcF_.setRotation(He(E,Xt)),this.zArcF_.setRotation(He(y,Xt)),this.xArcFC_.setRotation(He(b,Xt)),this.yArcFC_.setRotation(He(E,Xt)),this.zArcFC_.setRotation(He(y,Xt)),[{el:this.xLabel,v:vn},{el:this.yLabel,v:fn},{el:this.zLabel,v:_n},{el:this.xnLabel,v:Hi},{el:this.ynLabel,v:ei},{el:this.znLabel,v:Pt}].forEach(({el:$,v:X})=>{const[he,we]=this.projector_.project(X.applyQuaternion(d));$.setAttributeNS(null,"transform",`translate( ${he}, ${we} )`)}),[{el:this.xLabel,v:b},{el:this.yLabel,v:E},{el:this.zLabel,v:y},{el:this.xnLabel,v:V},{el:this.ynLabel,v:H},{el:this.znLabel,v:W}].map(({el:$,v:X})=>(this.labelsElem_.removeChild($),{el:$,v:X})).sort(($,X)=>$.v.z-X.v.z).forEach(({el:$})=>{this.labelsElem_.appendChild($)})}onValueChange_(){this.update_()}onFoldableChange_(){this.update_()}onModeChange_(){const d=this.mode_.rawValue,b=d==="angle-x"?"add":"remove",E=d==="angle-y"?"add":"remove",y=d==="angle-z"?"add":"remove",V=d==="angle-r"?"add":"remove";this.xArcB_.element.classList[b](ne("arcx_active")),this.yArcB_.element.classList[E](ne("arcy_active")),this.zArcB_.element.classList[y](ne("arcz_active")),this.xArcF_.element.classList[b](ne("arcx_active")),this.yArcF_.element.classList[E](ne("arcy_active")),this.zArcF_.element.classList[y](ne("arcz_active")),this.rArc_.element.classList[V](ne("arcr_active"))}}function Ki(w){return ji(w,0,1)}function qi(w){if(w<=0)return 0;if(w>=1)return 1;const d=1-w,b=d*(d*(d*(d*(d*(d*(d*-6+7))))));return Ki(1-b)}function Le(w,d,b){return Ki((b-w)/(d-w))}const Dt=1/Math.sqrt(2),Ai=new le(1,0,0),ct=new le(0,1,0),ks=new le(0,0,1),Ps=new de(0,0,0,1),En=new de(Dt,0,0,Dt),yi=new de(0,-Dt,0,Dt),St=new de(-Dt,0,0,Dt),ii=new de(0,Dt,0,Dt),Qi=new de(0,1,0,0);class In{constructor(d,b){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=b.value,this.viewProps=b.viewProps,this.mode_=k("free"),this.view=new Cn(d,{value:this.value,mode:this.mode_,viewProps:this.viewProps,pickerLayout:b.pickerLayout}),this.ptHandler_=new xe(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_);const E=new xe(this.view.xArcBElement);E.emitter.on("down",()=>this.changeModeIfNotAuto_("angle-x")),E.emitter.on("up",()=>this.changeModeIfNotAuto_("free"));const y=new xe(this.view.xArcFElement);y.emitter.on("down",()=>this.changeModeIfNotAuto_("angle-x")),y.emitter.on("up",()=>this.changeModeIfNotAuto_("free"));const V=new xe(this.view.yArcBElement);V.emitter.on("down",()=>this.changeModeIfNotAuto_("angle-y")),V.emitter.on("up",()=>this.changeModeIfNotAuto_("free"));const H=new xe(this.view.yArcFElement);H.emitter.on("down",()=>this.changeModeIfNotAuto_("angle-y")),H.emitter.on("up",()=>this.changeModeIfNotAuto_("free"));const W=new xe(this.view.zArcBElement);W.emitter.on("down",()=>this.changeModeIfNotAuto_("angle-z")),W.emitter.on("up",()=>this.changeModeIfNotAuto_("free"));const $=new xe(this.view.zArcFElement);$.emitter.on("down",()=>this.changeModeIfNotAuto_("angle-z")),$.emitter.on("up",()=>this.changeModeIfNotAuto_("free"));const X=new xe(this.view.rArcElement);X.emitter.on("down",()=>this.changeModeIfNotAuto_("angle-r")),X.emitter.on("up",()=>this.changeModeIfNotAuto_("free")),[{el:this.view.xLabel,q:yi},{el:this.view.yLabel,q:En},{el:this.view.zLabel,q:Ps},{el:this.view.xnLabel,q:ii},{el:this.view.ynLabel,q:St},{el:this.view.znLabel,q:Qi}].forEach(({el:he,q:we})=>{new xe(he).emitter.on("down",()=>this.autoRotate_(we))}),this.px_=null,this.py_=null,this.angleState_=null}handlePointerEvent_(d){if(!d.point)return;const b=this.mode_.rawValue,E=d.point.x,y=d.point.y;if(b!=="auto")if(b==="free"){if(this.px_!=null&&this.py_!=null){const V=E-this.px_,H=y-this.py_,W=Math.sqrt(V*V+H*H);if(W===0)return;const $=new le(H/W,V/W,0),X=de.fromAxisAngle($,W/68);this.value.rawValue=this.value.rawValue.premultiply(X)}this.px_=E,this.py_=y}else if(b==="angle-r"){const V=d.bounds.width/2,H=d.bounds.height/2,W=Math.atan2(y-H,E-V);if(this.angleState_==null){const $=new le(0,0,1);this.angleState_={initialRotation:this.value.rawValue,initialAngle:W,axis:$,reverseAngle:!0}}else{const{initialRotation:$,initialAngle:X,axis:he}=this.angleState_,we=-Qt(W-X),Me=de.fromAxisAngle(he,we);this.value.rawValue=$.premultiply(Me)}}else{const V=d.bounds.width/2,H=d.bounds.height/2,W=Math.atan2(y-H,E-V);if(this.angleState_==null){const $=b==="angle-x"?Ai:b==="angle-y"?ct:ks,X=$.applyQuaternion(this.value.rawValue.quat).z>0;this.angleState_={initialRotation:this.value.rawValue,initialAngle:W,axis:$,reverseAngle:X}}else{const{initialRotation:$,initialAngle:X,axis:he,reverseAngle:we}=this.angleState_;let Me=Qt(W-X);Me=we?-Me:Me;const Pe=de.fromAxisAngle(he,Me);this.value.rawValue=$.multiply(Pe)}}}onPointerDown_(d){this.handlePointerEvent_(d.data)}onPointerMove_(d){this.handlePointerEvent_(d.data)}onPointerUp_(){this.px_=null,this.py_=null,this.angleState_=null}onPadKeyDown_(d){Wt(d.key)&&d.preventDefault();const b=Oi(1,Cs(d)),E=Oi(1,un(d));if(b!==0||E!==0){const y=new le(-E,b,0),V=de.fromAxisAngle(y,Math.PI/16);this.value.rawValue=this.value.rawValue.premultiply(V)}}changeModeIfNotAuto_(d){this.mode_.rawValue!=="auto"&&(this.mode_.rawValue=d)}autoRotate_(d){this.mode_.rawValue="auto";const b=this.value.rawValue,E=Date.now(),y=()=>{const V=Date.now(),H=qi(Le(0,300,V-E));if(this.value.rawValue=b.slerp(d,H),H===1){this.mode_.rawValue="free";return}requestAnimationFrame(y)};requestAnimationFrame(y)}}const wt=m("rotationswatch"),xn=new le(1,0,0),Ds=new le(0,1,0),Ot=new le(0,0,1),Yn=new de(0,0,0,1);class Ss{constructor(d,b){this.onValueChange_=this.onValueChange_.bind(this),b.value.emitter.on("change",this.onValueChange_),this.value=b.value,this.element=d.createElement("div"),this.element.classList.add(wt()),b.viewProps.bindClassModifiers(this.element);const E=d.createElement("button");E.classList.add(wt("b")),b.viewProps.bindDisabled(E),this.element.appendChild(E),this.buttonElement=E;const y=d.createElementNS(oe,"svg");y.classList.add(wt("g")),E.appendChild(y),this.svgElem_=y,this.projector_=new Bi,this.projector_.viewport=[0,0,20,20];const V=hi(0,Math.PI,33,"x","y"),H=hi(0,2*Math.PI,65,"x","y");this.rArc_=new Ce(d,H,this.projector_),this.rArc_.element.classList.add(wt("arcr")),y.appendChild(this.rArc_.element),this.rArc_.setRotation(Yn),this.xArc_=new Ce(d,V,this.projector_),this.xArc_.element.classList.add(wt("arc")),y.appendChild(this.xArc_.element),this.yArc_=new Ce(d,V,this.projector_),this.yArc_.element.classList.add(wt("arc")),y.appendChild(this.yArc_.element),this.zArc_=new Ce(d,V,this.projector_),this.zArc_.element.classList.add(wt("arc")),y.appendChild(this.zArc_.element),this.update_()}update_(){const d=this.value.rawValue.quat.normalized,b=xn.applyQuaternion(d),E=Ds.applyQuaternion(d),y=Ot.applyQuaternion(d);this.xArc_.setRotation(He(b,Ot)),this.yArc_.setRotation(He(E,Ot)),this.zArc_.setRotation(He(y,Ot))}onValueChange_(){this.update_()}}class Jn{constructor(d,b){this.value=b.value,this.viewProps=b.viewProps,this.view=new Ss(d,{value:this.value,viewProps:this.viewProps})}}const Rt=m("rotation");class Rs{constructor(d,b){this.element=d.createElement("div"),this.element.classList.add(Rt()),b.foldable.bindExpandedClass(this.element,Rt(void 0,"expanded")),Q(b.foldable,"completed",D(this.element,Rt(void 0,"cpl"))),b.rotationMode==="quaternion"&&this.element.classList.add(Rt("quat"));const E=d.createElement("div");E.classList.add(Rt("h")),this.element.appendChild(E);const y=d.createElement("div");y.classList.add(Rt("s")),E.appendChild(y),this.swatchElement=y;const V=d.createElement("div");if(V.classList.add(Rt("t")),E.appendChild(V),this.textElement=V,b.pickerLayout==="inline"){const H=d.createElement("div");H.classList.add(Rt("g")),this.element.appendChild(H),this.pickerElement=H}else this.pickerElement=null}}class pi{constructor(d,b){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=b.value,this.viewProps=b.viewProps,this.foldable_=ue.create(b.expanded),this.swatchC_=new Jn(d,{value:this.value,viewProps:this.viewProps});const E=this.swatchC_.view.buttonElement;E.addEventListener("blur",this.onButtonBlur_),E.addEventListener("click",this.onButtonClick_),this.textC_=new xs(d,{assembly:b.assembly,axes:b.axes,parser:b.parser,value:this.value,viewProps:this.viewProps}),this.view=new Rs(d,{rotationMode:b.rotationMode,foldable:this.foldable_,pickerLayout:b.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=b.pickerLayout==="popup"?new Be(d,{viewProps:this.viewProps}):null;const y=new In(d,{value:this.value,viewProps:this.viewProps,pickerLayout:b.pickerLayout});y.view.allFocusableElements.forEach(V=>{V.addEventListener("blur",this.onPopupChildBlur_),V.addEventListener("keydown",this.onPopupChildKeydown_)}),this.gizmoC_=y,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(y.view.element),Gi({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:V=>V.rawValue,backward:(V,H)=>H.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.gizmoC_.view.element),Fe(this.foldable_,this.view.pickerElement))}onButtonBlur_(d){if(!this.popC_)return;const b=this.view.element,E=d.relatedTarget;(!E||!b.contains(E))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.gizmoC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(d){if(!this.popC_)return;const b=this.popC_.view.element,E=ve(d);E&&b.contains(E)||E&&E===this.swatchC_.view.buttonElement&&!pe(b.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(d){this.popC_?d.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&d.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function Bn(w,d){const b=Math.pow(.1,w);return{baseStep:b,constraint:d,textProps:T.fromObject({draggingScale:b,formatter:pn(w)})}}function Ut(w){if(!w)return;const d=[];return n(w.step)||d.push(new Re(w.step)),(!n(w.max)||!n(w.min))&&d.push(new Bt({max:w.max,min:w.min})),new rt(d)}function ki(w,d){return{toComponents:b=>b.getComponents(),fromComponents:b=>new kt(b[0],b[1],b[2],w,d)}}function $n(w,d,b){var E,y,V;return typeof((E=w)===null||E===void 0?void 0:E.x)=="number"&&typeof((y=w)===null||y===void 0?void 0:y.y)=="number"&&typeof((V=w)===null||V===void 0?void 0:V.z)=="number"?new kt(w.x,w.y,w.z,d,b):new kt(0,0,0,d,b)}function Ls(w){switch(w){case"XYZ":case"XZY":case"YXZ":case"YZX":case"ZXY":case"ZYX":return w;default:return}}function Ms(w){switch(w){case"rad":case"deg":case"turn":return w;default:return}}const Lt={id:"rotation",type:"input",css:".tp-rotationswatchv_b,.tp-rotationgizmov_p{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-rotationswatchv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-rotationswatchv_b:hover{background-color:var(--btn-bg-h)}.tp-rotationswatchv_b:focus{background-color:var(--btn-bg-f)}.tp-rotationswatchv_b:active{background-color:var(--btn-bg-a)}.tp-rotationswatchv_b:disabled{opacity:0.5}.tp-rotationgizmov_p{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-rotationgizmov_p:hover{background-color:var(--in-bg-h)}.tp-rotationgizmov_p:focus{background-color:var(--in-bg-f)}.tp-rotationgizmov_p:active{background-color:var(--in-bg-a)}.tp-rotationgizmov_p:disabled{opacity:0.5}.tp-rotationv{position:relative}.tp-rotationv_quat .tp-txtv_i{padding-left:0}.tp-rotationv_root{background-color:var(--mo-bg);width:100%;height:calc( 2.0 * var(--bld-us))}.tp-rotationv_h{display:flex}.tp-rotationv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us);margin-right:4px}.tp-rotationv_g{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-rotationv.tp-rotationv-expanded .tp-rotationv_g{margin-top:var(--bld-s);opacity:1}.tp-rotationv .tp-popv{left:calc(-1 * var(--cnt-h-p));right:calc(-1 * var(--cnt-h-p));top:var(--bld-us)}.tp-rotationswatchv path{stroke-linecap:round;stroke-linejoin:round}.tp-rotationswatchv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-rotationswatchv_arc{fill:none;stroke:var(--btn-bg);stroke-width:1px}.tp-rotationswatchv_arcr{fill:var(--btn-fg);stroke:var(--btn-bg);stroke-width:1px}.tp-rotationgizmov{padding-left:calc(var(--bld-us) + 4px)}.tp-rotationgizmov path{stroke-linecap:round;stroke-linejoin:round}.tp-rotationgizmov_p{cursor:move;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-rotationgizmov_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-rotationgizmov_axisx{stroke:#eb103f;stroke-width:2px}.tp-rotationgizmov_axisy{stroke:#4eeb10;stroke-width:2px}.tp-rotationgizmov_axisz{stroke:#1068eb;stroke-width:2px}.tp-rotationgizmov_axisn{stroke:var(--in-fg);stroke-width:2px}.tp-rotationgizmov_arcx{fill:none;stroke:var(--in-fg)}.tp-rotationgizmov_arcx.tp-rotationgizmov_arcx_hover{stroke:#eb103f}.tp-rotationgizmov_arcx.tp-rotationgizmov_arcx_active{stroke:#eb103f;stroke-width:2px}.tp-rotationgizmov_arcy{fill:none;stroke:var(--in-fg)}.tp-rotationgizmov_arcy.tp-rotationgizmov_arcy_hover{stroke:#4eeb10}.tp-rotationgizmov_arcy.tp-rotationgizmov_arcy_active{stroke:#4eeb10;stroke-width:2px}.tp-rotationgizmov_arcz{fill:none;stroke:var(--in-fg)}.tp-rotationgizmov_arcz.tp-rotationgizmov_arcz_hover{stroke:#1068eb}.tp-rotationgizmov_arcz.tp-rotationgizmov_arcz_active{stroke:#1068eb;stroke-width:2px}.tp-rotationgizmov_arcr{fill:none;stroke:var(--in-fg)}.tp-rotationgizmov_arcr.tp-rotationgizmov_arcr_hover{stroke:#ebd510}.tp-rotationgizmov_arcr.tp-rotationgizmov_arcr_active{stroke:#ebd510;stroke-width:2px}.tp-rotationgizmov_arcc{fill:none;stroke:transparent;stroke-width:5px;pointer-events:auto}.tp-rotationgizmov_labelcirclex{fill:#eb103f;cursor:pointer;pointer-events:auto}.tp-rotationgizmov_labelcirclex:hover{opacity:0.7}.tp-rotationgizmov_labelcircley{fill:#4eeb10;cursor:pointer;pointer-events:auto}.tp-rotationgizmov_labelcircley:hover{opacity:0.7}.tp-rotationgizmov_labelcirclez{fill:#1068eb;cursor:pointer;pointer-events:auto}.tp-rotationgizmov_labelcirclez:hover{opacity:0.7}.tp-rotationgizmov_labelcirclen{fill:var(--in-fg);cursor:pointer;pointer-events:auto}.tp-rotationgizmov_labelcirclen:hover{opacity:0.7}.tp-rotationgizmov_labeltext{fill:var(--btn-fg);stroke:var(--btn-fg);stroke-width:1px}.tp-rotationgizmov_p:focus .tp-rotationgizmov_m{background-color:var(--in-fg);border-width:0}",accept(w,d){var b,E;const y=ee,V=K(d,{view:y.required.constant("rotation"),label:y.optional.string,picker:y.optional.custom(mn),expanded:y.optional.boolean,rotationMode:y.required.constant("euler"),x:y.optional.custom(ft),y:y.optional.custom(ft),z:y.optional.custom(ft),order:y.optional.custom(Ls),unit:y.optional.custom(Ms)});return V?{initialValue:$n(w,(b=V.order)!==null&&b!==void 0?b:"XYZ",(E=V.unit)!==null&&E!==void 0?E:"rad"),params:V}:null},binding:{reader({params:w}){return d=>{var b,E;return $n(d,(b=w.order)!==null&&b!==void 0?b:"XYZ",(E=w.unit)!==null&&E!==void 0?E:"rad")}},constraint({params:w}){var d,b;return new di({assembly:ki((d=w.order)!==null&&d!==void 0?d:"XYZ",(b=w.unit)!==null&&b!==void 0?b:"rad"),components:[Ut("x"in w?w.x:void 0),Ut("y"in w?w.y:void 0),Ut("z"in w?w.z:void 0)]})},writer(w){return(d,b)=>{d.writeProperty("x",b.x),d.writeProperty("y",b.y),d.writeProperty("z",b.z)}}},controller({document:w,value:d,constraint:b,params:E,viewProps:y}){var V,H;if(!(b instanceof di))throw c.shouldNeverHappen();const W="expanded"in E?E.expanded:void 0,$="picker"in E?E.picker:void 0,X=(V=E.unit)!==null&&V!==void 0?V:"rad",he={rad:2,deg:0,turn:2}[X];return new pi(w,{axes:[Bn(he,b.components[0]),Bn(he,b.components[1]),Bn(he,b.components[2])],assembly:ki((H=E.order)!==null&&H!==void 0?H:"XYZ",X),rotationMode:"euler",expanded:W??!1,parser:An,pickerLayout:$??"popup",value:d,viewProps:y})}},Wn={toComponents:w=>[w.x,w.y,w.z,w.w],fromComponents:w=>new de(w[0],w[1],w[2],w[3])};function ui(w){return{baseStep:.01,constraint:w,textProps:T.fromObject({draggingScale:.01,formatter:d=>Math.abs(d)<.995?d.toFixed(2).replace("0.","."):d.toFixed(1)})}}function ni(w){var d,b,E,y;return typeof((d=w)===null||d===void 0?void 0:d.x)=="number"&&typeof((b=w)===null||b===void 0?void 0:b.y)=="number"&&typeof((E=w)===null||E===void 0?void 0:E.z)=="number"&&typeof((y=w)===null||y===void 0?void 0:y.w)=="number"?new de(w.x,w.y,w.z,w.w):new de(0,0,0,1)}const Xn={id:"rotation",type:"input",css:".tp-rotationswatchv_b,.tp-rotationgizmov_p{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-rotationswatchv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-rotationswatchv_b:hover{background-color:var(--btn-bg-h)}.tp-rotationswatchv_b:focus{background-color:var(--btn-bg-f)}.tp-rotationswatchv_b:active{background-color:var(--btn-bg-a)}.tp-rotationswatchv_b:disabled{opacity:0.5}.tp-rotationgizmov_p{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-rotationgizmov_p:hover{background-color:var(--in-bg-h)}.tp-rotationgizmov_p:focus{background-color:var(--in-bg-f)}.tp-rotationgizmov_p:active{background-color:var(--in-bg-a)}.tp-rotationgizmov_p:disabled{opacity:0.5}.tp-rotationv{position:relative}.tp-rotationv_quat .tp-txtv_i{padding-left:0}.tp-rotationv_root{background-color:var(--mo-bg);width:100%;height:calc( 2.0 * var(--bld-us))}.tp-rotationv_h{display:flex}.tp-rotationv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us);margin-right:4px}.tp-rotationv_g{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-rotationv.tp-rotationv-expanded .tp-rotationv_g{margin-top:var(--bld-s);opacity:1}.tp-rotationv .tp-popv{left:calc(-1 * var(--cnt-h-p));right:calc(-1 * var(--cnt-h-p));top:var(--bld-us)}.tp-rotationswatchv path{stroke-linecap:round;stroke-linejoin:round}.tp-rotationswatchv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-rotationswatchv_arc{fill:none;stroke:var(--btn-bg);stroke-width:1px}.tp-rotationswatchv_arcr{fill:var(--btn-fg);stroke:var(--btn-bg);stroke-width:1px}.tp-rotationgizmov{padding-left:calc(var(--bld-us) + 4px)}.tp-rotationgizmov path{stroke-linecap:round;stroke-linejoin:round}.tp-rotationgizmov_p{cursor:move;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-rotationgizmov_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-rotationgizmov_axisx{stroke:#eb103f;stroke-width:2px}.tp-rotationgizmov_axisy{stroke:#4eeb10;stroke-width:2px}.tp-rotationgizmov_axisz{stroke:#1068eb;stroke-width:2px}.tp-rotationgizmov_axisn{stroke:var(--in-fg);stroke-width:2px}.tp-rotationgizmov_arcx{fill:none;stroke:var(--in-fg)}.tp-rotationgizmov_arcx.tp-rotationgizmov_arcx_hover{stroke:#eb103f}.tp-rotationgizmov_arcx.tp-rotationgizmov_arcx_active{stroke:#eb103f;stroke-width:2px}.tp-rotationgizmov_arcy{fill:none;stroke:var(--in-fg)}.tp-rotationgizmov_arcy.tp-rotationgizmov_arcy_hover{stroke:#4eeb10}.tp-rotationgizmov_arcy.tp-rotationgizmov_arcy_active{stroke:#4eeb10;stroke-width:2px}.tp-rotationgizmov_arcz{fill:none;stroke:var(--in-fg)}.tp-rotationgizmov_arcz.tp-rotationgizmov_arcz_hover{stroke:#1068eb}.tp-rotationgizmov_arcz.tp-rotationgizmov_arcz_active{stroke:#1068eb;stroke-width:2px}.tp-rotationgizmov_arcr{fill:none;stroke:var(--in-fg)}.tp-rotationgizmov_arcr.tp-rotationgizmov_arcr_hover{stroke:#ebd510}.tp-rotationgizmov_arcr.tp-rotationgizmov_arcr_active{stroke:#ebd510;stroke-width:2px}.tp-rotationgizmov_arcc{fill:none;stroke:transparent;stroke-width:5px;pointer-events:auto}.tp-rotationgizmov_labelcirclex{fill:#eb103f;cursor:pointer;pointer-events:auto}.tp-rotationgizmov_labelcirclex:hover{opacity:0.7}.tp-rotationgizmov_labelcircley{fill:#4eeb10;cursor:pointer;pointer-events:auto}.tp-rotationgizmov_labelcircley:hover{opacity:0.7}.tp-rotationgizmov_labelcirclez{fill:#1068eb;cursor:pointer;pointer-events:auto}.tp-rotationgizmov_labelcirclez:hover{opacity:0.7}.tp-rotationgizmov_labelcirclen{fill:var(--in-fg);cursor:pointer;pointer-events:auto}.tp-rotationgizmov_labelcirclen:hover{opacity:0.7}.tp-rotationgizmov_labeltext{fill:var(--btn-fg);stroke:var(--btn-fg);stroke-width:1px}.tp-rotationgizmov_p:focus .tp-rotationgizmov_m{background-color:var(--in-fg);border-width:0}",accept(w,d){const b=ee,E=K(d,{view:b.required.constant("rotation"),label:b.optional.string,picker:b.optional.custom(mn),expanded:b.optional.boolean,rotationMode:b.optional.constant("quaternion"),x:b.optional.custom(ft),y:b.optional.custom(ft),z:b.optional.custom(ft),w:b.optional.custom(ft)});return E?{initialValue:ni(w),params:E}:null},binding:{reader(w){return d=>ni(d)},constraint({params:w}){return new di({assembly:Wn,components:[Ut("x"in w?w.x:void 0),Ut("y"in w?w.y:void 0),Ut("z"in w?w.z:void 0),Ut("w"in w?w.w:void 0)]})},writer(w){return(d,b)=>{d.writeProperty("x",b.x),d.writeProperty("y",b.y),d.writeProperty("z",b.z),d.writeProperty("w",b.w)}}},controller({document:w,value:d,constraint:b,params:E,viewProps:y}){if(!(b instanceof di))throw c.shouldNeverHappen();const V="expanded"in E?E.expanded:void 0,H="picker"in E?E.picker:void 0;return new pi(w,{axes:[ui(b.components[0]),ui(b.components[1]),ui(b.components[2]),ui(b.components[3])],assembly:Wn,rotationMode:"quaternion",expanded:V??!1,parser:An,pickerLayout:H??"popup",value:d,viewProps:y})}},gi=[Lt,Xn];t.RotationInputPluginEuler=Lt,t.RotationInputPluginQuaternion=Xn,t.plugins=gi,Object.defineProperty(t,"__esModule",{value:!0})})})(Ga,Ga.exports);var Bc=Ga.exports;const eg=Ro(Bc),tg=So({__proto__:null,default:eg},[Bc]);var Oa={exports:{}};(function(p,o){(function(t,n){n(o)})(lo,function(t){const n="tp";function r(F){return(k,T)=>[n,"-",F,"v",k?`_${k}`:"",T?`-${T}`:""].join("")}function c(F,k){return Object.keys(k).reduce((z,J)=>{if(z===void 0)return;const O=k[J],S=O(F[J]);return S.succeeded?Object.assign(Object.assign({},z),{[J]:S.value}):void 0},{})}function h(F,k){return F.reduce((T,z)=>{if(T===void 0)return;const J=k(z);if(!(!J.succeeded||J.value===void 0))return[...T,J.value]},[])}function g(F){return F===null?!1:typeof F=="object"}function m(F){return k=>T=>{if(!k&&T===void 0)return{succeeded:!1,value:void 0};if(k&&T===void 0)return{succeeded:!0,value:void 0};const z=F(T);return z!==void 0?{succeeded:!0,value:z}:{succeeded:!1,value:void 0}}}function v(F){return{custom:k=>m(k)(F),boolean:m(k=>typeof k=="boolean"?k:void 0)(F),number:m(k=>typeof k=="number"?k:void 0)(F),string:m(k=>typeof k=="string"?k:void 0)(F),function:m(k=>typeof k=="function"?k:void 0)(F),constant:k=>m(T=>T===k?k:void 0)(F),raw:m(k=>k)(F),object:k=>m(T=>{if(g(T))return c(T,k)})(F),array:k=>m(T=>{if(Array.isArray(T))return h(T,k)})(F)}}const C={optional:v(!0),required:v(!1)};function x(F,k){const T=C.required.object(k)(F);return T.succeeded?T.value:void 0}const Q=r("txtr");class P{constructor(k,T){this.onChange_=this.onChange_.bind(this),this.element=k.createElement("div"),this.element.classList.add(Q()),T.viewProps.bindClassModifiers(this.element);const z=k.createElement("textarea");z.rows=T.lineCount,z.cols=22,z.placeholder=T.placeholder,z.classList.add(Q("i")),T.viewProps.bindDisabled(z),this.element.appendChild(z),this.inputElement=z,T.value.emitter.on("change",this.onChange_),this.value_=T.value,this.refresh()}refresh(){this.inputElement.value=this.value_.rawValue}onChange_(){this.refresh()}}class D{constructor(k,T){this.onInputChange_=this.onInputChange_.bind(this),this.value=T.value,this.viewProps=T.viewProps,this.lineCount=T.lineCount,this.placeholder=T.placeholder,this.view=new P(k,{value:this.value,viewProps:this.viewProps,lineCount:this.lineCount,placeholder:this.placeholder}),this.view.inputElement.addEventListener("keyup",this.onInputChange_)}onInputChange_(k){const T=k.currentTarget.value;this.value.rawValue=T,this.view.refresh()}}const G=[{id:"input-template",type:"input",css:".tp-txtrv{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-txtrv{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-txtrv:hover{background-color:var(--in-bg-h)}.tp-txtrv:focus{background-color:var(--in-bg-f)}.tp-txtrv:active{background-color:var(--in-bg-a)}.tp-txtrv:disabled{opacity:.5}.tp-txtrv{display:block;height:auto;padding-bottom:0;overflow:hidden;position:relative}.tp-txtrv.tp-v-disabled{opacity:.5}.tp-txtrv .tp-txtrv_i{font-family:var(--font-family);background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-size:11px;padding:4px;line-height:16px;min-width:0;width:100%;border:none;height:100%;resize:none;margin-bottom:-8px}.tp-txtrv .tp-txtrv_i:focus{outline:none}",accept(F,k){if(typeof F!="string")return null;const T=C,z=x(k,{view:T.required.constant("textarea"),lineCount:T.optional.number,placeholder:T.optional.string});return z?{initialValue:F,params:z}:null},binding:{reader(F){return k=>typeof k=="string"?k:""},writer(F){return(k,T)=>{k.write(T)}}},controller(F){var k,T;return new D(F.document,{value:F.value,lineCount:(k=F.params.lineCount)!==null&&k!==void 0?k:3,placeholder:(T=F.params.placeholder)!==null&&T!==void 0?T:"Enter text here",viewProps:F.viewProps})}}];t.plugins=G,Object.defineProperty(t,"__esModule",{value:!0})})})(Oa,Oa.exports);var yc=Oa.exports;const ig=Ro(yc),ng=So({__proto__:null,default:ig},[yc]),Qc=p=>{const o=new ws.Pane({container:p});return o.registerPlugin(Ic),o.registerPlugin(Zu),o.registerPlugin(tg),o.registerPlugin(ng),o};class sg{constructor(){N(this,"listeners",{})}addEventListener(o,t){const{listeners:n}=this;n[o]??(n[o]=[]);const r=n[o];r.includes(t)||r.push(t)}hasEventListener(o,t){var n;return(n=this.listeners[o])==null?void 0:n.includes(t)}removeEventListener(o,t){const{listeners:n}=this,r=n[o];if(r===void 0)return;const c=r.indexOf(t);c!==-1&&r.splice(c,1)}dispatchEvent(o){const{listeners:t}=this,n=t[o.type];if(n===void 0)return;o.target=this;const r=[...n];for(let c=0,h=r.length;c<h;c+=1)r[c].call(this,o);o.target=void 0}}const kc=new sg,og='<svg viewBox="0 0 24 24"><path d="M4.9 4.9 17.2 10l-4.9 1.7a.9.9 0 0 0-.6.6L10 17.2zm8.2 9.6 5.3 5.3a.9.9 0 1 0 1.4-1.4l-5.3-5.3 5.9-2a1 1 0 0 0 0-1.9l-17-7a1 1 0 0 0-1.3 1.3l7 17a1 1 0 0 0 1.9-.1z"/></svg>',ag=(p,o)=>{let t="";const n=g=>{var C,x;if(t===g)return;ai("three-inspect.selectedPane",g),(C=p.querySelector(`[data-pane="${t}"]`))==null||C.classList.add("hidden");const m=o.querySelector(`[data-nav="${t}"]`);m==null||m.classList.remove("bg-zinc-400","text-zinc-800"),m==null||m.classList.add("text-zinc-400"),(x=p.querySelector(`[data-pane="${g}"]`))==null||x.classList.remove("hidden");const v=o.querySelector(`[data-nav="${g}"]`);v==null||v.classList.add("bg-zinc-400","text-zinc-800"),v==null||v.classList.remove("text-zinc-400"),t=g},r=g=>{const m=document.createElement("button");m.className="py-1.5 px-2 text-zinc-400",m.dataset.nav=g,m.textContent=g,m.addEventListener("click",()=>n(g),{passive:!0}),o.append(m)},c=g=>{const m=document.createElement("section");return m.className="h-screen flex flex-col overflow-x-hidden overflow-y-auto hidden",m.dataset.pane=g,p.insertBefore(m,p.children[p.children.length-2]),r(g),Qc(m)},h=document.createElement("button");return h.title="Select an element to inspect it",h.innerHTML=og,h.className="w-6 fill-zinc-400 p-1 hover:fill-zinc-300 hover:bg-[rgba(255,255,255,0.05)]",h.addEventListener("click",()=>{const g=h.classList.toggle("enabled");h.classList.toggle("bg-zinc-600",g),h.classList.toggle("hover:bg-zinc-600",g),h.classList.toggle("fill-zinc-100",g),h.classList.toggle("hover:fill-zinc-100",g),kc.dispatchEvent({enabled:g,type:"enable-select"})},{passive:!0}),o.append(h),r("World"),n(mi("three-inspect.selectedPane")??"World"),{addPane:c}},rg=3,lg=p=>{switch(p){case"left":return"left: 0;";case"right":return"left: calc(100% - 3px);";case"top":return"top: 0;";case"bottom":return"bottom: 0;";default:return""}},cg=p=>{const{element:o,side:t,min:n=100,max:r=300}=p;let c=0,h=0,g=0,m=0;const v=t==="right"||t==="left",C=document.createElement("div"),x=document.createElement("div");x.style.cssText=`
    position: absolute;
    z-index: 1000;
    opacity: 0.5;
    background-color: var(--color-resize-handle, #888);
    cursor: ${v?"ew":"ns"}-resize;
    ${v?"width":"height"}: 3px;
    ${v?"height":"width"}: 100%;
    ${v?"top: 0; bottom: 0;":"left: 0; right: 0;"}
    ${lg(t)}
  `;const Q=G=>{if(G.preventDefault(),G.stopPropagation(),v){let F=c-G.clientX;t==="right"&&(F=-F);const k=rg+Math.max(n,Math.min(r,g+F));C.style.width=`${k}px`}else{let F=h-G.clientY;t==="bottom"&&(F=-F);const k=Math.max(n,Math.min(r,m+F));C.style.height=`${k}px`}},P=G=>{G.preventDefault(),G.stopPropagation(),window.removeEventListener("mousemove",Q),window.removeEventListener("mouseup",P),x.style.opacity="0.5"},D=G=>{G.preventDefault(),G.stopPropagation(),c=G.clientX,h=G.clientY,g=C.clientWidth,m=C.clientHeight,window.addEventListener("mousemove",Q),window.addEventListener("mouseup",P),x.style.opacity="1"};return x.addEventListener("mousedown",D),C.style.position="relative",C.style.overflow="hidden",C.append(o),C.append(x),p.height&&(C.style.height=`${p.height}px`),p.width&&(C.style.width=`${p.width}px`),C},dg=()=>{const p=at.renderer.domElement;p.setAttribute("style",`
    width: 100% !important;
    height: 100% !important;
  `);const o=cg({element:p,max:Number.POSITIVE_INFINITY,side:"right",width:window.innerWidth-335});return o.style.cssText+="--color-resize-handle: #222;",o.classList.add("h-screen"),o},hg=p=>{const{composer:o}=at;if(o===void 0)return()=>0;const t=p.addFolder({title:"Postprocessing"}),{passes:n}=o;let r;for(let h=0,g=n.length;h<g;h+=1){const m=n[h];if("effects"in m){r=m;break}}if(r===void 0)return()=>t.dispose();const{effects:c}=r;for(let h=0,g=c.length;h<g;h+=1){const m=c[h];if(m.name==="SMAAEffect")t.addFolder({title:"smaa"});else if(m.name==="BloomEffect"){const v=m,C=t.addFolder({title:"bloom"});C.addInput(v,"height"),C.addInput(v,"width"),C.addInput(v,"intensity")}else if(m.name==="NoiseEffect")t.addFolder({title:"noise"}).addInput(m.blendMode.opacity,"value",{label:"opacity"});else if(m.name==="VignetteEffect"){const v=m,C=t.addFolder({title:"vignette"});C.addInput(v,"darkness"),C.addInput(v,"technique",{options:{default:0,eskil:1}}),C.addInput(v,"offset")}else if(m.name==="SSREffect"){const v=m,C=t.addFolder({title:"ssr"});C.addInput(v,"intensity",{max:3,min:0,step:.01}),C.addInput(v,"exponent",{max:8,min:.125,step:.125}),C.addInput(v,"distance",{max:10,min:.001,step:.1}),C.addInput(v,"fade",{max:20,min:0,step:.01}),C.addInput(v,"roughnessFade",{max:1,min:0,step:.01}),C.addInput(v,"thickness",{max:10,min:0,step:.01}),C.addInput(v,"ior",{max:2.3333,min:1,step:.01}),C.addInput(v,"maxRoughness",{max:1,min:0,step:.01}),C.addInput(v,"maxDepthDifference",{max:100,min:0,step:.1});const x=C.addFolder({index:0,title:"Temporal Resolve"});x.addInput(v,"blend",{max:1,min:0,step:.001}),x.addInput(v,"correction",{max:1,min:0,step:1e-4}),x.addInput(v,"correctionRadius",{max:4,min:1,step:1});const Q=C.addFolder({index:0,title:"Blur"});Q.addInput(v,"blur",{max:1,min:0,step:.01}),Q.addInput(v,"blurKernel",{max:5,min:0,step:1}),Q.addInput(v,"blurSharpness",{max:100,min:0,step:1});const P=C.addFolder({index:0,title:"Jitter"});P.addInput(v,"jitter",{max:4,min:0,step:.01}),P.addInput(v,"jitterRoughness",{max:4,min:0,step:.01});const D=C.addFolder({index:0,title:"Tracing"});D.addInput(v,"steps",{max:256,min:1,step:1}),D.addInput(v,"refineSteps",{max:16,min:0,step:1}),D.addInput(v,"missedRays");const G=C.addFolder({index:0,title:"Resolution"});G.addInput(v,"resolutionScale",{max:1,min:.125,step:.125}),G.addInput(v,"velocityResolutionScale",{max:1,min:.125,step:.125})}else console.warn(`three-inspect does not yet support postprocessing effect: ${m.name}`)}return()=>t.dispose()},so={controlling:!1},Pc={expanded:!1,picker:"inline",rotationMode:"euler",view:"rotation"},Ag=(p,o)=>{const t=new _s;p.addSeparator();const n={index:0,position:new Se,rotation:new Wa,scale:new Se},r=p.addInput(n,"index",{label:"instance index",max:o.count-1,min:0,step:1}),c=p.addInput(n,"position",{index:0}),h=p.addInput(n,"rotation",Pc),g=p.addInput(n,"scale",{index:0}),m=()=>{o.getMatrixAt(n.index,t),n.position.setFromMatrixPosition(t),n.rotation.setFromRotationMatrix(t),n.scale.setFromMatrixScale(t),c.refresh(),h.refresh(),g.refresh()},v=()=>{t.makeRotationFromEuler(n.rotation),t.setPosition(n.position),t.scale(n.scale),o.setMatrixAt(n.index,t),o.instanceMatrix.needsUpdate=!0};r.on("change",m),c.on("change",v),h.on("change",v),g.on("change",v);const C=()=>{so.controlling||m()};return nr(C),()=>sr(C)},Dl=()=>{so.controlling=!0},Sl=()=>{so.controlling=!1},an=(p,o)=>{const{element:t}=p,n={rotation:new Wa},r=()=>{so.controlling&&o.rotation.copy(n.rotation)};p.addSeparator();const c=p.addInput(o,"position",{step:.1}),h=p.addInput(n,"rotation",Pc).on("change",r),g=p.addInput(o,"scale",{step:.1}),m=()=>{so.controlling||(o.rotation.equals(n.rotation)||(n.rotation.copy(o.rotation),h.refresh()),c.refresh(),g.refresh())};nr(m);let v;return"isInstancedMesh"in o&&(v=Ag(p,o)),t.addEventListener("mousedown",Dl,{passive:!0}),t.addEventListener("mouseup",Sl,{passive:!0}),()=>{t.removeEventListener("mousedown",Dl),t.removeEventListener("mouseup",Sl),c.dispose(),h.dispose(),g.dispose(),sr(m),v==null||v()}},or=(p,o)=>{p.addSeparator();const t={userData:JSON.stringify(o.userData,void 0,2)},n=t.userData.split(/\r\n|\r|\n/u).length,r=p.addMonitor(t,"userData",{interval:5e3,lineCount:n,multiline:!0});return()=>r.dispose()},Rl=[Qo.NONE,Qo.ORBIT],Ll={controls:mi("three-inspect.controls")??Qo.NONE},pg=(p,o)=>{const t=["none","orbit","map"];p.addInput(Ll,"controls",{cells:(g,m)=>({title:t[Rl[m*3+g]],value:Rl[m*3+g]}),groupName:"controls",label:"inspect controls",size:[2,1],view:"radiogrid"}).on("change",()=>_c(Ll.controls,o));const n=()=>{o.updateProjectionMatrix()};p.addInput(o,"near").on("change",n),p.addInput(o,"far").on("change",n);const r=p.addInput(o,"zoom").on("change",n),c=()=>r.refresh();window.addEventListener("wheel",c,{passive:!0}),o instanceof $a&&(p.addInput(o,"bottom").on("change",n),p.addInput(o,"left").on("change",n),p.addInput(o,"right").on("change",n),p.addInput(o,"top").on("change",n)),o instanceof Kl&&(p.addInput(o,"fov").on("change",n),p.addInput(o,"filmOffset").on("change",n),p.addInput(o,"filmGauge").on("change",n));const h=[];return h.push(an(p,o),or(p,o)),at.composer!==null&&h.push(hg(p)),h.push(()=>window.removeEventListener("wheel",c)),h},oo=new WeakMap,ar=new WeakMap,ug=p=>{var o;return"isInstancedMesh"in p?"InstancedMesh":(o=p.geometry)!=null&&o.isMeshLine?"MeshLine":p.type},Ba=p=>ar.get(p),gg=p=>oo.get(p),Po=p=>{if(p.userData.THREE_INSPECT_OMIT===!0)return;p.traverse(t=>p!==t&&Po(t));const o=oo.get(p);oo.delete(p),o!==void 0&&(ar.delete(o),o.destroy())},ya=new Map,rr=(p,o,t)=>{if(o.userData.THREE_INSPECT_OMIT===!0)return;const n=o.name,r="isScene"in t?p:oo.get(t),c=`${n?`${n} `:""}(${ug(o)})`,h=new xt({text:c});h.open=!0,oo.set(o,h),ar.set(h,o),r?r.append(h):o.parent&&ya.set(o.parent.uuid,h);const g=ya.get(o.uuid);g&&(h.append(g),ya.delete(o.uuid));{const{children:m}=o;for(let v=0,C=m.length;v<C;v+=1)rr(p,m[v],o)}},bg=[1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],mg=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],vg=(p,o)=>{const t=new Bo;t.setAttribute("position",new $r(bg,3)),t.computeBoundingSphere();const n=new Ya({fog:!1}),r=new jl;r.type="RectAreaLightHelper";const c=new Bo;c.setAttribute("position",new $r(mg,3)),c.computeBoundingSphere(),r.add(new ro(c,new vi({fog:!1,side:oc}))),r.updateMatrixWorld=()=>{if(r.scale.set(.5*p.width,.5*p.height,1),o===void 0){n.color.copy(p.color).multiplyScalar(p.intensity);const{color:g}=n,m=Math.max(g.r,g.g,g.b);m>1&&g.multiplyScalar(1/m),r.children[0].material.color.copy(g)}else n.color.set(o),r.children[0].material.color.set(o);r.matrixWorld.extractRotation(p.matrixWorld).scale(r.scale).copyPosition(p.matrixWorld),r.children[0].matrixWorld.copy(r.matrixWorld)};const h=r;return h.dispose=()=>{r.geometry.dispose(),r.material.dispose();const g=r.children[0];g.geometry.dispose(),g.material.dispose()},r},De={max:1,min:0},Ml=(p,o)=>{p.addSeparator(),p.addInput(o.target,"position",{label:"target position",step:.1}).on("change",()=>{o.target.updateMatrixWorld()})},fg=(p,o)=>{let t,n;const r=[],c={color:`#${o.color.getHexString().toUpperCase()}`,helper:!1,shadowHelper:!1};if(o instanceof EA||p.addInput(c,"helper").on("change",()=>t&&o[c.helper?"add":"remove"](t)),p.addInput(c,"color").on("change",()=>o.color.set(c.color)),p.addInput(o,"intensity"),o instanceof Sa?(p.addInput(o,"castShadow"),an(p,o),Ml(p,o),t=new IA(o)):o instanceof xA?(p.addInput(o,"groundColor"),t=new BA(o,10)):o instanceof Ol?(p.addInput(o,"decay"),p.addInput(o,"distance"),p.addInput(o,"power"),p.addInput(o,"castShadow"),an(p,o),t=new yA(o,10)):o instanceof Da?(p.addInput(o,"angle",{max:Math.PI/2,min:0}),p.addInput(o,"decay"),p.addInput(o,"distance"),p.addInput(o,"penumbra",De),p.addInput(o,"power"),p.addInput(o,"castShadow"),an(p,o),Ml(p,o),t=new QA(o)):o instanceof kA&&(p.addInput(o,"power"),p.addInput(o,"width"),p.addInput(o,"height"),an(p,o),t=vg(o)),t!==void 0&&(t.userData.THREE_INSPECT_OMIT=!0),o.castShadow&&o.shadow){const h=p.addFolder({index:o.id,title:"Shadow Camera"});h.addInput(o.shadow,"autoUpdate"),h.addInput(c,"shadowHelper",{label:"helper"}).on("change",()=>n&&o[c.shadowHelper?"add":"remove"](n));const g={mapSize:o.shadow.mapSize.x},m=()=>{o.shadow&&(o.shadow.mapSize.width=g.mapSize,o.shadow.mapSize.height=g.mapSize,o.shadow.dispose(),o.shadow.map=null)},v=[256,512,1024,2048];if(h.addInput(g,"mapSize",{cells:C=>({title:v[C],value:v[C]}),groupName:"mapSize",size:[4,1],view:"radiogrid"}).on("change",m),h.addInput(o.shadow,"bias",{max:.09,min:0,step:.001}),h.addInput(o.shadow,"normalBias").on("change",m),h.addInput(o.shadow,"radius").on("change",m),o instanceof Sa){const{camera:C}=o.shadow;h.addInput(C,"near").on("change",m),h.addInput(C,"far").on("change",m),h.addInput(C,"left").on("change",m),h.addInput(C,"right").on("change",m),h.addInput(C,"top").on("change",m),h.addInput(C,"bottom").on("change",m),an(h,C)}else if(o instanceof Da){const{camera:C}=o.shadow;h.addInput(C,"near").on("change",m),h.addInput(C,"far").on("change",m),h.addInput(C,"focus",De),an(h,C)}n=new PA(o.shadow.camera),n.userData.THREE_INSPECT_OMIT=!0}return p.on("change",()=>{var h;(h=t==null?void 0:t.update)==null||h.call(t),n==null||n.update()}),r.push(or(p,o),()=>{var h;t!==void 0&&(o.remove(t),(h=t.dispose)==null||h.call(t)),n!==void 0&&(o.remove(n),n.dispose())}),r},_g=(p,o)=>{const t=new DA;t.name="Forward helper",t.setLength(1),t.userData.THREE_INSPECT_OMIT=!0;const n={forwardHelper:!1},r=p.addInput(n,"forwardHelper").on("change",()=>{n.forwardHelper?o.add(t):o.remove(t)});return()=>{r.dispose(),o.remove(t),t.dispose()}},wg=()=>{const p=document.createElement("canvas");p.width=1,p.height=1;const o=p.getContext("2d");o!==null&&(o.fillStyle="rgba(0,0,0,0)",o.fillRect(0,0,1,1));const t=document.createElement("img");return t.src=p.toDataURL("image/png"),t},Ua=wg(),vt=(p,o,t)=>{const n=o[t],r={current:()=>{}},c={ClampToEdgeWrapping:ec,MirroredRepeatWrapping:tc,RepeatWrapping:yo},h={LinearFilter:io,NearestFilter:$l},g={...h,LinearMipmapLinearFilter:Do,LinearMipmapNearestFilter:Xl,NearestMipmapLinearFilter:Zl,NearestMipmapNearestFilter:Wl},m={0:0,16:16,2:2,4:4,8:8},v={AlphaFormat:KA,DepthFormat:qA,DepthStencilFormat:YA,LuminanceAlphaFormat:JA,LuminanceFormat:$A,RGBAFormat:ms,RGBAIntegerFormat:WA,RGFormat:$s,RGIntegerFormat:XA,RedFormat:Ws,RedIntegerFormat:ZA},C={BasicDepthPacking:ep,LinearEncoding:tp,RGBADepthPacking:ip,sRGBEncoding:np},x={map:(n==null?void 0:n.image)??Ua},Q=D=>{P.hidden=!1,P.title=`${D.name} (Texture)`.trim();const G=()=>D.needsUpdate=!0;P.addInput(D,"wrapS",{options:c}).on("change",G),P.addInput(D,"wrapT",{options:c}).on("change",G),P.addInput(D,"magFilter",{options:h}),P.addInput(D,"minFilter",{options:g}),P.addInput(D,"offset",{step:.01}),P.addInput(D,"rotation",{step:.01}),P.addInput(D,"anisotropy",{options:m}).on("change",G),P.addInput(D,"format",{options:v}).on("change",G),P.addInput(D,"repeat",{x:{step:1},y:{step:1}}),P.addInput(D,"center"),P.addInput(D,"flipY"),P.addInput(D,"encoding",{options:C}).on("change",()=>{G(),o instanceof ln&&(o.needsUpdate=!0)}),r.current=()=>{for(const F of P.children)F.dispose()}};p.addInput(x,"map",{label:t,view:"input-image"}).on("change",({value:D})=>{var F;if(D.src===Ua.src||D.src===(n==null?void 0:n.image.src))return;(F=o[t])==null||F.dispose();const G=new Ra(D);o[t]=G,G.needsUpdate=!0,o instanceof ln&&(o.needsUpdate=!0),r.current(),Q(G)});const P=p.addFolder({hidden:!0,title:""});return n&&Q(n),()=>r.current()},Tl=(p,o)=>{const t=o.material,n=p.addFolder({index:o.id,title:`${t.name} (${t.type})`.trim()}),r={ObjectSpaceNormalMap:jA,TangentSpaceNormalMap:HA},c=()=>{t.needsUpdate=!0},h=m=>{const v=t,C={[m]:`#${v[m].getHexString()}`};n.addInput(C,m).on("change",()=>v[m].set(C.color))};n.addInput(t,"visible"),n.addInput(t,"transparent").on("change",c),n.addInput(t,"opacity",De);const g=[["Back",oc],["Double",Ja],["Front",ic]];if(n.addInput(t,"side",{cells:m=>({title:g[m][0],value:g[m][1]}),groupName:"side",size:[3,1],view:"radiogrid"}),n.addInput(t,"vertexColors"),n.addSeparator(),t instanceof Ul)h("color"),n.addInput(t,"size"),n.addInput(t,"sizeAttenuation");else if(t instanceof Ya||t instanceof SA)h("color"),n.addInput(t,"fog"),n.addInput(t,"linewidth");else if(t instanceof vi)h("color"),n.addInput(t,"fog"),n.addInput(t,"reflectivity",De),n.addInput(t,"refractionRatio",De),n.addInput(t,"wireframe");else if(t instanceof RA)n.addInput(t,"fog");else if(t instanceof sa)h("color"),h("emissive"),n.addInput(t,"emissiveIntensity",{min:0}),n.addInput(t,"flatShading").on("change",c),n.addInput(t,"fog"),n.addInput(t,"reflectivity",De),n.addInput(t,"refractionRatio",De),n.addInput(t,"wireframe");else if(t instanceof oa)h("color"),h("emissive"),n.addInput(t,"emissiveIntensity",{min:0}),n.addInput(t,"flatShading").on("change",c),n.addInput(t,"fog"),n.addInput(t,"reflectivity",De),n.addInput(t,"refractionRatio",De),n.addInput(t,"shininess",De),n.addInput(t,"wireframe");else if(t instanceof vs)h("color"),h("emissive"),n.addInput(t,"emissiveIntensity",{min:0}),n.addInput(t,"roughness",De),n.addInput(t,"metalness",De),n.addInput(t,"flatShading").on("change",c),n.addInput(t,"fog"),n.addInput(t,"wireframe"),n.addInput(t,"envMapIntensity"),t instanceof Tt&&(n.addSeparator(),h("attenuationColor"),n.addInput(t,"clearcoat",De),n.addInput(t,"clearcoatRoughness",De),n.addInput(t,"transmission",De),n.addInput(t,"ior",{max:2.333,min:1}),n.addInput(t,"reflectivity",De),n.addInput(t,"sheen",De),n.addInput(t,"sheenRoughness",De),h("sheenColor"));else if(t instanceof Yl){const m={uniforms:JSON.stringify(t.uniforms,null,2)};n.addInput(m,"uniforms",{view:"textarea"}).on("change",()=>{try{t.uniforms=JSON.parse(m.uniforms),c()}catch{}}),n.addInput(t,"vertexShader",{view:"textarea"}).on("change",c),n.addInput(t,"fragmentShader",{view:"textarea"}).on("change",c)}return(t instanceof vi||t instanceof sa||t instanceof oa||t instanceof vs||t instanceof Tt)&&(n.addSeparator(),vt(n,t,"map"),vt(n,t,"alphaMap"),vt(n,t,"aoMap"),n.addInput(t,"aoMapIntensity",De),vt(n,t,"lightMap"),n.addInput(t,"lightMapIntensity",De),(t instanceof sa||t instanceof oa||t instanceof vs||t instanceof Tt)&&(vt(n,t,"bumpMap"),n.addInput(t,"bumpScale",De),vt(n,t,"displacementMap"),n.addInput(t,"displacementScale"),n.addInput(t,"displacementBias"),vt(n,t,"emissiveMap"),vt(n,t,"normalMap"),n.addInput(t,"normalMapType",{options:r})),(t instanceof vs||t instanceof Tt)&&(vt(n,t,"metalnessMap"),vt(n,t,"roughnessMap"),t instanceof Tt&&(vt(n,t,"clearcoatMap"),vt(n,t,"clearcoatNormalMap"),n.addInput(t,"clearcoatNormalScale",{x:De,y:De}),vt(n,t,"clearcoatRoughnessMap"),vt(n,t,"sheenRoughnessMap")))),n.addSeparator(),n.addInput(t,"alphaTest",De),n.addInput(t,"blendDst"),n.addInput(t,"clipShadows"),n.addInput(t,"depthTest"),n.addInput(t,"depthWrite"),n.addInput(t,"polygonOffset"),n.addInput(t,"polygonOffsetFactor"),n.addInput(t,"dithering"),()=>n.dispose()},Cg=(p,o)=>{o instanceof Hl&&p.addMonitor(o.geometry.attributes.position,"count"),p.addInput(o,"castShadow"),p.addInput(o,"receiveShadow"),p.addInput(o,"frustumCulled"),p.addInput(o,"matrixAutoUpdate"),p.addInput(o,"visible");const t=[];o.type.toLowerCase().includes("helper")||t.push(_g(p,o)),t.push(an(p,o));const n=o;if(Array.isArray(n.material))for(let r=0,c=n.material.length;r<c;r+=1)n.material[r]instanceof ln&&t.push(Tl(p,n));else n.material!==void 0&&n.material instanceof ln&&t.push(Tl(p,n));return t.push(or(p,o)),t},Eg=p=>{const{renderer:o}=at,t=new Ft;o.getClearColor(t);const n={clearColor:`#${t.getHexString().toUpperCase()}`};p.addInput(n,"clearColor").on("change",()=>{o.setClearColor(n.clearColor)});const r=()=>{o.shadowMap.needsUpdate=!0};p.addSeparator(),p.addInput(o.shadowMap,"enabled",{label:"shadowmap"}).on("change",r),p.addInput(o.shadowMap,"autoUpdate").on("change",r),p.addInput(o.shadowMap,"type",{options:{Basic:LA,PCF:MA,"PCF Soft":TA,VSM:FA}}).on("change",()=>{o.shadowMap.needsUpdate=!0}),p.addSeparator(),p.addInput(o,"toneMapping",{options:{ACESFilmic:zA,Cineon:NA,Custom:VA,Linear:GA,None:OA,Reinhard:UA}}),p.addInput(o,"toneMappingExposure",{label:"exposure"}),p.addSeparator();const c={calls:"",geometries:"",lines:"",points:"",textures:"",triangles:""},h={maxAnisotropy:o.capabilities.getMaxAnisotropy().toString(),maxAttributes:o.capabilities.maxAttributes.toFixed(0),maxCubemapSize:`${o.capabilities.maxCubemapSize} (h * w)`,maxFragmentUniforms:o.capabilities.maxFragmentUniforms.toFixed(0),maxTextureSize:`${o.capabilities.maxTextureSize.toFixed(0)} (h * w)`,maxTextures:o.capabilities.maxTextures.toFixed(0),maxVaryings:o.capabilities.maxVaryings.toFixed(0),maxVertexTextures:o.capabilities.maxVertexTextures.toFixed(0),maxVertexUniforms:o.capabilities.maxVertexUniforms.toFixed(0)},g={interval:1e6},m=[];m.push(p.addMonitor(c,"calls",g),p.addMonitor(c,"geometries",g),p.addMonitor(c,"lines",g),p.addMonitor(c,"points",g),p.addMonitor(c,"textures",g),p.addMonitor(c,"triangles",g)),p.addSeparator(),p.addMonitor(h,"maxAnisotropy",g),p.addMonitor(h,"maxAttributes",g),p.addMonitor(h,"maxCubemapSize",g),p.addMonitor(h,"maxFragmentUniforms",g),p.addMonitor(h,"maxTextureSize",g),p.addMonitor(h,"maxTextures",g),p.addMonitor(h,"maxVaryings",g),p.addMonitor(h,"maxVertexTextures",g),p.addMonitor(h,"maxVertexUniforms",g),p.addMonitor(o.capabilities,"precision",g);const v=()=>{const{render:x,memory:Q}=o.info;c.calls=x.calls.toFixed(0),c.geometries=Q.geometries.toFixed(0),c.lines=x.lines.toFixed(0),c.points=x.points.toFixed(0),c.textures=Q.textures.toFixed(0),c.triangles=x.triangles.toFixed(0);for(let P=0,D=m.length;P<D;P+=1)m[P].refresh()},C=setInterval(v,2e3);return v(),()=>clearInterval(C)},Ne={axes:!!mi("three-inspect.axes"),background:Ua,fogColor:"#000000",grid:!!mi("three-inspect.grid"),gridCellSize:mi("three-inspect.gridCellSize")??1,gridColor:mi("three-inspect.gridColor")??"#ffffff",gridDistance:mi("three-inspect.gridDistance")??100,gridLargeCellSize:mi("three-inspect.largeCellSize")??10},Qa=new Ft,et={axes:new Gl(1e3),grid:new wu(Ne.gridCellSize,Ne.gridLargeCellSize,Ne.gridColor,Ne.gridDistance)},Ig=()=>{const{scene:p}=at;return et.axes=new Gl(1e3),et.axes.name="Axes helper",et.axes.userData.THREE_INSPECT_OMIT=!0,et.grid.name="Grid helper",et.grid.userData.THREE_INSPECT_OMIT=!0,Ne.grid&&p.add(et.grid),Ne.axes&&p.add(et.axes),()=>{p.remove(et.grid,et.axes)}},xg=p=>{const{scene:o}=at,t=[],n=c=>{o[Ne[c]?"add":"remove"](et[c]),Ne[c]?ai(`three-inspect.${c}`,!0):ai(`three-inspect.${c}`,!1)},r=c=>{Qa.set(Ne.gridColor),et.grid.cellSize=Ne.gridCellSize,et.grid.largeCellSize=Ne.gridLargeCellSize,et.grid.color instanceof Ft?et.grid.color.copy(Qa):et.grid.color=Qa,et.grid.distance=Ne.gridDistance,ai(c,Ne[c])};if(p.addInput(Ne,"axes",{label:"axes"}).on("change",()=>n("axes")),p.addInput(Ne,"grid",{label:"grid"}).on("change",()=>n("grid")),p.addInput(Ne,"gridCellSize",{label:"cell size"}).on("change",()=>r("gridCellSize")),p.addInput(Ne,"gridLargeCellSize",{label:"large cell size",step:1}).on("change",()=>r("gridLargeCellSize")),p.addInput(Ne,"gridColor",{label:"color",step:1}).on("change",()=>r("gridColor")),p.addInput(Ne,"gridDistance",{label:"distance",step:1}).on("change",()=>r("gridDistance")),o.fog!==null){Ne.fogColor=`#${o.fog.color.getHexString().toUpperCase()}`;const c=p.addFolder({title:"Fog"});c.addInput(Ne,"fogColor",{label:"color"}).on("change",()=>{var h;(h=o.fog)==null||h.color.set(Ne.fogColor)}),"near"in o.fog&&c.addInput(o.fog,"near"),"far"in o.fog&&c.addInput(o.fog,"far")}return p.addSeparator(),t.push(vt(p,o,"background")),p.addSeparator(),t.push(Eg(p),()=>{o.remove(et.grid),et.axes.dispose()}),t},Bg=p=>{const{renderer:o}=at,t=o.domElement,n=new nc,r=new Et,c=h=>{const{scene:g,camera:m}=at;r.x=h.clientX/t.clientWidth*2-1,r.y=-(h.clientY/t.clientHeight*2)+1,n.setFromCamera(r,m);const v=n.intersectObjects(g.children).filter(C=>C.object.userData.THREE_INSPECT_OMIT!==!0);p(v)};kc.addEventListener("enable-select",h=>{h.enabled?t.addEventListener("pointerdown",c,{passive:!0}):t.removeEventListener("pointerdown",c)})},yg=p=>{const o=It.prototype.add,t=It.prototype.remove,n=It.prototype.clear;return It.prototype.add=function(...r){o.call(this,...r);for(let c=0,h=r.length;c<h;c+=1)rr(p,r[c],this);return this},It.prototype.remove=function(...r){t.call(this,...r);for(let c=0,h=r.length;c<h;c+=1)Po(r[c]);return this},It.prototype.clear=function(){const{children:r}=this;n.call(this);for(let c=0,h=r.length;c<h;c+=1)Po(r[c]);return this},()=>{It.prototype.add=o,It.prototype.remove=t,It.prototype.clear=n}},Qg=(p,o)=>{o.name&&ai("three-inspect.selected",o.name);const t=Qc(p);let n;return"isPerspectiveCamera"in o||"isOrthographicCamera"in o?n=pg(t,o):"isScene"in o?n=xg(t):"isLight"in o?n=fg(t,o):n=Cg(t,o),()=>{n.forEach(r=>r()),t.dispose()}},kg=(p,o,t)=>{const{scene:n}=at,r=yg(o);let c;Bg(m=>{if(m.length<1)return;let v;for(;v===void 0;){const C=m.shift();if(C===void 0)break;v=gg(C.object)}v!==void 0&&(c!==void 0&&(c.selected=!1),v.selected=!0,v.dom.scrollIntoView())});let h=null;p.on("deselect",()=>{h==null||h(),h=null,c=void 0}),p.on("select",m=>{h==null||h(),h=null,c=m;const v=m.text==="Scene"?n:Ba(m);v!==void 0&&(h=Qg(t,v))}),p.on("reparent",m=>{for(let v=0,C=m.length;v<C;v+=1){const{item:x,newParent:Q}=m[v],P=Ba(x),D=Q.text==="Scene"?n:Ba(Q);D!==void 0&&P!==void 0&&D.attach(P)}});{const{children:m}=n;for(let v=0,C=m.length;v<C;v+=1)rr(o,m[v],n)}const g=()=>{const{children:m}=n;for(let v=0,C=m.length;v<C;v+=1)Po(m[v])};return()=>{r(),p.clearTreeItems(),g()}},Pg=p=>{const o=document.createElement("div");o.className="sticky bottom-0 h-[105px]",p.append(o);const t=new ws.Pane({container:o});t.registerPlugin(Ic),t.addSeparator();const n=1048576,{memory:r}=performance,c={memory:r?r.usedJSHeapSize/n:0,time:""},h=performance.now();let g=0;const m=()=>{g=(performance.now()-h)/1e3;const P=g%60|0,D=g/60|0,G=g/60/60|0;c.time=`${G<10?`0${G}`:G}:${D<10?`0${D}`:D}:${P<10?`0${P}`:P}`};m();const v=setInterval(m,1e3);t.addMonitor(c,"time",{interval:1e3});const C=t.addBlade({label:"fps",lineCount:2,view:"fpsgraph"});let x=-1;r&&(t.addMonitor(c,"memory",{max:r.jsHeapSizeLimit/n,min:0,view:"graph"}),x=setInterval(()=>{c.memory=r.usedJSHeapSize/n},3e3));const Q=()=>{const P=C;P.end(),P.begin()};return nr(Q),()=>{t.dispose(),clearInterval(v),clearInterval(x),sr(Q)}},Dg=p=>{const o=[],t=document.createElement("div");if(t.className=p.location==="right"?"z-[100] absolute top-0 left-0 w-screen h-screen flex":"z-[100] absolute top-0 right-0 w-[350px] h-screen flex",at.root=t,p.location==="right"){const v=dg();t.append(v);let C=window.innerWidth;const x=()=>{const{innerWidth:Q}=window,P=Q-C;v.style.width=`${v.clientWidth+P}px`,C=Q};window.addEventListener("resize",x,{passive:!0}),o.push(()=>window.removeEventListener("resize",x))}const{controls:n,nav:r,treeroot:c,treeview:h,pane:g}=$u(),{addPane:m}=ag(n,r);return o.push(Pg(n),kg(h,c,g)),t.append(n),document.body.append(t),{addPane:m,disposers:o}},Dc=document.createElement("style");Dc.textContent=Du;document.head.append(Dc);class Sg{constructor({scene:o,camera:t,renderer:n,composer:r,options:c={}}){N(this,"disposers",[]);N(this,"addPane");N(this,"dispose",()=>{Pu();for(let o=this.disposers.length-1;o>-1;o-=1)this.disposers[o]();this.disposers.slice(0,this.disposers.length)});if(!o){const v="three-inspect constructor arguments have changed. Consult docs for new args: https://www.npmjs.com/package/three-inspect";throw new Error(v)}at.scene=o,at.camera=t,at.renderer=n,at.composer=r??void 0;const{disposers:h,addPane:g}=Dg({location:"right",...c});this.addPane=g,this.disposers.push(...h,Ig());const m=mi("three-inspect.controls");m!==null&&_c(m,t),ku()}registerPlugin(o){this.disposers.push(o(this))}}function Rg(p){let o,t,n,r;return o=new cn.CylinderGeometry({props:{args:[.001,.03,p[1]]}}),n=new cn.MeshStandardMaterial({props:{color:p[0]}}),{c(){tt(o.$$.fragment),t=Gn(),tt(n.$$.fragment)},l(c){it(o.$$.fragment,c),t=On(c),it(n.$$.fragment,c)},m(c,h){nt(o,c,h),Un(c,t,h),nt(n,c,h),r=!0},p(c,h){const g={};h&2&&(g.args=[.001,.03,c[1]]),o.$set(g);const m={};h&1&&(m.color=c[0]),n.$set(m)},i(c){r||(Ue(o.$$.fragment,c),Ue(n.$$.fragment,c),r=!0)},o(c){qe(o.$$.fragment,c),qe(n.$$.fragment,c),r=!1},d(c){c&&jn(t),st(o,c),st(n,c)}}}function Lg(p){let o,t;const n=[{"position.z":-.8},{"rotation.x":-Math.PI/2},p[2]];let r={$$slots:{default:[Rg]},$$scope:{ctx:p}};for(let c=0;c<n.length;c+=1)r=ka(r,n[c]);return o=new cn.Mesh({props:r}),{c(){tt(o.$$.fragment)},l(c){it(o.$$.fragment,c)},m(c,h){nt(o,c,h),t=!0},p(c,[h]){const g=h&4?sp(n,[n[0],h&0&&{"rotation.x":-Math.PI/2},h&4&&op(c[2])]):{};h&11&&(g.$$scope={dirty:h,ctx:c}),o.$set(g)},i(c){t||(Ue(o.$$.fragment,c),t=!0)},o(c){qe(o.$$.fragment,c),t=!1},d(c){st(o,c)}}}function Mg(p,o,t){let{color:n}=o,{length:r=1}=o;return p.$$set=c=>{t(2,o=ka(ka({},o),qr(c))),"color"in c&&t(0,n=c.color),"length"in c&&t(1,r=c.length)},o=qr(o),[n,r,o]}class Lo extends Ha{constructor(o){super(),Ka(this,o,Mg,Lg,ja,{color:0,length:1})}}function Fl(p){let o,t;return o=new hp({props:{modelLeft:p[0].scene.clone(),modelRight:p[0].scene.clone(),$$slots:{right:[Fg],left:[Tg]},$$scope:{ctx:p}}}),{c(){tt(o.$$.fragment)},l(n){it(o.$$.fragment,n)},m(n,r){nt(o,n,r),t=!0},p(n,r){const c={};r&1&&(c.modelLeft=n[0].scene.clone()),r&1&&(c.modelRight=n[0].scene.clone()),r&32&&(c.$$scope={dirty:r,ctx:n}),o.$set(c)},i(n){t||(Ue(o.$$.fragment,n),t=!0)},o(n){qe(o.$$.fragment,n),t=!1},d(n){st(o,n)}}}function Tg(p){let o,t;return o=new Lo({props:{slot:"left",color:"red"}}),{c(){tt(o.$$.fragment)},l(n){it(o.$$.fragment,n)},m(n,r){nt(o,n,r),t=!0},p:ao,i(n){t||(Ue(o.$$.fragment,n),t=!0)},o(n){qe(o.$$.fragment,n),t=!1},d(n){st(o,n)}}}function Fg(p){let o,t;return o=new Lo({props:{slot:"right",color:"red"}}),{c(){tt(o.$$.fragment)},l(n){it(o.$$.fragment,n)},m(n,r){nt(o,n,r),t=!0},p:ao,i(n){t||(Ue(o.$$.fragment,n),t=!0)},o(n){qe(o.$$.fragment,n),t=!1},d(n){st(o,n)}}}function zg(p){let o,t;return o=new Lo({props:{slot:"left",color:"orange",length:.5}}),{c(){tt(o.$$.fragment)},l(n){it(o.$$.fragment,n)},m(n,r){nt(o,n,r),t=!0},p:ao,i(n){t||(Ue(o.$$.fragment,n),t=!0)},o(n){qe(o.$$.fragment,n),t=!1},d(n){st(o,n)}}}function Ng(p){let o,t;return o=new Lo({props:{slot:"right",color:"orange",length:.5}}),{c(){tt(o.$$.fragment)},l(n){it(o.$$.fragment,n)},m(n,r){nt(o,n,r),t=!0},p:ao,i(n){t||(Ue(o.$$.fragment,n),t=!0)},o(n){qe(o.$$.fragment,n),t=!1},d(n){st(o,n)}}}function Vg(p){let o,t,n,r=p[0]&&Fl(p);return t=new rp({props:{$$slots:{right:[Ng],left:[zg]},$$scope:{ctx:p}}}),{c(){r&&r.c(),o=Gn(),tt(t.$$.fragment)},l(c){r&&r.l(c),o=On(c),it(t.$$.fragment,c)},m(c,h){r&&r.m(c,h),Un(c,o,h),nt(t,c,h),n=!0},p(c,h){c[0]?r?(r.p(c,h),h&1&&Ue(r,1)):(r=Fl(c),r.c(),Ue(r,1),r.m(o.parentNode,o)):r&&(kh(),qe(r,1,1,()=>{r=null}),Ph());const g={};h&32&&(g.$$scope={dirty:h,ctx:c}),t.$set(g)},i(c){n||(Ue(r),Ue(t.$$.fragment,c),n=!0)},o(c){qe(r),qe(t.$$.fragment,c),n=!1},d(c){c&&jn(o),r&&r.d(c),st(t,c)}}}function Gg(p){let o,t,n,r;return o=new cn.CircleGeometry({props:{args:[1]}}),n=new cn.MeshBasicMaterial({}),{c(){tt(o.$$.fragment),t=Gn(),tt(n.$$.fragment)},l(c){it(o.$$.fragment,c),t=On(c),it(n.$$.fragment,c)},m(c,h){nt(o,c,h),Un(c,t,h),nt(n,c,h),r=!0},p:ao,i(c){r||(Ue(o.$$.fragment,c),Ue(n.$$.fragment,c),r=!0)},o(c){qe(o.$$.fragment,c),qe(n.$$.fragment,c),r=!1},d(c){c&&jn(t),st(o,c),st(n,c)}}}function Og(p){let o,t,n,r,c,h,g,m;return o=new ap({props:{$$slots:{default:[Vg]},$$scope:{ctx:p}}}),n=new cn.Mesh({props:{rotation:[-Math.PI/2,0,0],$$slots:{default:[Gg]},$$scope:{ctx:p}}}),c=new cn.AmbientLight({}),g=new cn.DirectionalLight({}),{c(){tt(o.$$.fragment),t=Gn(),tt(n.$$.fragment),r=Gn(),tt(c.$$.fragment),h=Gn(),tt(g.$$.fragment)},l(v){it(o.$$.fragment,v),t=On(v),it(n.$$.fragment,v),r=On(v),it(c.$$.fragment,v),h=On(v),it(g.$$.fragment,v)},m(v,C){nt(o,v,C),Un(v,t,C),nt(n,v,C),Un(v,r,C),nt(c,v,C),Un(v,h,C),nt(g,v,C),m=!0},p(v,[C]){const x={};C&33&&(x.$$scope={dirty:C,ctx:v}),o.$set(x);const Q={};C&32&&(Q.$$scope={dirty:C,ctx:v}),n.$set(Q)},i(v){m||(Ue(o.$$.fragment,v),Ue(n.$$.fragment,v),Ue(c.$$.fragment,v),Ue(g.$$.fragment,v),m=!0)},o(v){qe(o.$$.fragment,v),qe(n.$$.fragment,v),qe(c.$$.fragment,v),qe(g.$$.fragment,v),m=!1},d(v){v&&(jn(t),jn(r),jn(h)),st(o,v),st(n,v),st(c,v),st(g,v)}}}function Ug(p,o,t){let n;const{scene:r,camera:c,renderer:h}=Nl();c.current.position.z=1.75,c.current.lookAt(0,1.75,1);const g=Qp(`${dp}/htc_vive_controller.glb`);return Qh(p,g,m=>t(0,n=m)),localStorage.getItem("debug")&&new Sg({scene:r,camera:c.current,renderer:h}),[n,g]}class jg extends Ha{constructor(o){super(),Ka(this,o,Ug,Og,ja,{})}}function Hg(p){let o,t;return o=new jg({}),{c(){tt(o.$$.fragment)},l(n){it(o.$$.fragment,n)},m(n,r){nt(o,n,r),t=!0},i(n){t||(Ue(o.$$.fragment,n),t=!0)},o(n){qe(o.$$.fragment,n),t=!1},d(n){st(o,n)}}}function Kg(p){let o,t,n,r;return o=new lp({props:{$$slots:{default:[Hg]},$$scope:{ctx:p}}}),n=new cp({}),{c(){tt(o.$$.fragment),t=Gn(),tt(n.$$.fragment)},l(c){it(o.$$.fragment,c),t=On(c),it(n.$$.fragment,c)},m(c,h){nt(o,c,h),Un(c,t,h),nt(n,c,h),r=!0},p(c,[h]){const g={};h&1&&(g.$$scope={dirty:h,ctx:c}),o.$set(g)},i(c){r||(Ue(o.$$.fragment,c),Ue(n.$$.fragment,c),r=!0)},o(c){qe(o.$$.fragment,c),qe(n.$$.fragment,c),r=!1},d(c){c&&jn(t),st(o,c),st(n,c)}}}class ib extends Ha{constructor(o){super(),Ka(this,o,null,Kg,ja,{})}}export{ib as component};
