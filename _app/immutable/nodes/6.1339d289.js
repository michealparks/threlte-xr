import{s as B,p as K,G as L,y as v,B as S,C,D as N,a as y,c as w,i as h,d as x,F as W,K as z,z as T,e as j}from"../chunks/scheduler.8d990d37.js";import{S as R,i as H,f as q,b as m,d as c,m as g,a as $,t as u,e as p,g as A,c as E}from"../chunks/index.058f026f.js";import{u as G,b as O,T as I,g as Q,a as U,X as V,H as Y,e as Z}from"../chunks/xr.9eb1b8fe.js";import{B as ee}from"../chunks/button-vr.5a80eca5.js";import{R as M,C as X,u as te,W as ne,D as re}from"../chunks/Collider.9a12e3df.js";import{e as F}from"../chunks/each.d7561281.js";import{w as ae}from"../chunks/index.27ef76fe.js";const ie=["wrist","thumb-metacarpal","thumb-phalanx-proximal","thumb-phalanx-distal","thumb-tip","index-finger-metacarpal","index-finger-phalanx-proximal","index-finger-phalanx-intermediate","index-finger-phalanx-distal","index-finger-tip","middle-finger-metacarpal","middle-finger-phalanx-proximal","middle-finger-phalanx-intermediate","middle-finger-phalanx-distal","middle-finger-tip","ring-finger-metacarpal","ring-finger-phalanx-proximal","ring-finger-phalanx-intermediate","ring-finger-phalanx-distal","ring-finger-tip","pinky-finger-metacarpal","pinky-finger-phalanx-proximal","pinky-finger-phalanx-intermediate","pinky-finger-phalanx-distal","pinky-finger-tip"];function se(s){let t,a;return t=new X({props:{shape:"ball",args:[s[1]]}}),{c(){m(t.$$.fragment)},l(n){c(t.$$.fragment,n)},m(n,i){g(t,n,i),a=!0},p:v,i(n){a||($(t.$$.fragment,n),a=!0)},o(n){u(t.$$.fragment,n),a=!1},d(n){p(t,n)}}}function le(s){let t,a,n;function i(r){s[4](r)}let e={type:"kinematicPosition",$$slots:{default:[se]},$$scope:{ctx:s}};return s[0]!==void 0&&(e.rigidBody=s[0]),t=new M({props:e}),K.push(()=>q(t,"rigidBody",i)),{c(){m(t.$$.fragment)},l(r){c(t.$$.fragment,r)},m(r,f){g(t,r,f),n=!0},p(r,[f]){const _={};f&256&&(_.$$scope={dirty:f,ctx:r}),!a&&f&1&&(a=!0,_.rigidBody=r[0],L(()=>a=!1)),t.$set(_)},i(r){n||($(t.$$.fragment,r),n=!0)},o(r){u(t.$$.fragment,r),n=!1},d(r){p(t,r)}}}function fe(s,t,a){let{jointIndex:n}=t,{handIndex:i}=t,e;const{xr:r}=G().renderer,_=r.getHand(i).joints[ie[n]],d=_.jointRadius??1e-4;O(()=>{if(_===void 0||e===void 0)return;const{x:o,y:b,z:J}=_.position;e.setNextKinematicTranslation({x:o,y:b,z:J})});function l(o){e=o,a(0,e)}return s.$$set=o=>{"jointIndex"in o&&a(2,n=o.jointIndex),"handIndex"in o&&a(3,i=o.handIndex)},[e,d,n,i,l]}class D extends R{constructor(t){super(),H(this,t,fe,le,B,{jointIndex:2,handIndex:3})}}function oe(s){let t,a,n,i;return t=new I.BoxGeometry({props:{args:[k,k,k]}}),n=new I.MeshPhysicalMaterial({props:{roughness:0,color:"red"}}),{c(){m(t.$$.fragment),a=y(),m(n.$$.fragment)},l(e){c(t.$$.fragment,e),a=w(e),c(n.$$.fragment,e)},m(e,r){g(t,e,r),h(e,a,r),g(n,e,r),i=!0},p:v,i(e){i||($(t.$$.fragment,e),$(n.$$.fragment,e),i=!0)},o(e){u(t.$$.fragment,e),u(n.$$.fragment,e),i=!1},d(e){e&&x(a),p(t,e),p(n,e)}}}function $e(s){let t,a,n,i;return t=new X({props:{shape:"cuboid",args:[k/2,k/2,k/2]}}),n=new I.Mesh({props:{$$slots:{default:[oe]},$$scope:{ctx:s}}}),{c(){m(t.$$.fragment),a=y(),m(n.$$.fragment)},l(e){c(t.$$.fragment,e),a=w(e),c(n.$$.fragment,e)},m(e,r){g(t,e,r),h(e,a,r),g(n,e,r),i=!0},p(e,r){const f={};r&2&&(f.$$scope={dirty:r,ctx:e}),n.$set(f)},i(e){i||($(t.$$.fragment,e),$(n.$$.fragment,e),i=!0)},o(e){u(t.$$.fragment,e),u(n.$$.fragment,e),i=!1},d(e){e&&x(a),p(t,e),p(n,e)}}}function ue(s){let t,a;return t=new M({props:{type:"dynamic",canSleep:!1,$$slots:{default:[$e]},$$scope:{ctx:s}}}),{c(){m(t.$$.fragment)},l(n){c(t.$$.fragment,n)},m(n,i){g(t,n,i),a=!0},p(n,i){const e={};i&2&&(e.$$scope={dirty:i,ctx:n}),t.$set(e)},i(n){a||($(t.$$.fragment,n),a=!0)},o(n){u(t.$$.fragment,n),a=!1},d(n){p(t,n)}}}function me(s){let t,a;const n=[s[0]];let i={$$slots:{default:[ue]},$$scope:{ctx:s}};for(let e=0;e<n.length;e+=1)i=S(i,n[e]);return t=new I.Group({props:i}),{c(){m(t.$$.fragment)},l(e){c(t.$$.fragment,e)},m(e,r){g(t,e,r),a=!0},p(e,[r]){const f=r&1?Q(n,[U(e[0])]):{};r&2&&(f.$$scope={dirty:r,ctx:e}),t.$set(f)},i(e){a||($(t.$$.fragment,e),a=!0)},o(e){u(t.$$.fragment,e),a=!1},d(e){p(t,e)}}}const k=.06;function ce(s,t,a){const n=[];let i=C(t,n);return s.$$set=e=>{t=S(S({},t),N(e)),a(0,i=C(t,n))},[i]}class ge extends R{constructor(t){super(),H(this,t,ce,me,B,{})}}const pe=()=>{const{xr:s}=G().renderer;let t=s.getHand(0).joints["index-finger-tip"];const a=ae((t==null?void 0:t.jointRadius)!==void 0),n=setInterval(()=>{t=s.getHand(0).joints["index-finger-tip"],(t==null?void 0:t.jointRadius)!==void 0&&(a.set(!0),clearInterval(n))},250);return W(()=>clearInterval(n)),a};function de(s,t,a){const n=s.slice();return n[4]=t[a],n[6]=a,n}function _e(s,t,a){const n=s.slice();return n[4]=t[a],n[8]=a,n}function P(s){let t,a,n=F({length:25}),i=[];for(let e=0;e<n.length;e+=1)i[e]=he(_e(s,n,e));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=j()},l(e){for(let r=0;r<i.length;r+=1)i[r].l(e);t=j()},m(e,r){for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(e,r);h(e,t,r),a=!0},i(e){if(!a){for(let r=0;r<n.length;r+=1)$(i[r]);a=!0}},o(e){i=i.filter(Boolean);for(let r=0;r<i.length;r+=1)u(i[r]);a=!1},d(e){e&&x(t),z(i,e)}}}function he(s){let t,a,n,i;return t=new D({props:{jointIndex:s[8],handIndex:0}}),n=new D({props:{jointIndex:s[8],handIndex:1}}),{c(){m(t.$$.fragment),a=y(),m(n.$$.fragment)},l(e){c(t.$$.fragment,e),a=w(e),c(n.$$.fragment,e)},m(e,r){g(t,e,r),h(e,a,r),g(n,e,r),i=!0},p:v,i(e){i||($(t.$$.fragment,e),$(n.$$.fragment,e),i=!0)},o(e){u(t.$$.fragment,e),u(n.$$.fragment,e),i=!1},d(e){e&&x(a),p(t,e),p(n,e)}}}function xe(s){let t,a,n,i;t=new Y({});let e=s[0]&&s[1]&&P(s);return{c(){m(t.$$.fragment),a=y(),e&&e.c(),n=j()},l(r){c(t.$$.fragment,r),a=w(r),e&&e.l(r),n=j()},m(r,f){g(t,r,f),h(r,a,f),e&&e.m(r,f),h(r,n,f),i=!0},p(r,f){r[0]&&r[1]?e?f&3&&$(e,1):(e=P(r),e.c(),$(e,1),e.m(n.parentNode,n)):e&&(A(),u(e,1,1,()=>{e=null}),E())},i(r){i||($(t.$$.fragment,r),$(e),i=!0)},o(r){u(t.$$.fragment,r),u(e),i=!1},d(r){r&&(x(a),x(n)),p(t,r),e&&e.d(r)}}}function be(s){let t,a;return t=new ge({props:{position:[(s[6]%5-2)/2,.5+s[6]/50,-.5]}}),{c(){m(t.$$.fragment)},l(n){c(t.$$.fragment,n)},m(n,i){g(t,n,i),a=!0},p:v,i(n){a||($(t.$$.fragment,n),a=!0)},o(n){u(t.$$.fragment,n),a=!1},d(n){p(t,n)}}}function ye(s){let t,a,n,i,e,r,f;t=new V({props:{$$slots:{default:[xe]},$$scope:{ctx:s}}});let _=F({length:100}),d=[];for(let l=0;l<_.length;l+=1)d[l]=be(de(s,_,l));return i=new I.AmbientLight({props:{intensity:.5}}),r=new I.SpotLight({props:{position:[1,8,1],angle:.3,penumbra:1,intensity:1,castShadow:!0}}),{c(){m(t.$$.fragment),a=y();for(let l=0;l<d.length;l+=1)d[l].c();n=y(),m(i.$$.fragment),e=y(),m(r.$$.fragment)},l(l){c(t.$$.fragment,l),a=w(l);for(let o=0;o<d.length;o+=1)d[o].l(l);n=w(l),c(i.$$.fragment,l),e=w(l),c(r.$$.fragment,l)},m(l,o){g(t,l,o),h(l,a,o);for(let b=0;b<d.length;b+=1)d[b]&&d[b].m(l,o);h(l,n,o),g(i,l,o),h(l,e,o),g(r,l,o),f=!0},p(l,[o]){const b={};o&515&&(b.$$scope={dirty:o,ctx:l}),t.$set(b)},i(l){if(!f){$(t.$$.fragment,l);for(let o=0;o<_.length;o+=1)$(d[o]);$(i.$$.fragment,l),$(r.$$.fragment,l),f=!0}},o(l){u(t.$$.fragment,l),d=d.filter(Boolean);for(let o=0;o<d.length;o+=1)u(d[o]);u(i.$$.fragment,l),u(r.$$.fragment,l),f=!1},d(l){l&&(x(a),x(n),x(e)),p(t,l),z(d,l),p(i,l),p(r,l)}}}function we(s,t,a){let n,i;const{isHandTracking:e}=te();T(s,e,f=>a(0,n=f));const r=pe();return T(s,r,f=>a(1,i=f)),[n,i,e,r]}class ke extends R{constructor(t){super(),H(this,t,we,ye,B,{})}}function Ie(s){let t,a;return t=new re({}),{c(){m(t.$$.fragment)},l(n){c(t.$$.fragment,n)},m(n,i){g(t,n,i),a=!0},i(n){a||($(t.$$.fragment,n),a=!0)},o(n){u(t.$$.fragment,n),a=!1},d(n){p(t,n)}}}function ve(s){let t=localStorage.getItem("debug"),a,n,i,e=t&&Ie();return n=new ke({}),{c(){e&&e.c(),a=y(),m(n.$$.fragment)},l(r){e&&e.l(r),a=w(r),c(n.$$.fragment,r)},m(r,f){e&&e.m(r,f),h(r,a,f),g(n,r,f),i=!0},p:v,i(r){i||($(e),$(n.$$.fragment,r),i=!0)},o(r){u(e),u(n.$$.fragment,r),i=!1},d(r){r&&x(a),e&&e.d(r),p(n,r)}}}function je(s){let t,a;return t=new ne({props:{gravity:[0,0,0],$$slots:{default:[ve]},$$scope:{ctx:s}}}),{c(){m(t.$$.fragment)},l(n){c(t.$$.fragment,n)},m(n,i){g(t,n,i),a=!0},p(n,i){const e={};i&1&&(e.$$scope={dirty:i,ctx:n}),t.$set(e)},i(n){a||($(t.$$.fragment,n),a=!0)},o(n){u(t.$$.fragment,n),a=!1},d(n){p(t,n)}}}function Be(s){let t,a,n,i;return t=new Z({props:{$$slots:{default:[je]},$$scope:{ctx:s}}}),n=new ee({}),{c(){m(t.$$.fragment),a=y(),m(n.$$.fragment)},l(e){c(t.$$.fragment,e),a=w(e),c(n.$$.fragment,e)},m(e,r){g(t,e,r),h(e,a,r),g(n,e,r),i=!0},p(e,[r]){const f={};r&1&&(f.$$scope={dirty:r,ctx:e}),t.$set(f)},i(e){i||($(t.$$.fragment,e),$(n.$$.fragment,e),i=!0)},o(e){u(t.$$.fragment,e),u(n.$$.fragment,e),i=!1},d(e){e&&x(a),p(t,e),p(n,e)}}}class ze extends R{constructor(t){super(),H(this,t,null,Be,B,{})}}export{ze as component};
