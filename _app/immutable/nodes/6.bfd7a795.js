import{s as M,B as P,C as E,z as ee,D as se,r as fe,a as w,e as B,c as x,i as y,u as le,v as oe,w as $e,d as k,p as ue,G as me,y as J,I as ce}from"../chunks/scheduler.d099de3d.js";import{S as R,i as z,b as c,d as g,m as p,a as $,t as u,e as _,g as W,c as A,f as ge}from"../chunks/index.5391bafe.js";import{T as I,g as pe,a as _e,V as N,G as de,b as te,X as he,H as be,e as ye}from"../chunks/xr.3ffe6951.js";import{B as ke}from"../chunks/button-vr.b6044e14.js";import{b as we,R as ne,C as re,I as xe,a as ve,u as Be,W as Ie,D as je}from"../chunks/Instance.3a1da6a2.js";import{e as X,u as Te,o as Ce}from"../chunks/each.f8e9f536.js";import{b as Se}from"../chunks/index.be0323b2.js";import"../chunks/PositionMesh.2245e7f8.js";const Ge=["wrist","thumb-metacarpal","thumb-phalanx-proximal","thumb-phalanx-distal","thumb-tip","index-finger-metacarpal","index-finger-phalanx-proximal","index-finger-phalanx-intermediate","index-finger-phalanx-distal","index-finger-tip","middle-finger-metacarpal","middle-finger-phalanx-proximal","middle-finger-phalanx-intermediate","middle-finger-phalanx-distal","middle-finger-tip","ring-finger-metacarpal","ring-finger-phalanx-proximal","ring-finger-phalanx-intermediate","ring-finger-phalanx-distal","ring-finger-tip","pinky-finger-metacarpal","pinky-finger-phalanx-proximal","pinky-finger-phalanx-intermediate","pinky-finger-phalanx-distal","pinky-finger-tip"],Me=l=>({ref:l&16384}),K=l=>({ref:l[14]});function O(l){let n,a;return n=new I.Mesh({props:{$$slots:{default:[Re]},$$scope:{ctx:l}}}),{c(){c(n.$$.fragment)},l(t){g(n.$$.fragment,t)},m(t,i){p(n,t,i),a=!0},p(t,i){const e={};i&513&&(e.$$scope={dirty:i,ctx:t}),n.$set(e)},i(t){a||($(n.$$.fragment,t),a=!0)},o(t){u(n.$$.fragment,t),a=!1},d(t){_(n,t)}}}function Re(l){let n,a,t,i;return n=new I.SphereGeometry({props:{args:[l[0]]}}),t=new I.MeshBasicMaterial({props:{wireframe:!0,transparent:!0,opacity:.25}}),{c(){c(n.$$.fragment),a=w(),c(t.$$.fragment)},l(e){g(n.$$.fragment,e),a=x(e),g(t.$$.fragment,e)},m(e,r){p(n,e,r),y(e,a,r),p(t,e,r),i=!0},p(e,r){const s={};r&1&&(s.args=[e[0]]),n.$set(s)},i(e){i||($(n.$$.fragment,e),$(t.$$.fragment,e),i=!0)},o(e){u(n.$$.fragment,e),u(t.$$.fragment,e),i=!1},d(e){e&&k(a),_(n,e),_(t,e)}}}function ze(l){let n,a,t;const i=l[8].default,e=fe(i,l,l[9],K);let r=l[1]&&O(l);return{c(){e&&e.c(),n=w(),r&&r.c(),a=B()},l(s){e&&e.l(s),n=x(s),r&&r.l(s),a=B()},m(s,m){e&&e.m(s,m),y(s,n,m),r&&r.m(s,m),y(s,a,m),t=!0},p(s,m){e&&e.p&&(!t||m&16896)&&le(e,i,s,s[9],t?$e(i,s[9],m,Me):oe(s[9]),K),s[1]?r?(r.p(s,m),m&2&&$(r,1)):(r=O(s),r.c(),$(r,1),r.m(a.parentNode,a)):r&&(W(),u(r,1,1,()=>{r=null}),A())},i(s){t||($(e,s),$(r),t=!0)},o(s){u(e,s),u(r),t=!1},d(s){s&&(k(n),k(a)),e&&e.d(s),r&&r.d(s)}}}function He(l){let n,a;const t=[{is:l[3]},l[4]];let i={$$slots:{default:[ze,({ref:e})=>({14:e}),({ref:e})=>e?16384:0]},$$scope:{ctx:l}};for(let e=0;e<t.length;e+=1)i=P(i,t[e]);return n=new I({props:i}),{c(){c(n.$$.fragment)},l(e){g(n.$$.fragment,e)},m(e,r){p(n,e,r),a=!0},p(e,[r]){const s=r&24?pe(t,[r&8&&{is:e[3]},r&16&&_e(e[4])]):{};r&16899&&(s.$$scope={dirty:r,ctx:e}),n.$set(s)},i(e){a||($(n.$$.fragment,e),a=!0)},o(e){u(n.$$.fragment,e),a=!1},d(e){_(n,e)}}}function Ve(l,n,a){const t=["strength","range","gravityType","gravitationalConstant"];let i=E(n,t),e,{$$slots:r={},$$scope:s}=n,{strength:m=1}=n,{range:h=50}=n,{gravityType:b="static"}=n,{gravitationalConstant:f=6673e-14}=n;const{world:o,debug:v}=we();ee(l,v,d=>a(1,e=d));const V=new N;let F=new de;const ae={static:(d,j,S,T,G)=>d,linear:(d,j,S,T,G)=>d*(T/S),newtonian:(d,j,S,T,G)=>G*d*j/Math.pow(T,2)};function ie(){const d=new N;F.getWorldPosition(V),o.forEachRigidBody(j=>{const{x:S,y:T,z:G}=j.translation(),L=new N(S,T,G),q=V.distanceTo(L);if(q<h){let H=ae[b](m,j.mass(),h,q,f);H=H===1/0?m:H,d.subVectors(V,L).normalize().multiplyScalar(H),j.applyImpulse(d,!0)}})}return te(()=>{ie()}),l.$$set=d=>{n=P(P({},n),se(d)),a(4,i=E(n,t)),"strength"in d&&a(5,m=d.strength),"range"in d&&a(0,h=d.range),"gravityType"in d&&a(6,b=d.gravityType),"gravitationalConstant"in d&&a(7,f=d.gravitationalConstant),"$$scope"in d&&a(9,s=d.$$scope)},[h,e,v,F,i,m,b,f,r,s]}class Ne extends R{constructor(n){super(),z(this,n,Ve,He,M,{strength:5,range:0,gravityType:6,gravitationalConstant:7})}}function Pe(l){let n,a;return n=new re({props:{shape:"ball",args:[l[1]]}}),{c(){c(n.$$.fragment)},l(t){g(n.$$.fragment,t)},m(t,i){p(n,t,i),a=!0},p(t,i){const e={};i&2&&(e.args=[t[1]]),n.$set(e)},i(t){a||($(n.$$.fragment,t),a=!0)},o(t){u(n.$$.fragment,t),a=!1},d(t){_(n,t)}}}function Xe(l){let n,a,t;function i(r){l[4](r)}let e={type:"kinematicPosition",$$slots:{default:[Pe]},$$scope:{ctx:l}};return l[0]!==void 0&&(e.rigidBody=l[0]),n=new ne({props:e}),ue.push(()=>ge(n,"rigidBody",i)),{c(){c(n.$$.fragment)},l(r){g(n.$$.fragment,r)},m(r,s){p(n,r,s),t=!0},p(r,[s]){const m={};s&66&&(m.$$scope={dirty:s,ctx:r}),!a&&s&1&&(a=!0,m.rigidBody=r[0],me(()=>a=!1)),n.$set(m)},i(r){t||($(n.$$.fragment,r),t=!0)},o(r){u(n.$$.fragment,r),t=!1},d(r){_(n,r)}}}function De(l,n,a){var h;let t,{jointIndex:i}=n,{hand:e}=n,r;const s=Se(e,Ge[i]);te(()=>{if(s.current===void 0||r===void 0)return;const{x:b,y:f,z:o}=s.current.position;r.setNextKinematicTranslation({x:b,y:f,z:o})});function m(b){r=b,a(0,r)}return l.$$set=b=>{"jointIndex"in b&&a(2,i=b.jointIndex),"hand"in b&&a(3,e=b.hand)},a(1,t=((h=s.current)==null?void 0:h.jointRadius)??1e-4),[r,t,i,e,m]}class Q extends R{constructor(n){super(),z(this,n,De,Xe,M,{jointIndex:2,hand:3})}}function U(l,n,a){const t=l.slice();return t[0]=n[a],t[2]=a,t}function Je(l){let n,a,t,i,e;return n=new re({props:{shape:"cuboid",args:[C/2,C/2,C/2]}}),t=new ve({props:{color:"hotpink"}}),{c(){c(n.$$.fragment),a=w(),c(t.$$.fragment),i=w()},l(r){g(n.$$.fragment,r),a=x(r),g(t.$$.fragment,r),i=x(r)},m(r,s){p(n,r,s),y(r,a,s),p(t,r,s),y(r,i,s),e=!0},p:J,i(r){e||($(n.$$.fragment,r),$(t.$$.fragment,r),e=!0)},o(r){u(n.$$.fragment,r),u(t.$$.fragment,r),e=!1},d(r){r&&(k(a),k(i)),_(n,r),_(t,r)}}}function Y(l,n){let a,t,i;return t=new ne({props:{$$slots:{default:[Je]},$$scope:{ctx:n}}}),{key:l,first:null,c(){a=B(),c(t.$$.fragment),this.h()},l(e){a=B(),g(t.$$.fragment,e),this.h()},h(){this.first=a},m(e,r){y(e,a,r),p(t,e,r),i=!0},p(e,r){n=e;const s={};r&8&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(e){i||($(t.$$.fragment,e),i=!0)},o(e){u(t.$$.fragment,e),i=!1},d(e){e&&k(a),_(t,e)}}}function We(l){let n,a,t,i,e=[],r=new Map,s,m;n=new I.BoxGeometry({props:{args:[C,C,C]}}),t=new I.MeshStandardMaterial({props:{roughness:0,metalness:.2}});let h=X({length:D});const b=f=>f[2];for(let f=0;f<h.length;f+=1){let o=U(l,h,f),v=b(o);r.set(v,e[f]=Y(v,o))}return{c(){c(n.$$.fragment),a=w(),c(t.$$.fragment),i=w();for(let f=0;f<e.length;f+=1)e[f].c();s=B()},l(f){g(n.$$.fragment,f),a=x(f),g(t.$$.fragment,f),i=x(f);for(let o=0;o<e.length;o+=1)e[o].l(f);s=B()},m(f,o){p(n,f,o),y(f,a,o),p(t,f,o),y(f,i,o);for(let v=0;v<e.length;v+=1)e[v]&&e[v].m(f,o);y(f,s,o),m=!0},p(f,o){o&0&&(h=X({length:D}),W(),e=Te(e,o,b,1,f,h,r,s.parentNode,Ce,Y,s,U),A())},i(f){if(!m){$(n.$$.fragment,f),$(t.$$.fragment,f);for(let o=0;o<h.length;o+=1)$(e[o]);m=!0}},o(f){u(n.$$.fragment,f),u(t.$$.fragment,f);for(let o=0;o<e.length;o+=1)u(e[o]);m=!1},d(f){f&&(k(a),k(i),k(s)),_(n,f),_(t,f);for(let o=0;o<e.length;o+=1)e[o].d(f)}}}function Ae(l){let n,a;return n=new xe({props:{limit:D,$$slots:{default:[We]},$$scope:{ctx:l}}}),{c(){c(n.$$.fragment)},l(t){g(n.$$.fragment,t)},m(t,i){p(n,t,i),a=!0},p(t,i){const e={};i&8&&(e.$$scope={dirty:i,ctx:t}),n.$set(e)},i(t){a||($(n.$$.fragment,t),a=!0)},o(t){u(n.$$.fragment,t),a=!1},d(t){_(n,t)}}}function Fe(l){let n,a;return n=new I.Group({props:{position:[0,1.7,0],$$slots:{default:[Ae]},$$scope:{ctx:l}}}),{c(){c(n.$$.fragment)},l(t){g(n.$$.fragment,t)},m(t,i){p(n,t,i),a=!0},p(t,[i]){const e={};i&8&&(e.$$scope={dirty:i,ctx:t}),n.$set(e)},i(t){a||($(n.$$.fragment,t),a=!0)},o(t){u(n.$$.fragment,t),a=!1},d(t){_(n,t)}}}const C=.02,D=100;class Le extends R{constructor(n){super(),z(this,n,null,Fe,M,{})}}function qe(l,n,a){const t=l.slice();return t[2]=n[a],t[4]=a,t}function Z(l){let n,a,t=X({length:25}),i=[];for(let e=0;e<t.length;e+=1)i[e]=Ee(qe(l,t,e));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();n=B()},l(e){for(let r=0;r<i.length;r+=1)i[r].l(e);n=B()},m(e,r){for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(e,r);y(e,n,r),a=!0},i(e){if(!a){for(let r=0;r<t.length;r+=1)$(i[r]);a=!0}},o(e){i=i.filter(Boolean);for(let r=0;r<i.length;r+=1)u(i[r]);a=!1},d(e){e&&k(n),ce(i,e)}}}function Ee(l){let n,a,t,i;return n=new Q({props:{jointIndex:l[4],hand:"left"}}),t=new Q({props:{jointIndex:l[4],hand:"right"}}),{c(){c(n.$$.fragment),a=w(),c(t.$$.fragment)},l(e){g(n.$$.fragment,e),a=x(e),g(t.$$.fragment,e)},m(e,r){p(n,e,r),y(e,a,r),p(t,e,r),i=!0},p:J,i(e){i||($(n.$$.fragment,e),$(t.$$.fragment,e),i=!0)},o(e){u(n.$$.fragment,e),u(t.$$.fragment,e),i=!1},d(e){e&&k(a),_(n,e),_(t,e)}}}function Ke(l){let n,a,t,i;n=new be({});let e=l[0]&&Z(l);return{c(){c(n.$$.fragment),a=w(),e&&e.c(),t=B()},l(r){g(n.$$.fragment,r),a=x(r),e&&e.l(r),t=B()},m(r,s){p(n,r,s),y(r,a,s),e&&e.m(r,s),y(r,t,s),i=!0},p(r,s){r[0]?e?s&1&&$(e,1):(e=Z(r),e.c(),$(e,1),e.m(t.parentNode,t)):e&&(W(),u(e,1,1,()=>{e=null}),A())},i(r){i||($(n.$$.fragment,r),$(e),i=!0)},o(r){u(n.$$.fragment,r),u(e),i=!1},d(r){r&&(k(a),k(t)),_(n,r),e&&e.d(r)}}}function Oe(l){let n,a,t,i,e,r,s,m,h,b;return n=new he({props:{$$slots:{default:[Ke]},$$scope:{ctx:l}}}),t=new Le({}),e=new I.AmbientLight({props:{intensity:.5}}),s=new I.SpotLight({props:{position:[1,8,1],angle:.3,penumbra:1,intensity:1,castShadow:!0}}),h=new Ne({props:{range:50,strength:1e-6,position:[0,1.7,0]}}),{c(){c(n.$$.fragment),a=w(),c(t.$$.fragment),i=w(),c(e.$$.fragment),r=w(),c(s.$$.fragment),m=w(),c(h.$$.fragment)},l(f){g(n.$$.fragment,f),a=x(f),g(t.$$.fragment,f),i=x(f),g(e.$$.fragment,f),r=x(f),g(s.$$.fragment,f),m=x(f),g(h.$$.fragment,f)},m(f,o){p(n,f,o),y(f,a,o),p(t,f,o),y(f,i,o),p(e,f,o),y(f,r,o),p(s,f,o),y(f,m,o),p(h,f,o),b=!0},p(f,[o]){const v={};o&33&&(v.$$scope={dirty:o,ctx:f}),n.$set(v)},i(f){b||($(n.$$.fragment,f),$(t.$$.fragment,f),$(e.$$.fragment,f),$(s.$$.fragment,f),$(h.$$.fragment,f),b=!0)},o(f){u(n.$$.fragment,f),u(t.$$.fragment,f),u(e.$$.fragment,f),u(s.$$.fragment,f),u(h.$$.fragment,f),b=!1},d(f){f&&(k(a),k(i),k(r),k(m)),_(n,f),_(t,f),_(e,f),_(s,f),_(h,f)}}}function Qe(l,n,a){let t;const{isHandTracking:i}=Be();return ee(l,i,e=>a(0,t=e)),[t,i]}class Ue extends R{constructor(n){super(),z(this,n,Qe,Oe,M,{})}}function Ye(l){let n,a;return n=new je({}),{c(){c(n.$$.fragment)},l(t){g(n.$$.fragment,t)},m(t,i){p(n,t,i),a=!0},i(t){a||($(n.$$.fragment,t),a=!0)},o(t){u(n.$$.fragment,t),a=!1},d(t){_(n,t)}}}function Ze(l){let n=localStorage.getItem("debug"),a,t,i,e=n&&Ye();return t=new Ue({}),{c(){e&&e.c(),a=w(),c(t.$$.fragment)},l(r){e&&e.l(r),a=x(r),g(t.$$.fragment,r)},m(r,s){e&&e.m(r,s),y(r,a,s),p(t,r,s),i=!0},p:J,i(r){i||($(e),$(t.$$.fragment,r),i=!0)},o(r){u(e),u(t.$$.fragment,r),i=!1},d(r){r&&k(a),e&&e.d(r),_(t,r)}}}function et(l){let n,a;return n=new Ie({props:{gravity:[0,0,0],$$slots:{default:[Ze]},$$scope:{ctx:l}}}),{c(){c(n.$$.fragment)},l(t){g(n.$$.fragment,t)},m(t,i){p(n,t,i),a=!0},p(t,i){const e={};i&1&&(e.$$scope={dirty:i,ctx:t}),n.$set(e)},i(t){a||($(n.$$.fragment,t),a=!0)},o(t){u(n.$$.fragment,t),a=!1},d(t){_(n,t)}}}function tt(l){let n,a,t,i;return n=new ye({props:{$$slots:{default:[et]},$$scope:{ctx:l}}}),t=new ke({}),{c(){c(n.$$.fragment),a=w(),c(t.$$.fragment)},l(e){g(n.$$.fragment,e),a=x(e),g(t.$$.fragment,e)},m(e,r){p(n,e,r),y(e,a,r),p(t,e,r),i=!0},p(e,[r]){const s={};r&1&&(s.$$scope={dirty:r,ctx:e}),n.$set(s)},i(e){i||($(n.$$.fragment,e),$(t.$$.fragment,e),i=!0)},o(e){u(n.$$.fragment,e),u(t.$$.fragment,e),i=!1},d(e){e&&k(a),_(n,e),_(t,e)}}}class $t extends R{constructor(n){super(),z(this,n,null,tt,M,{})}}export{$t as component};
