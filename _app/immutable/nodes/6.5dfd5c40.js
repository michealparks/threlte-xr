import{s as M,B as P,C as E,z as ee,D as se,r as fe,a as w,e as B,c as x,i as y,u as le,v as oe,w as $e,d as k,p as ue,G as me,y as J,H as ce}from"../chunks/scheduler.198d0952.js";import{S as R,i as H,b as c,d as g,m as p,a as u,t as m,e as _,g as W,c as A,f as ge}from"../chunks/index.2f815148.js";import{T as I,g as pe,a as _e,V as N,G as de,b as te,X as he,H as be,e as ye}from"../chunks/xr.80347a82.js";import{B as ke}from"../chunks/button-vr.6b4cc117.js";import{c as we,R as ne,C as re,I as xe,a as ve,u as Be,b as Ie,W as je,D as Ce}from"../chunks/code-link.fb1dae3a.js";import{e as X,u as Te,o as Se}from"../chunks/each.7df61979.js";import{b as Ge}from"../chunks/index.36eb6b8f.js";import"../chunks/PositionMesh.e89f8a5b.js";const Me=["wrist","thumb-metacarpal","thumb-phalanx-proximal","thumb-phalanx-distal","thumb-tip","index-finger-metacarpal","index-finger-phalanx-proximal","index-finger-phalanx-intermediate","index-finger-phalanx-distal","index-finger-tip","middle-finger-metacarpal","middle-finger-phalanx-proximal","middle-finger-phalanx-intermediate","middle-finger-phalanx-distal","middle-finger-tip","ring-finger-metacarpal","ring-finger-phalanx-proximal","ring-finger-phalanx-intermediate","ring-finger-phalanx-distal","ring-finger-tip","pinky-finger-metacarpal","pinky-finger-phalanx-proximal","pinky-finger-phalanx-intermediate","pinky-finger-phalanx-distal","pinky-finger-tip"],Re=l=>({ref:l&16384}),K=l=>({ref:l[14]});function O(l){let n,a;return n=new I.Mesh({props:{$$slots:{default:[He]},$$scope:{ctx:l}}}),{c(){c(n.$$.fragment)},l(t){g(n.$$.fragment,t)},m(t,s){p(n,t,s),a=!0},p(t,s){const e={};s&513&&(e.$$scope={dirty:s,ctx:t}),n.$set(e)},i(t){a||(u(n.$$.fragment,t),a=!0)},o(t){m(n.$$.fragment,t),a=!1},d(t){_(n,t)}}}function He(l){let n,a,t,s;return n=new I.SphereGeometry({props:{args:[l[0]]}}),t=new I.MeshBasicMaterial({props:{wireframe:!0,transparent:!0,opacity:.25}}),{c(){c(n.$$.fragment),a=w(),c(t.$$.fragment)},l(e){g(n.$$.fragment,e),a=x(e),g(t.$$.fragment,e)},m(e,r){p(n,e,r),y(e,a,r),p(t,e,r),s=!0},p(e,r){const i={};r&1&&(i.args=[e[0]]),n.$set(i)},i(e){s||(u(n.$$.fragment,e),u(t.$$.fragment,e),s=!0)},o(e){m(n.$$.fragment,e),m(t.$$.fragment,e),s=!1},d(e){e&&k(a),_(n,e),_(t,e)}}}function ze(l){let n,a,t;const s=l[8].default,e=fe(s,l,l[9],K);let r=l[1]&&O(l);return{c(){e&&e.c(),n=w(),r&&r.c(),a=B()},l(i){e&&e.l(i),n=x(i),r&&r.l(i),a=B()},m(i,$){e&&e.m(i,$),y(i,n,$),r&&r.m(i,$),y(i,a,$),t=!0},p(i,$){e&&e.p&&(!t||$&16896)&&le(e,s,i,i[9],t?$e(s,i[9],$,Re):oe(i[9]),K),i[1]?r?(r.p(i,$),$&2&&u(r,1)):(r=O(i),r.c(),u(r,1),r.m(a.parentNode,a)):r&&(W(),m(r,1,1,()=>{r=null}),A())},i(i){t||(u(e,i),u(r),t=!0)},o(i){m(e,i),m(r),t=!1},d(i){i&&(k(n),k(a)),e&&e.d(i),r&&r.d(i)}}}function Ve(l){let n,a;const t=[{is:l[3]},l[4]];let s={$$slots:{default:[ze,({ref:e})=>({14:e}),({ref:e})=>e?16384:0]},$$scope:{ctx:l}};for(let e=0;e<t.length;e+=1)s=P(s,t[e]);return n=new I({props:s}),{c(){c(n.$$.fragment)},l(e){g(n.$$.fragment,e)},m(e,r){p(n,e,r),a=!0},p(e,[r]){const i=r&24?pe(t,[r&8&&{is:e[3]},r&16&&_e(e[4])]):{};r&16899&&(i.$$scope={dirty:r,ctx:e}),n.$set(i)},i(e){a||(u(n.$$.fragment,e),a=!0)},o(e){m(n.$$.fragment,e),a=!1},d(e){_(n,e)}}}function Ne(l,n,a){const t=["strength","range","gravityType","gravitationalConstant"];let s=E(n,t),e,{$$slots:r={},$$scope:i}=n,{strength:$=1}=n,{range:d=50}=n,{gravityType:b="static"}=n,{gravitationalConstant:f=6673e-14}=n;const{world:o,debug:v}=we();ee(l,v,h=>a(1,e=h));const V=new N;let F=new de;const ae={static:(h,j,S,C,G)=>h,linear:(h,j,S,C,G)=>h*(C/S),newtonian:(h,j,S,C,G)=>G*h*j/Math.pow(C,2)};function ie(){const h=new N;F.getWorldPosition(V),o.forEachRigidBody(j=>{const{x:S,y:C,z:G}=j.translation(),L=new N(S,C,G),q=V.distanceTo(L);if(q<d){let z=ae[b]($,j.mass(),d,q,f);z=z===1/0?$:z,h.subVectors(V,L).normalize().multiplyScalar(z),j.applyImpulse(h,!0)}})}return te(()=>{ie()}),l.$$set=h=>{n=P(P({},n),se(h)),a(4,s=E(n,t)),"strength"in h&&a(5,$=h.strength),"range"in h&&a(0,d=h.range),"gravityType"in h&&a(6,b=h.gravityType),"gravitationalConstant"in h&&a(7,f=h.gravitationalConstant),"$$scope"in h&&a(9,i=h.$$scope)},[d,e,v,F,s,$,b,f,r,i]}class Pe extends R{constructor(n){super(),H(this,n,Ne,Ve,M,{strength:5,range:0,gravityType:6,gravitationalConstant:7})}}function Xe(l){let n,a;return n=new re({props:{shape:"ball",args:[l[1]]}}),{c(){c(n.$$.fragment)},l(t){g(n.$$.fragment,t)},m(t,s){p(n,t,s),a=!0},p(t,s){const e={};s&2&&(e.args=[t[1]]),n.$set(e)},i(t){a||(u(n.$$.fragment,t),a=!0)},o(t){m(n.$$.fragment,t),a=!1},d(t){_(n,t)}}}function De(l){let n,a,t;function s(r){l[4](r)}let e={type:"kinematicPosition",$$slots:{default:[Xe]},$$scope:{ctx:l}};return l[0]!==void 0&&(e.rigidBody=l[0]),n=new ne({props:e}),ue.push(()=>ge(n,"rigidBody",s)),{c(){c(n.$$.fragment)},l(r){g(n.$$.fragment,r)},m(r,i){p(n,r,i),t=!0},p(r,[i]){const $={};i&66&&($.$$scope={dirty:i,ctx:r}),!a&&i&1&&(a=!0,$.rigidBody=r[0],me(()=>a=!1)),n.$set($)},i(r){t||(u(n.$$.fragment,r),t=!0)},o(r){m(n.$$.fragment,r),t=!1},d(r){_(n,r)}}}function Je(l,n,a){var d;let t,{jointIndex:s}=n,{hand:e}=n,r;const i=Ge(e,Me[s]);te(()=>{if(i.current===void 0||r===void 0)return;const{x:b,y:f,z:o}=i.current.position;r.setNextKinematicTranslation({x:b,y:f,z:o})});function $(b){r=b,a(0,r)}return l.$$set=b=>{"jointIndex"in b&&a(2,s=b.jointIndex),"hand"in b&&a(3,e=b.hand)},a(1,t=((d=i.current)==null?void 0:d.jointRadius)??1e-4),[r,t,s,e,$]}class Q extends R{constructor(n){super(),H(this,n,Je,De,M,{jointIndex:2,hand:3})}}function U(l,n,a){const t=l.slice();return t[0]=n[a],t[2]=a,t}function We(l){let n,a,t,s,e;return n=new re({props:{shape:"cuboid",args:[T/2,T/2,T/2]}}),t=new ve({props:{color:"hotpink"}}),{c(){c(n.$$.fragment),a=w(),c(t.$$.fragment),s=w()},l(r){g(n.$$.fragment,r),a=x(r),g(t.$$.fragment,r),s=x(r)},m(r,i){p(n,r,i),y(r,a,i),p(t,r,i),y(r,s,i),e=!0},p:J,i(r){e||(u(n.$$.fragment,r),u(t.$$.fragment,r),e=!0)},o(r){m(n.$$.fragment,r),m(t.$$.fragment,r),e=!1},d(r){r&&(k(a),k(s)),_(n,r),_(t,r)}}}function Y(l,n){let a,t,s;return t=new ne({props:{$$slots:{default:[We]},$$scope:{ctx:n}}}),{key:l,first:null,c(){a=B(),c(t.$$.fragment),this.h()},l(e){a=B(),g(t.$$.fragment,e),this.h()},h(){this.first=a},m(e,r){y(e,a,r),p(t,e,r),s=!0},p(e,r){n=e;const i={};r&8&&(i.$$scope={dirty:r,ctx:n}),t.$set(i)},i(e){s||(u(t.$$.fragment,e),s=!0)},o(e){m(t.$$.fragment,e),s=!1},d(e){e&&k(a),_(t,e)}}}function Ae(l){let n,a,t,s,e=[],r=new Map,i,$;n=new I.BoxGeometry({props:{args:[T,T,T]}}),t=new I.MeshStandardMaterial({props:{roughness:0,metalness:.2}});let d=X({length:D});const b=f=>f[2];for(let f=0;f<d.length;f+=1){let o=U(l,d,f),v=b(o);r.set(v,e[f]=Y(v,o))}return{c(){c(n.$$.fragment),a=w(),c(t.$$.fragment),s=w();for(let f=0;f<e.length;f+=1)e[f].c();i=B()},l(f){g(n.$$.fragment,f),a=x(f),g(t.$$.fragment,f),s=x(f);for(let o=0;o<e.length;o+=1)e[o].l(f);i=B()},m(f,o){p(n,f,o),y(f,a,o),p(t,f,o),y(f,s,o);for(let v=0;v<e.length;v+=1)e[v]&&e[v].m(f,o);y(f,i,o),$=!0},p(f,o){o&0&&(d=X({length:D}),W(),e=Te(e,o,b,1,f,d,r,i.parentNode,Se,Y,i,U),A())},i(f){if(!$){u(n.$$.fragment,f),u(t.$$.fragment,f);for(let o=0;o<d.length;o+=1)u(e[o]);$=!0}},o(f){m(n.$$.fragment,f),m(t.$$.fragment,f);for(let o=0;o<e.length;o+=1)m(e[o]);$=!1},d(f){f&&(k(a),k(s),k(i)),_(n,f),_(t,f);for(let o=0;o<e.length;o+=1)e[o].d(f)}}}function Fe(l){let n,a;return n=new xe({props:{limit:D,$$slots:{default:[Ae]},$$scope:{ctx:l}}}),{c(){c(n.$$.fragment)},l(t){g(n.$$.fragment,t)},m(t,s){p(n,t,s),a=!0},p(t,s){const e={};s&8&&(e.$$scope={dirty:s,ctx:t}),n.$set(e)},i(t){a||(u(n.$$.fragment,t),a=!0)},o(t){m(n.$$.fragment,t),a=!1},d(t){_(n,t)}}}function Le(l){let n,a;return n=new I.Group({props:{position:[0,1.7,0],$$slots:{default:[Fe]},$$scope:{ctx:l}}}),{c(){c(n.$$.fragment)},l(t){g(n.$$.fragment,t)},m(t,s){p(n,t,s),a=!0},p(t,[s]){const e={};s&8&&(e.$$scope={dirty:s,ctx:t}),n.$set(e)},i(t){a||(u(n.$$.fragment,t),a=!0)},o(t){m(n.$$.fragment,t),a=!1},d(t){_(n,t)}}}const T=.02,D=100;class qe extends R{constructor(n){super(),H(this,n,null,Le,M,{})}}function Ee(l,n,a){const t=l.slice();return t[2]=n[a],t[4]=a,t}function Z(l){let n,a,t=X({length:25}),s=[];for(let e=0;e<t.length;e+=1)s[e]=Ke(Ee(l,t,e));return{c(){for(let e=0;e<s.length;e+=1)s[e].c();n=B()},l(e){for(let r=0;r<s.length;r+=1)s[r].l(e);n=B()},m(e,r){for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,r);y(e,n,r),a=!0},i(e){if(!a){for(let r=0;r<t.length;r+=1)u(s[r]);a=!0}},o(e){s=s.filter(Boolean);for(let r=0;r<s.length;r+=1)m(s[r]);a=!1},d(e){e&&k(n),ce(s,e)}}}function Ke(l){let n,a,t,s;return n=new Q({props:{jointIndex:l[4],hand:"left"}}),t=new Q({props:{jointIndex:l[4],hand:"right"}}),{c(){c(n.$$.fragment),a=w(),c(t.$$.fragment)},l(e){g(n.$$.fragment,e),a=x(e),g(t.$$.fragment,e)},m(e,r){p(n,e,r),y(e,a,r),p(t,e,r),s=!0},p:J,i(e){s||(u(n.$$.fragment,e),u(t.$$.fragment,e),s=!0)},o(e){m(n.$$.fragment,e),m(t.$$.fragment,e),s=!1},d(e){e&&k(a),_(n,e),_(t,e)}}}function Oe(l){let n,a,t,s;n=new be({});let e=l[0]&&Z(l);return{c(){c(n.$$.fragment),a=w(),e&&e.c(),t=B()},l(r){g(n.$$.fragment,r),a=x(r),e&&e.l(r),t=B()},m(r,i){p(n,r,i),y(r,a,i),e&&e.m(r,i),y(r,t,i),s=!0},p(r,i){r[0]?e?i&1&&u(e,1):(e=Z(r),e.c(),u(e,1),e.m(t.parentNode,t)):e&&(W(),m(e,1,1,()=>{e=null}),A())},i(r){s||(u(n.$$.fragment,r),u(e),s=!0)},o(r){m(n.$$.fragment,r),m(e),s=!1},d(r){r&&(k(a),k(t)),_(n,r),e&&e.d(r)}}}function Qe(l){let n,a,t,s,e,r,i,$,d,b;return n=new he({props:{$$slots:{default:[Oe]},$$scope:{ctx:l}}}),t=new qe({}),e=new I.AmbientLight({props:{intensity:.5}}),i=new I.SpotLight({props:{position:[1,8,1],angle:.3,penumbra:1,intensity:1,castShadow:!0}}),d=new Pe({props:{range:50,strength:1e-6,position:[0,1.7,0]}}),{c(){c(n.$$.fragment),a=w(),c(t.$$.fragment),s=w(),c(e.$$.fragment),r=w(),c(i.$$.fragment),$=w(),c(d.$$.fragment)},l(f){g(n.$$.fragment,f),a=x(f),g(t.$$.fragment,f),s=x(f),g(e.$$.fragment,f),r=x(f),g(i.$$.fragment,f),$=x(f),g(d.$$.fragment,f)},m(f,o){p(n,f,o),y(f,a,o),p(t,f,o),y(f,s,o),p(e,f,o),y(f,r,o),p(i,f,o),y(f,$,o),p(d,f,o),b=!0},p(f,[o]){const v={};o&33&&(v.$$scope={dirty:o,ctx:f}),n.$set(v)},i(f){b||(u(n.$$.fragment,f),u(t.$$.fragment,f),u(e.$$.fragment,f),u(i.$$.fragment,f),u(d.$$.fragment,f),b=!0)},o(f){m(n.$$.fragment,f),m(t.$$.fragment,f),m(e.$$.fragment,f),m(i.$$.fragment,f),m(d.$$.fragment,f),b=!1},d(f){f&&(k(a),k(s),k(r),k($)),_(n,f),_(t,f),_(e,f),_(i,f),_(d,f)}}}function Ue(l,n,a){let t;const{isHandTracking:s}=Be();return ee(l,s,e=>a(0,t=e)),[t,s]}class Ye extends R{constructor(n){super(),H(this,n,Ue,Qe,M,{})}}function Ze(l){let n,a;return n=new Ce({}),{c(){c(n.$$.fragment)},l(t){g(n.$$.fragment,t)},m(t,s){p(n,t,s),a=!0},i(t){a||(u(n.$$.fragment,t),a=!0)},o(t){m(n.$$.fragment,t),a=!1},d(t){_(n,t)}}}function et(l){let n=localStorage.getItem("debug"),a,t,s,e=n&&Ze();return t=new Ye({}),{c(){e&&e.c(),a=w(),c(t.$$.fragment)},l(r){e&&e.l(r),a=x(r),g(t.$$.fragment,r)},m(r,i){e&&e.m(r,i),y(r,a,i),p(t,r,i),s=!0},p:J,i(r){s||(u(e),u(t.$$.fragment,r),s=!0)},o(r){m(e),m(t.$$.fragment,r),s=!1},d(r){r&&k(a),e&&e.d(r),_(t,r)}}}function tt(l){let n,a;return n=new je({props:{gravity:[0,0,0],$$slots:{default:[et]},$$scope:{ctx:l}}}),{c(){c(n.$$.fragment)},l(t){g(n.$$.fragment,t)},m(t,s){p(n,t,s),a=!0},p(t,s){const e={};s&1&&(e.$$scope={dirty:s,ctx:t}),n.$set(e)},i(t){a||(u(n.$$.fragment,t),a=!0)},o(t){m(n.$$.fragment,t),a=!1},d(t){_(n,t)}}}function nt(l){let n,a,t,s,e,r;return n=new ye({props:{$$slots:{default:[tt]},$$scope:{ctx:l}}}),t=new Ie({props:{href:"https://github.com/michealparks/threlte-xr/tree/main/src/routes/hand-physics"}}),e=new ke({}),{c(){c(n.$$.fragment),a=w(),c(t.$$.fragment),s=w(),c(e.$$.fragment)},l(i){g(n.$$.fragment,i),a=x(i),g(t.$$.fragment,i),s=x(i),g(e.$$.fragment,i)},m(i,$){p(n,i,$),y(i,a,$),p(t,i,$),y(i,s,$),p(e,i,$),r=!0},p(i,[$]){const d={};$&1&&(d.$$scope={dirty:$,ctx:i}),n.$set(d)},i(i){r||(u(n.$$.fragment,i),u(t.$$.fragment,i),u(e.$$.fragment,i),r=!0)},o(i){m(n.$$.fragment,i),m(t.$$.fragment,i),m(e.$$.fragment,i),r=!1},d(i){i&&(k(a),k(s)),_(n,i),_(t,i),_(e,i)}}}class ut extends R{constructor(n){super(),H(this,n,null,nt,M,{})}}export{ut as component};
