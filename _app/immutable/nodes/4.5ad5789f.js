import{s as N,r as ie,u as ue,v as me,w as ce,H as we,p as j,a as z,c as P,i as M,G as U,d as k,y as E,z as ye,e as A,I as Me}from"../chunks/scheduler.d099de3d.js";import{S as v,i as F,a as c,t as g,f as x,b as p,d as _,m as d,e as h,g as J,c as K}from"../chunks/index.5391bafe.js";import{H as ke,V,b as Be,T as C,Q as ze,S as Pe,X as Ce,u as Se,f as Ie,e as Ve}from"../chunks/xr.3ffe6951.js";import{B as Ge}from"../chunks/button-vr.b6044e14.js";import{R as q,u as Ae,C as Y,f as Re,I as ge,a as pe,W as Ee,D as Te}from"../chunks/Instance.3a1da6a2.js";import{C as We}from"../chunks/controllers.9f769ef3.js";import{e as H,u as _e,o as de}from"../chunks/each.f8e9f536.js";import"../chunks/PositionMesh.2245e7f8.js";import{w as De}from"../chunks/index.7b06e9f9.js";const ee=(f,r,s)=>{if(f!==void 0){const n=f;return n.reduce((o,$)=>o|1<<$,0)|n.reduce((o,$)=>o|1<<$+16,0)}return s.reduce((n,e)=>n|1<<e,0)|r.reduce((n,e)=>n|1<<e+16,0)};function He(f){let r;const s=f[4].default,t=ie(s,f,f[3],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,e){t&&t.m(n,e),r=!0},p(n,[e]){t&&t.p&&(!r||e&8)&&ue(t,s,n,n[3],r?ce(s,n[3],e,null):me(n[3]),null)},i(n){r||(c(t,n),r=!0)},o(n){g(t,n),r=!1},d(n){t&&t.d(n)}}}function Ne(f,r,s){let{$$slots:t={},$$scope:n}=r,{groups:e=void 0}=r,{filter:o=void 0}=r,{memberships:$=void 0}=r;const u=De(ee(e,o,$));return we("threlte-rapier-collision-group",u),f.$$set=i=>{"groups"in i&&s(0,e=i.groups),"filter"in i&&s(1,o=i.filter),"memberships"in i&&s(2,$=i.memberships),"$$scope"in i&&s(3,n=i.$$scope)},f.$$.update=()=>{f.$$.dirty&7&&u.set(ee(e,o,$))},[e,o,$,n,t]}class ve extends v{constructor(r){super(),F(this,r,Ne,He,N,{groups:0,filter:1,memberships:2})}}function Fe(f){let r,s,t,n;return r=new C.CylinderGeometry({props:{args:[R,R,T]}}),t=new C.MeshPhongMaterial({props:{color:"red"}}),{c(){p(r.$$.fragment),s=z(),p(t.$$.fragment)},l(e){_(r.$$.fragment,e),s=P(e),_(t.$$.fragment,e)},m(e,o){d(r,e,o),M(e,s,o),d(t,e,o),n=!0},p:E,i(e){n||(c(r.$$.fragment,e),c(t.$$.fragment,e),n=!0)},o(e){g(r.$$.fragment,e),g(t.$$.fragment,e),n=!1},d(e){e&&k(s),h(r,e),h(t,e)}}}function Le(f){let r,s;return r=new C.Mesh({props:{slot:"left","rotation.x":Math.PI/2,"position.z":-T/2,$$slots:{default:[Fe]},$$scope:{ctx:f}}}),r.$on("create",f[5]),{c(){p(r.$$.fragment)},l(t){_(r.$$.fragment,t)},m(t,n){d(r,t,n),s=!0},p(t,n){const e={};n&8192&&(e.$$scope={dirty:n,ctx:t}),r.$set(e)},i(t){s||(c(r.$$.fragment,t),s=!0)},o(t){g(r.$$.fragment,t),s=!1},d(t){h(r,t)}}}function Qe(f){let r,s,t,n;return r=new C.CylinderGeometry({props:{args:[R,R,T]}}),t=new C.MeshStandardMaterial({props:{roughness:0,color:"red"}}),{c(){p(r.$$.fragment),s=z(),p(t.$$.fragment)},l(e){_(r.$$.fragment,e),s=P(e),_(t.$$.fragment,e)},m(e,o){d(r,e,o),M(e,s,o),d(t,e,o),n=!0},p:E,i(e){n||(c(r.$$.fragment,e),c(t.$$.fragment,e),n=!0)},o(e){g(r.$$.fragment,e),g(t.$$.fragment,e),n=!1},d(e){e&&k(s),h(r,e),h(t,e)}}}function Xe(f){let r,s;return r=new C.Mesh({props:{slot:"right","rotation.x":Math.PI/2,"position.z":-T/2,$$slots:{default:[Qe]},$$scope:{ctx:f}}}),r.$on("create",f[4]),{c(){p(r.$$.fragment)},l(t){_(r.$$.fragment,t)},m(t,n){d(r,t,n),s=!0},p(t,n){const e={};n&8192&&(e.$$scope={dirty:n,ctx:t}),r.$set(e)},i(t){s||(c(r.$$.fragment,t),s=!0)},o(t){g(r.$$.fragment,t),s=!1},d(t){h(r,t)}}}function qe(f){let r,s,t,n;return r=new C.CylinderGeometry({props:{args:[R,R,T]}}),t=new C.MeshStandardMaterial({props:{roughness:0,color:"red"}}),{c(){p(r.$$.fragment),s=z(),p(t.$$.fragment)},l(e){_(r.$$.fragment,e),s=P(e),_(t.$$.fragment,e)},m(e,o){d(r,e,o),M(e,s,o),d(t,e,o),n=!0},p:E,i(e){n||(c(r.$$.fragment,e),c(t.$$.fragment,e),n=!0)},o(e){g(r.$$.fragment,e),g(t.$$.fragment,e),n=!1},d(e){e&&k(s),h(r,e),h(t,e)}}}function Ye(f){let r,s;return r=new C.Mesh({props:{slot:"left","rotation.x":Math.PI/2,"position.z":-T/2,$$slots:{default:[qe]},$$scope:{ctx:f}}}),r.$on("create",f[7]),{c(){p(r.$$.fragment)},l(t){_(r.$$.fragment,t)},m(t,n){d(r,t,n),s=!0},p(t,n){const e={};n&8192&&(e.$$scope={dirty:n,ctx:t}),r.$set(e)},i(t){s||(c(r.$$.fragment,t),s=!0)},o(t){g(r.$$.fragment,t),s=!1},d(t){h(r,t)}}}function Ze(f){let r,s,t,n;return r=new C.CylinderGeometry({props:{args:[R,R,T]}}),t=new C.MeshPhongMaterial({props:{color:"red"}}),{c(){p(r.$$.fragment),s=z(),p(t.$$.fragment)},l(e){_(r.$$.fragment,e),s=P(e),_(t.$$.fragment,e)},m(e,o){d(r,e,o),M(e,s,o),d(t,e,o),n=!0},p:E,i(e){n||(c(r.$$.fragment,e),c(t.$$.fragment,e),n=!0)},o(e){g(r.$$.fragment,e),g(t.$$.fragment,e),n=!1},d(e){e&&k(s),h(r,e),h(t,e)}}}function je(f){let r,s;return r=new C.Mesh({props:{slot:"right","rotation.x":Math.PI/2,"position.z":-T/2,$$slots:{default:[Ze]},$$scope:{ctx:f}}}),r.$on("create",f[6]),{c(){p(r.$$.fragment)},l(t){_(r.$$.fragment,t)},m(t,n){d(r,t,n),s=!0},p(t,n){const e={};n&8192&&(e.$$scope={dirty:n,ctx:t}),r.$set(e)},i(t){s||(c(r.$$.fragment,t),s=!0)},o(t){g(r.$$.fragment,t),s=!1},d(t){h(r,t)}}}function Je(f){let r,s;return r=new Y({props:{shape:"capsule",args:[T/2,R]}}),{c(){p(r.$$.fragment)},l(t){_(r.$$.fragment,t)},m(t,n){d(r,t,n),s=!0},p:E,i(t){s||(c(r.$$.fragment,t),s=!0)},o(t){g(r.$$.fragment,t),s=!1},d(t){h(r,t)}}}function Ke(f){let r,s;return r=new Y({props:{shape:"capsule",args:[T/2,R]}}),{c(){p(r.$$.fragment)},l(t){_(r.$$.fragment,t)},m(t,n){d(r,t,n),s=!0},p:E,i(t){s||(c(r.$$.fragment,t),s=!0)},o(t){g(r.$$.fragment,t),s=!1},d(t){h(r,t)}}}function Oe(f){let r,s,t,n,e,o,$,u,i,y;r=new We({props:{$$slots:{right:[Xe],left:[Le]},$$scope:{ctx:f}}}),t=new ke({props:{$$slots:{right:[je],left:[Ye]},$$scope:{ctx:f}}});function l(m){f[8](m)}let a={type:"kinematicPosition",$$slots:{default:[Je]},$$scope:{ctx:f}};f[0]!==void 0&&(a.rigidBody=f[0]),e=new q({props:a}),j.push(()=>x(e,"rigidBody",l));function w(m){f[9](m)}let S={type:"kinematicPosition",$$slots:{default:[Ke]},$$scope:{ctx:f}};return f[1]!==void 0&&(S.rigidBody=f[1]),u=new q({props:S}),j.push(()=>x(u,"rigidBody",w)),{c(){p(r.$$.fragment),s=z(),p(t.$$.fragment),n=z(),p(e.$$.fragment),$=z(),p(u.$$.fragment)},l(m){_(r.$$.fragment,m),s=P(m),_(t.$$.fragment,m),n=P(m),_(e.$$.fragment,m),$=P(m),_(u.$$.fragment,m)},m(m,b){d(r,m,b),M(m,s,b),d(t,m,b),M(m,n,b),d(e,m,b),M(m,$,b),d(u,m,b),y=!0},p(m,[b]){const I={};b&8196&&(I.$$scope={dirty:b,ctx:m}),r.$set(I);const W={};b&8200&&(W.$$scope={dirty:b,ctx:m}),t.$set(W);const L={};b&8192&&(L.$$scope={dirty:b,ctx:m}),!o&&b&1&&(o=!0,L.rigidBody=m[0],U(()=>o=!1)),e.$set(L);const B={};b&8192&&(B.$$scope={dirty:b,ctx:m}),!i&&b&2&&(i=!0,B.rigidBody=m[1],U(()=>i=!1)),u.$set(B)},i(m){y||(c(r.$$.fragment,m),c(t.$$.fragment,m),c(e.$$.fragment,m),c(u.$$.fragment,m),y=!0)},o(m){g(r.$$.fragment,m),g(t.$$.fragment,m),g(e.$$.fragment,m),g(u.$$.fragment,m),y=!1},d(m){m&&(k(s),k(n),k($)),h(r,m),h(t,m),h(e,m),h(u,m)}}}const R=.02,T=1.4;function Ue(f,r,s){const{isHandTracking:t}=Ae();let n,e;const o={left:void 0,right:void 0},$={left:void 0,right:void 0},u=new V,i=new ze;Be(()=>{const b=t.current?$.left:o.left,I=t.current?$.right:o.right;b&&(n.setTranslation(b.getWorldPosition(u),!0),n.setRotation(b.getWorldQuaternion(i),!0)),I&&(e.setTranslation(I.getWorldPosition(u),!0),e.setRotation(I.getWorldQuaternion(i),!0))});const y=({ref:b})=>s(2,o.right=b,o),l=({ref:b})=>s(2,o.left=b,o),a=({ref:b})=>s(3,$.right=b,$),w=({ref:b})=>s(3,$.left=b,$);function S(b){n=b,s(0,n)}function m(b){e=b,s(1,e)}return[n,e,o,$,y,l,a,w,S,m]}class xe extends v{constructor(r){super(),F(this,r,Ue,Oe,N,{})}}const Z=(1+1e-10)*100,te=f=>`${~~(f.x*Z)},${~~(f.y*Z)},${~~(f.z*Z)}`,et=(f,r=Math.PI)=>{const s=Math.cos(r),t=[new V,new V,new V],n=new V,e=new V,o=new V,$=new V,u=f.getAttribute("position"),i=f.getAttribute("normal"),y={};for(let l=0,a=u.count/3;l<a;l+=1){const w=3*l;t.forEach((m,b)=>m.fromBufferAttribute(u,w+b)),n.subVectors(t[2],t[1]),e.subVectors(t[0],t[1]);const S=new V().crossVectors(n,e).normalize();t.forEach(m=>{var I;const b=te(m);y[b]||(y[b]=[]),(I=y[b])==null||I.push(S)})}for(let l=0,a=u.count/3;l<a;l+=1){const w=3*l;t.forEach((S,m)=>S.fromBufferAttribute(u,w+m)),n.subVectors(t[2],t[1]),e.subVectors(t[0],t[1]),o.crossVectors(n,e).normalize(),t.forEach((S,m)=>{var I;const b=te(S);$.set(0,0,0),(I=y[b])==null||I.forEach(W=>{o.dot(W)>s&&$.add(W)}),$.normalize(),i.setXYZ(w+m,$.x,$.y,$.z)})}return f.setAttribute("normal",i),f},tt=f=>({ref:f&131072}),re=f=>({ref:f[17]});function rt(f){let r;const s=f[12].default,t=ie(s,f,f[15],re);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,e){t&&t.m(n,e),r=!0},p(n,e){t&&t.p&&(!r||e&163840)&&ue(t,s,n,n[15],r?ce(s,n[15],e,tt):me(n[15]),re)},i(n){r||(c(t,n),r=!0)},o(n){g(t,n),r=!1},d(n){t&&t.d(n)}}}function nt(f){let r,s,t={args:[f[2],f[1]],$$slots:{default:[rt,({ref:n})=>({17:n}),({ref:n})=>n?131072:0]},$$scope:{ctx:f}};return r=new C.ExtrudeGeometry({props:t}),f[13](r),r.$on("create",f[14]),{c(){p(r.$$.fragment)},l(n){_(r.$$.fragment,n)},m(n,e){d(r,n,e),s=!0},p(n,[e]){const o={};e&6&&(o.args=[n[2],n[1]]),e&163840&&(o.$$scope={dirty:e,ctx:n}),r.$set(o)},i(n){s||(c(r.$$.fragment,n),s=!0)},o(n){g(r.$$.fragment,n),s=!1},d(n){f[13](null),h(r,n)}}}const G=1e-5;function st(f,r,s){let t,n,e,o,$,u,{$$slots:i={},$$scope:y}=r;const l=Re();ye(f,l,B=>s(3,u=B));let{args:a=[]}=r,{radius:w=.05}=r,{smoothness:S=4}=r,{creaseAngle:m=.4}=r,{steps:b=1}=r;const I=(B,O,be)=>{const Q=new Pe,X=be-G;return Q.absarc(G,G,G,-Math.PI/2,-Math.PI,!0),Q.absarc(G,O-X*2,G,Math.PI,Math.PI/2,!0),Q.absarc(B-X*2,O-X*2,G,Math.PI/2,0,!0),Q.absarc(B-X*2,G,G,0,-Math.PI/2,!0),Q};function W(B){j[B?"unshift":"push"](()=>{u=B,l.set(u)})}const L=({ref:B})=>{B.center(),et(B,m)};return f.$$set=B=>{"args"in B&&s(5,a=B.args),"radius"in B&&s(6,w=B.radius),"smoothness"in B&&s(7,S=B.smoothness),"creaseAngle"in B&&s(0,m=B.creaseAngle),"steps"in B&&s(8,b=B.steps),"$$scope"in B&&s(15,y=B.$$scope)},f.$$.update=()=>{f.$$.dirty&32&&s(11,t=a[0]??1),f.$$.dirty&32&&s(10,n=a[1]??1),f.$$.dirty&32&&s(9,e=a[2]??1),f.$$.dirty&3136&&s(2,o=I(t,n,w)),f.$$.dirty&960&&s(1,$={depth:e-w*2,bevelEnabled:!0,bevelSegments:S*2,steps:b,bevelSize:w-G,bevelThickness:w,curveSegments:S})},[m,$,o,u,l,a,w,S,b,e,n,t,i,W,L,y]}class ot extends v{constructor(r){super(),F(this,r,st,nt,N,{args:5,radius:6,smoothness:7,creaseAngle:0,steps:8})}}function ne(f,r,s){const t=f.slice();return t[9]=r[s].position,t[10]=r[s].force,t[12]=s,t}function se(f,r,s){const t=f.slice();return t[13]=r[s],t}function oe(f,r,s){const t=f.slice();return t[9]=r[s].position,t[16]=r[s].color,t[12]=s,t}function ft(f){let r,s;return r=new pe({props:{color:f[16]}}),{c(){p(r.$$.fragment)},l(t){_(r.$$.fragment,t)},m(t,n){d(r,t,n),s=!0},p:E,i(t){s||(c(r.$$.fragment,t),s=!0)},o(t){g(r.$$.fragment,t),s=!1},d(t){h(r,t)}}}function lt(f){let r,s,t,n;r=new Y({props:{shape:"cuboid",mass:.5,args:[D/2,D/2,D/2]}});let e=f[1][f[12]]&&ft(f);return{c(){p(r.$$.fragment),s=z(),e&&e.c(),t=A()},l(o){_(r.$$.fragment,o),s=P(o),e&&e.l(o),t=A()},m(o,$){d(r,o,$),M(o,s,$),e&&e.m(o,$),M(o,t,$),n=!0},p(o,$){o[1][o[12]]&&e.p(o,$)},i(o){n||(c(r.$$.fragment,o),c(e),n=!0)},o(o){g(r.$$.fragment,o),g(e),n=!1},d(o){o&&(k(s),k(t)),h(r,o),e&&e.d(o)}}}function $t(f){let r,s,t;return r=new q({props:{enabled:f[1][f[12]]??!0,linearVelocity:[0,0,wt],$$slots:{default:[lt]},$$scope:{ctx:f}}}),r.$on("contact",f[4]),{c(){p(r.$$.fragment),s=z()},l(n){_(r.$$.fragment,n),s=P(n)},m(n,e){d(r,n,e),M(n,s,e),t=!0},p(n,e){const o={};e&262144&&(o.$$scope={dirty:e,ctx:n}),r.$set(o)},i(n){t||(c(r.$$.fragment,n),t=!0)},o(n){g(r.$$.fragment,n),t=!1},d(n){n&&k(s),h(r,n)}}}function fe(f,r){let s,t,n;return t=new C.Group({props:{"position.x":r[9].x,"position.y":r[9].y+ht,"position.z":r[9].z-bt,$$slots:{default:[$t]},$$scope:{ctx:r}}}),{key:f,first:null,c(){s=A(),p(t.$$.fragment),this.h()},l(e){s=A(),_(t.$$.fragment,e),this.h()},h(){this.first=s},m(e,o){M(e,s,o),d(t,e,o),n=!0},p(e,o){r=e;const $={};o&262144&&($.$$scope={dirty:o,ctx:r}),t.$set($)},i(e){n||(c(t.$$.fragment,e),n=!0)},o(e){g(t.$$.fragment,e),n=!1},d(e){e&&k(s),h(t,e)}}}function at(f){let r,s,t,n,e=[],o=new Map,$,u;r=new ot({props:{radius:dt,args:[D,D,D]}}),t=new C.MeshStandardMaterial({props:{roughness:0,metalness:.2}});let i=H(f[2]);const y=l=>l[12];for(let l=0;l<i.length;l+=1){let a=oe(f,i,l),w=y(a);o.set(w,e[l]=fe(w,a))}return{c(){p(r.$$.fragment),s=z(),p(t.$$.fragment),n=z();for(let l=0;l<e.length;l+=1)e[l].c();$=A()},l(l){_(r.$$.fragment,l),s=P(l),_(t.$$.fragment,l),n=P(l);for(let a=0;a<e.length;a+=1)e[a].l(l);$=A()},m(l,a){d(r,l,a),M(l,s,a),d(t,l,a),M(l,n,a);for(let w=0;w<e.length;w+=1)e[w]&&e[w].m(l,a);M(l,$,a),u=!0},p(l,a){a&22&&(i=H(l[2]),J(),e=_e(e,a,y,1,l,i,o,$.parentNode,de,fe,$,oe),K())},i(l){if(!u){c(r.$$.fragment,l),c(t.$$.fragment,l);for(let a=0;a<i.length;a+=1)c(e[a]);u=!0}},o(l){g(r.$$.fragment,l),g(t.$$.fragment,l);for(let a=0;a<e.length;a+=1)g(e[a]);u=!1},d(l){l&&(k(s),k(n),k($)),h(r,l),h(t,l);for(let a=0;a<e.length;a+=1)e[a].d(l)}}}function it(f){let r,s,t,n;return r=new Y({props:{shape:"cuboid",mass:.5,args:[f[3]/2,f[3]/2,f[3]/2]}}),t=new pe({props:{color:"#ffffff"}}),{c(){p(r.$$.fragment),s=z(),p(t.$$.fragment)},l(e){_(r.$$.fragment,e),s=P(e),_(t.$$.fragment,e)},m(e,o){d(r,e,o),M(e,s,o),d(t,e,o),n=!0},p:E,i(e){n||(c(r.$$.fragment,e),c(t.$$.fragment,e),n=!0)},o(e){g(r.$$.fragment,e),g(t.$$.fragment,e),n=!1},d(e){e&&k(s),h(r,e),h(t,e)}}}function le(f){let r,s;return r=new q({props:{linearVelocity:f[5](f[10]),$$slots:{default:[it]},$$scope:{ctx:f}}}),{c(){p(r.$$.fragment)},l(t){_(r.$$.fragment,t)},m(t,n){d(r,t,n),s=!0},p(t,n){const e={};n&1&&(e.linearVelocity=t[5](t[10])),n&262144&&(e.$$scope={dirty:n,ctx:t}),r.$set(e)},i(t){s||(c(r.$$.fragment,t),s=!0)},o(t){g(r.$$.fragment,t),s=!1},d(t){h(r,t)}}}function ut(f){let r,s,t=H({length:20}),n=[];for(let o=0;o<t.length;o+=1)n[o]=le(se(f,t,o));const e=o=>g(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();r=z()},l(o){for(let $=0;$<n.length;$+=1)n[$].l(o);r=P(o)},m(o,$){for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(o,$);M(o,r,$),s=!0},p(o,$){if($&41){t=H({length:20});let u;for(u=0;u<t.length;u+=1){const i=se(o,t,u);n[u]?(n[u].p(i,$),c(n[u],1)):(n[u]=le(i),n[u].c(),c(n[u],1),n[u].m(r.parentNode,r))}for(J(),u=t.length;u<n.length;u+=1)e(u);K()}},i(o){if(!s){for(let $=0;$<t.length;$+=1)c(n[$]);s=!0}},o(o){n=n.filter(Boolean);for(let $=0;$<n.length;$+=1)g(n[$]);s=!1},d(o){o&&k(r),Me(n,o)}}}function $e(f,r){let s,t,n;return t=new C.Group({props:{"position.x":r[9].x,"position.y":r[9].y,"position.z":r[9].z,$$slots:{default:[ut]},$$scope:{ctx:r}}}),{key:f,first:null,c(){s=A(),p(t.$$.fragment),this.h()},l(e){s=A(),_(t.$$.fragment,e),this.h()},h(){this.first=s},m(e,o){M(e,s,o),d(t,e,o),n=!0},p(e,o){r=e;const $={};o&1&&($["position.x"]=r[9].x),o&1&&($["position.y"]=r[9].y),o&1&&($["position.z"]=r[9].z),o&262145&&($.$$scope={dirty:o,ctx:r}),t.$set($)},i(e){n||(c(t.$$.fragment,e),n=!0)},o(e){g(t.$$.fragment,e),n=!1},d(e){e&&k(s),h(t,e)}}}function mt(f){let r,s,t,n,e=[],o=new Map,$,u;r=new C.BoxGeometry({props:{args:[f[3],f[3],f[3]]}}),t=new C.MeshPhongMaterial({});let i=H(f[0]);const y=l=>l[12];for(let l=0;l<i.length;l+=1){let a=ne(f,i,l),w=y(a);o.set(w,e[l]=$e(w,a))}return{c(){p(r.$$.fragment),s=z(),p(t.$$.fragment),n=z();for(let l=0;l<e.length;l+=1)e[l].c();$=A()},l(l){_(r.$$.fragment,l),s=P(l),_(t.$$.fragment,l),n=P(l);for(let a=0;a<e.length;a+=1)e[a].l(l);$=A()},m(l,a){d(r,l,a),M(l,s,a),d(t,l,a),M(l,n,a);for(let w=0;w<e.length;w+=1)e[w]&&e[w].m(l,a);M(l,$,a),u=!0},p(l,a){a&41&&(i=H(l[0]),J(),e=_e(e,a,y,1,l,i,o,$.parentNode,de,$e,$,ne),K())},i(l){if(!u){c(r.$$.fragment,l),c(t.$$.fragment,l);for(let a=0;a<i.length;a+=1)c(e[a]);u=!0}},o(l){g(r.$$.fragment,l),g(t.$$.fragment,l);for(let a=0;a<e.length;a+=1)g(e[a]);u=!1},d(l){l&&(k(s),k(n),k($)),h(r,l),h(t,l);for(let a=0;a<e.length;a+=1)e[a].d(l)}}}function ct(f){let r,s;return r=new ge({props:{limit:pt,$$slots:{default:[mt]},$$scope:{ctx:f}}}),{c(){p(r.$$.fragment)},l(t){_(r.$$.fragment,t)},m(t,n){d(r,t,n),s=!0},p(t,n){const e={};n&262145&&(e.$$scope={dirty:n,ctx:t}),r.$set(e)},i(t){s||(c(r.$$.fragment,t),s=!0)},o(t){g(r.$$.fragment,t),s=!1},d(t){h(r,t)}}}function gt(f){let r,s,t,n;return r=new ge({props:{limit:he,$$slots:{default:[at]},$$scope:{ctx:f}}}),t=new ve({props:{memberships:[],filter:[],$$slots:{default:[ct]},$$scope:{ctx:f}}}),{c(){p(r.$$.fragment),s=z(),p(t.$$.fragment)},l(e){_(r.$$.fragment,e),s=P(e),_(t.$$.fragment,e)},m(e,o){d(r,e,o),M(e,s,o),d(t,e,o),n=!0},p(e,[o]){const $={};o&262144&&($.$$scope={dirty:o,ctx:e}),r.$set($);const u={};o&262145&&(u.$$scope={dirty:o,ctx:e}),t.$set(u)},i(e){n||(c(r.$$.fragment,e),c(t.$$.fragment,e),n=!0)},o(e){g(r.$$.fragment,e),g(t.$$.fragment,e),n=!1},d(e){e&&k(s),h(r,e),h(t,e)}}}let he=100,pt=1e3;const ae=.4,_t=8,dt=.15,D=.6,ht=1.5,bt=50,wt=12;function yt(f,r,s){const t=["#ff5252","#ff4081","#d500f9","#3d5afe","#40c4ff","#18ffff","#f9a825","#ffd740","#bf360c"],n=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,0],[0,1],[1,-1],[1,0],[1,1]];let e=[],o=[],$=[];for(let l=0;l<he;l+=1){const[a,w]=n[Math.trunc(Math.random()*n.length)];$.push({position:new V(a-ae,w-ae,-l*_t),color:t[l%t.length]}),o.push(!0)}const u=D/4;return[e,o,$,u,l=>{console.log("contact");const a=l.targetRigidBody,w=l.maxForceDirection,S=a.translation(),m=new V().set(S.x,S.y,S.z);e.push({force:w,position:m}),e.length>8&&e.shift(),s(0,e),console.log("group",e)},l=>{const a=Math.random()-.5,w=Math.random()-.5,S=Math.random()-.5,m=.1;return[l.x*a*m,l.y*w*m,l.z*S*m]}]}class Mt extends v{constructor(r){super(),F(this,r,yt,gt,N,{})}}function kt(f){let r,s,t,n;return r=new xe({}),t=new Mt({}),{c(){p(r.$$.fragment),s=z(),p(t.$$.fragment)},l(e){_(r.$$.fragment,e),s=P(e),_(t.$$.fragment,e)},m(e,o){d(r,e,o),M(e,s,o),d(t,e,o),n=!0},i(e){n||(c(r.$$.fragment,e),c(t.$$.fragment,e),n=!0)},o(e){g(r.$$.fragment,e),g(t.$$.fragment,e),n=!1},d(e){e&&k(s),h(r,e),h(t,e)}}}function Bt(f){let r,s,t,n;return r=new C.CylinderGeometry({props:{args:[2,2,100]}}),t=new C.MeshStandardMaterial({props:{color:"white"}}),{c(){p(r.$$.fragment),s=z(),p(t.$$.fragment)},l(e){_(r.$$.fragment,e),s=P(e),_(t.$$.fragment,e)},m(e,o){d(r,e,o),M(e,s,o),d(t,e,o),n=!0},p:E,i(e){n||(c(r.$$.fragment,e),c(t.$$.fragment,e),n=!0)},o(e){g(r.$$.fragment,e),g(t.$$.fragment,e),n=!1},d(e){e&&k(s),h(r,e),h(t,e)}}}function zt(f){let r,s,t,n,e,o,$,u;return r=new Ce({props:{$$slots:{default:[kt]},$$scope:{ctx:f}}}),t=new C.AmbientLight({}),e=new C.DirectionalLight({}),$=new C.Mesh({props:{"position.y":-50,$$slots:{default:[Bt]},$$scope:{ctx:f}}}),{c(){p(r.$$.fragment),s=z(),p(t.$$.fragment),n=z(),p(e.$$.fragment),o=z(),p($.$$.fragment)},l(i){_(r.$$.fragment,i),s=P(i),_(t.$$.fragment,i),n=P(i),_(e.$$.fragment,i),o=P(i),_($.$$.fragment,i)},m(i,y){d(r,i,y),M(i,s,y),d(t,i,y),M(i,n,y),d(e,i,y),M(i,o,y),d($,i,y),u=!0},p(i,[y]){const l={};y&2&&(l.$$scope={dirty:y,ctx:i}),r.$set(l);const a={};y&2&&(a.$$scope={dirty:y,ctx:i}),$.$set(a)},i(i){u||(c(r.$$.fragment,i),c(t.$$.fragment,i),c(e.$$.fragment,i),c($.$$.fragment,i),u=!0)},o(i){g(r.$$.fragment,i),g(t.$$.fragment,i),g(e.$$.fragment,i),g($.$$.fragment,i),u=!1},d(i){i&&(k(s),k(n),k(o)),h(r,i),h(t,i),h(e,i),h($,i)}}}function Pt(f){const{scene:r}=Se();return r.background=new Ie("black"),[]}class Ct extends v{constructor(r){super(),F(this,r,Pt,zt,N,{})}}function St(f){let r,s;return r=new Te({}),{c(){p(r.$$.fragment)},l(t){_(r.$$.fragment,t)},m(t,n){d(r,t,n),s=!0},i(t){s||(c(r.$$.fragment,t),s=!0)},o(t){g(r.$$.fragment,t),s=!1},d(t){h(r,t)}}}function It(f){let r=localStorage.getItem("debug"),s,t,n,e=r&&St();return t=new Ct({}),{c(){e&&e.c(),s=z(),p(t.$$.fragment)},l(o){e&&e.l(o),s=P(o),_(t.$$.fragment,o)},m(o,$){e&&e.m(o,$),M(o,s,$),d(t,o,$),n=!0},p:E,i(o){n||(c(e),c(t.$$.fragment,o),n=!0)},o(o){g(e),g(t.$$.fragment,o),n=!1},d(o){o&&k(s),e&&e.d(o),h(t,o)}}}function Vt(f){let r,s;return r=new Ee({props:{gravity:[0,0,0],$$slots:{default:[It]},$$scope:{ctx:f}}}),{c(){p(r.$$.fragment)},l(t){_(r.$$.fragment,t)},m(t,n){d(r,t,n),s=!0},p(t,n){const e={};n&1&&(e.$$scope={dirty:n,ctx:t}),r.$set(e)},i(t){s||(c(r.$$.fragment,t),s=!0)},o(t){g(r.$$.fragment,t),s=!1},d(t){h(r,t)}}}function Gt(f){let r,s,t,n;return r=new Ve({props:{$$slots:{default:[Vt]},$$scope:{ctx:f}}}),t=new Ge({}),{c(){p(r.$$.fragment),s=z(),p(t.$$.fragment)},l(e){_(r.$$.fragment,e),s=P(e),_(t.$$.fragment,e)},m(e,o){d(r,e,o),M(e,s,o),d(t,e,o),n=!0},p(e,[o]){const $={};o&1&&($.$$scope={dirty:o,ctx:e}),r.$set($)},i(e){n||(c(r.$$.fragment,e),c(t.$$.fragment,e),n=!0)},o(e){g(r.$$.fragment,e),g(t.$$.fragment,e),n=!1},d(e){e&&k(s),h(r,e),h(t,e)}}}class Ft extends v{constructor(r){super(),F(this,r,null,Gt,N,{})}}export{Ft as component};
