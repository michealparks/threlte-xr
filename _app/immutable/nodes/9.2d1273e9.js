import{F as ie,s as q,p as le,a as S,c as C,i as M,G as ue,d as v,z as U,b as $e,o as me,y as E,r as pe,u as ge,v as _e,w as he,M as X,e as x,H as we}from"../chunks/scheduler.92454ee1.js";import{S as I,i as N,f as ye,b as g,d as _,m as h,a as $,t as m,e as w,g as Me,c as ve}from"../chunks/index.e18f9c40.js";import{u as fe,s as ze,Q as Se,T as R,bN as Ce,bO as V,bP as W,b6 as Re,m as Pe,V as H,M as De,bQ as Te,b as J,bR as Oe,bS as ke,X as Ge,H as Ae,e as Fe}from"../chunks/xr.862aa1eb.js";import{B as Be}from"../chunks/button-vr.c973bab3.js";import{e as K}from"../chunks/each.258ac6aa.js";import{C as Le}from"../chunks/controllers.6ea477d5.js";const Qe=new Se,A={x:0,y:0,z:0},te=()=>{const{xr:s}=fe().renderer;let f;const r=ze.subscribe(t=>{t!==void 0&&(f=s.getReferenceSpace())});return ie(()=>r()),(t,n=Qe)=>{if(f==null)return;let e=0,a=0,b=0;Array.isArray(t)?[e,a,b]=t:(e=t.x,a=t.y,b=t.z),A.x=-e,A.y=-a,A.z=-b;const o=s.getFrame().getViewerPose(f);o!==void 0&&(A.x+=o.transform.position.x,A.z+=o.transform.position.z);const c=new XRRigidTransform(A,n);s.setReferenceSpace(f.getOffsetReferenceSpace(c))}};function Xe(s){let f;const r=s[7].default,t=pe(r,s,s[10],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,e){t&&t.m(n,e),f=!0},p(n,e){t&&t.p&&(!f||e&1024)&&ge(t,r,n,n[10],f?he(r,n[10],e,null):_e(n[10]),null)},i(n){f||($(t,n),f=!0)},o(n){m(t,n),f=!1},d(n){t&&t.d(n)}}}function He(s){let f,r,t,n;return f=new R.RingGeometry({props:{args:[.175,.2,32]}}),f.$on("create",s[9]),t=new R.MeshBasicMaterial({props:{polygonOffset:!0,polygonOffsetFactor:-1}}),{c(){g(f.$$.fragment),r=S(),g(t.$$.fragment)},l(e){_(f.$$.fragment,e),r=C(e),_(t.$$.fragment,e)},m(e,a){h(f,e,a),M(e,r,a),h(t,e,a),n=!0},p:E,i(e){n||($(f.$$.fragment,e),$(t.$$.fragment,e),n=!0)},o(e){m(f.$$.fragment,e),m(t.$$.fragment,e),n=!1},d(e){e&&v(r),w(f,e),w(t,e)}}}function Ve(s){var i,u,P;let f,r,t,n,e,a,b;function o(d){s[8](d)}let c={$$slots:{default:[Xe]},$$scope:{ctx:s}};return s[0]!==void 0&&(c.ref=s[0]),f=new R.Group({props:c}),le.push(()=>ye(f,"ref",o)),n=new Ce({props:{visible:s[2]!==void 0&&s[1]!==void 0,positions:s[2]!==void 0&&s[1]!==void 0?s[3]:void 0}}),a=new R.Mesh({props:{name:"Teleport Marker",visible:s[2]!==void 0&&s[1]!==void 0,renderOrder:9999,"position.x":(i=s[1])==null?void 0:i.x,"position.y":(u=s[1])==null?void 0:u.y,"position.z":(P=s[1])==null?void 0:P.z,$$slots:{default:[He]},$$scope:{ctx:s}}}),{c(){g(f.$$.fragment),t=S(),g(n.$$.fragment),e=S(),g(a.$$.fragment)},l(d){_(f.$$.fragment,d),t=C(d),_(n.$$.fragment,d),e=C(d),_(a.$$.fragment,d)},m(d,p){h(f,d,p),M(d,t,p),h(n,d,p),M(d,e,p),h(a,d,p),b=!0},p(d,[p]){var G,F,O;const z={};p&1024&&(z.$$scope={dirty:p,ctx:d}),!r&&p&1&&(r=!0,z.ref=d[0],ue(()=>r=!1)),f.$set(z);const y={};p&6&&(y.visible=d[2]!==void 0&&d[1]!==void 0),p&14&&(y.positions=d[2]!==void 0&&d[1]!==void 0?d[3]:void 0),n.$set(y);const T={};p&6&&(T.visible=d[2]!==void 0&&d[1]!==void 0),p&2&&(T["position.x"]=(G=d[1])==null?void 0:G.x),p&2&&(T["position.y"]=(F=d[1])==null?void 0:F.y),p&2&&(T["position.z"]=(O=d[1])==null?void 0:O.z),p&1024&&(T.$$scope={dirty:p,ctx:d}),a.$set(T)},i(d){b||($(f.$$.fragment,d),$(n.$$.fragment,d),$(a.$$.fragment,d),b=!0)},o(d){m(f.$$.fragment,d),m(n.$$.fragment,d),m(a.$$.fragment,d),b=!1},d(d){d&&(v(t),v(e)),w(f,d),w(n,d),w(a,d)}}}const j=40;function We(s,f,r){let t,n,e,a;U(s,V,l=>r(15,e=l)),U(s,W,l=>r(16,a=l));let{$$slots:b={},$$scope:o}=f,{raycaster:c=new Re}=f,{handedness:i="right"}=f,{maxDistance:u=20}=f;const P=Pe();let d,p=[],z,y;const T=te(),G=new H,F=new De,O=new H,k=new Float32Array(j*3),B=new Te,L=new H,ae=(l,D)=>{O.x=(l.x+D.x)/2,O.y=(l.y+D.y)/2,O.z=(l.z+D.z)/2},{start:re,stop:ne}=J(()=>{if(y===void 0)return;F.identity().extractRotation(y.matrixWorld),c.ray.origin.setFromMatrixPosition(y.matrixWorld),c.ray.direction.set(0,0,-1).applyMatrix4(F);const[l]=c.intersectObjects(p);if(l===void 0){r(1,z=void 0),X(W,a=void 0,a);return}r(1,z=l.point),X(W,a=z,a),y.getWorldPosition(G),ae(G,z),O.y+=.8,B.v0.copy(G),B.v1.copy(O),B.v2.copy(l.point);for(let D=0,Q=0;D<j;D+=1,Q+=3){const be=D/j;B.getPoint(be,L),r(3,k[Q+0]=L.x,k),r(3,k[Q+1]=L.y,k),r(3,k[Q+2]=L.z,k)}},{autostart:!1}),ce=l=>{r(2,y=l),X(V,e=l,e),re()},se=()=>{ne(),r(2,y=void 0),X(V,e=void 0,e),z!==void 0&&(T(z),P("teleport",z))};J(()=>{var D;const l=(((D=n.current)==null?void 0:D.axes[3])??0)<-.9;l&&y===void 0?ce(t.current.controller):!l&&y!==void 0&&se()}),$e(()=>{p=d.children}),me(()=>{p=d.children});function oe(l){d=l,r(0,d)}const de=({ref:l})=>l.rotateX(-Math.PI/2);return s.$$set=l=>{"raycaster"in l&&r(4,c=l.raycaster),"handedness"in l&&r(5,i=l.handedness),"maxDistance"in l&&r(6,u=l.maxDistance),"$$scope"in l&&r(10,o=l.$$scope)},s.$$.update=()=>{s.$$.dirty&64&&r(4,c.far=u,c),s.$$.dirty&32&&(t=Oe(i)),s.$$.dirty&32&&(n=ke(i))},[d,z,y,k,c,i,u,b,oe,de,o]}class je extends I{constructor(f){super(),N(this,f,We,Ve,q,{raycaster:4,handedness:5,maxDistance:6})}}const Y=[["#69d2e7","#a7dbd8","#e0e4cc","#f38630","#fa6900"],["#fe4365","#fc9d9a","#f9cdad","#c8c8a9","#83af9b"],["#ecd078","#d95b43","#c02942","#542437","#53777a"],["#556270","#4ecdc4","#c7f464","#ff6b6b","#c44d58"],["#774f38","#e08e79","#f1d4af","#ece5ce","#c5e0dc"],["#e8ddcb","#cdb380","#036564","#033649","#031634"],["#490a3d","#bd1550","#e97f02","#f8ca00","#8a9b0f"],["#594f4f","#547980","#45ada8","#9de0ad","#e5fcc2"],["#00a0b0","#6a4a3c","#cc333f","#eb6841","#edc951"],["#e94e77","#d68189","#c6a49a","#c6e5d9","#f4ead5"],["#3fb8af","#7fc7af","#dad8a7","#ff9e9d","#ff3d7f"],["#d9ceb2","#948c75","#d5ded9","#7a6a53","#99b2b7"],["#ffffff","#cbe86b","#f2e9e1","#1c140d","#cbe86b"],["#efffcd","#dce9be","#555152","#2e2633","#99173c"],["#343838","#005f6b","#008c9e","#00b4cc","#00dffc"],["#413e4a","#73626e","#b38184","#f0b49e","#f7e4be"],["#ff4e50","#fc913a","#f9d423","#ede574","#e1f5c4"],["#99b898","#fecea8","#ff847c","#e84a5f","#2a363b"],["#655643","#80bca3","#f6f7bd","#e6ac27","#bf4d28"],["#00a8c6","#40c0cb","#f9f2e7","#aee239","#8fbe00"],["#351330","#424254","#64908a","#e8caa4","#cc2a41"],["#554236","#f77825","#d3ce3d","#f1efa5","#60b99a"],["#5d4157","#838689","#a8caba","#cad7b2","#ebe3aa"],["#8c2318","#5e8c6a","#88a65e","#bfb35a","#f2c45a"],["#fad089","#ff9c5b","#f5634a","#ed303c","#3b8183"],["#ff4242","#f4fad2","#d4ee5e","#e1edb9","#f0f2eb"],["#f8b195","#f67280","#c06c84","#6c5b7b","#355c7d"],["#d1e751","#ffffff","#000000","#4dbce9","#26ade4"],["#1b676b","#519548","#88c425","#bef202","#eafde6"],["#5e412f","#fcebb6","#78c0a8","#f07818","#f0a830"],["#bcbdac","#cfbe27","#f27435","#f02475","#3b2d38"],["#452632","#91204d","#e4844a","#e8bf56","#e2f7ce"],["#eee6ab","#c5bc8e","#696758","#45484b","#36393b"],["#f0d8a8","#3d1c00","#86b8b1","#f2d694","#fa2a00"],["#2a044a","#0b2e59","#0d6759","#7ab317","#a0c55f"],["#f04155","#ff823a","#f2f26f","#fff7bd","#95cfb7"],["#b9d7d9","#668284","#2a2829","#493736","#7b3b3b"],["#bbbb88","#ccc68d","#eedd99","#eec290","#eeaa88"],["#b3cc57","#ecf081","#ffbe40","#ef746f","#ab3e5b"],["#a3a948","#edb92e","#f85931","#ce1836","#009989"],["#300030","#480048","#601848","#c04848","#f07241"],["#67917a","#170409","#b8af03","#ccbf82","#e33258"],["#aab3ab","#c4cbb7","#ebefc9","#eee0b7","#e8caaf"],["#e8d5b7","#0e2430","#fc3a51","#f5b349","#e8d5b9"],["#ab526b","#bca297","#c5ceae","#f0e2a4","#f4ebc3"],["#607848","#789048","#c0d860","#f0f0d8","#604848"],["#b6d8c0","#c8d9bf","#dadabd","#ecdbbc","#fedcba"],["#a8e6ce","#dcedc2","#ffd3b5","#ffaaa6","#ff8c94"],["#3e4147","#fffedf","#dfba69","#5a2e2e","#2a2c31"],["#fc354c","#29221f","#13747d","#0abfbc","#fcf7c5"],["#cc0c39","#e6781e","#c8cf02","#f8fcc1","#1693a7"],["#1c2130","#028f76","#b3e099","#ffeaad","#d14334"],["#a7c5bd","#e5ddcb","#eb7b59","#cf4647","#524656"],["#dad6ca","#1bb0ce","#4f8699","#6a5e72","#563444"],["#5c323e","#a82743","#e15e32","#c0d23e","#e5f04c"],["#edebe6","#d6e1c7","#94c7b6","#403b33","#d3643b"],["#fdf1cc","#c6d6b8","#987f69","#e3ad40","#fcd036"],["#230f2b","#f21d41","#ebebbc","#bce3c5","#82b3ae"],["#b9d3b0","#81bda4","#b28774","#f88f79","#f6aa93"],["#3a111c","#574951","#83988e","#bcdea5","#e6f9bc"],["#5e3929","#cd8c52","#b7d1a3","#dee8be","#fcf7d3"],["#1c0113","#6b0103","#a30006","#c21a01","#f03c02"],["#000000","#9f111b","#b11623","#292c37","#cccccc"],["#382f32","#ffeaf2","#fcd9e5","#fbc5d8","#f1396d"],["#e3dfba","#c8d6bf","#93ccc6","#6cbdb5","#1a1f1e"],["#f6f6f6","#e8e8e8","#333333","#990100","#b90504"],["#1b325f","#9cc4e4","#e9f2f9","#3a89c9","#f26c4f"],["#a1dbb2","#fee5ad","#faca66","#f7a541","#f45d4c"],["#c1b398","#605951","#fbeec2","#61a6ab","#accec0"],["#5e9fa3","#dcd1b4","#fab87f","#f87e7b","#b05574"],["#951f2b","#f5f4d7","#e0dfb1","#a5a36c","#535233"],["#8dccad","#988864","#fea6a2","#f9d6ac","#ffe9af"],["#2d2d29","#215a6d","#3ca2a2","#92c7a3","#dfece6"],["#413d3d","#040004","#c8ff00","#fa023c","#4b000f"],["#eff3cd","#b2d5ba","#61ada0","#248f8d","#605063"],["#ffefd3","#fffee4","#d0ecea","#9fd6d2","#8b7a5e"],["#cfffdd","#b4dec1","#5c5863","#a85163","#ff1f4c"],["#9dc9ac","#fffec7","#f56218","#ff9d2e","#919167"],["#4e395d","#827085","#8ebe94","#ccfc8e","#dc5b3e"],["#a8a7a7","#cc527a","#e8175d","#474747","#363636"],["#f8edd1","#d88a8a","#474843","#9d9d93","#c5cfc6"],["#046d8b","#309292","#2fb8ac","#93a42a","#ecbe13"],["#f38a8a","#55443d","#a0cab5","#cde9ca","#f1edd0"],["#a70267","#f10c49","#fb6b41","#f6d86b","#339194"],["#ff003c","#ff8a00","#fabe28","#88c100","#00c176"],["#ffedbf","#f7803c","#f54828","#2e0d23","#f8e4c1"],["#4e4d4a","#353432","#94ba65","#2790b0","#2b4e72"],["#0ca5b0","#4e3f30","#fefeeb","#f8f4e4","#a5b3aa"],["#4d3b3b","#de6262","#ffb88c","#ffd0b3","#f5e0d3"],["#fffbb7","#a6f6af","#66b6ab","#5b7c8d","#4f2958"],["#edf6ee","#d1c089","#b3204d","#412e28","#151101"],["#9d7e79","#ccac95","#9a947c","#748b83","#5b756c"],["#fcfef5","#e9ffe1","#cdcfb7","#d6e6c3","#fafbe3"],["#9cddc8","#bfd8ad","#ddd9ab","#f7af63","#633d2e"],["#30261c","#403831","#36544f","#1f5f61","#0b8185"],["#aaff00","#ffaa00","#ff00aa","#aa00ff","#00aaff"],["#d1313d","#e5625c","#f9bf76","#8eb2c5","#615375"],["#ffe181","#eee9e5","#fad3b2","#ffba7f","#ff9c97"],["#73c8a9","#dee1b6","#e1b866","#bd5532","#373b44"],["#805841","#dcf7f3","#fffcdd","#ffd8d8","#f5a2a2"]];function Z(s,f,r){const t=s.slice();return t[6]=f[r].point,t[7]=f[r].color,t[9]=r,t}function qe(s){let f,r,t,n;return f=new Le({}),t=new Ae({}),{c(){g(f.$$.fragment),r=S(),g(t.$$.fragment)},l(e){_(f.$$.fragment,e),r=C(e),_(t.$$.fragment,e)},m(e,a){h(f,e,a),M(e,r,a),h(t,e,a),n=!0},i(e){n||($(f.$$.fragment,e),$(t.$$.fragment,e),n=!0)},o(e){m(f.$$.fragment,e),m(t.$$.fragment,e),n=!1},d(e){e&&v(r),w(f,e),w(t,e)}}}function Ee(s){let f,r,t,n;return f=new R.CircleGeometry({props:{args:[20]}}),t=new R.MeshStandardMaterial({props:{color:s[0]()}}),{c(){g(f.$$.fragment),r=S(),g(t.$$.fragment)},l(e){_(f.$$.fragment,e),r=C(e),_(t.$$.fragment,e)},m(e,a){h(f,e,a),M(e,r,a),h(t,e,a),n=!0},p:E,i(e){n||($(f.$$.fragment,e),$(t.$$.fragment,e),n=!0)},o(e){m(f.$$.fragment,e),m(t.$$.fragment,e),n=!1},d(e){e&&v(r),w(f,e),w(t,e)}}}function Ie(s){let f,r,t,n,e;return f=new R.CylinderGeometry({props:{args:[1,1,.1]}}),t=new R.MeshStandardMaterial({props:{color:s[7]}}),{c(){g(f.$$.fragment),r=S(),g(t.$$.fragment),n=S()},l(a){_(f.$$.fragment,a),r=C(a),_(t.$$.fragment,a),n=C(a)},m(a,b){h(f,a,b),M(a,r,b),h(t,a,b),M(a,n,b),e=!0},p:E,i(a){e||($(f.$$.fragment,a),$(t.$$.fragment,a),e=!0)},o(a){m(f.$$.fragment,a),m(t.$$.fragment,a),e=!1},d(a){a&&(v(r),v(n)),w(f,a),w(t,a)}}}function ee(s){let f,r;return f=new R.Mesh({props:{position:[s[6].x,s[9]/2,s[6].y],castShadow:!0,receiveShadow:!0,$$slots:{default:[Ie]},$$scope:{ctx:s}}}),{c(){g(f.$$.fragment)},l(t){_(f.$$.fragment,t)},m(t,n){h(f,t,n),r=!0},p(t,n){const e={};n&1024&&(e.$$scope={dirty:n,ctx:t}),f.$set(e)},i(t){r||($(f.$$.fragment,t),r=!0)},o(t){m(f.$$.fragment,t),r=!1},d(t){w(f,t)}}}function Ne(s){let f,r,t,n;f=new R.Mesh({props:{receiveShadow:!0,rotation:[-Math.PI/2,0,0],$$slots:{default:[Ee]},$$scope:{ctx:s}}});let e=K(s[1]),a=[];for(let o=0;o<e.length;o+=1)a[o]=ee(Z(s,e,o));const b=o=>m(a[o],1,1,()=>{a[o]=null});return{c(){g(f.$$.fragment),r=S();for(let o=0;o<a.length;o+=1)a[o].c();t=x()},l(o){_(f.$$.fragment,o),r=C(o);for(let c=0;c<a.length;c+=1)a[c].l(o);t=x()},m(o,c){h(f,o,c),M(o,r,c);for(let i=0;i<a.length;i+=1)a[i]&&a[i].m(o,c);M(o,t,c),n=!0},p(o,c){const i={};if(c&1024&&(i.$$scope={dirty:c,ctx:o}),f.$set(i),c&2){e=K(o[1]);let u;for(u=0;u<e.length;u+=1){const P=Z(o,e,u);a[u]?(a[u].p(P,c),$(a[u],1)):(a[u]=ee(P),a[u].c(),$(a[u],1),a[u].m(t.parentNode,t))}for(Me(),u=e.length;u<a.length;u+=1)b(u);ve()}},i(o){if(!n){$(f.$$.fragment,o);for(let c=0;c<e.length;c+=1)$(a[c]);n=!0}},o(o){m(f.$$.fragment,o),a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)m(a[c]);n=!1},d(o){o&&(v(r),v(t)),w(f,o),we(a,o)}}}function Ue(s){let f,r,t,n,e,a,b,o;return f=new Ge({props:{$$slots:{default:[qe]},$$scope:{ctx:s}}}),t=new je({props:{handedness:"left",$$slots:{default:[Ne]},$$scope:{ctx:s}}}),e=new R.AmbientLight({}),b=new R.DirectionalLight({props:{position:[5,5,1],castShadow:!0,"shadow.camera.top":50,"shadow.camera.right":50,"shadow.camera.left":-50,"shadow.camera.bottom":-50,"shadow.mapSize.width":1024,"shadow.mapSize.height":1024}}),{c(){g(f.$$.fragment),r=S(),g(t.$$.fragment),n=S(),g(e.$$.fragment),a=S(),g(b.$$.fragment)},l(c){_(f.$$.fragment,c),r=C(c),_(t.$$.fragment,c),n=C(c),_(e.$$.fragment,c),a=C(c),_(b.$$.fragment,c)},m(c,i){h(f,c,i),M(c,r,i),h(t,c,i),M(c,n,i),h(e,c,i),M(c,a,i),h(b,c,i),o=!0},p(c,[i]){const u={};i&1024&&(u.$$scope={dirty:i,ctx:c}),f.$set(u);const P={};i&1024&&(P.$$scope={dirty:i,ctx:c}),t.$set(P)},i(c){o||($(f.$$.fragment,c),$(t.$$.fragment,c),$(e.$$.fragment,c),$(b.$$.fragment,c),o=!0)},o(c){m(f.$$.fragment,c),m(t.$$.fragment,c),m(e.$$.fragment,c),m(b.$$.fragment,c),o=!1},d(c){c&&(v(r),v(n),v(a)),w(f,c),w(t,c),w(e,c),w(b,c)}}}function xe(s){const{camera:f,renderer:r}=fe(),t=te();r.setClearColor(0),f.current.position.z=1.75,f.current.lookAt(0,1.75,1),t(new H(.5,0,.5));const n=(b,o)=>{const c=b*Math.cos(o),i=b*Math.sin(o);return{x:c,y:i}},e=()=>{const b=Y[Math.trunc(Math.random()*Y.length)];return b[Math.trunc(Math.random()*b.length)]},a=Array.from({length:14}).map((b,o)=>({point:n(5,o/2),color:e()}));return[e,a]}class Je extends I{constructor(f){super(),N(this,f,xe,Ue,q,{})}}function Ke(s){let f,r;return f=new Je({}),{c(){g(f.$$.fragment)},l(t){_(f.$$.fragment,t)},m(t,n){h(f,t,n),r=!0},i(t){r||($(f.$$.fragment,t),r=!0)},o(t){m(f.$$.fragment,t),r=!1},d(t){w(f,t)}}}function Ye(s){let f,r,t,n;return f=new Fe({props:{useLegacyLights:!1,$$slots:{default:[Ke]},$$scope:{ctx:s}}}),t=new Be({}),{c(){g(f.$$.fragment),r=S(),g(t.$$.fragment)},l(e){_(f.$$.fragment,e),r=C(e),_(t.$$.fragment,e)},m(e,a){h(f,e,a),M(e,r,a),h(t,e,a),n=!0},p(e,[a]){const b={};a&1&&(b.$$scope={dirty:a,ctx:e}),f.$set(b)},i(e){n||($(f.$$.fragment,e),$(t.$$.fragment,e),n=!0)},o(e){m(f.$$.fragment,e),m(t.$$.fragment,e),n=!1},d(e){e&&v(r),w(f,e),w(t,e)}}}class nf extends I{constructor(f){super(),N(this,f,null,Ye,q,{})}}export{nf as component};
