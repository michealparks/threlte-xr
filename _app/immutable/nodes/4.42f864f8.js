import{s as N,r as ie,u as ue,v as me,w as ce,H as we,p as j,a as z,c as P,i as k,G as U,d as M,y as E,z as ye,e as A,I as ke}from"../chunks/scheduler.85ec70e4.js";import{S as v,i as F,a as c,t as g,f as x,b as p,d as _,m as d,e as h,g as J,c as K}from"../chunks/index.b6a8cb19.js";import{H as Me,V,b as Be,T as C,Q as ze,S as Pe,X as Ce,u as Se,f as Ie,e as Ve}from"../chunks/xr.c491b383.js";import{B as Ge}from"../chunks/button-vr.4ac0c0f3.js";import{R as q,u as Ae,C as Y,f as Re,I as ge,a as pe,b as Ee,W as Te,D as We}from"../chunks/code-link.fb7e0b87.js";import{C as De}from"../chunks/controllers.f683f103.js";import{e as H,u as _e,o as de}from"../chunks/each.58a2c473.js";import"../chunks/PositionMesh.ff256a1b.js";import{w as He}from"../chunks/index.ffc91e6e.js";const ee=(f,r,s)=>{if(f!==void 0){const n=f;return n.reduce((o,l)=>o|1<<l,0)|n.reduce((o,l)=>o|1<<l+16,0)}return s.reduce((n,t)=>n|1<<t,0)|r.reduce((n,t)=>n|1<<t+16,0)};function Ne(f){let r;const s=f[4].default,e=ie(s,f,f[3],null);return{c(){e&&e.c()},l(n){e&&e.l(n)},m(n,t){e&&e.m(n,t),r=!0},p(n,[t]){e&&e.p&&(!r||t&8)&&ue(e,s,n,n[3],r?ce(s,n[3],t,null):me(n[3]),null)},i(n){r||(c(e,n),r=!0)},o(n){g(e,n),r=!1},d(n){e&&e.d(n)}}}function ve(f,r,s){let{$$slots:e={},$$scope:n}=r,{groups:t=void 0}=r,{filter:o=void 0}=r,{memberships:l=void 0}=r;const i=He(ee(t,o,l));return we("threlte-rapier-collision-group",i),f.$$set=u=>{"groups"in u&&s(0,t=u.groups),"filter"in u&&s(1,o=u.filter),"memberships"in u&&s(2,l=u.memberships),"$$scope"in u&&s(3,n=u.$$scope)},f.$$.update=()=>{f.$$.dirty&7&&i.set(ee(t,o,l))},[t,o,l,n,e]}class Fe extends v{constructor(r){super(),F(this,r,ve,Ne,N,{groups:0,filter:1,memberships:2})}}function Le(f){let r,s,e,n;return r=new C.CylinderGeometry({props:{args:[R,R,T]}}),e=new C.MeshPhongMaterial({props:{color:"red"}}),{c(){p(r.$$.fragment),s=z(),p(e.$$.fragment)},l(t){_(r.$$.fragment,t),s=P(t),_(e.$$.fragment,t)},m(t,o){d(r,t,o),k(t,s,o),d(e,t,o),n=!0},p:E,i(t){n||(c(r.$$.fragment,t),c(e.$$.fragment,t),n=!0)},o(t){g(r.$$.fragment,t),g(e.$$.fragment,t),n=!1},d(t){t&&M(s),h(r,t),h(e,t)}}}function Qe(f){let r,s;return r=new C.Mesh({props:{slot:"left","rotation.x":Math.PI/2,"position.z":-T/2,$$slots:{default:[Le]},$$scope:{ctx:f}}}),r.$on("create",f[5]),{c(){p(r.$$.fragment)},l(e){_(r.$$.fragment,e)},m(e,n){d(r,e,n),s=!0},p(e,n){const t={};n&8192&&(t.$$scope={dirty:n,ctx:e}),r.$set(t)},i(e){s||(c(r.$$.fragment,e),s=!0)},o(e){g(r.$$.fragment,e),s=!1},d(e){h(r,e)}}}function Xe(f){let r,s,e,n;return r=new C.CylinderGeometry({props:{args:[R,R,T]}}),e=new C.MeshStandardMaterial({props:{roughness:0,color:"red"}}),{c(){p(r.$$.fragment),s=z(),p(e.$$.fragment)},l(t){_(r.$$.fragment,t),s=P(t),_(e.$$.fragment,t)},m(t,o){d(r,t,o),k(t,s,o),d(e,t,o),n=!0},p:E,i(t){n||(c(r.$$.fragment,t),c(e.$$.fragment,t),n=!0)},o(t){g(r.$$.fragment,t),g(e.$$.fragment,t),n=!1},d(t){t&&M(s),h(r,t),h(e,t)}}}function qe(f){let r,s;return r=new C.Mesh({props:{slot:"right","rotation.x":Math.PI/2,"position.z":-T/2,$$slots:{default:[Xe]},$$scope:{ctx:f}}}),r.$on("create",f[4]),{c(){p(r.$$.fragment)},l(e){_(r.$$.fragment,e)},m(e,n){d(r,e,n),s=!0},p(e,n){const t={};n&8192&&(t.$$scope={dirty:n,ctx:e}),r.$set(t)},i(e){s||(c(r.$$.fragment,e),s=!0)},o(e){g(r.$$.fragment,e),s=!1},d(e){h(r,e)}}}function Ye(f){let r,s,e,n;return r=new C.CylinderGeometry({props:{args:[R,R,T]}}),e=new C.MeshStandardMaterial({props:{roughness:0,color:"red"}}),{c(){p(r.$$.fragment),s=z(),p(e.$$.fragment)},l(t){_(r.$$.fragment,t),s=P(t),_(e.$$.fragment,t)},m(t,o){d(r,t,o),k(t,s,o),d(e,t,o),n=!0},p:E,i(t){n||(c(r.$$.fragment,t),c(e.$$.fragment,t),n=!0)},o(t){g(r.$$.fragment,t),g(e.$$.fragment,t),n=!1},d(t){t&&M(s),h(r,t),h(e,t)}}}function Ze(f){let r,s;return r=new C.Mesh({props:{slot:"left","rotation.x":Math.PI/2,"position.z":-T/2,$$slots:{default:[Ye]},$$scope:{ctx:f}}}),r.$on("create",f[7]),{c(){p(r.$$.fragment)},l(e){_(r.$$.fragment,e)},m(e,n){d(r,e,n),s=!0},p(e,n){const t={};n&8192&&(t.$$scope={dirty:n,ctx:e}),r.$set(t)},i(e){s||(c(r.$$.fragment,e),s=!0)},o(e){g(r.$$.fragment,e),s=!1},d(e){h(r,e)}}}function je(f){let r,s,e,n;return r=new C.CylinderGeometry({props:{args:[R,R,T]}}),e=new C.MeshPhongMaterial({props:{color:"red"}}),{c(){p(r.$$.fragment),s=z(),p(e.$$.fragment)},l(t){_(r.$$.fragment,t),s=P(t),_(e.$$.fragment,t)},m(t,o){d(r,t,o),k(t,s,o),d(e,t,o),n=!0},p:E,i(t){n||(c(r.$$.fragment,t),c(e.$$.fragment,t),n=!0)},o(t){g(r.$$.fragment,t),g(e.$$.fragment,t),n=!1},d(t){t&&M(s),h(r,t),h(e,t)}}}function Je(f){let r,s;return r=new C.Mesh({props:{slot:"right","rotation.x":Math.PI/2,"position.z":-T/2,$$slots:{default:[je]},$$scope:{ctx:f}}}),r.$on("create",f[6]),{c(){p(r.$$.fragment)},l(e){_(r.$$.fragment,e)},m(e,n){d(r,e,n),s=!0},p(e,n){const t={};n&8192&&(t.$$scope={dirty:n,ctx:e}),r.$set(t)},i(e){s||(c(r.$$.fragment,e),s=!0)},o(e){g(r.$$.fragment,e),s=!1},d(e){h(r,e)}}}function Ke(f){let r,s;return r=new Y({props:{shape:"capsule",args:[T/2,R]}}),{c(){p(r.$$.fragment)},l(e){_(r.$$.fragment,e)},m(e,n){d(r,e,n),s=!0},p:E,i(e){s||(c(r.$$.fragment,e),s=!0)},o(e){g(r.$$.fragment,e),s=!1},d(e){h(r,e)}}}function Oe(f){let r,s;return r=new Y({props:{shape:"capsule",args:[T/2,R]}}),{c(){p(r.$$.fragment)},l(e){_(r.$$.fragment,e)},m(e,n){d(r,e,n),s=!0},p:E,i(e){s||(c(r.$$.fragment,e),s=!0)},o(e){g(r.$$.fragment,e),s=!1},d(e){h(r,e)}}}function Ue(f){let r,s,e,n,t,o,l,i,u,y;r=new De({props:{$$slots:{right:[qe],left:[Qe]},$$scope:{ctx:f}}}),e=new Me({props:{$$slots:{right:[Je],left:[Ze]},$$scope:{ctx:f}}});function $(m){f[8](m)}let a={type:"kinematicPosition",$$slots:{default:[Ke]},$$scope:{ctx:f}};f[0]!==void 0&&(a.rigidBody=f[0]),t=new q({props:a}),j.push(()=>x(t,"rigidBody",$));function w(m){f[9](m)}let S={type:"kinematicPosition",$$slots:{default:[Oe]},$$scope:{ctx:f}};return f[1]!==void 0&&(S.rigidBody=f[1]),i=new q({props:S}),j.push(()=>x(i,"rigidBody",w)),{c(){p(r.$$.fragment),s=z(),p(e.$$.fragment),n=z(),p(t.$$.fragment),l=z(),p(i.$$.fragment)},l(m){_(r.$$.fragment,m),s=P(m),_(e.$$.fragment,m),n=P(m),_(t.$$.fragment,m),l=P(m),_(i.$$.fragment,m)},m(m,b){d(r,m,b),k(m,s,b),d(e,m,b),k(m,n,b),d(t,m,b),k(m,l,b),d(i,m,b),y=!0},p(m,[b]){const I={};b&8196&&(I.$$scope={dirty:b,ctx:m}),r.$set(I);const W={};b&8200&&(W.$$scope={dirty:b,ctx:m}),e.$set(W);const L={};b&8192&&(L.$$scope={dirty:b,ctx:m}),!o&&b&1&&(o=!0,L.rigidBody=m[0],U(()=>o=!1)),t.$set(L);const B={};b&8192&&(B.$$scope={dirty:b,ctx:m}),!u&&b&2&&(u=!0,B.rigidBody=m[1],U(()=>u=!1)),i.$set(B)},i(m){y||(c(r.$$.fragment,m),c(e.$$.fragment,m),c(t.$$.fragment,m),c(i.$$.fragment,m),y=!0)},o(m){g(r.$$.fragment,m),g(e.$$.fragment,m),g(t.$$.fragment,m),g(i.$$.fragment,m),y=!1},d(m){m&&(M(s),M(n),M(l)),h(r,m),h(e,m),h(t,m),h(i,m)}}}const R=.02,T=1.4;function xe(f,r,s){const{isHandTracking:e}=Ae();let n,t;const o={left:void 0,right:void 0},l={left:void 0,right:void 0},i=new V,u=new ze;Be(()=>{const b=e.current?l.left:o.left,I=e.current?l.right:o.right;b&&(n.setTranslation(b.getWorldPosition(i),!0),n.setRotation(b.getWorldQuaternion(u),!0)),I&&(t.setTranslation(I.getWorldPosition(i),!0),t.setRotation(I.getWorldQuaternion(u),!0))});const y=({ref:b})=>s(2,o.right=b,o),$=({ref:b})=>s(2,o.left=b,o),a=({ref:b})=>s(3,l.right=b,l),w=({ref:b})=>s(3,l.left=b,l);function S(b){n=b,s(0,n)}function m(b){t=b,s(1,t)}return[n,t,o,l,y,$,a,w,S,m]}class et extends v{constructor(r){super(),F(this,r,xe,Ue,N,{})}}const Z=(1+1e-10)*100,te=f=>`${~~(f.x*Z)},${~~(f.y*Z)},${~~(f.z*Z)}`,tt=(f,r=Math.PI)=>{const s=Math.cos(r),e=[new V,new V,new V],n=new V,t=new V,o=new V,l=new V,i=f.getAttribute("position"),u=f.getAttribute("normal"),y={};for(let $=0,a=i.count/3;$<a;$+=1){const w=3*$;e.forEach((m,b)=>m.fromBufferAttribute(i,w+b)),n.subVectors(e[2],e[1]),t.subVectors(e[0],e[1]);const S=new V().crossVectors(n,t).normalize();e.forEach(m=>{var I;const b=te(m);y[b]||(y[b]=[]),(I=y[b])==null||I.push(S)})}for(let $=0,a=i.count/3;$<a;$+=1){const w=3*$;e.forEach((S,m)=>S.fromBufferAttribute(i,w+m)),n.subVectors(e[2],e[1]),t.subVectors(e[0],e[1]),o.crossVectors(n,t).normalize(),e.forEach((S,m)=>{var I;const b=te(S);l.set(0,0,0),(I=y[b])==null||I.forEach(W=>{o.dot(W)>s&&l.add(W)}),l.normalize(),u.setXYZ(w+m,l.x,l.y,l.z)})}return f.setAttribute("normal",u),f},rt=f=>({ref:f&131072}),re=f=>({ref:f[17]});function nt(f){let r;const s=f[12].default,e=ie(s,f,f[15],re);return{c(){e&&e.c()},l(n){e&&e.l(n)},m(n,t){e&&e.m(n,t),r=!0},p(n,t){e&&e.p&&(!r||t&163840)&&ue(e,s,n,n[15],r?ce(s,n[15],t,rt):me(n[15]),re)},i(n){r||(c(e,n),r=!0)},o(n){g(e,n),r=!1},d(n){e&&e.d(n)}}}function st(f){let r,s,e={args:[f[2],f[1]],$$slots:{default:[nt,({ref:n})=>({17:n}),({ref:n})=>n?131072:0]},$$scope:{ctx:f}};return r=new C.ExtrudeGeometry({props:e}),f[13](r),r.$on("create",f[14]),{c(){p(r.$$.fragment)},l(n){_(r.$$.fragment,n)},m(n,t){d(r,n,t),s=!0},p(n,[t]){const o={};t&6&&(o.args=[n[2],n[1]]),t&163840&&(o.$$scope={dirty:t,ctx:n}),r.$set(o)},i(n){s||(c(r.$$.fragment,n),s=!0)},o(n){g(r.$$.fragment,n),s=!1},d(n){f[13](null),h(r,n)}}}const G=1e-5;function ot(f,r,s){let e,n,t,o,l,i,{$$slots:u={},$$scope:y}=r;const $=Re();ye(f,$,B=>s(3,i=B));let{args:a=[]}=r,{radius:w=.05}=r,{smoothness:S=4}=r,{creaseAngle:m=.4}=r,{steps:b=1}=r;const I=(B,O,be)=>{const Q=new Pe,X=be-G;return Q.absarc(G,G,G,-Math.PI/2,-Math.PI,!0),Q.absarc(G,O-X*2,G,Math.PI,Math.PI/2,!0),Q.absarc(B-X*2,O-X*2,G,Math.PI/2,0,!0),Q.absarc(B-X*2,G,G,0,-Math.PI/2,!0),Q};function W(B){j[B?"unshift":"push"](()=>{i=B,$.set(i)})}const L=({ref:B})=>{B.center(),tt(B,m)};return f.$$set=B=>{"args"in B&&s(5,a=B.args),"radius"in B&&s(6,w=B.radius),"smoothness"in B&&s(7,S=B.smoothness),"creaseAngle"in B&&s(0,m=B.creaseAngle),"steps"in B&&s(8,b=B.steps),"$$scope"in B&&s(15,y=B.$$scope)},f.$$.update=()=>{f.$$.dirty&32&&s(11,e=a[0]??1),f.$$.dirty&32&&s(10,n=a[1]??1),f.$$.dirty&32&&s(9,t=a[2]??1),f.$$.dirty&3136&&s(2,o=I(e,n,w)),f.$$.dirty&960&&s(1,l={depth:t-w*2,bevelEnabled:!0,bevelSegments:S*2,steps:b,bevelSize:w-G,bevelThickness:w,curveSegments:S})},[m,l,o,i,$,a,w,S,b,t,n,e,u,W,L,y]}class ft extends v{constructor(r){super(),F(this,r,ot,st,N,{args:5,radius:6,smoothness:7,creaseAngle:0,steps:8})}}function ne(f,r,s){const e=f.slice();return e[9]=r[s].position,e[10]=r[s].force,e[12]=s,e}function se(f,r,s){const e=f.slice();return e[13]=r[s],e}function oe(f,r,s){const e=f.slice();return e[9]=r[s].position,e[16]=r[s].color,e[12]=s,e}function lt(f){let r,s;return r=new pe({props:{color:f[16]}}),{c(){p(r.$$.fragment)},l(e){_(r.$$.fragment,e)},m(e,n){d(r,e,n),s=!0},p:E,i(e){s||(c(r.$$.fragment,e),s=!0)},o(e){g(r.$$.fragment,e),s=!1},d(e){h(r,e)}}}function $t(f){let r,s,e,n;r=new Y({props:{shape:"cuboid",mass:.5,args:[D/2,D/2,D/2]}});let t=f[1][f[12]]&&lt(f);return{c(){p(r.$$.fragment),s=z(),t&&t.c(),e=A()},l(o){_(r.$$.fragment,o),s=P(o),t&&t.l(o),e=A()},m(o,l){d(r,o,l),k(o,s,l),t&&t.m(o,l),k(o,e,l),n=!0},p(o,l){o[1][o[12]]&&t.p(o,l)},i(o){n||(c(r.$$.fragment,o),c(t),n=!0)},o(o){g(r.$$.fragment,o),g(t),n=!1},d(o){o&&(M(s),M(e)),h(r,o),t&&t.d(o)}}}function at(f){let r,s,e;return r=new q({props:{enabled:f[1][f[12]]??!0,linearVelocity:[0,0,yt],$$slots:{default:[$t]},$$scope:{ctx:f}}}),r.$on("contact",f[4]),{c(){p(r.$$.fragment),s=z()},l(n){_(r.$$.fragment,n),s=P(n)},m(n,t){d(r,n,t),k(n,s,t),e=!0},p(n,t){const o={};t&262144&&(o.$$scope={dirty:t,ctx:n}),r.$set(o)},i(n){e||(c(r.$$.fragment,n),e=!0)},o(n){g(r.$$.fragment,n),e=!1},d(n){n&&M(s),h(r,n)}}}function fe(f,r){let s,e,n;return e=new C.Group({props:{"position.x":r[9].x,"position.y":r[9].y+bt,"position.z":r[9].z-wt,$$slots:{default:[at]},$$scope:{ctx:r}}}),{key:f,first:null,c(){s=A(),p(e.$$.fragment),this.h()},l(t){s=A(),_(e.$$.fragment,t),this.h()},h(){this.first=s},m(t,o){k(t,s,o),d(e,t,o),n=!0},p(t,o){r=t;const l={};o&262144&&(l.$$scope={dirty:o,ctx:r}),e.$set(l)},i(t){n||(c(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){t&&M(s),h(e,t)}}}function it(f){let r,s,e,n,t=[],o=new Map,l,i;r=new ft({props:{radius:ht,args:[D,D,D]}}),e=new C.MeshStandardMaterial({props:{roughness:0,metalness:.2}});let u=H(f[2]);const y=$=>$[12];for(let $=0;$<u.length;$+=1){let a=oe(f,u,$),w=y(a);o.set(w,t[$]=fe(w,a))}return{c(){p(r.$$.fragment),s=z(),p(e.$$.fragment),n=z();for(let $=0;$<t.length;$+=1)t[$].c();l=A()},l($){_(r.$$.fragment,$),s=P($),_(e.$$.fragment,$),n=P($);for(let a=0;a<t.length;a+=1)t[a].l($);l=A()},m($,a){d(r,$,a),k($,s,a),d(e,$,a),k($,n,a);for(let w=0;w<t.length;w+=1)t[w]&&t[w].m($,a);k($,l,a),i=!0},p($,a){a&22&&(u=H($[2]),J(),t=_e(t,a,y,1,$,u,o,l.parentNode,de,fe,l,oe),K())},i($){if(!i){c(r.$$.fragment,$),c(e.$$.fragment,$);for(let a=0;a<u.length;a+=1)c(t[a]);i=!0}},o($){g(r.$$.fragment,$),g(e.$$.fragment,$);for(let a=0;a<t.length;a+=1)g(t[a]);i=!1},d($){$&&(M(s),M(n),M(l)),h(r,$),h(e,$);for(let a=0;a<t.length;a+=1)t[a].d($)}}}function ut(f){let r,s,e,n;return r=new Y({props:{shape:"cuboid",mass:.5,args:[f[3]/2,f[3]/2,f[3]/2]}}),e=new pe({props:{color:"#ffffff"}}),{c(){p(r.$$.fragment),s=z(),p(e.$$.fragment)},l(t){_(r.$$.fragment,t),s=P(t),_(e.$$.fragment,t)},m(t,o){d(r,t,o),k(t,s,o),d(e,t,o),n=!0},p:E,i(t){n||(c(r.$$.fragment,t),c(e.$$.fragment,t),n=!0)},o(t){g(r.$$.fragment,t),g(e.$$.fragment,t),n=!1},d(t){t&&M(s),h(r,t),h(e,t)}}}function le(f){let r,s;return r=new q({props:{linearVelocity:f[5](f[10]),$$slots:{default:[ut]},$$scope:{ctx:f}}}),{c(){p(r.$$.fragment)},l(e){_(r.$$.fragment,e)},m(e,n){d(r,e,n),s=!0},p(e,n){const t={};n&1&&(t.linearVelocity=e[5](e[10])),n&262144&&(t.$$scope={dirty:n,ctx:e}),r.$set(t)},i(e){s||(c(r.$$.fragment,e),s=!0)},o(e){g(r.$$.fragment,e),s=!1},d(e){h(r,e)}}}function mt(f){let r,s,e=H({length:20}),n=[];for(let o=0;o<e.length;o+=1)n[o]=le(se(f,e,o));const t=o=>g(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();r=z()},l(o){for(let l=0;l<n.length;l+=1)n[l].l(o);r=P(o)},m(o,l){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(o,l);k(o,r,l),s=!0},p(o,l){if(l&41){e=H({length:20});let i;for(i=0;i<e.length;i+=1){const u=se(o,e,i);n[i]?(n[i].p(u,l),c(n[i],1)):(n[i]=le(u),n[i].c(),c(n[i],1),n[i].m(r.parentNode,r))}for(J(),i=e.length;i<n.length;i+=1)t(i);K()}},i(o){if(!s){for(let l=0;l<e.length;l+=1)c(n[l]);s=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)g(n[l]);s=!1},d(o){o&&M(r),ke(n,o)}}}function $e(f,r){let s,e,n;return e=new C.Group({props:{"position.x":r[9].x,"position.y":r[9].y,"position.z":r[9].z,$$slots:{default:[mt]},$$scope:{ctx:r}}}),{key:f,first:null,c(){s=A(),p(e.$$.fragment),this.h()},l(t){s=A(),_(e.$$.fragment,t),this.h()},h(){this.first=s},m(t,o){k(t,s,o),d(e,t,o),n=!0},p(t,o){r=t;const l={};o&1&&(l["position.x"]=r[9].x),o&1&&(l["position.y"]=r[9].y),o&1&&(l["position.z"]=r[9].z),o&262145&&(l.$$scope={dirty:o,ctx:r}),e.$set(l)},i(t){n||(c(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){t&&M(s),h(e,t)}}}function ct(f){let r,s,e,n,t=[],o=new Map,l,i;r=new C.BoxGeometry({props:{args:[f[3],f[3],f[3]]}}),e=new C.MeshPhongMaterial({});let u=H(f[0]);const y=$=>$[12];for(let $=0;$<u.length;$+=1){let a=ne(f,u,$),w=y(a);o.set(w,t[$]=$e(w,a))}return{c(){p(r.$$.fragment),s=z(),p(e.$$.fragment),n=z();for(let $=0;$<t.length;$+=1)t[$].c();l=A()},l($){_(r.$$.fragment,$),s=P($),_(e.$$.fragment,$),n=P($);for(let a=0;a<t.length;a+=1)t[a].l($);l=A()},m($,a){d(r,$,a),k($,s,a),d(e,$,a),k($,n,a);for(let w=0;w<t.length;w+=1)t[w]&&t[w].m($,a);k($,l,a),i=!0},p($,a){a&41&&(u=H($[0]),J(),t=_e(t,a,y,1,$,u,o,l.parentNode,de,$e,l,ne),K())},i($){if(!i){c(r.$$.fragment,$),c(e.$$.fragment,$);for(let a=0;a<u.length;a+=1)c(t[a]);i=!0}},o($){g(r.$$.fragment,$),g(e.$$.fragment,$);for(let a=0;a<t.length;a+=1)g(t[a]);i=!1},d($){$&&(M(s),M(n),M(l)),h(r,$),h(e,$);for(let a=0;a<t.length;a+=1)t[a].d($)}}}function gt(f){let r,s;return r=new ge({props:{limit:_t,$$slots:{default:[ct]},$$scope:{ctx:f}}}),{c(){p(r.$$.fragment)},l(e){_(r.$$.fragment,e)},m(e,n){d(r,e,n),s=!0},p(e,n){const t={};n&262145&&(t.$$scope={dirty:n,ctx:e}),r.$set(t)},i(e){s||(c(r.$$.fragment,e),s=!0)},o(e){g(r.$$.fragment,e),s=!1},d(e){h(r,e)}}}function pt(f){let r,s,e,n;return r=new ge({props:{limit:he,$$slots:{default:[it]},$$scope:{ctx:f}}}),e=new Fe({props:{memberships:[],filter:[],$$slots:{default:[gt]},$$scope:{ctx:f}}}),{c(){p(r.$$.fragment),s=z(),p(e.$$.fragment)},l(t){_(r.$$.fragment,t),s=P(t),_(e.$$.fragment,t)},m(t,o){d(r,t,o),k(t,s,o),d(e,t,o),n=!0},p(t,[o]){const l={};o&262144&&(l.$$scope={dirty:o,ctx:t}),r.$set(l);const i={};o&262145&&(i.$$scope={dirty:o,ctx:t}),e.$set(i)},i(t){n||(c(r.$$.fragment,t),c(e.$$.fragment,t),n=!0)},o(t){g(r.$$.fragment,t),g(e.$$.fragment,t),n=!1},d(t){t&&M(s),h(r,t),h(e,t)}}}let he=100,_t=1e3;const ae=.4,dt=8,ht=.15,D=.6,bt=1.5,wt=50,yt=12;function kt(f,r,s){const e=["#ff5252","#ff4081","#d500f9","#3d5afe","#40c4ff","#18ffff","#f9a825","#ffd740","#bf360c"],n=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,0],[0,1],[1,-1],[1,0],[1,1]];let t=[],o=[],l=[];for(let $=0;$<he;$+=1){const[a,w]=n[Math.trunc(Math.random()*n.length)];l.push({position:new V(a-ae,w-ae,-$*dt),color:e[$%e.length]}),o.push(!0)}const i=D/4;return[t,o,l,i,$=>{console.log("contact");const a=$.targetRigidBody,w=$.maxForceDirection,S=a.translation(),m=new V().set(S.x,S.y,S.z);t.push({force:w,position:m}),t.length>8&&t.shift(),s(0,t),console.log("group",t)},$=>{const a=Math.random()-.5,w=Math.random()-.5,S=Math.random()-.5,m=.1;return[$.x*a*m,$.y*w*m,$.z*S*m]}]}class Mt extends v{constructor(r){super(),F(this,r,kt,pt,N,{})}}function Bt(f){let r,s,e,n;return r=new et({}),e=new Mt({}),{c(){p(r.$$.fragment),s=z(),p(e.$$.fragment)},l(t){_(r.$$.fragment,t),s=P(t),_(e.$$.fragment,t)},m(t,o){d(r,t,o),k(t,s,o),d(e,t,o),n=!0},i(t){n||(c(r.$$.fragment,t),c(e.$$.fragment,t),n=!0)},o(t){g(r.$$.fragment,t),g(e.$$.fragment,t),n=!1},d(t){t&&M(s),h(r,t),h(e,t)}}}function zt(f){let r,s,e,n;return r=new C.CylinderGeometry({props:{args:[2,2,100]}}),e=new C.MeshStandardMaterial({props:{color:"white"}}),{c(){p(r.$$.fragment),s=z(),p(e.$$.fragment)},l(t){_(r.$$.fragment,t),s=P(t),_(e.$$.fragment,t)},m(t,o){d(r,t,o),k(t,s,o),d(e,t,o),n=!0},p:E,i(t){n||(c(r.$$.fragment,t),c(e.$$.fragment,t),n=!0)},o(t){g(r.$$.fragment,t),g(e.$$.fragment,t),n=!1},d(t){t&&M(s),h(r,t),h(e,t)}}}function Pt(f){let r,s,e,n,t,o,l,i;return r=new Ce({props:{$$slots:{default:[Bt]},$$scope:{ctx:f}}}),e=new C.AmbientLight({}),t=new C.DirectionalLight({}),l=new C.Mesh({props:{"position.y":-50,$$slots:{default:[zt]},$$scope:{ctx:f}}}),{c(){p(r.$$.fragment),s=z(),p(e.$$.fragment),n=z(),p(t.$$.fragment),o=z(),p(l.$$.fragment)},l(u){_(r.$$.fragment,u),s=P(u),_(e.$$.fragment,u),n=P(u),_(t.$$.fragment,u),o=P(u),_(l.$$.fragment,u)},m(u,y){d(r,u,y),k(u,s,y),d(e,u,y),k(u,n,y),d(t,u,y),k(u,o,y),d(l,u,y),i=!0},p(u,[y]){const $={};y&2&&($.$$scope={dirty:y,ctx:u}),r.$set($);const a={};y&2&&(a.$$scope={dirty:y,ctx:u}),l.$set(a)},i(u){i||(c(r.$$.fragment,u),c(e.$$.fragment,u),c(t.$$.fragment,u),c(l.$$.fragment,u),i=!0)},o(u){g(r.$$.fragment,u),g(e.$$.fragment,u),g(t.$$.fragment,u),g(l.$$.fragment,u),i=!1},d(u){u&&(M(s),M(n),M(o)),h(r,u),h(e,u),h(t,u),h(l,u)}}}function Ct(f){const{scene:r}=Se();return r.background=new Ie("black"),[]}class St extends v{constructor(r){super(),F(this,r,Ct,Pt,N,{})}}function It(f){let r,s;return r=new We({}),{c(){p(r.$$.fragment)},l(e){_(r.$$.fragment,e)},m(e,n){d(r,e,n),s=!0},i(e){s||(c(r.$$.fragment,e),s=!0)},o(e){g(r.$$.fragment,e),s=!1},d(e){h(r,e)}}}function Vt(f){let r=localStorage.getItem("debug"),s,e,n,t=r&&It();return e=new St({}),{c(){t&&t.c(),s=z(),p(e.$$.fragment)},l(o){t&&t.l(o),s=P(o),_(e.$$.fragment,o)},m(o,l){t&&t.m(o,l),k(o,s,l),d(e,o,l),n=!0},p:E,i(o){n||(c(t),c(e.$$.fragment,o),n=!0)},o(o){g(t),g(e.$$.fragment,o),n=!1},d(o){o&&M(s),t&&t.d(o),h(e,o)}}}function Gt(f){let r,s;return r=new Te({props:{gravity:[0,0,0],$$slots:{default:[Vt]},$$scope:{ctx:f}}}),{c(){p(r.$$.fragment)},l(e){_(r.$$.fragment,e)},m(e,n){d(r,e,n),s=!0},p(e,n){const t={};n&1&&(t.$$scope={dirty:n,ctx:e}),r.$set(t)},i(e){s||(c(r.$$.fragment,e),s=!0)},o(e){g(r.$$.fragment,e),s=!1},d(e){h(r,e)}}}function At(f){let r,s,e,n,t,o;return r=new Ve({props:{$$slots:{default:[Gt]},$$scope:{ctx:f}}}),e=new Ee({props:{href:"https://github.com/michealparks/threlte-xr/tree/main/src/routes/bonksaber"}}),t=new Ge({}),{c(){p(r.$$.fragment),s=z(),p(e.$$.fragment),n=z(),p(t.$$.fragment)},l(l){_(r.$$.fragment,l),s=P(l),_(e.$$.fragment,l),n=P(l),_(t.$$.fragment,l)},m(l,i){d(r,l,i),k(l,s,i),d(e,l,i),k(l,n,i),d(t,l,i),o=!0},p(l,[i]){const u={};i&1&&(u.$$scope={dirty:i,ctx:l}),r.$set(u)},i(l){o||(c(r.$$.fragment,l),c(e.$$.fragment,l),c(t.$$.fragment,l),o=!0)},o(l){g(r.$$.fragment,l),g(e.$$.fragment,l),g(t.$$.fragment,l),o=!1},d(l){l&&(M(s),M(n)),h(r,l),h(e,l),h(t,l)}}}class Lt extends v{constructor(r){super(),F(this,r,null,At,N,{})}}export{Lt as component};
